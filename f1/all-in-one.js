/*!
 * pixi.js - v4.3.4
 * Compiled Tue, 07 Feb 2017 17:08:25 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};e[a][0].call(h.exports,function(t){var r=e[a][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>i-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(o),r.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,r){},{}],3:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n=e&&e.length,o=n?e[0]*r:t.length,s=i(t,0,o,r,!0),u=[];if(!s)return u;var l,h,f,d,p,y,v;if(n&&(s=c(t,e,s,r)),t.length>80*r){l=f=t[0],h=d=t[1];for(var m=r;m<o;m+=r)p=t[m],y=t[m+1],p<l&&(l=p),y<h&&(h=y),p>f&&(f=p),y>d&&(d=y);v=Math.max(f-l,d-h)}return a(s,u,r,l,h,v),u}function i(t,e,r,n,i){var o,a;if(i===A(t,e,r,n)>0)for(o=e;o<r;o+=n)a=M(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=M(o,t[o],t[o+1],a);return a&&T(a,a.next)&&(P(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do if(r=!1,n.steiner||!T(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(P(n),n=e=n.prev,n===n.next)return null;r=!0}while(r||n!==e);return e}function a(t,e,r,n,i,c,f){if(t){!f&&c&&y(t,n,i,c);for(var d,p,v=t;t.prev!==t.next;)if(d=t.prev,p=t.next,c?u(t,n,i,c):s(t))e.push(d.i/r),e.push(t.i/r),e.push(p.i/r),P(t),t=p.next,v=p.next;else if(t=p,t===v){f?1===f?(t=l(t,e,r),a(t,e,r,n,i,c,2)):2===f&&h(t,e,r,n,i,c):a(o(t),e,r,n,i,c,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(x(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(b(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,r,n){var i=t.prev,o=t,a=t.next;if(x(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,h=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=m(s,u,e,r,n),f=m(l,h,e,r,n),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function l(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!T(i,o)&&w(i,n,n.next,o)&&C(i,o)&&C(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),P(n),P(n.next),n=t=o),n=n.next}while(n!==t);return n}function h(t,e,r,n,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&_(u,l)){var h=O(u,l);return u=o(u,u.next),h=o(h,h.next),a(u,e,r,n,i,s),void a(h,e,r,n,i,s)}l=l.next}u=u.next}while(u!==t)}function c(t,e,r,n){var a,s,u,l,h,c=[];for(a=0,s=e.length;a<s;a++)u=e[a]*n,l=a<s-1?e[a+1]*n:t.length,h=i(t,u,l,n,!1),h===h.next&&(h.steiner=!0),c.push(g(h));for(c.sort(f),a=0;a<c.length;a++)d(c[a],r),r=o(r,r.next);return r}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var r=O(e,t);o(r,r.next)}}function p(t,e){var r,n=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r.prev;var u,l=r,h=r.x,c=r.y,f=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=h&&b(o<c?i:a,o,h,c,o<c?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(u<f||u===f&&n.x>r.x)&&C(n,t)&&(r=n,f=u)),n=n.next;return r}function y(t,e,r,n){var i=t;do null===i.z&&(i.z=m(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(t){var e,r,n,i,o,a,s,u,l=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ,n);e++);for(u=l;s>0||u>0&&n;)0===s?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return t}function m(t,e,r,n,i){return t=32767*(t-r)/i,e=32767*(e-n)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,r=t;do e.x<r.x&&(r=e),e=e.next;while(e!==t);return r}function b(t,e,r,n,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&C(t,e)&&C(e,t)&&E(t,e)}function x(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){return!!(T(t,e)&&T(r,n)||T(t,n)&&T(r,e))||x(t,e,r)>0!=x(t,e,n)>0&&x(r,n,t)>0!=x(r,n,e)>0}function S(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function C(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function E(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function O(t,e){var r=new R(t.i,t.x,t.y),n=new R(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function M(t,e,r,n){var i=new R(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(A(t,0,o,r));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*r,h=s<u-1?e[s+1]*r:t.length;a-=Math.abs(A(t,l,h,r))}var c=0;for(s=0;s<n.length;s+=3){var f=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],4:[function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)a.call(t,e)&&r.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t,e){var r=s?s+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},o.prototype.emit=function(t,e,r,n,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var u,l,h=this._events[a],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,i),!0;case 6:return h.fn.call(h.context,e,r,n,i,o),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var f,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,r);break;case 4:h[l].fn.call(h[l].context,e,r,n);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];h[l].fn.apply(h[l].context,u)}}return!0},o.prototype.on=function(t,e,r){var n=new i(e,r||this),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,r){var n=new i(e,r||this,(!0)),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,r,i){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var u=0,l=[],h=a.length;u<h;u++)(a[u].fn!==e||i&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,"undefined"!=typeof e&&(e.exports=o)},{}],5:[function(e,r,n){!function(e){var n=/iPhone/i,i=/iPod/i,o=/iPad/i,a=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/IEMobile/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,f=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),g=function(t,e){return t.test(e)},b=function(t){var e=t||navigator.userAgent,r=e.split("[FBAN");if("undefined"!=typeof r[1]&&(e=r[0]),r=e.split("Twitter"),"undefined"!=typeof r[1]&&(e=r[0]),this.apple={phone:g(n,e),ipod:g(i,e),tablet:!g(n,e)&&g(o,e),device:g(n,e)||g(i,e)||g(o,e)},this.amazon={phone:g(u,e),tablet:!g(u,e)&&g(l,e),device:g(u,e)||g(l,e)},this.android={phone:g(u,e)||g(a,e),tablet:!g(u,e)&&!g(a,e)&&(g(l,e)||g(s,e)),device:g(u,e)||g(l,e)||g(a,e)||g(s,e)},this.windows={phone:g(h,e),tablet:g(c,e),device:g(h,e)||g(c,e)},this.other={blackberry:g(f,e),blackberry10:g(d,e),opera:g(p,e),firefox:g(v,e),chrome:g(y,e),device:g(f,e)||g(d,e)||g(p,e)||g(v,e)||g(y,e)},this.seven_inch=g(m,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},_=function(){var t=new b;return t.Class=b,t};"undefined"!=typeof r&&r.exports&&"undefined"==typeof window?r.exports=b:"undefined"!=typeof r&&r.exports&&"undefined"!=typeof window?r.exports=_():"function"==typeof t&&t.amd?t("isMobile",[],e.isMobile=_()):e.isMobile=_()}(this)},{}],6:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),s=function(){function t(){n(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new a(t,(!1),e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new a(t,(!0),e))}},{key:"detach",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=a,r.default=s,e.exports=r.default},{}],7:[function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(t,e){for(var r,i,s=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)o.call(r,l)&&(s[l]=r[l]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(r);for(var h=0;h<i.length;h++)a.call(r,i[h])&&(s[i[h]]=r[i[h]])}}return s}},{}],8:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(i[r.q.name][e]=n)}),i}},{}],9:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=e(n(r.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(t){var i=r.isAbsolute(t),o="/"===a(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split("/")),o=n(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:27}],10:[function(t,e,r){var n=new ArrayBuffer(0),i=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};i.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,r){return new i(t,t.ARRAY_BUFFER,e,r)},i.createIndexBuffer=function(t,e,r){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,r)},i.create=function(t,e,r,n){return new i(t,e,r,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},{}],11:[function(t,e,r){var n=t("./GLTexture"),i=function(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearColor(t,e,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,r,o){var a=n.fromData(t,null,e,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,r);return s.enableTexture(a),s.unbind(),s},i.createFloat32=function(t,e,r,o){var a=new n.fromData(t,o,e,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,r);return s.enableTexture(a),s.unbind(),s},e.exports=i},{"./GLTexture":13}],12:[function(t,e,r){var n=t("./shader/compileProgram"),i=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),a=t("./shader/setPrecision"),s=t("./shader/generateUniformAccessObject"),u=function(t,e,r,u,l){this.gl=t,u&&(e=a(e,u),r=a(r,u)),this.program=n(t,e,r,l),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=s(t,this.uniformData)};u.prototype.bind=function(){this.gl.useProgram(this.program)},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var t=this.gl;t.deleteProgram(this.program)},e.exports=u},{"./shader/compileProgram":18,"./shader/extractAttributes":20,"./shader/extractUniforms":21,"./shader/generateUniformAccessObject":22,"./shader/setPrecision":26}],13:[function(t,e,r){var n=function(t,e,r,n,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=n||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=n};var i=!1;n.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!i){var o=n.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},e.exports=n},{}],14:[function(t,e,r){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(t,r,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":17}],15:[function(t,e,r){var n=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};e.exports=n},{}],16:[function(t,e,r){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};"undefined"!=typeof e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":10,"./GLFramebuffer":11,"./GLShader":12,"./GLTexture":13,"./VertexArrayObject":14,"./createContext":15,"./setVertexAttribArrays":17,"./shader":23}],17:[function(t,e,r){var n=function(t,e,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var a=e[n];t.enableVertexAttribArray(a.attribute.location)}};e.exports=n},{}],18:[function(t,e,r){var n=function(t,e,r,n){var o=i(t,t.VERTEX_SHADER,e),a=i(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),n)for(var u in n)t.bindAttribLocation(s,n[u],u);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s},i=function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=n},{}],19:[function(t,e,r){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=n},{}],20:[function(t,e,r){var n=t("./mapType"),i=t("./mapSize"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var u=t.getActiveAttrib(e,s),l=n(t,u.type);r[u.name]={type:l,size:i(l),location:t.getAttribLocation(e,u.name),pointer:a}}return r},a=function(t,e,r,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,n||0)};e.exports=o},{"./mapSize":24,"./mapType":25}],21:[function(t,e,r){var n=t("./mapType"),i=t("./defaultValue"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=t.getActiveUniform(e,a),u=s.name.replace(/\[.*?\]/,""),l=n(t,s.type);r[u]={type:l,size:s.size,location:t.getUniformLocation(e,u),value:i(l,s.size)}}return r};e.exports=o},{"./defaultValue":19,"./mapType":25}],22:[function(t,e,r){var n=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),s=0;s<n.length;s++){var u=n[s],l=u.split("."),h=l[l.length-1],c=a(l,r),f=e[u];c.data[h]=f,c.gl=t,Object.defineProperty(c,h,{get:i(h),set:o(h,f)})}return r;
},i=function(t){var e=s.replace("%%",t);return new Function(e)},o=function(t,e){var r,n=u.replace(/%%/g,t);return r=1===e.size?l[e.type]:h[e.type],r&&(n+="\nthis.gl."+r+";"),new Function("value",n)},a=function(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r},s=["return this.data.%%.value;"].join("\n"),u=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},h={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=n},{}],23:[function(t,e,r){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":18,"./defaultValue":19,"./extractAttributes":20,"./extractUniforms":21,"./generateUniformAccessObject":22,"./mapSize":24,"./mapType":25,"./setPrecision":26}],24:[function(t,e,r){var n=function(t){return i[t]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=n},{}],25:[function(t,e,r){var n=function(t,e){if(!i){var r=Object.keys(o);i={};for(var n=0;n<r.length;++n){var a=r[n];i[t[a]]=o[a]}}return i[e]},i=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=n},{}],26:[function(t,e,r){var n=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};e.exports=n},{}],27:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&p&&(v=!1,p.length?y=p.concat(y):m=-1,y.length&&u())}function u(){if(!v){var t=o(s);v=!0;for(var e=y.length;e;){for(p=y,y=[];++m<e;)p&&p[m].run();m=-1,e=y.length}p=null,v=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function h(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,y=[],v=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];y.push(new l(t,e)),1!==y.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=h,d.addListener=h,d.once=h,d.off=h,d.removeListener=h,d.removeAllListeners=h,d.emit=h,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],28:[function(e,r,n){(function(e){!function(i){function o(t){throw new RangeError(I[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function s(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(L,".");var i=t.split("."),o=a(i,e).join(".");return n+o}function u(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function l(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,r){var n=0;for(t=r?j(t/O):t>>1,t+=j(t/e);t>F*C>>1;n+=w)t=j(t/F);return j(n+(F+1)*t/(t+E))}function d(t){var e,r,n,i,a,s,u,c,d,p,y=[],v=t.length,m=0,g=P,b=M;for(r=t.lastIndexOf(R),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&o("not-basic"),y.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(a=m,s=1,u=w;i>=v&&o("invalid-input"),c=h(t.charCodeAt(i++)),(c>=w||c>j((T-m)/s))&&o("overflow"),m+=c*s,d=u<=b?S:u>=b+C?C:u-b,!(c<d);u+=w)p=w-d,s>j(T/p)&&o("overflow"),s*=p;e=y.length+1,b=f(m-a,e,0==a),j(m/e)>T-g&&o("overflow"),g+=j(m/e),m%=e,y.splice(m++,0,g)}return l(y)}function p(t){var e,r,n,i,a,s,l,h,d,p,y,v,m,g,b,_=[];for(t=u(t),v=t.length,e=P,r=0,a=M,s=0;s<v;++s)y=t[s],y<128&&_.push(B(y));for(n=i=_.length,i&&_.push(R);n<v;){for(l=T,s=0;s<v;++s)y=t[s],y>=e&&y<l&&(l=y);for(m=n+1,l-e>j((T-r)/m)&&o("overflow"),r+=(l-e)*m,e=l,s=0;s<v;++s)if(y=t[s],y<e&&++r>T&&o("overflow"),y==e){for(h=r,d=w;p=d<=a?S:d>=a+C?C:d-a,!(h<p);d+=w)b=h-p,g=w-p,_.push(B(c(p+b%g,0))),h=j(b/g);_.push(B(c(h,0))),a=f(r,m,n==i),r=0,++n}++r,++e}return _.join("")}function y(t){return s(t,function(t){return A.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return s(t,function(t){return D.test(t)?"xn--"+p(t):t})}var m="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof r&&r&&!r.nodeType&&r,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var _,x,T=2147483647,w=36,S=1,C=26,E=38,O=700,M=72,P=128,R="-",A=/^xn--/,D=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=w-S,j=Math.floor,B=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:u,encode:l},decode:d,encode:p,toASCII:v,toUnicode:y},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return _});else if(m&&g)if(r.exports==m)g.exports=_;else for(x in _)_.hasOwnProperty(x)&&(m[x]=_[x]);else i.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var c,f,d,p,y=t[h].replace(s,"%20"),v=y.indexOf(r);v>=0?(c=y.substr(0,v),f=y.substr(v+1)):(c=y,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],30:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),function(a){var s=encodeURIComponent(i(a))+r;return o(t[a])?n(t[a],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[a]))}).join(e):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],31:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":29,"./encode":30}],32:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("mini-signals"),u=i(s),l=t("parse-uri"),h=i(l),c=t("./async"),f=n(c),d=t("./Resource"),p=i(d),y=100,v=/(#[\w\-]+)?$/,m=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,t),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=function(t,r){return e._loadResource(t,r)},this._queue=f.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new u.default,this.onError=new u.default,this.onLoad=new u.default,this.onStart=new u.default,this.onComplete=new u.default}return t.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===("undefined"==typeof t?"undefined":a(t))&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p.default(t,e,r),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){var o=r.parentResource,s=o.progressChunk*(o.children.length+1),u=s/(o.children.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var l=0;l<o.children.length;++l)o.children[l].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},t.prototype._prepareUrl=function(t){var e=(0,h.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=v.exec(r)[0];r=r.substr(0,r.length-n.length),r+=r.indexOf("?")!==-1?"&"+this.defaultQueryString:"?"+this.defaultQueryString,r+=n}return r},t.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,f.eachSeries(this._beforeMiddleware,function(e,n){e.call(r,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())})},t.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,f.eachSeries(this._afterMiddleware,function(r,n){r.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),t._dequeue(),e._queue.idle()&&(e.progress=y,e._onComplete())})},t}();r.default=m},{"./Resource":33,"./async":34,"mini-signals":6,"parse-uri":8}],33:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function a(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function s(t){return t.toString().replace("object ","")}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("parse-uri"),h=n(l),c=t("mini-signals"),f=n(c),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,y=0,v=200,m=204,g=function(){function t(e,r,n){if(i(this,t),"string"!=typeof e||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new f.default,this.onProgress=new f.default,this.onComplete=new f.default,this.onAfterMiddleware=new f.default}return t.setExtensionLoadType=function(e,r){a(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){a(t._xhrTypeMap,e,r)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(r)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=r,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="undefined"==typeof e.status?e.status:v;if(!(r===v||r===m||r===y&&e.responseText.length>0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=e.responseText,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e.responseText),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(e.responseText,"text/xml")}else{var i=document.createElement("div");i.innerHTML=e.responseText,this.data=i}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||e.responseText;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=(0,h.default)(p.href,{strictMode:!0});var r=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this._getExtension()]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this._getExtension()]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?");n!==-1&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();r.default=g,g.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},g.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},g.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},g.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},g._loadTypeMap={gif:g.LOAD_TYPE.IMAGE,png:g.LOAD_TYPE.IMAGE,bmp:g.LOAD_TYPE.IMAGE,jpg:g.LOAD_TYPE.IMAGE,jpeg:g.LOAD_TYPE.IMAGE,tif:g.LOAD_TYPE.IMAGE,tiff:g.LOAD_TYPE.IMAGE,webp:g.LOAD_TYPE.IMAGE,tga:g.LOAD_TYPE.IMAGE,svg:g.LOAD_TYPE.IMAGE,"svg+xml":g.LOAD_TYPE.IMAGE,mp3:g.LOAD_TYPE.AUDIO,ogg:g.LOAD_TYPE.AUDIO,wav:g.LOAD_TYPE.AUDIO,mp4:g.LOAD_TYPE.VIDEO,webm:g.LOAD_TYPE.VIDEO},g._xhrTypeMap={xhtml:g.XHR_RESPONSE_TYPE.DOCUMENT,html:g.XHR_RESPONSE_TYPE.DOCUMENT,htm:g.XHR_RESPONSE_TYPE.DOCUMENT,xml:g.XHR_RESPONSE_TYPE.DOCUMENT,tmx:g.XHR_RESPONSE_TYPE.DOCUMENT,svg:g.XHR_RESPONSE_TYPE.DOCUMENT,tsx:g.XHR_RESPONSE_TYPE.DOCUMENT,gif:g.XHR_RESPONSE_TYPE.BLOB,png:g.XHR_RESPONSE_TYPE.BLOB,bmp:g.XHR_RESPONSE_TYPE.BLOB,jpg:g.XHR_RESPONSE_TYPE.BLOB,jpeg:g.XHR_RESPONSE_TYPE.BLOB,tif:g.XHR_RESPONSE_TYPE.BLOB,tiff:g.XHR_RESPONSE_TYPE.BLOB,webp:g.XHR_RESPONSE_TYPE.BLOB,tga:g.XHR_RESPONSE_TYPE.BLOB,json:g.XHR_RESPONSE_TYPE.JSON,text:g.XHR_RESPONSE_TYPE.TEXT,txt:g.XHR_RESPONSE_TYPE.TEXT,ttf:g.XHR_RESPONSE_TYPE.BUFFER,otf:g.XHR_RESPONSE_TYPE.BUFFER},g.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":6,"parse-uri":8}],34:[function(t,e,r){"use strict";function n(){}function i(t,e,r){var n=0,i=t.length;!function o(a){return a||n===i?void(r&&r(a)):void e(t[n++],o)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function a(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){return s.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){return s.process()},1)}function i(t){return function(){a-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){a=0,s.drain=n,s.started=!1,s._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),t(e.data,o(i(e)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){s.paused!==!0&&(s.paused=!0)},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}r.__esModule=!0,r.eachSeries=i,r.queue=a},{}],35:[function(t,e,r){"use strict";function n(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],o=[0,0,0,0],a=0;a<n.length;++a)r<t.length?n[a]=255&t.charCodeAt(r++):n[a]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];var s=r-(t.length-1);switch(s){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)e+=i.charAt(o[u])}return e}r.__esModule=!0,r.encodeBinary=n;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o=t("./Loader"),a=i(o),s=t("./Resource"),u=i(s),l=t("./async"),h=n(l),c=t("./b64"),f=n(c);a.default.Resource=u.default,a.default.async=h,a.default.base64=f,e.exports=a.default,r.default=a.default},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=function(){var r=h.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=s.default.TYPE.IMAGE,t.data.onload=function(){h.revokeObjectURL(r),t.data.onload=null,e()},{v:void 0}}();if("object"===("undefined"==typeof r?"undefined":o(r)))return r.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+l.default.encodeBinary(t.xhr.responseText),t.type=s.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.blobMiddlewareFactory=i;var a=t("../../Resource"),s=n(a),u=t("../../b64"),l=n(u),h=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&l.isObject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return l.isString(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t("punycode"),l=t("./util");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var h=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),y=["'"].concat(p),v=["%","/","?",";","#"].concat(y),m=["/","?","#"],g=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=t("querystring");n.prototype.parse=function(t,e,r){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",o=t.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(i);var s=t;if(s=s.trim(),!r&&1===t.split("#").length){var c=f.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=h.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(r||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===s.substr(0,2);!C||d&&T[d]||(s=s.substr(2),this.slashes=!0)}if(!T[d]&&(C||d&&!w[d])){for(var E=-1,O=0;O<m.length;O++){var M=s.indexOf(m[O]);M!==-1&&(E===-1||M<E)&&(E=M)}var P,R;R=E===-1?s.lastIndexOf("@"):s.lastIndexOf("@",E),R!==-1&&(P=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(P)),E=-1;for(var O=0;O<v.length;O++){var M=s.indexOf(v[O]);M!==-1&&(E===-1||M<E)&&(E=M)}E===-1&&(E=s.length),this.host=s.slice(0,E),s=s.slice(E),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var D=this.hostname.split(/\./),O=0,L=D.length;O<L;O++){var I=D[O];if(I&&!I.match(b)){for(var F="",j=0,B=I.length;j<B;j++)F+=I.charCodeAt(j)>127?"x":I[j];if(!F.match(b)){var k=D.slice(0,O),N=D.slice(O+1),U=I.match(_);U&&(k.push(U[1]),N.unshift(U[2])),N.length&&(s="/"+N.join(".")+s),this.hostname=k.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=u.toASCII(this.hostname));var G=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+G,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!x[p])for(var O=0,L=y.length;O<L;O++){var W=y[O];if(s.indexOf(W)!==-1){var z=encodeURIComponent(W);z===W&&(z=escape(W)),s=s.split(W).join(z)}}var V=s.indexOf("#");V!==-1&&(this.hash=s.substr(V),s=s.slice(0,V));var Y=s.indexOf("?");if(Y!==-1?(this.search=s.substr(Y),this.query=s.substr(Y+1),e&&(this.query=S.parse(this.query)),s=s.slice(0,Y)):e&&(this.search="",this.query={}),s&&(this.pathname=s),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",H=this.search||"";this.path=G+H}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(l.isString(t)){
var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var h=s[u];"protocol"!==h&&(r[h]=t[h])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||T[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=g||m||r.host&&t.pathname,_=b,x=r.pathname&&r.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],S=r.protocol&&!w[r.protocol];if(S&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===x[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),r.search=t.search,r.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(S){r.hostname=r.host=x.shift();var C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return r.search=t.search,r.query=t.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=x.slice(-1)[0],O=(r.host||t.host||x.length>1)&&("."===E||".."===E)||""===E,M=0,P=x.length;P>=0;P--)E=x[P],"."===E?x.splice(P,1):".."===E?(x.splice(P,1),M++):M&&(x.splice(P,1),M--);if(!b&&!_)for(;M--;M)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),O&&"/"!==x.join("/").substr(-1)&&x.push("");var R=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){r.hostname=r.host=R?"":x.length?x.shift():"";var C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return b=b||r.host&&x.length,b&&!R&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:28,querystring:31}],39:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./autoDetectRenderer"),s=t("./display/Container"),u=n(s),l=t("./ticker/Ticker"),h=n(l),c=function(){function t(e,r,n,o){i(this,t),this.renderer=(0,a.autoDetectRenderer)(e,r,n,o),this.stage=new u.default,this.ticker=new h.default,this.ticker.add(this.render,this),this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this.ticker.stop()},t.prototype.start=function(){this.ticker.start()},t.prototype.destroy=function(t){this.stop(),this.ticker.remove(this.render,this),this.ticker=null,this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null},o(t,[{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();r.default=c},{"./autoDetectRenderer":42,"./display/Container":45,"./ticker/Ticker":114}],41:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var e=t.slice(0);return e.unshift("precision "+f+" float;"),e}}else if("precision"!==t.substring(0,9))return"precision "+f+" float;\n"+t;return t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("pixi-gl-core"),h=t("./settings"),c=n(h),f=c.default.PRECISION,d=function(t){function e(r,n,a,u,l){return i(this,e),o(this,t.call(this,r,s(n),s(a),u,l))}return a(e,t),e}(l.GLShader);r.default=d},{"./settings":98,"pixi-gl-core":16}],42:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,r=arguments[2],n=arguments[3];return!n&&s.isWebGLSupported()?new c.default(t,e,r):new l.default(t,e,r)}r.__esModule=!0,r.autoDetectRenderer=o;var a=t("./utils"),s=i(a),u=t("./renderers/canvas/CanvasRenderer"),l=n(u),h=t("./renderers/webgl/WebGLRenderer"),c=n(h)},{"./renderers/canvas/CanvasRenderer":74,"./renderers/webgl/WebGLRenderer":81,"./utils":119}],43:[function(t,e,r){"use strict";r.__esModule=!0;r.VERSION="4.3.4",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],44:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(t=t||new i.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[2],a=t[3],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[4],a=t[5],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=t[6],a=t[7],e=o<e?o:e,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,h=o.tx,c=o.ty,f=this.minX,d=this.minY,p=this.maxX,y=this.maxY,v=a*e+u*r+h,m=s*e+l*r+c;f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,y=m>y?m:y,v=a*n+u*r+h,m=s*n+l*r+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,y=m>y?m:y,v=a*e+u*i+h,m=s*e+l*i+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,y=m>y?m:y,v=a*n+u*i+h,m=s*n+l*i+c,f=v<f?v:f,d=m<d?m:d,p=v>p?v:p,y=m>y?m:y,this.minX=f,this.minY=d,this.maxX=p,this.maxY=y},t.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,y=r;y<n;y+=2){var v=e[y],m=e[y+1],g=o*v+s*m+l,b=u*m+a*v+h;c=g<c?g:c,f=b<f?b:f,d=g>d?g:d,p=b>p?b:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t}();r.default=o},{"../math":67}],45:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../utils"),h=t("./DisplayObject"),c=n(h),f=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.children=[],r}return a(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);(0,l.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,(0,l.removeItems)(this.children,n,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,(0,l.removeItems)(this.children,t,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=t,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var a=0;a<o.length;++a)o[a].parent=null;this.transform&&(this.transform._parentID=-1),this._boundsID++,this.onChildrenChange(t);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._mask||this._filters?this.renderAdvancedWebGL(t):(this._renderWebGL(t),this.renderWebGLChildren(t)))},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t),this.renderWebGLChildren(t),t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype.renderWebGLChildren=function(t){for(var e=0,r=this.children.length;e<r;e++)this.children[e].renderWebGL(t)},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),this.renderCanvasChildren(t),this._mask&&t.maskManager.popMask(t))},e.prototype.renderCanvasChildren=function(t){for(var e=0,r=this.children.length;e<r;e++)this.children[e].renderCanvas(t)},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var r="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},u(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}]),e}(c.default);r.default=f,f.prototype.containerUpdateTransform=f.prototype.updateTransform},{"../utils":119,"./DisplayObject":46}],46:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("eventemitter3"),h=n(l),c=t("../const"),f=t("../settings"),d=n(f),p=t("./TransformStatic"),y=n(p),v=t("./Transform"),m=n(v),g=t("./Bounds"),b=n(g),_=t("../math"),x=function(t){function e(){i(this,e);var r=o(this,t.call(this)),n=d.default.TRANSFORM_MODE===c.TRANSFORM_MODE.STATIC?y.default:m.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new b.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r}return a(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r?r:1,this.scale.y=n?n:1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},u(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(h.default);r.default=x,x.prototype.displayObjectUpdateTransform=x.prototype.updateTransform},{"../const":43,"../math":67,"../settings":98,"./Bounds":44,"./Transform":47,"./TransformStatic":49,eventemitter3:4}],47:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../math"),h=t("./TransformBase"),c=n(h),f=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new l.Point(0,0),r.scale=new l.Point(1,1),r.skew=new l.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new l.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return a(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},u(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(c.default);r.default=f},{"../math":67,"./TransformBase":48}],48:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../math"),o=function(){function t(){n(this,t),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();r.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},{"../math":67}],49:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../math"),h=t("./TransformBase"),c=n(h),f=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new l.ObservablePoint(r.onChange,r,0,0),r.scale=new l.ObservablePoint(r.onChange,r,1,1),r.pivot=new l.ObservablePoint(r.onChange,r,0,0),r.skew=new l.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return a(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},u(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(c.default);r.default=f},{"../math":67,"./TransformBase":48}],50:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../display/Container"),l=n(u),h=t("../textures/RenderTexture"),c=n(h),f=t("../textures/Texture"),d=n(f),p=t("./GraphicsData"),y=n(p),v=t("../sprites/Sprite"),m=n(v),g=t("../math"),b=t("../utils"),_=t("../const"),x=t("../display/Bounds"),T=n(x),w=t("./utils/bezierCurveTo"),S=n(w),C=t("../renderers/canvas/CanvasRenderer"),E=n(C),O=void 0,M=new g.Matrix,P=new g.Point,R=new Float32Array(4),A=new Float32Array(4),D=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,e);var n=o(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=r,n.lineColor=0,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=_.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,
n._localBounds=new T.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n}return a(e,t),e.prototype.clone=function t(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new g.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var r=new g.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=20,o=this.currentPath.shape.points,a=0,s=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],l=o[o.length-1],h=1;h<=i;++h){var c=h/i;a=u+(t-u)*c,s=l+(e-l)*c,o.push(a+(t+(r-t)*c-a)*c,s+(e+(n-e)*c-s)*c)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],u=a[a.length-1];return a.length-=2,(0,S.default)(s,u,t,e,r,n,i,o,a),this.dirty++,this},e.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,l=a-t,h=n-e,c=r-t,f=Math.abs(u*c-l*h);if(f<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=u*u+l*l,p=h*h+c*c,y=u*h+l*c,v=i*Math.sqrt(d)/f,m=i*Math.sqrt(p)/f,g=v*y/d,b=m*y/p,_=v*c+m*l,x=v*h+m*u,T=l*(m+g),w=u*(m+g),S=c*(v+b),C=h*(v+b),E=Math.atan2(w-x,T-_),O=Math.atan2(C-x,S-_);this.arc(_+t,x+e,i,E,O,l*h>c*u)}return this.dirty++,this},e.prototype.arc=function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===i)return this;!o&&i<=n?i+=2*Math.PI:o&&n<=i&&(n+=2*Math.PI);var a=i-n,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=t+Math.cos(n)*r,l=e+Math.sin(n)*r,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===u&&h[h.length-1]===l||h.push(u,l):(this.moveTo(u,l),h=this.currentPath.shape.points);for(var c=a/(2*s),f=2*c,d=Math.cos(c),p=Math.sin(c),y=s-1,v=y%1/y,m=0;m<=y;++m){var g=m+v*m,b=c+n+f*g,_=Math.cos(b),x=-Math.sin(b);h.push((d*_+p*x)*r+t,(d*-x+p*_)*r+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new g.Rectangle(t,e,r,n)),this},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new g.RoundedRectangle(t,e,r,n,i)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new g.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new g.Ellipse(t,e,r,n)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof g.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new g.Polygon(e);return i.closed=r,this.drawShape(i),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var r=this.graphicsData[0].shape;if(!this._spriteRect){if(!e._SPRITE_TEXTURE){e._SPRITE_TEXTURE=c.default.create(10,10);var n=document.createElement("canvas");n.width=10,n.height=10;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,10,10),e._SPRITE_TEXTURE=d.default.fromCanvas(n)}this._spriteRect=new m.default(e._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var o=R,a=A;(0,b.hex2rgb)(this.graphicsData[0].fillColor,o),(0,b.hex2rgb)(this.tint,a),o[0]*=a[0],o[1]*=a[1],o[2]*=a[2],this._spriteRect.tint=(0,b.rgb2hex)(o)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,this._spriteRect.blendMode=this.blendMode,e._SPRITE_TEXTURE._frame.width=r.width,e._SPRITE_TEXTURE._frame.height=r.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-r.x/r.width,-r.y/r.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,P);for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(P.x,P.y))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),r=1/0,n=-(1/0);if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,f=h.lineWidth;if(i=h.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)o=i.x-f/2,a=i.y-f/2,s=i.width+f,u=i.height+f,t=o<t?o:t,e=o+s>e?o+s:e,r=a<r?a:r,n=a+u>n?a+u:n;else if(c===_.SHAPES.CIRC)o=i.x,a=i.y,s=i.radius+f/2,u=i.radius+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else if(c===_.SHAPES.ELIP)o=i.x,a=i.y,s=i.width+f/2,u=i.height+f/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else for(var d=i.points,p=0,y=0,v=0,m=0,g=0,b=0,x=0,T=0,w=0;w+2<d.length;w+=2)o=d[w],a=d[w+1],p=d[w+2],y=d[w+3],v=Math.abs(p-o),m=Math.abs(y-a),u=f,s=Math.sqrt(v*v+m*m),s<1e-9||(g=(u/s*m+v)/2,b=(u/s*v+m)/2,x=(p+o)/2,T=(y+a)/2,t=x-g<t?x-g:t,e=x+g>e?x+g:e,r=T-b<r?T-b:r,n=T+b>n?T+b:n)}else t=0,e=0,r=0,n=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+2*S,this._localBounds.minY=r-S,this._localBounds.maxY=n+2*S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new y.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=c.default.create(r.width,r.height,t,e);O||(O=new E.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(M),M.invert(),M.tx-=r.x,M.ty-=r.y,O.render(this,n,!0,M);var i=d.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t);return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webgl)for(var i=0;i<this._webgl[n].data.length;++i)this._webgl[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(l.default);r.default=D,D._SPRITE_TEXTURE=null},{"../const":43,"../display/Bounds":44,"../display/Container":45,"../math":67,"../renderers/canvas/CanvasRenderer":74,"../sprites/Sprite":99,"../textures/RenderTexture":109,"../textures/Texture":111,"../utils":119,"./GraphicsData":51,"./utils/bezierCurveTo":53}],51:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e,r,i,o,a,s,u,l){n(this,t),this.lineWidth=e,this.nativeLines=u,this.lineColor=r,this.lineAlpha=i,this._lineTint=r,this.fillColor=o,this.fillAlpha=a,this._fillTint=o,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();r.default=i},{}],52:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../renderers/canvas/CanvasRenderer"),a=n(o),s=t("../../const"),u=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var u=t.graphicsData[a],l=u.shape,h=u._fillTint,c=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===s.SHAPES.POLY){r.beginPath(),this.renderPolygon(l.points,l.closed,r);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,r);u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===s.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(u.type===s.SHAPES.ELIP){var d=2*l.width,p=2*l.height,y=l.x-d/2,v=l.y-p/2;r.beginPath();var m=.5522848,g=d/2*m,b=p/2*m,_=y+d,x=v+p,T=y+d/2,w=v+p/2;r.moveTo(y,w),r.bezierCurveTo(y,w-b,T-g,v,T,v),r.bezierCurveTo(T+g,v,_,w-b,_,w),r.bezierCurveTo(_,w+b,T+g,x,T,x),r.bezierCurveTo(T-g,x,y,w+b,y,w),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RREC){var S=l.x,C=l.y,E=l.width,O=l.height,M=l.radius,P=Math.min(E,O)/2|0;M=M>P?P:M,r.beginPath(),r.moveTo(S,C+M),r.lineTo(S,C+O-M),r.quadraticCurveTo(S,C+O,S+M,C+O),r.lineTo(S+E-M,C+O),r.quadraticCurveTo(S+E,C+O,S+E,C+O-M),r.lineTo(S+E,C+M),r.quadraticCurveTo(S+E,C,S+E-M,C),r.lineTo(S+M,C),r.quadraticCurveTo(S,C,S,C+M),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255}},t.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineTo(t[2*n],t[2*n+1]);e&&r.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=u,a.default.registerPlugin("graphics",u)},{"../../const":43,"../../renderers/canvas/CanvasRenderer":74}],53:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],l=20,h=0,c=0,f=0,d=0,p=0;u.push(t,e);for(var y=1,v=0;y<=l;++y)v=y/l,h=1-v,c=h*h,f=c*h,d=v*v,p=d*v,u.push(f*t+3*c*v*r+3*h*d*i+p*a,f*e+3*c*v*n+3*h*d*o+p*s);return u}r.__esModule=!0,r.default=n},{}],54:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../utils"),l=t("../../const"),h=t("../../renderers/webgl/utils/ObjectRenderer"),c=n(h),f=t("../../renderers/webgl/WebGLRenderer"),d=n(f),p=t("./WebGLGraphicsData"),y=n(p),v=t("./shaders/PrimitiveShader"),m=n(v),g=t("./utils/buildPoly"),b=n(g),_=t("./utils/buildRectangle"),x=n(_),T=t("./utils/buildRoundedRectangle"),w=n(T),S=t("./utils/buildCircle"),C=n(S),E=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return a(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new m.default(this.gl)},e.prototype.destroy=function(){c.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var a=0,s=i.data.length;a<s;a++){n=i.data[a];var l=n.shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,u.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),t.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if(r||(r=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),r.dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=r.lastIndex;o<t.graphicsData.length;o++){var a=t.graphicsData[o];i=this.getWebGLData(r,0),a.type===l.SHAPES.POLY&&(0,b.default)(a,i),a.type===l.SHAPES.RECT?(0,x.default)(a,i):a.type===l.SHAPES.CIRC||a.type===l.SHAPES.ELIP?(0,C.default)(a,i):a.type===l.SHAPES.RREC&&(0,w.default)(a,i),r.lastIndex++}this.renderer.bindVao(null);for(var s=0;s<r.data.length;s++)i=r.data[s],i.dirty&&i.upload()},e.prototype.getWebGLData=function(t,e){var r=t.data[t.data.length-1];return(!r||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new y.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(c.default);r.default=E,d.default.registerPlugin("graphics",E)},{"../../const":43,"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../utils":119,"./WebGLGraphicsData":55,"./shaders/PrimitiveShader":56,"./utils/buildCircle":57,"./utils/buildPoly":59,"./utils/buildRectangle":60,"./utils/buildRoundedRectangle":61}],55:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),a=n(o),s=function(){function t(e,r,n){i(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new a.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();r.default=s},{"pixi-gl-core":16}],56:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../../Shader"),l=n(u),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return a(e,t),e}(l.default);r.default=h},{"../../../Shader":41}],57:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,o=void 0,l=void 0;if(t.type===s.SHAPES.CIRC?(o=r.radius,l=r.radius):(o=r.width,l=r.height),0!==o&&0!==l){var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),c=2*Math.PI/h;if(t.fill){var f=(0,u.hex2rgb)(t.fillColor),d=t.fillAlpha,p=f[0]*d,y=f[1]*d,v=f[2]*d,m=e.points,g=e.indices,b=m.length/6;g.push(b);for(var _=0;_<h+1;_++)m.push(n,i,p,y,v,d),m.push(n+Math.sin(c*_)*o,i+Math.cos(c*_)*l,p,y,v,d),g.push(b++,b++);g.push(b-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var T=0;T<h+1;T++)t.points.push(n+Math.sin(c*T)*o,i+Math.cos(c*T)*l);(0,a.default)(t,e),t.points=x}}}r.__esModule=!0,r.default=i;var o=t("./buildLine"),a=n(o),s=t("../../../const"),u=t("../../../utils")},{"../../../const":43,"../../../utils":119,"./buildLine":58}],58:[function(t,e,r){"use strict";function n(t,e){var r=t.points;if(0!==r.length){var n=new o.Point(r[0],r[1]),i=new o.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){r=r.slice(),r.pop(),r.pop(),i=new o.Point(r[r.length-2],r[r.length-1]);var s=i.x+.5*(n.x-i.x),u=i.y+.5*(n.y-i.y);r.unshift(s,u),r.push(s,u)}var l=e.points,h=e.indices,c=r.length/2,f=r.length,d=l.length/6,p=t.lineWidth/2,y=(0,a.hex2rgb)(t.lineColor),v=t.lineAlpha,m=y[0]*v,g=y[1]*v,b=y[2]*v,_=r[0],x=r[1],T=r[2],w=r[3],S=0,C=0,E=-(x-w),O=_-T,M=0,P=0,R=0,A=0,D=Math.sqrt(E*E+O*O);E/=D,O/=D,E*=p,O*=p,l.push(_-E,x-O,m,g,b,v),l.push(_+E,x+O,m,g,b,v);for(var L=1;L<c-1;++L){_=r[2*(L-1)],x=r[2*(L-1)+1],T=r[2*L],w=r[2*L+1],S=r[2*(L+1)],C=r[2*(L+1)+1],E=-(x-w),O=_-T,D=Math.sqrt(E*E+O*O),E/=D,O/=D,E*=p,O*=p,M=-(w-C),P=T-S,D=Math.sqrt(M*M+P*P),M/=D,P/=D,M*=p,P*=p;var I=-O+x-(-O+w),F=-E+T-(-E+_),j=(-E+_)*(-O+w)-(-E+T)*(-O+x),B=-P+C-(-P+w),k=-M+T-(-M+S),N=(-M+S)*(-P+w)-(-M+T)*(-P+C),U=I*k-B*F;if(Math.abs(U)<.1)U+=10.1,l.push(T-E,w-O,m,g,b,v),l.push(T+E,w+O,m,g,b,v);else{var G=(F*N-k*j)/U,X=(B*j-I*N)/U,W=(G-T)*(G-T)+(X-w)*(X-w);W>196*p*p?(R=E-M,A=O-P,D=Math.sqrt(R*R+A*A),R/=D,A/=D,R*=p,A*=p,l.push(T-R,w-A),l.push(m,g,b,v),l.push(T+R,w+A),l.push(m,g,b,v),l.push(T-R,w-A),l.push(m,g,b,v),f++):(l.push(G,X),l.push(m,g,b,v),l.push(T-(G-T),w-(X-w)),l.push(m,g,b,v))}}_=r[2*(c-2)],x=r[2*(c-2)+1],T=r[2*(c-1)],w=r[2*(c-1)+1],E=-(x-w),O=_-T,D=Math.sqrt(E*E+O*O),E/=D,O/=D,E*=p,O*=p,l.push(T-E,w-O),l.push(m,g,b,v),l.push(T+E,w+O),l.push(m,g,b,v),h.push(d);for(var z=0;z<f;++z)h.push(d++);h.push(d-1)}}function i(t,e){var r=0,n=t.points;if(0!==n.length){var i=e.points,o=n.length/2,s=(0,a.hex2rgb)(t.lineColor),u=t.lineAlpha,l=s[0]*u,h=s[1]*u,c=s[2]*u;for(r=1;r<o;r++){var f=n[2*(r-1)],d=n[2*(r-1)+1],p=n[2*r],y=n[2*r+1];i.push(f,d),i.push(l,h,c,u),i.push(p,y),i.push(l,h,c,u)}}}r.__esModule=!0,r.default=function(t,e){t.nativeLines?i(t,e):n(t,e)};var o=t("../../../math"),a=t("../../../utils")},{"../../../math":67,"../../../utils":119}],59:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&r.length>=6){for(var n=[],i=t.holes,o=0;o<i.length;o++){var u=i[o];n.push(r.length/2),r=r.concat(u.points)}var h=e.points,c=e.indices,f=r.length/2,d=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,y=d[0]*p,v=d[1]*p,m=d[2]*p,g=(0,l.default)(r,n,2);if(!g)return;for(var b=h.length/6,_=0;_<g.length;_+=3)c.push(g[_]+b),c.push(g[_]+b),c.push(g[_+1]+b),c.push(g[_+2]+b),c.push(g[_+2]+b);for(var x=0;x<f;x++)h.push(r[2*x],r[2*x+1],y,v,m,p)}t.lineWidth>0&&(0,a.default)(t,e)}r.__esModule=!0,r.default=i;var o=t("./buildLine"),a=n(o),s=t("../../../utils"),u=t("earcut"),l=n(u)},{"../../../utils":119,"./buildLine":58,earcut:3}],60:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,o=r.width,u=r.height;if(t.fill){var l=(0,s.hex2rgb)(t.fillColor),h=t.fillAlpha,c=l[0]*h,f=l[1]*h,d=l[2]*h,p=e.points,y=e.indices,v=p.length/6;p.push(n,i),p.push(c,f,d,h),p.push(n+o,i),p.push(c,f,d,h),p.push(n,i+u),p.push(c,f,d,h),p.push(n+o,i+u),p.push(c,f,d,h),y.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var m=t.points;t.points=[n,i,n+o,i,n+o,i+u,n,i+u,n,i],(0,a.default)(t,e),t.points=m}}r.__esModule=!0,r.default=i;var o=t("./buildLine"),a=n(o),s=t("../../../utils")},{"../../../utils":119,"./buildLine":58}],61:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,a=r.width,u=r.height,c=r.radius,f=[];if(f.push(n,i+c),o(n,i+u-c,n,i+u,n+c,i+u,f),o(n+a-c,i+u,n+a,i+u,n+a,i+u-c,f),o(n+a,i+c,n+a,i,n+a-c,i,f),o(n+c,i,n,i,n,i+c+1e-10,f),t.fill){for(var d=(0,h.hex2rgb)(t.fillColor),p=t.fillAlpha,y=d[0]*p,v=d[1]*p,m=d[2]*p,g=e.points,b=e.indices,_=g.length/6,x=(0,s.default)(f,null,2),T=0,w=x.length;T<w;T+=3)b.push(x[T]+_),b.push(x[T]+_),b.push(x[T+1]+_),b.push(x[T+2]+_),b.push(x[T+2]+_);for(var S=0,C=f.length;S<C;S++)g.push(f[S],f[++S],y,v,m,p)}if(t.lineWidth){var E=t.points;t.points=f,(0,l.default)(t,e),t.points=E}}function o(t,e,r,n,i,o){function a(t,e,r){var n=e-t;return t+n*r}for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=20,l=s,h=0,c=0,f=0,d=0,p=0,y=0,v=0,m=0;v<=u;++v)m=v/u,h=a(t,r,m),c=a(e,n,m),f=a(r,i,m),d=a(n,o,m),p=a(h,f,m),y=a(c,d,m),l.push(p,y);return l}r.__esModule=!0,r.default=i;var a=t("earcut"),s=n(a),u=t("./buildLine"),l=n(u),h=t("../../../utils")},{"../../../utils":119,"./buildLine":58,earcut:3}],62:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./math");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return i(s).default}});var u=t("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return i(u).default}});var l=t("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return i(l).default}});var h=t("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return i(h).default}});var c=t("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return i(c).default}});var f=t("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return i(f).default}});var d=t("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return i(d).default}});var p=t("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return i(p).default}});var y=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(y).default}});var v=t("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return i(v).default}});var m=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return i(m).default}});var g=t("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return i(g).default}});var b=t("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return i(b).default}});var _=t("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return i(_).default}});var x=t("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return i(x).default}});var T=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T).default}});var w=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(w).default}});var S=t("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return i(S).default}});var C=t("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return i(C).default}});var E=t("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return i(E).default}});var O=t("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return i(O).default}});var M=t("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return i(M).default}});var P=t("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return i(P).default}});var R=t("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return i(R).default}});var A=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(A).default}});var D=t("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(D).default}});var L=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return i(L).default}});var I=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return i(I).default}});var F=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return i(F).default}});var j=t("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return i(j).default}});var B=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(B).default}});var k=t("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return i(k).default}});var N=t("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return i(N).default}});var U=t("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return U.autoDetectRenderer}});var G=t("./utils"),X=n(G),W=t("./ticker"),z=n(W),V=t("./settings"),Y=i(V),H=t("./renderers/canvas/CanvasRenderer"),q=i(H),K=t("./renderers/webgl/WebGLRenderer"),Z=i(K);r.settings=Y.default,r.utils=X,
r.ticker=z,r.CanvasRenderer=q.default,r.WebGLRenderer=Z.default},{"./Application":40,"./Shader":41,"./autoDetectRenderer":42,"./const":43,"./display/Bounds":44,"./display/Container":45,"./display/DisplayObject":46,"./display/Transform":47,"./display/TransformBase":48,"./display/TransformStatic":49,"./graphics/Graphics":50,"./graphics/GraphicsData":51,"./graphics/canvas/CanvasGraphicsRenderer":52,"./graphics/webgl/GraphicsRenderer":54,"./math":67,"./renderers/canvas/CanvasRenderer":74,"./renderers/canvas/utils/CanvasRenderTarget":76,"./renderers/webgl/WebGLRenderer":81,"./renderers/webgl/filters/Filter":83,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":86,"./renderers/webgl/managers/WebGLManager":90,"./renderers/webgl/utils/ObjectRenderer":91,"./renderers/webgl/utils/Quad":92,"./renderers/webgl/utils/RenderTarget":93,"./settings":98,"./sprites/Sprite":99,"./sprites/canvas/CanvasSpriteRenderer":100,"./sprites/canvas/CanvasTinter":101,"./sprites/webgl/SpriteRenderer":103,"./text/Text":105,"./text/TextStyle":106,"./textures/BaseRenderTexture":107,"./textures/BaseTexture":108,"./textures/RenderTexture":109,"./textures/Spritesheet":110,"./textures/Texture":111,"./textures/TextureUvs":112,"./textures/VideoBaseTexture":113,"./ticker":115,"./utils":119,"pixi-gl-core":16}],63:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return t<0?-1:t>0?1:0}function o(){for(var t=0;t<16;t++){var e=[];d.push(e);for(var r=0;r<16;r++)for(var n=i(u[t]*u[r]+h[t]*l[r]),o=i(l[t]*u[r]+c[t]*l[r]),a=i(u[t]*h[r]+h[t]*c[r]),p=i(l[t]*h[r]+c[t]*c[r]),y=0;y<16;y++)if(u[y]===n&&l[y]===o&&h[y]===a&&c[y]===p){e.push(y);break}}for(var v=0;v<16;v++){var m=new s.default;m.set(u[v],l[v],h[v],c[v],0,0),f.push(m)}}r.__esModule=!0;var a=t("./Matrix"),s=n(a),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],l=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],d=[];o();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return u[t]},uY:function(t){return l[t]},vX:function(t){return h[t]},vY:function(t){return c[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return d[t][e]},sub:function(t,e){return d[t][p.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=f[p.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=p},{"./Matrix":64}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./Point"),s=n(a),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i(this,t),this.a=e,this.b=r,this.c=n,this.d=o,this.tx=a,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new s.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,a,s,u){var l=Math.sin(a),h=Math.cos(a),c=Math.cos(u),f=Math.sin(u),d=-Math.sin(s),p=Math.cos(s),y=h*i,v=l*i,m=-l*o,g=h*o;return this.a=c*y+f*m,this.b=c*v+f*g,this.c=d*y+p*m,this.d=d*v+p*g,this.tx=t+(r*y+n*m),this.ty=e+(r*v+n*g),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,e),s=Math.abs(o+a);return s<1e-5?(t.rotation=a,e<0&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();r.default=u},{"./Point":66}],65:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},i(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();r.default=o},{}],66:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();r.default=i},{}],67:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return n(i).default}});var o=t("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var a=t("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return n(a).default}});var s=t("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return n(s).default}});var u=t("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n(u).default}});var l=t("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var h=t("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return n(h).default}});var c=t("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var f=t("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return n(f).default}})},{"./GroupD8":63,"./Matrix":64,"./ObservablePoint":65,"./Point":66,"./shapes/Circle":68,"./shapes/Ellipse":69,"./shapes/Polygon":70,"./shapes/Rectangle":71,"./shapes/RoundedRectangle":72}],68:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("./Rectangle"),a=n(o),s=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=e,this.y=r,this.radius=n,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r},t.prototype.getBounds=function(){return new a.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();r.default=u},{"../../const":43,"./Rectangle":71}],69:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("./Rectangle"),a=n(o),s=t("../../const"),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=r,this.width=n,this.height=o,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},t.prototype.getBounds=function(){return new a.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();r.default=u},{"../../const":43,"./Rectangle":71}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../Point"),a=n(o),s=t("../../const"),u=function(){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(i(this,t),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof a.default){for(var o=[],u=0,l=r.length;u<l;u++)o.push(r[u].x,r[u].y);r=o}this.closed=!0,this.points=r,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1],h=s>e!=l>e&&t<(u-a)*((e-s)/(l-s))+a;h&&(r=!r)}return r},t}();r.default=u},{"../../const":43,"../Point":66}],71:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../../const"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=r,this.width=i,this.height=a,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=n,this.height=i-n},i(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();r.default=a},{"../../const":43}],72:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=r,this.width=o,this.height=a,this.radius=s,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if(r=t-(this.x+this.width-this.radius),r*r+n*n<=i)return!0;if(n=e-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if(r=t-(this.x+this.radius),r*r+n*n<=i)return!0}return!1},t}();r.default=o},{"../../const":43}],73:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../utils"),h=t("../math"),c=t("../const"),f=t("../settings"),d=n(f),p=t("../display/Container"),y=n(p),v=t("../textures/RenderTexture"),m=n(v),g=t("eventemitter3"),b=n(g),_=new h.Matrix,x=function(t){function e(r,n,a,s){i(this,e);var u=o(this,t.call(this));if((0,l.sayHello)(r),s)for(var f in d.default.RENDER_OPTIONS)"undefined"==typeof s[f]&&(s[f]=d.default.RENDER_OPTIONS[f]);else s=d.default.RENDER_OPTIONS;return u.type=c.RENDERER_TYPE.UNKNOWN,u.screen=new h.Rectangle(0,0,n||800,a||600),u.view=s.view||document.createElement("canvas"),u.resolution=s.resolution||d.default.RESOLUTION,u.transparent=s.transparent,u.autoResize=s.autoResize||!1,u.blendModes=null,u.preserveDrawingBuffer=s.preserveDrawingBuffer,u.clearBeforeRender=s.clearBeforeRender,u.roundPixels=s.roundPixels,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,0],u._backgroundColorString="#000000",u.backgroundColor=s.backgroundColor||u._backgroundColor,u._tempDisplayObjectParent=new y.default,u._lastObjectRendered=u._tempDisplayObjectParent,u}return a(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,r){var n=t.getLocalBounds(),i=m.default.create(0|n.width,0|n.height,e,r);return _.tx=-n.x,_.ty=-n.y,this.render(t,i,!1,_,!0),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=c.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},u(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,l.hex2string)(t),(0,l.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(b.default);r.default=x},{"../const":43,"../display/Container":45,"../math":67,"../settings":98,"../textures/RenderTexture":109,"../utils":119,eventemitter3:4}],74:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../SystemRenderer"),l=n(u),h=t("./utils/CanvasMaskManager"),c=n(h),f=t("./utils/CanvasRenderTarget"),d=n(f),p=t("./utils/mapCanvasBlendModesToPixi"),y=n(p),v=t("../../utils"),m=t("../../const"),g=t("../../settings"),b=n(g),_=function(t){function e(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e);var s=o(this,t.call(this,"Canvas",r,n,a));return s.type=m.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.refresh=!0,s.maskManager=new c.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,y.default)(),s._activeBlendMode=null,s.context=null,s.renderingToScreen=!1,s.resize(r,n),s}return a(e,t),e.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new d.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!i){var s=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.globalCompositeOperation=this.blendModes[m.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=a,t.renderCanvas(this),this.context=l,this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=b.default.SCALE_MODE===m.SCALE_MODES.LINEAR)},e}(l.default);r.default=_,v.pluginTarget.mixin(_)},{"../../const":43,"../../settings":98,"../../utils":119,"../SystemRenderer":73,"./utils/CanvasMaskManager":75,"./utils/CanvasRenderTarget":76,"./utils/mapCanvasBlendModesToPixi":78}],75:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../../../const"),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldTransform,i=e.resolution;e.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;n<r;n++){var o=t.graphicsData[n],a=o.shape;if(o.type===i.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===i.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var l=2*a.width,h=2*a.height,c=a.x-l/2,f=a.y-h/2,d=.5522848,p=l/2*d,y=h/2*d,v=c+l,m=f+h,g=c+l/2,b=f+h/2;e.moveTo(c,b),e.bezierCurveTo(c,b-y,g-p,f,g,f),e.bezierCurveTo(g+p,f,v,b-y,v,b),e.bezierCurveTo(v,b+y,g+p,m,g,m),e.bezierCurveTo(g-p,m,c,b+y,c,b),e.closePath()}else if(o.type===i.SHAPES.RREC){var _=a.x,x=a.y,T=a.width,w=a.height,S=a.radius,C=Math.min(T,w)/2|0;S=S>C?C:S,e.moveTo(_,x+S),e.lineTo(_,x+w-S),e.quadraticCurveTo(_,x+w,_+S,x+w),e.lineTo(_+T-S,x+w),e.quadraticCurveTo(_+T,x+w,_+T,x+w-S),e.lineTo(_+T,x+S),e.quadraticCurveTo(_+T,x,_+T-S,x),e.lineTo(_+S,x),e.quadraticCurveTo(_,x,_,x+S),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();r.default=o},{"../../../const":43}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../../settings"),s=n(a),u=function(){function t(e,r,n){i(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||s.default.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},o(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();r.default=u},{"../../../settings":98}],77:[function(t,e,r){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}function i(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var a=o.data;return 255===a[0]&&0===a[1]&&0===a[2]}r.__esModule=!0,r.default=i},{}],78:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="multiply",t[o.BLEND_MODES.SCREEN]="screen",t[o.BLEND_MODES.OVERLAY]="overlay",t[o.BLEND_MODES.DARKEN]="darken",t[o.BLEND_MODES.LIGHTEN]="lighten",t[o.BLEND_MODES.COLOR_DODGE]="color-dodge",t[o.BLEND_MODES.COLOR_BURN]="color-burn",t[o.BLEND_MODES.HARD_LIGHT]="hard-light",t[o.BLEND_MODES.SOFT_LIGHT]="soft-light",t[o.BLEND_MODES.DIFFERENCE]="difference",t[o.BLEND_MODES.EXCLUSION]="exclusion",t[o.BLEND_MODES.HUE]="hue",t[o.BLEND_MODES.SATURATION]="saturate",t[o.BLEND_MODES.COLOR]="color",t[o.BLEND_MODES.LUMINOSITY]="luminosity"):(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="source-over",t[o.BLEND_MODES.SCREEN]="source-over",t[o.BLEND_MODES.OVERLAY]="source-over",t[o.BLEND_MODES.DARKEN]="source-over",t[o.BLEND_MODES.LIGHTEN]="source-over",t[o.BLEND_MODES.COLOR_DODGE]="source-over",t[o.BLEND_MODES.COLOR_BURN]="source-over",t[o.BLEND_MODES.HARD_LIGHT]="source-over",t[o.BLEND_MODES.SOFT_LIGHT]="source-over",t[o.BLEND_MODES.DIFFERENCE]="source-over",t[o.BLEND_MODES.EXCLUSION]="source-over",t[o.BLEND_MODES.HUE]="source-over",t[o.BLEND_MODES.SATURATION]="source-over",t[o.BLEND_MODES.COLOR]="source-over",t[o.BLEND_MODES.LUMINOSITY]="source-over"),t}r.__esModule=!0,r.default=i;var o=t("../../../const"),a=t("./canUseNewCanvasBlendModes"),s=n(a)},{"../../../const":43,"./canUseNewCanvasBlendModes":77}],79:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../const"),a=t("../../settings"),s=n(a),u=function(){function t(e){i(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==o.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,a=0;a<e.length;a++)null!==e[a]&&(e[o++]=e[a]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();r.default=u},{"../../const":43,"../../settings":98}],80:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),a=t("../../const"),s=t("./utils/RenderTarget"),u=n(s),l=t("../../utils"),h=function(){function t(e){i(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var r=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===e){e=0;for(var s=0;s<i.length;++s)if(i[s]===t){e=s;break}}i[e]=t,r.activeTexture(r.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(n){var h=new u.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);h.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=h,l=h.texture}else l=new o.GLTexture(this.gl,null,null,null,null),l.bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===a.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===a.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===a.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),
delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var r=this._managedTextures.indexOf(t);r!==-1&&(0,l.removeItems)(this._managedTextures,r,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();r.default=h},{"../../const":43,"../../utils":119,"./utils/RenderTarget":93,"pixi-gl-core":16}],81:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../SystemRenderer"),l=n(u),h=t("./managers/MaskManager"),c=n(h),f=t("./managers/StencilManager"),d=n(f),p=t("./managers/FilterManager"),y=n(p),v=t("./utils/RenderTarget"),m=n(v),g=t("./utils/ObjectRenderer"),b=n(g),_=t("./TextureManager"),x=n(_),T=t("../../textures/BaseTexture"),w=n(T),S=t("./TextureGarbageCollector"),C=n(S),E=t("./WebGLState"),O=n(E),M=t("./utils/mapWebGLDrawModesToPixi"),P=n(M),R=t("./utils/validateContext"),A=n(R),D=t("../../utils"),L=t("pixi-gl-core"),I=n(L),F=t("../../const"),j=0,B=function(t){function e(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e);var s=o(this,t.call(this,"WebGL",r,n,a));return s.legacy=!!a.legacy,s.legacy&&(I.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=F.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:a.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:a.preserveDrawingBuffer},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new c.default(s),s.stencilManager=new d.default(s),s.emptyRenderer=new b.default(s),s.currentRenderer=s.emptyRenderer,s.initPlugins(),a.context&&(0,A.default)(a.context),s.gl=a.context||I.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=j++,s.state=new O.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.filterManager=new y.default(s),s.drawModes=(0,P.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return a(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new x.default(this),this.textureGC=new C.default(this),this.state.resetToDefault(),this.rootRenderTarget=new m.default(t,this.width,this.height,null,this.resolution,(!0)),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new I.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<e;i++){var o=new w.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){l.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),e!==!1&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,r){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,r)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new I.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(l.default);r.default=B,D.pluginTarget.mixin(B)},{"../../const":43,"../../textures/BaseTexture":108,"../../utils":119,"../SystemRenderer":73,"./TextureGarbageCollector":79,"./TextureManager":80,"./WebGLState":82,"./managers/FilterManager":87,"./managers/MaskManager":88,"./managers/StencilManager":89,"./utils/ObjectRenderer":91,"./utils/RenderTarget":93,"./utils/mapWebGLDrawModesToPixi":96,"./utils/validateContext":97,"pixi-gl-core":16}],82:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("./utils/mapWebGLBlendModesToPixi"),a=n(o),s=0,u=1,l=2,h=3,c=4,f=function(){function t(e){i(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,a.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[s]),this.setDepthTest(t[u]),this.setFrontFace(t[l]),this.setCullFace(t[h]),this.setBlendMode(t[c])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[s]!==t&&(this.activeState[s]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){t!==this.activeState[c]&&(this.activeState[c]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[u]!==t&&(this.activeState[u]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[h]!==t&&(this.activeState[h]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[l]!==t&&(this.activeState[l]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();r.default=f},{"./utils/mapWebGLBlendModesToPixi":95}],83:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./extractUniformsFromSrc"),s=n(a),u=t("../../../utils"),l=t("../../../const"),h=t("../../../settings"),c=n(h),f={},d=function(){function t(e,r,n){i(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.blendMode=l.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value;this.glShaders={},f[this.vertexSrc+this.fragmentSrc]||(f[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=f[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.RESOLUTION,this.enabled=!0}return t.prototype.apply=function(t,e,r,n,i){i.target;t.applyFilter(this,e,r,n)},o(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();r.default=d},{"../../../const":43,"../../../settings":98,"../../../utils":119,"./extractUniformsFromSrc":84}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){var n=o(t,r),i=o(e,r);return Object.assign(n,i)}function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),r={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(a.indexOf("uniform")>-1){var s=a.split(" "),l=s[1],h=s[2],c=1;h.indexOf("[")>-1&&(n=h.split(/\[|]/),h=n[0],c*=Number(n[1])),h.match(e)||(r[h]={value:u(l,c),name:h,type:l})}}return r}r.__esModule=!0,r.default=i;var a=t("pixi-gl-core"),s=n(a),u=s.default.shader.defaultValue},{"pixi-gl-core":16}],85:[function(t,e,r){"use strict";function n(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n}function i(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n}function o(t,e,r,n){var i=n.worldTransform.copy(a.Matrix.TEMP_MATRIX),o=n._texture.baseTexture,s=t.identity(),u=r.height/r.width;s.translate(e.x/r.width,e.y/r.height),s.scale(1,u);var l=r.width/o.width,h=r.height/o.height;return i.tx/=o.width*l,i.ty/=o.width*l,i.invert(),s.prepend(i),s.scale(1,1/u),s.scale(l,h),s.translate(n.anchor.x,n.anchor.y),s}r.__esModule=!0,r.calculateScreenSpaceMatrix=n,r.calculateNormalizedScreenSpaceMatrix=i,r.calculateSpriteMatrix=o;var a=t("../../../math")},{"../../../math":67}],86:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../Filter"),l=n(u),h=t("../../../../math"),c=(t("path"),function(t){function e(r){i(this,e);var n=new h.Matrix,a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return r.renderable=!1,a.maskSprite=r,a.maskMatrix=n,a}return a(e,t),e.prototype.apply=function(t,e,r){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,r)},e}(l.default));r.default=c},{"../../../../math":67,"../Filter":83,path:9}],87:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("./WebGLManager"),h=i(l),c=t("../utils/RenderTarget"),f=i(c),d=t("../utils/Quad"),p=i(d),y=t("../../../math"),v=t("../../../Shader"),m=i(v),g=t("../filters/filterTransforms"),b=n(g),_=t("bit-twiddle"),x=i(_),T=function t(){s(this,t),this.renderTarget=null,this.sourceFrame=new y.Rectangle,this.destinationFrame=new y.Rectangle,this.filters=[],this.target=null,this.resolution=1},w=function(t){function e(r){s(this,e);var n=o(this,t.call(this,r));return n.gl=n.renderer.gl,n.quad=new p.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return a(e,t),e.prototype.pushFilter=function(t,e){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new T;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new T);var a=e[0].resolution,s=0|e[0].padding,u=t.filterArea||t.getBounds(!0),l=o.sourceFrame,h=o.destinationFrame;l.x=(u.x*a|0)/a,l.y=(u.y*a|0)/a,l.width=(u.width*a|0)/a,l.height=(u.height*a|0)/a,n.stack[0].renderTarget.transform||l.fit(n.stack[0].destinationFrame),l.pad(s),h.width=l.width,h.height=l.height;var c=this.getPotRenderTarget(r.gl,l.width,l.height,a);o.target=t,o.filters=e,o.resolution=a,o.renderTarget=c,c.setFrame(h,l),r.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<n.length-1;++a){n[a].apply(this,i,o,!0,r);var s=i;i=o,o=s}n[a].apply(this,i,e.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,r,n){var i=this.renderer,o=i.gl,a=t.glShaders[i.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey],a||(a=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a)):a=t.glShaders[i.CONTEXT_UID]=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a),this.syncUniforms(a,t),i.state.setBlendMode(t.blendMode);var s=this.renderer.boundTextures[0];o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var r=e.uniformData,n=e.uniforms,i=1,o=void 0;if(n.filterArea){o=this.filterData.stack[this.filterData.index];var a=n.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,t.uniforms.filterArea=a}if(n.filterClamp){o=this.filterData.stack[this.filterData.index];var s=n.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=s}for(var u in r)if("sampler2D"===r[u].type&&0!==n[u]){if(n[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{t.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===r[u].type)void 0!==n[u].a?t.uniforms[u]=n[u].toArray(!0):t.uniforms[u]=n[u];else if("vec2"===r[u].type)if(void 0!==n[u].x){var h=t.uniforms[u]||new Float32Array(2);h[0]=n[u].x,h[1]=n[u].y,t.uniforms[u]=h}else t.uniforms[u]=n[u];else"float"===r[u].type?t.uniforms.data[u].value!==r[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]},e.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return b.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return b.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return b.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,r,n){e=x.default.nextPow2(e*n),r=x.default.nextPow2(r*n);var i=(65535&e)<<16|65535&r;this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new f.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=r/n,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,r=t.size.height*t.resolution,n=(65535&e)<<16|65535&r;this.pool[n].push(t)},e}(h.default);r.default=w},{"../../../Shader":41,"../../../math":67,"../filters/filterTransforms":85,"../utils/Quad":92,"../utils/RenderTarget":93,"./WebGLManager":90,"bit-twiddle":1}],88:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("./WebGLManager"),l=n(u),h=t("../filters/spriteMask/SpriteMaskFilter"),c=n(h),f=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return a(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new c.default(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(l.default);r.default=f},{"../filters/spriteMask/SpriteMaskFilter":86,"./WebGLManager":90}],89:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("./WebGLManager"),l=n(u),h=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.stencilMaskStack=null,n}return a(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack;0===r.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),r.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,r.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,r=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(r),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){l.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(l.default);r.default=h},{"./WebGLManager":90}],90:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();r.default=i},{}],91:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../managers/WebGLManager"),l=n(u),h=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),
e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(l.default);r.default=h},{"../managers/WebGLManager":90}],92:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),a=n(o),s=t("../../../utils/createIndicesForQuads"),u=n(s),l=function(){function t(e,r){i(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,u.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e,r)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();r.default=l},{"../../../utils/createIndicesForQuads":117,"pixi-gl-core":16}],93:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../../math"),a=t("../../../const"),s=t("../../../settings"),u=n(s),l=t("pixi-gl-core"),h=function(){function t(e,r,n,s,h,c){i(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new o.Rectangle(0,0,1,1),this.resolution=h||u.default.RESOLUTION,this.projectionMatrix=new o.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new o.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==s?s:u.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,n)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();r.default=h},{"../../../const":43,"../../../math":67,"../../../settings":98,"pixi-gl-core":16}],94:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=!e;if(r){var n=document.createElement("canvas");n.width=1,n.height=1,e=s.default.createContext(n)}for(var i=e.createShader(e.FRAGMENT_SHADER);;){var a=u.replace(/%forloop%/gi,o(t));if(e.shaderSource(i,a),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function o(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esModule=!0,r.default=i;var a=t("pixi-gl-core"),s=n(a),u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":16}],95:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e}r.__esModule=!0,r.default=n;var i=t("../../../const")},{"../../../const":43}],96:[function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}r.__esModule=!0,r.default=n;var i=t("../../../const")},{"../../../const":43}],97:[function(t,e,r){"use strict";function n(t){var e=t.getContextAttributes();e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}r.__esModule=!0,r.default=n},{}],98:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./utils/maxRecommendedTextures"),o=n(i),a=t("./utils/canUploadSameBuffer"),s=n(a);r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)()}},{"./utils/canUploadSameBuffer":116,"./utils/maxRecommendedTextures":120}],99:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../math"),h=t("../utils"),c=t("../const"),f=t("../textures/Texture"),d=n(f),p=t("../display/Container"),y=n(p),v=new l.Point,m=function(t){function e(r){i(this,e);var n=o(this,t.call(this));return n._anchor=new l.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n.textureWidth=0,n.textureHeight=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.tintScale=1,n.blendMode=c.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||d.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return a(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.textureWidth=this._texture.orig.width,this.textureHeight=this._texture.orig.height,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this.textureWidth),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this.textureHeight)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,l=t.trim,h=t.orig,c=this._anchor,f=0,d=0,p=0,y=0;l?(d=l.x-c._x*h.width,f=d+l.width,y=l.y-c._y*h.height,p=y+l.height):(f=h.width*(1-c._x),d=h.width*-c._x,p=h.height*(1-c._y),y=h.height*-c._y),u[0]=r*d+i*y+a,u[1]=o*y+n*d+s,u[2]=r*f+i*y+a,u[3]=o*y+n*f+s,u[4]=r*f+i*p+a,u[5]=o*p+n*f+s,u[6]=r*d+i*p+a,u[7]=o*p+n*d+s}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,c=r.width*(1-n._x),f=r.width*-n._x,d=r.height*(1-n._y),p=r.height*-n._y;e[0]=o*f+s*p+l,e[1]=u*p+a*f+h,e[2]=o*c+s*p+l,e[3]=u*p+a*c+h,e[4]=o*c+s*d+l,e[5]=u*d+a*c+h,e[6]=o*f+s*d+l,e[7]=u*d+a*f+h},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return v.x>n&&v.x<n+e&&(i=-r*this.anchor.y,v.y>i&&v.y<i+r)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;var r="boolean"==typeof e?e:e&&e.texture;if(r){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(d.default.from(t))},e.fromFrame=function(t){var r=h.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,n){return new e(d.default.fromImage(t,r,n))},u(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(y.default);r.default=m},{"../const":43,"../display/Container":45,"../math":67,"../textures/Texture":111,"../utils":119}],100:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../renderers/canvas/CanvasRenderer"),a=n(o),s=t("../../const"),u=t("../../math"),l=t("./CanvasTinter"),h=n(l),c=new u.Matrix,f=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,a=0,l=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==f&&(r.context[r.smoothProperty]=f),e.trim?(a=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(a=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,u.GroupD8.matrixAppendRotationInv(o,e.rotate,a,l),a=0,l=0),a-=n/2,l-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),a=0|a,l=0|l):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,n*d,i*d,a*r.resolution,l*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,i*d,a*r.resolution,l*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=f,a.default.registerPlugin("sprite",f)},{"../../const":43,"../../math":67,"../../renderers/canvas/CanvasRenderer":74,"./CanvasTinter":101}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("../../utils"),o=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),a=n(o),s={getTintedTexture:function(t,e){var r=t.texture;e=s.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var i=s.canvas||document.createElement("canvas");if(s.tintMethod(r,e,i),s.convertTintToImage){var o=new Image;o.src=i.toDataURL(),r.tintCache[n]=o}else r.tintCache[n]=i,s.canvas=null;return i},tintWithMultiply:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=i.width,r.height=i.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithOverlay:function(t,e,r){var n=r.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=i.width,r.height=i.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithPerPixel:function(t,e,r){var n=r.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,r.width=o.width,r.height=o.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=(0,i.hex2rgb)(e),u=s[0],l=s[1],h=s[2],c=n.getImageData(0,0,o.width,o.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=l,f[d+2]*=h;n.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,r=(0,i.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,i.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a.default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,r.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":77,"../../utils":119}],102:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=i},{}],103:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../renderers/webgl/utils/ObjectRenderer"),l=n(u),h=t("../../renderers/webgl/WebGLRenderer"),c=n(h),f=t("../../utils/createIndicesForQuads"),d=n(f),p=t("./generateMultiTextureShader"),y=n(p),v=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),m=n(v),g=t("./BatchBuffer"),b=n(g),_=t("../../settings"),x=n(_),T=t("pixi-gl-core"),w=n(T),S=t("bit-twiddle"),C=n(S),E=0,O=0,M=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));n.vertSize=6,n.vertByteSize=4*n.vertSize,n.size=x.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var a=1;a<=C.default.nextPow2(n.size);a*=2)n.buffers.push(new b.default(4*a*n.vertByteSize));n.indices=(0,d.default)(n.size),n.shader=null,n.currentIndex=0,E=0,n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,m.default)(this.MAX_TEXTURES,t)),this.shader=(0,y.default)(t,this.MAX_TEXTURES),this.indexBuffer=w.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(n,e.aTintScale,t.FLOAT,!1,this.vertByteSize,16);e.aTextureId&&i.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,20),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=C.default.nextPow2(this.currentIndex),n=C.default.log2(r),i=this.buffers[n],o=this.sprites,a=this.groups,s=i.float32View,u=i.uint32View,l=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,f=0,d=void 0,p=void 0,y=1,v=0,m=a[0],g=void 0,b=void 0,_=o[0].blendMode;m.textureCount=0,m.start=0,m.blend=_,E++;var T=void 0;for(T=0;T<e;++T)l[T]=h[T],l[T]._virtalBoundId=T;for(T=0;T<this.currentIndex;++T){var S=o[T];if(d=S._texture.baseTexture,_!==S.blendMode&&(_=S.blendMode,p=null,v=e,E++),p!==d&&(p=d,d._enabled!==E)){if(v===e&&(E++,m.size=T-m.start,v=0,m=a[y++],m.blend=_,m.textureCount=0,m.start=T),d.touched=c,d._virtalBoundId===-1)for(var M=0;M<e;++M){var P=(M+O)%e,R=l[P];if(R._enabled!==E){O++,R._virtalBoundId=-1,d._virtalBoundId=P,l[P]=d;break}}d._enabled=E,m.textureCount++,m.ids[v]=d._virtalBoundId,m.textures[v++]=d}if(g=S.vertexData,b=S._texture._uvs.uvsUint32,this.renderer.roundPixels){var A=this.renderer.resolution;s[f]=(g[0]*A|0)/A,s[f+1]=(g[1]*A|0)/A,s[f+6]=(g[2]*A|0)/A,s[f+7]=(g[3]*A|0)/A,s[f+12]=(g[4]*A|0)/A,s[f+13]=(g[5]*A|0)/A,s[f+18]=(g[6]*A|0)/A,s[f+19]=(g[7]*A|0)/A}else s[f]=g[0],s[f+1]=g[1],s[f+6]=g[2],s[f+7]=g[3],s[f+12]=g[4],s[f+13]=g[5],s[f+18]=g[6],s[f+19]=g[7];u[f+2]=b[0],u[f+8]=b[1],u[f+14]=b[2],u[f+20]=b[3],u[f+3]=u[f+9]=u[f+15]=u[f+21]=S._tintRGB+(255*Math.min(S.worldAlpha,1)<<24),s[f+4]=s[f+10]=s[f+16]=s[f+22]=S.tintScale,s[f+5]=s[f+11]=s[f+17]=s[f+23]=d._virtalBoundId,f+=24}if(m.size=T-m.start,x.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var D=this.shader.attributes,L=this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),I=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(L,D.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(L,D.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(L,D.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(L,D.aTintScale,t.FLOAT,!1,this.vertByteSize,16);D.aTextureId&&I.addAttribute(L,D.aTextureId,t.FLOAT,!1,this.vertByteSize,20),this.vaos[this.vertexCount]=I}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(T=0;T<e;++T)h[T]._virtalBoundId=-1;for(T=0;T<y;++T){for(var F=a[T],j=F.textureCount,B=0;B<j;B++)p=F.textures[B],h[F.ids[B]]!==p&&this.renderer.bindTexture(p,F.ids[B],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(F.blend),t.drawElements(t.TRIANGLES,6*F.size,t.UNSIGNED_SHORT,6*F.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),x.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},e}(l.default);r.default=M,c.default.registerPlugin("sprite",M)},{"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":94,"../../settings":98,"../../utils/createIndicesForQuads":117,"./BatchBuffer":102,"./generateMultiTextureShader":104,"bit-twiddle":1,"pixi-gl-core":16}],104:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r="precision highp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTintScale;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aTintScale * aColor.a, aColor.a);\n}\n",n=u;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,o(e));for(var i=new s.default(t,r,n),a=[],l=0;l<e;l++)a[l]=l;return i.bind(),i.uniforms.uSamplers=a,i}function o(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}r.__esModule=!0,r.default=i;var a=t("../../Shader"),s=n(a),u=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":41,path:9}],105:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../sprites/Sprite"),h=n(l),c=t("../textures/Texture"),f=n(c),d=t("../math"),p=t("../utils"),y=t("../const"),v=t("../settings"),m=n(v),g=t("./TextStyle"),b=n(g),_=t("../utils/trimCanvas"),x=n(_),T={texture:!0,children:!1,baseTexture:!0},w=function(t){function e(r,n,a){i(this,e),a=a||document.createElement("canvas"),a.width=3,a.height=3;var s=f.default.fromCanvas(a);s.orig=new d.Rectangle,s.trim=new d.Rectangle;var u=o(this,t.call(this,s));return u.canvas=a,u.context=u.canvas.getContext("2d"),u.resolution=m.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=r,u.style=n,u.localStyleID=-1,u}return a(e,t),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=e.getFontStyle(r),this.context.font=this._font;for(var n=r.wordWrap?this.wordWrap(this._text):this._text,i=n.split(/(?:\r\n|\r|\n)/),o=new Array(i.length),a=0,s=e.calculateFontProperties(this._font),u=0;u<i.length;u++){var l=this.context.measureText(i[u]).width+(i[u].length-1)*r.letterSpacing;o[u]=l,a=Math.max(a,l)}var h=a+r.strokeThickness;r.dropShadow&&(h+=r.dropShadowDistance),this.canvas.width=Math.ceil((h+2*r.padding)*this.resolution);var c=r.lineHeight||s.fontSize+r.strokeThickness,f=Math.max(c,s.fontSize+r.strokeThickness)+(i.length-1)*c;r.dropShadow&&(f+=r.dropShadowDistance),this.canvas.height=Math.ceil((f+2*r.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=r.stroke,this.context.lineWidth=r.strokeThickness,this.context.textBaseline=r.textBaseline,this.context.lineJoin=r.lineJoin,this.context.miterLimit=r.miterLimit;var d=void 0,p=void 0;if(r.dropShadow){this.context.shadowBlur=r.dropShadowBlur,this.context.globalAlpha=r.dropShadowAlpha,r.dropShadowBlur>0?this.context.shadowColor=r.dropShadowColor:this.context.fillStyle=r.dropShadowColor;for(var y=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,v=Math.sin(r.dropShadowAngle)*r.dropShadowDistance,m=0;m<i.length;m++)d=r.strokeThickness/2,p=r.strokeThickness/2+m*c+s.ascent,"right"===r.align?d+=a-o[m]:"center"===r.align&&(d+=(a-o[m])/2),r.fill&&(this.drawLetterSpacing(i[m],d+y+r.padding,p+v+r.padding),r.stroke&&r.strokeThickness&&(this.context.strokeStyle=r.dropShadowColor,this.drawLetterSpacing(i[m],d+y+r.padding,p+v+r.padding,!0),this.context.strokeStyle=r.stroke))}this.context.shadowBlur=0,this.context.globalAlpha=1,this.context.fillStyle=this._generateFillStyle(r,i);for(var g=0;g<i.length;g++)d=r.strokeThickness/2,p=r.strokeThickness/2+g*c+s.ascent,"right"===r.align?d+=a-o[g]:"center"===r.align&&(d+=(a-o[g])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(i[g],d+r.padding,p+r.padding,!0),r.fill&&this.drawLetterSpacing(i[g],d+r.padding,p+r.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;
if(0===o)return void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));for(var a=String.prototype.split.call(t,""),s=e,u=0,l="";u<t.length;)l=a[u++],n?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=this.context.measureText(l).width+o},e.prototype.updateTexture=function(){if(this._style.trim){var t=(0,x.default)(this.canvas);this.canvas.width=t.width,this.canvas.height=t.height,this.context.putImageData(t.data,0,0)}var e=this._texture,r=this._style;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.realWidth=this.canvas.width,e.baseTexture.realHeight=this.canvas.height,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.trim.width=e._frame.width=this.canvas.width/this.resolution,e.trim.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=-r.padding,e.trim.y=-r.padding,e.orig.width=e._frame.width-2*r.padding,e.orig.height=e._frame.height-2*r.padding,this._onTextureUpdate(),e.baseTexture.emit("update",e.baseTexture),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.wordWrap=function(t){for(var e="",r=this._style,n=t.split("\n"),i=r.wordWrapWidth,o=0;o<n.length;o++){for(var a=i,s=n[o].split(" "),u=0;u<s.length;u++){var l=this.context.measureText(s[u]).width;if(r.breakWords&&l>i)for(var h=s[u].split(""),c=0;c<h.length;c++){var f=this.context.measureText(h[c]).width;f>a?(e+="\n"+h[c],a=i-f):(0===c&&(e+=" "),e+=h[c],a-=f)}else{var d=l+this.context.measureText(" ").width;0===u||d>a?(u>0&&(e+="\n"),e+=s[u],a=i-l):(a-=d,e+=" "+s[u])}}o<n.length-1&&(e+="\n")}return e},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===y.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),n=(u.length+1)*e.length,i=0;for(var f=0;f<e.length;f++){i+=1;for(var d=0;d<u.length;d++)o=l[d]?l[d]/e.length+f/e.length:i/n,r.addColorStop(o,u[d]),i++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),n=u.length+1,i=1;for(var p=0;p<u.length;p++)o=l[p]?l[p]:i/n,r.addColorStop(o,u[p]),i++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},T,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},e.getFontStyle=function(t){t=t||{},t instanceof b.default||(t=new b.default(t));var e="number"==typeof t.fontSize?t.fontSize+"px":t.fontSize,r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();/([\"\'])[^\'\"]+\1/.test(i)||(i='"'+i+'"'),r[n]=i}return t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+r.join(",")},e.calculateFontProperties=function(t){if(e.fontPropertiesCache[t])return e.fontPropertiesCache[t];var r={},n=e.fontPropertiesCanvas,i=e.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,n.width=o,n.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,a);var u=i.getImageData(0,0,o,s).data,l=u.length,h=4*o,c=0,f=0,d=!1;for(c=0;c<a;++c){for(var p=0;p<h;p+=4)if(255!==u[f+p]){d=!0;break}if(d)break;f+=h}for(r.ascent=a-c,f=l-h,d=!1,c=s;c>a;--c){for(var y=0;y<h;y+=4)if(255!==u[f+y]){d=!0;break}if(d)break;f-=h}return r.descent=c-a,r.fontSize=r.ascent+r.descent,e.fontPropertiesCache[t]=r,r},u(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,p.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,p.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof b.default?this._style=t:this._style=new b.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(h.default);r.default=w,w.fontPropertiesCache={},w.fontPropertiesCanvas=document.createElement("canvas"),w.fontPropertiesContext=w.fontPropertiesCanvas.getContext("2d")},{"../const":43,"../math":67,"../settings":98,"../sprites/Sprite":99,"../textures/Texture":111,"../utils":119,"../utils/trimCanvas":123,"./TextStyle":106}],106:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function a(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}r.__esModule=!0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t("../const"),l=t("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},c=function(){function t(e){n(this,t),this.styleID=0,Object.assign(this,h,e)}return t.prototype.clone=function(){var e={};for(var r in h)e[r]=this[r];return new t(e)},t.prototype.reset=function(){Object.assign(this,h)},s(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){a(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();r.default=c},{"../const":43,"../utils":119}],107:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("./BaseTexture"),l=n(u),h=t("../settings"),c=n(h),f=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments[2],s=arguments[3];i(this,e);var u=o(this,t.call(this,null,a));return u.resolution=s||c.default.RESOLUTION,u.width=r,u.height=n,u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==a?a:c.default.SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return a(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(l.default);r.default=f},{"../settings":98,"./BaseTexture":108}],108:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)},l=t("../utils"),h=t("../settings"),c=n(h),f=t("eventemitter3"),d=n(f),p=t("../utils/determineCrossOrigin"),y=n(p),v=t("bit-twiddle"),m=n(v),g=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this));return s.uid=(0,l.uid)(),s.touched=0,s.resolution=a||c.default.RESOLUTION,s.width=100,s.height=100,s.realWidth=100,s.realHeight=100,s.scaleMode=void 0!==n?n:c.default.SCALE_MODE,s.hasLoaded=!1,s.isLoading=!1,s.source=null,s.origSource=null,s.imageType=null,s.sourceScale=1,s.premultipliedAlpha=!0,s.imageUrl=null,s.isPowerOfTwo=!1,s.mipmap=c.default.MIPMAP_TEXTURES,s.wrapMode=c.default.WRAP_MODE,s._glTextures={},s._enabled=0,s._virtalBoundId=-1,r&&s.loadSource(r),s}return a(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this,r=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,r&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!t.getContext){var i=function(){e.isLoading=!0;var n=e;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading)return n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType?void n._loadSvgSource():void n.emit("loaded",n)},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return n._loadSvgSource(),{v:void 0};e.isLoading=!1,t.width&&t.height?(e._sourceLoaded(),r&&e.emit("loaded",e)):r&&e.emit("error",e)}}();if("object"===("undefined"==typeof i?"undefined":u(i)))return i.v}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,l.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(e=(0,l.getUrlFileExtension)("."+r),!e)throw new Error("Invalid image type in data URI.")}else e=(0,l.getUrlFileExtension)(this.imageUrl),e||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,l.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var e=(0,l.getSvgSize)(t),r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var i=document.createElement("canvas");i.width=this.realWidth,i.height=this.realHeight,i._pixiId="canvas_"+(0,l.uid)(),i.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=i,l.BaseTextureCache[i._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete l.BaseTextureCache[this.imageUrl],delete l.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete l.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,r,n,i){var o=l.BaseTextureCache[t];if(!o){var a=new Image;void 0===r&&0!==t.indexOf("data:")&&(a.crossOrigin=(0,y.default)(t)),o=new e(a,n),o.imageUrl=t,i&&(o.sourceScale=i),o.resolution=(0,l.getResolutionOfUrl)(t),a.src=t,l.BaseTextureCache[t]=o}return o},e.fromCanvas=function(t,r){t._pixiId||(t._pixiId="canvas_"+(0,l.uid)());var n=l.BaseTextureCache[t._pixiId];return n||(n=new e(t,r),l.BaseTextureCache[t._pixiId]=n),n},e}(d.default);r.default=g},{"../settings":98,"../utils":119,"../utils/determineCrossOrigin":118,"bit-twiddle":1,eventemitter3:4}],109:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("./BaseRenderTexture"),l=n(u),h=t("./Texture"),c=n(h),f=function(t){function e(r,n){i(this,e);var a=null;if(!(r instanceof l.default)){var s=arguments[1],u=arguments[2],h=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+u+") instead of the ctor directly."),a=arguments[0],n=null,r=new l.default(s,u,h,c)}var f=o(this,t.call(this,r,n));return f.legacyRenderer=a,f.valid=!0,f._updateUvs(),f}return a(e,t),e.prototype.resize=function(t,e,r){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,r,n,i){return new e(new l.default(t,r,n,i))},e}(c.default);r.default=f},{"./BaseRenderTexture":107,"./Texture":111}],110:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("../"),a=t("../utils"),s=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.data=r,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,a.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],s=this._frames[i].frame;if(s){var u=null,l=null,h=new o.Rectangle(0,0,this._frames[i].sourceSize.w/this.resolution,this._frames[i].sourceSize.h/this.resolution);u=this._frames[i].rotated?new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.h/this.resolution,s.w/this.resolution):new o.Rectangle(s.x/this.resolution,s.y/this.resolution,s.w/this.resolution,s.h/this.resolution),this._frames[i].trimmed&&(l=new o.Rectangle(this._frames[i].spriteSourceSize.x/this.resolution,this._frames[i].spriteSourceSize.y/this.resolution,s.w/this.resolution,s.h/this.resolution)),this.textures[i]=new o.Texture(this.baseTexture,u,h,l,this._frames[i].rotated?2:0),a.TextureCache[i]=this.textures[i]}r++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();r.default=s},{"../":62,"../utils":119}],111:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("./BaseTexture"),h=n(l),c=t("./VideoBaseTexture"),f=n(c),d=t("./TextureUvs"),p=n(d),y=t("eventemitter3"),v=n(y),m=t("../math"),g=t("../utils"),b=function(t){function e(r,n,a,s,u){i(this,e);var l=o(this,t.call(this));if(l.noFrame=!1,n||(l.noFrame=!0,n=new m.Rectangle(0,0,1,1)),r instanceof e&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=s,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=a||n,l._rotate=Number(u||0),u===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(l.noFrame&&(n=new m.Rectangle(0,0,r.width,r.height),r.on("update",l.onBaseTextureUpdated,l)),l.frame=n):r.once("loaded",l.onBaseTextureLoaded,l),l._updateID=0,l.transform=null,l}return a(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new m.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(g.TextureCache[this.baseTexture.imageUrl]&&delete g.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new p.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,r,n,i){var o=g.TextureCache[t];return o||(o=new e(h.default.fromImage(t,r,n,i)),g.TextureCache[t]=o),o},e.fromFrame=function(t){var e=g.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,r){return new e(h.default.fromCanvas(t,r))},e.fromVideo=function(t,r){return"string"==typeof t?e.fromVideoUrl(t,r):new e(f.default.fromVideo(t,r))},e.fromVideoUrl=function(t,r){return new e(f.default.fromUrl(t,r))},e.from=function(t){if("string"==typeof t){var r=g.TextureCache[t];if(!r){var n=null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return n?e.fromVideoUrl(t):e.fromImage(t)}return r}return t instanceof HTMLImageElement?new e(new h.default(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof h.default?new e(t):t},e.fromLoader=function(t,r,n){var i=new h.default(t,null,(0,g.getResolutionOfUrl)(r)),o=new e(i);return i.imageUrl=r,n||(n=r),g.BaseTextureCache[n]=i,g.TextureCache[n]=o,n!==r&&(g.BaseTextureCache[r]=i,g.TextureCache[r]=o),o},e.addTextureToCache=function(t,e){g.TextureCache[e]=t},e.removeTextureFromCache=function(t){var e=g.TextureCache[t];return delete g.TextureCache[t],delete g.BaseTextureCache[t],e},u(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" ")+("Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height));this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(v.default);r.default=b,b.EMPTY=new b(new h.default),b.EMPTY.destroy=function(){},b.EMPTY.on=function(){},b.EMPTY.once=function(){},b.EMPTY.emit=function(){}},{"../math":67,"../utils":119,"./BaseTexture":108,"./TextureUvs":112,"./VideoBaseTexture":113,eventemitter3:4}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../math/GroupD8"),a=n(o),s=function(){function t(){i(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,s=t.height/2/i,u=t.x/n+o,l=t.y/i+s;r=a.default.add(r,a.default.NW),this.x0=u+o*a.default.uX(r),this.y0=l+s*a.default.uY(r),r=a.default.add(r,2),this.x1=u+o*a.default.uX(r),this.y1=l+s*a.default.uY(r),r=a.default.add(r,2),this.x2=u+o*a.default.uX(r),this.y2=l+s*a.default.uY(r),r=a.default.add(r,2),this.x3=u+o*a.default.uX(r),this.y3=l+s*a.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();r.default=s},{"../math/GroupD8":63}],113:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":l(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":l(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=t("./BaseTexture"),f=i(c),d=t("../utils"),p=t("../ticker"),y=n(p),v=function(t){function e(r,n){if(o(this,e),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var i=a(this,t.call(this,r,n));return i.width=r.videoWidth,i.height=r.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),r.addEventListener("play",i._onPlayStart.bind(i)),
r.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(r.addEventListener("canplay",i._onCanPlay),r.addEventListener("canplaythrough",i._onCanPlay)),i}return s(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(y.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(y.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&y.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete d.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,r){t._pixiId||(t._pixiId="video_"+(0,d.uid)());var n=d.BaseTextureCache[t._pixiId];return n||(n=new e(t,r),d.BaseTextureCache[t._pixiId]=n),n},e.fromUrl=function(t,r){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var i=0;i<t.length;++i)n.appendChild(u(t[i].src||t[i],t[i].mime));else n.appendChild(u(t.src||t,t.mime));return n.load(),e.fromVideo(n,r)},h(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(y.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(y.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),e}(f.default);r.default=v,v.fromUrls=v.fromUrl},{"../ticker":115,"../utils":119,"./BaseTexture":108}],114:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../settings"),s=n(a),u=t("eventemitter3"),l=n(u),h="tick",c=function(){function t(){var e=this;i(this,t),this._emitter=new l.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(h,!0)&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(h,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){return this._emitter.on(h,t,e),this._startIfPossible(),this},t.prototype.addOnce=function(t,e){return this._emitter.once(h,t,e),this._startIfPossible(),this},t.prototype.remove=function(t,e){return this._emitter.off(h,t,e),this._emitter.listeners(h,!0)||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;t>this.lastTime?(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed,this._emitter.emit(h,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();r.default=c},{"../settings":98,eventemitter3:4}],115:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.Ticker=r.shared=void 0;var i=t("./Ticker"),o=n(i),a=new o.default;a.autoStart=!0,r.shared=a,r.Ticker=o.default},{"./Ticker":114}],116:[function(t,e,r){"use strict";function n(){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!t}r.__esModule=!0,r.default=n},{}],117:[function(t,e,r){"use strict";function n(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}r.__esModule=!0,r.default=n},{}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t,t=a.default.parse(s.href);var r=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"}r.__esModule=!0,r.default=i;var o=t("url"),a=n(o),s=void 0},{url:38}],119:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(){return++P}function a(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function l(t,e){var r=_.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}function h(t){var e=g.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function c(t){var e=g.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function f(t){var e=g.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}function d(){R=!0}function p(t){if(!R){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+g.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+g.VERSION+" - "+t+" - http://www.pixijs.com/");R=!0}}function y(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function m(t,e,r){var n=t.length;if(!(e>=n||0===r)){r=e+r>n?n-e:r;for(var i=n-r,o=e;o<i;++o)t[o]=t[o+r];t.length=i}}r.__esModule=!0,r.BaseTextureCache=r.TextureCache=r.mixins=r.pluginTarget=r.EventEmitter=r.isMobile=void 0,r.uid=o,r.hex2rgb=a,r.hex2string=s,r.rgb2hex=u,r.getResolutionOfUrl=l,r.decomposeDataUri=h,r.getUrlFileExtension=c,r.getSvgSize=f,r.skipHello=d,r.sayHello=p,r.isWebGLSupported=y,r.sign=v,r.removeItems=m;var g=t("../const"),b=t("../settings"),_=i(b),x=t("eventemitter3"),T=i(x),w=t("./pluginTarget"),S=i(w),C=t("./mixin"),E=n(C),O=t("ismobilejs"),M=n(O),P=0,R=!1;r.isMobile=M,r.EventEmitter=T.default,r.pluginTarget=S.default,r.mixins=E;r.TextureCache={},r.BaseTextureCache={}},{"../const":43,"../settings":98,"./mixin":121,"./pluginTarget":122,eventemitter3:4,ismobilejs:5}],120:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return a.default.tablet||a.default.phone?4:t}r.__esModule=!0,r.default=i;var o=t("ismobilejs"),a=n(o)},{ismobilejs:5}],121:[function(t,e,r){"use strict";function n(t,e){if(t&&e)for(var r=Object.keys(e),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}function i(t,e){a.push(t,e)}function o(){for(var t=0;t<a.length;t+=2)n(a[t],a[t+1]);a.length=0}r.__esModule=!0,r.mixin=n,r.delayMixin=i,r.performMixins=o;var a=[]},{}],122:[function(t,e,r){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}r.__esModule=!0,r.default={mixin:function(t){n(t)}}},{}],123:[function(t,e,r){"use strict";function n(t){var e=t.width,r=t.height,n=t.getContext("2d"),i=n.getImageData(0,0,e,r),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=void 0,l=void 0,h=void 0;for(u=0;u<a;u+=4)0!==o[u+3]&&(l=u/4%e,h=~~(u/4/e),null===s.top&&(s.top=h),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));e=s.right-s.left,r=s.bottom-s.top+1;var c=n.getImageData(s.left,s.top,e,r);return{height:r,width:e,data:c}}r.__esModule=!0,r.default=n},{}],124:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../core"),a=n(o),s=t("../mesh"),u=n(s),l=a.Texture,h=a.Sprite,c=u.Rope,f=u.Plane,d=function(){function t(e,r){i(this,t),this.initAnimation(e,r)}return t.prototype.initAnimation=function(t,e){this.timeScale=1,this.loop=!0,this.onComplete=null,this.completeIndex=0,this.onFrameChange=null,this.currentTime=0,this.playing=!1,this.skipFrame=!1,this.currentIndex=-1,this.currentFrame=null,this.currentTexture=null,this.frameCount=0,this._minIndex=-1,this._maxIndex=-1,this.duration=e||0,this._frames=[],this.setFrames(t)},t.prototype.play=function(){this.playing=!0},t.prototype.pause=function(){this.playing=!1},t.prototype.resume=function(){this.playing=!0},t.prototype.stop=function(){this.gotoAndStop(0)},t.prototype.gotoAndPlay=function(t){t!==this.currentIndex&&this.changeFrame(t),this.currentTime=this.currentFrame._startTime,this.play()},t.prototype.gotoAndStop=function(t){this.pause(),t!==this.currentIndex&&this.changeFrame(t),this.currentTime=this.currentFrame._startTime},t.prototype.update=function(t){if(this.playing){var e=this.timeScale*t;this.currentTime+=e,this.updateByTime(this.currentTime,this.skipFrame)}},t.prototype.updateByTime=function(t,e){var r=this.duration,n=this._frames,i=this.currentIndex,o=i,a=void 0,s=!1;do if(a=n[i],t<a._startTime){if(i===this._minIndex){if(this.loop===!0||--this.loop>0){t+=r,i=this._maxIndex;continue}s=!0;break}i--}else{if(t<a._endTime)break;if(i===this._maxIndex){if(this.loop===!0||--this.loop>0){t-=r,i=this._minIndex;continue}s=!0;break}i++}while(e);return this.currentTime=t,s?(this.playing=!1,o!==this.completeIndex&&(this.changeFrame(this.completeIndex),this.currentTime=this.currentFrame._startTime),void(this.onComplete&&this.onComplete())):void(o!==i&&this.changeFrame(i))},t.prototype.changeFrame=function(t){this.currentIndex=t;var e=this.currentFrame=this._frames[t];if(this.currentTexture=e.texture,e.pivot){var r=e.pivot;this._host.transform.pivot.set(r[0],r[1])}this.updateTexture(),this.onFrameChange&&this.onFrameChange(t,e)},t.prototype.updateTexture=function(){this._host._textureID=-1,this._host._texture=this.currentTexture,this._host._onTextureUpdate()},t.prototype.getFrames=function(){return this._frames},t.prototype.setFrames=function(t){if(this.playing=!1,this._frames.length=0,this.currentTime=0,this.currentIndex=-1,this.currentFrame=null,this.currentTexture=null,!t)return this.frameCount=0,this.completeIndex=0,this.firstTexure=null,this._minIndex=-1,void(this._maxIndex=-1);var e=this.frameCount=t.length;this._minIndex=0,this._maxIndex=e-1,this.completeIndex=this._maxIndex;for(var r=this.duration/e,n=t[0]instanceof l,i=0,o=0,a=void 0,s=0;s<e;s++)a=n?{texture:t[s]}:t[s],this._frames.push(a),a.duration=a.duration||r,a.pivot=a.pivot||null,a._startTime=i,a._endTime=o+=a.duration,i=o;(!this.duration||this.duration<o)&&(this.duration=o),this.firstTexure=this._frames[0].texture},t.prototype.getHost=function(){return this._host},t.prototype.bind=function(t,e){this.unbind(),this._host=t,this._bindName=e||"anim",this._host[this._bindName]=this,this.changeFrame(this._minIndex)},t.prototype.unbind=function(){this._host&&(delete this._host[this._bindName],this._host=null)},t.prototype.destroy=function(){this.unbind(),this.setFrames(null),this._frames=null,Function.prototype.destroy.call(this)},t.applyTo=function(e){var r=["play","pause","resume","stop","gotoAndPlay","gotoAndStop","update","updateByTime","changeFrame","updateTexture","getHost","getFrames","setFrames","onFrameChange","onComplete"];r.forEach(function(r){e[r]=t.prototype[r]}),e._initAnimation=t.prototype.initAnimation,e.initAnimation=function(t,e){this._initAnimation(t,e),this._host=this,this._bindName="_anim",this.changeFrame(this._minIndex)}},t.createSprite=function(e,r){var n=new h(l.EMPTY);return t.applyTo(n),n.initAnimation(e,r),n},t.createMeshRope=function(e,r,n){var i=new c(l.EMPTY,n);return t.applyTo(i),i.initAnimation(e,r),i},t.createMeshPlane=function(e,r,n,i){var o=new f(l.EMPTY,n,i);return t.applyTo(o),o.initAnimation(e,r),o},t}();r.default=d},{"../core":62,"../mesh":208}],125:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../core"),l=n(u),h=l.Texture,c=l.Rectangle,f=l.utils.TextureCache,d=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.renderWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._mask||this._filters?this.renderAdvancedWebGL(t):this._renderWebGL(t))},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t),t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype.renderCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),this._mask&&t.maskManager.popMask(t))},e.prototype.calculateBounds=function(){this._bounds.clear();var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)),this._boundsID=this._lastBoundsID},e.prototype.getLocalBounds=function(t){return this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new c),t=this._localBoundsRect),this._bounds.getRectangle(t)},e.from=function(t){return new e(h.from(t))},e.fromFrame=function(t){var r=f[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,n){return new e(h.fromImage(t,r,n))},e}(l.Sprite);r.default=d},{"../core":62}],126:[function(t,e,r){"use strict";r.__esModule=!0;var n={};r.default=n,n.create=function(t,e,r,n,i,o,a,s,u,l){return l=l||new Float32Array(9),l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l[8]=u,l},n.multiply=function(t,e,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=e[0],d=e[1],p=e[2],y=e[3],v=e[4],m=e[5],g=e[6],b=e[7],_=e[8];return r[0]=f*n+d*a+p*l,r[1]=f*i+d*s+p*h,r[2]=f*o+d*u+p*c,r[3]=y*n+v*a+m*l,r[4]=y*i+v*s+m*h,r[5]=y*o+v*u+m*c,r[6]=g*n+b*a+_*l,r[7]=g*i+b*s+_*h,r[8]=g*o+b*u+_*c,r},n.squareToQuadrilateral=function(t,e,r,i,o,a,s,u,l){var h=t-r+o-s,c=e-i+a-u;if(0===h&&0===c)l=n.create(r-t,i-e,0,o-r,a-i,0,t,e,1,l);else{var f=r-o,d=i-a,p=s-o,y=u-a,v=f*y-p*d,m=(h*y-p*c)/v,g=(f*c-h*d)/v;l=n.create(r-t+m*r,i-e+m*i,m,s-t+g*s,u-e+g*u,g,t,e,1,l)}return l},n.quadrilateralToSquare=function(t,e,r,i,o,a,s,u,l){l=n.squareToQuadrilateral(t,e,r,i,o,a,s,u,l);var h=l[0],c=l[1],f=l[2],d=l[3],p=l[4],y=l[5],v=l[6],m=l[7],g=p-m*y,b=v*y-d,_=d*m-v*p,x=m*f-c,T=h-v*f,w=v*c-h*m,S=c*y-p*f,C=d*f-h*y,E=h*p-d*c,O=h*g+d*x+v*S;return l[0]=g/O,l[1]=x/O,l[2]=S/O,l[3]=b/O,l[4]=T/O,l[5]=C/O,l[6]=_/O,l[7]=w/O,l[8]=E/O,l},n.perspective=function(t,e,r){var i=n.quadrilateralToSquare(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),o=n.squareToQuadrilateral(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);return r=r||new Float32Array(9),n.multiply(i,o,r),r},n.perspectiveTransfromPoint=function(t,e,r){var n=e*t[0]+r*t[1]+t[2],i=e*t[3]+r*t[4]+t[5],o=e*t[6]+r*t[7]+t[8];return[n/o,i/o]},n.adjoint=function(t,e){e=e||new Float32Array(9);var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],h=t[8];return e[0]=a*h-s*l,e[1]=i*l-n*h,e[2]=n*s-i*a,e[3]=s*u-o*h,e[4]=r*h-i*u,e[5]=i*o-r*s,e[6]=o*l-a*u,e[7]=n*u-r*l,e[8]=r*a-n*o,e},n.invert=function(t,e){e=e||new Float32Array(9);var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],h=t[8],c=h*a-s*l,f=-h*o+s*u,d=l*o-a*u,p=r*c+n*f+i*d;return p?(p=1/p,e[0]=c*p,e[1]=(-h*n+i*l)*p,e[2]=(s*n-i*a)*p,e[3]=f*p,e[4]=(h*r-i*u)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-l*r+n*u)*p,e[8]=(a*r-n*o)*p,e):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}},{}],127:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core"),s=n(a),u=t("../mesh"),l=n(u),h=t("../particles"),c=n(h),f=t("../core/const"),d=s.BaseTexture,p=s.Texture,y=s.Container,v=s.Sprite,m=s.Graphics,g=s.Rectangle,b=s.Text,_=c.ParticleContainer,x=function(){function t(e,r){i(this,t),this.renderer=e,this.root=r,this.canvas=e.view,this.webgl=e.type===f.RENDERER_TYPE.WEBGL,this.renderCore=this.webgl?this.renderCoreWebGL:this.renderCanvasCore,this.initBlendModes(),this.defaultTransform={x:0,y:0,scaleX:1,scaleY:1,rotation:0,alpha:1,originX:0,originY:0,lineWidth:1,strokeColor:0,fillColor:0},this.reset()}return t.prototype.initBlendModes=function(){this.blendModes={};for(var t in f.BLEND_MODES)this.blendModes[t]=f.BLEND_MODES[t],this.blendModes[t.toLowerCase()]=f.BLEND_MODES[t];this.blendModes.LIGHTER=f.BLEND_MODES.LIGHTEN,this.blendModes.lighter=f.BLEND_MODES.LIGHTEN,this.blendModes.DARKER=f.BLEND_MODES.DARKEN,this.blendModes.darker=f.BLEND_MODES.DARKEN},t.prototype.noop=function(){},t.prototype.reset=function(){this._renderCore=this.renderCore,this._lastRenderTexture=null,this._lastTransformSN=-1,this._transformSN=1,this.blend=null,this._lastBlend=null,this.mask=null,this.renderTexture=null,this.baseTexturePool=this.baseTexturePool||{},this.texturePool=this.texturePool||{},this.root=this.root||new y,this.maskContainer=new y,this.maskContainer.visible=!1,this.root.addChild(this.maskContainer),this.maskShape=new m,this.maskContainer.addChild(this.maskShape),this.globalContainer=new y,this.globalContainer.visible=!1,this.root.addChild(this.globalContainer),this.resetGlobalContainer(!1)},t.prototype.resize=function(t,e){var r=this;r.renderer.resize(t-1,e),setTimeout(function(){r.renderer.resize(t,e)},1)},t.prototype.colorRgb=function(t,e,r){return(t<<16)+(e<<8)+r},t.prototype.colorHex=function(t){return parseInt(t.substr(-6),16)},t.prototype.colroName=function(t){return t},t.prototype.begin=function(t){t&&this.clear(),this.mask=null,this.renderTexture=null;var e=this.renderer;return e.emit("prerender"),!e.gl||e.gl.isContextLost()?void(this.renderCore=this.noop):(this.renderCore=this._renderCore,e._nextTextureLocation=0,void e.currentRenderer.start())},t.prototype.clear=function(t){this.renderer.clear(t)},t.prototype.clearRenderTexture=function(t,e){this.renderer.clearRenderTexture(t,e)},t.prototype.renderCoreWebGL=function(t,e,r,n){null!==this.blend,void 0===e&&(e=this.renderTexture);var i=this.renderer,o=e!==this._lastRenderTexture;o&&!e&&i.currentRenderer.flush(),i.renderingToScreen=!e,e||(i._lastObjectRendered=t),o&&(i.bindRenderTexture(e,null),i.currentRenderer.start()),e&&r&&i._activeRenderTarget.clear(),n||t.updateTransformWithParent(!0),t.renderWebGL(i),this._lastRenderTexture=e},t.prototype.renderCoreCanvas=function(t,e,r,n){null!==this.blend;var i=this.renderer;i.view&&(n||t.updateTransformWithParent(),i.render(t,e,r,null,n))},t.prototype.flush=function(){this.renderer.currentRenderer.flush()},t.prototype.end=function(){var t=this.renderer;this.renderCore!==this.noop&&(t.currentRenderer.flush(),t.textureGC&&t.textureGC.update()),t.emit("postrender")},t.prototype.resetGlobalContainer=function(t){this.unlinkAllDisplayObjects(t),this.shape=new m,this.linkDisplayObject(this.shape),this.textSprite=new b(" "),this.linkDisplayObject(this.textSprite),this.transformStack=[],this.globalTransform={};for(var e in this.defaultTransform)this.globalTransform[e]=this.defaultTransform[e];this._lastAlpha=this.globalTransform.alpha,this.updateGlobalContainer(!0)},t.prototype.updateGlobalContainer=function(t){if(t===!0||this._lastTransformSN!==this._transformSN){this._lastTransformSN=this._transformSN;var e=this.globalTransform,r=this.globalContainer.transform;r.position.set(e.x+e.originX,e.y+e.originY),r.scale.set(e.scaleX,e.scaleY),r.rotation=e.rotation,this.globalContainer.alpha=e.alpha,this.globalContainer.updateTransformWithParent()}},t.prototype.updateRootContainer=function(){this.root.updateTransformWithParent(),this._transformSN++},t.prototype.linkDisplayObject=function(t,e){return(e||t._linkedContext!==!0)&&(this.globalContainer.addChild(t),t._linkedContext=!0),this},t.prototype.unlinkDisplayObject=function(t,e){return t._linkedContext!==!1&&(this.globalContainer.removeChild(t),t._linkedContext=!1,e&&t.destroy(e)),this},t.prototype.unlinkAllDisplayObjects=function(t){var e=this.globalContainer,r=e.removeChildren(0,e.children.length);if(t)for(var n=0;n<r.length;++n){var i=r[n];i._linkedContext=!1,i.destroy(t)}return this},t.prototype.save=function(){var t=this.globalTransform;this.transformStack.push({x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,alpha:t.alpha,originX:t.originX,originY:t.originY,lineWidth:t.lineWidth,strokeColor:t.strokeColor,fillColor:t.fillColor})},t.prototype.restore=function(){var t=this.transformStack.pop();if(t){var e=this.globalTransform;e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.rotation=t.rotation,e.alpha=t.alpha,e.originX=t.originX,e.originY=t.originY,e.blend=t.blend,e.lineWidth=t.lineWidth,e.strokeColor=t.strokeColor,e.fillColor=t.fillColor,this._transformSN++}},t.prototype.translate=function(t,e){this.globalTransform.x+=t,this.globalTransform.y+=e,this._transformSN++},t.prototype.scale=function(t,e){this.globalTransform.scaleX*=t,this.globalTransform.scaleY*=e,this._transformSN++},t.prototype.rotate=function(t){this.globalTransform.rotation+=t,this._transformSN++},t.prototype.setOrigin=function(t,e){this.globalTransform.originX=t,this.globalTransform.originY=e,this._transformSN++},t.prototype.getOrigin=function(){return{x:this.globalTransform.originX,y:this.globalTransform.originY}},t.prototype.getAlpha=function(){return this.globalTransform.alpha},t.prototype.setAlpha=function(t){this._lastAlpha=this.globalTransform.alpha,this.globalTransform.alpha=void 0===t?1:t,this._transformSN++},t.prototype.restoreAlpha=function(){this.globalTransform.alpha=this._lastAlpha,this._transformSN++},t.prototype.setBlendByName=function(t){this.setBlend(this.blendModes[t]||0)},t.prototype.getBlend=function(){return this.blend},t.prototype.setBlend=function(t){this._lastBlend=this.blend,this.blend=t},t.prototype.restoreBlend=function(){this.blend=this._lastBlend},t.prototype.updateClipRect=function(t,e,r,n){this.updateGlobalContainer();var i=this.globalTransform,o=t-i.originX,a=e-i.originY;this.maskShape.clear(),this.maskShape.updateTransform(),this.maskShape.beginFill(0),this.maskShape.drawRect(o,a,r,n),this.maskShape.endFill()},t.prototype.clipRect=function(t,e,r,n){this.updateClipRect(t,e,r,n),this.mask=this.maskShape},t.prototype.unclipRect=function(){this.mask=null},t.prototype.clearRect=function(t,e,r,n,i,o){var a=this.shape;a.clear(),a.beginFill(i||0,void 0!==o?o:0),this.drawShapeRect(a,t,e,r,n),a.endFill(),this.renderCore(a,void 0,!1,!1)},t.prototype.strokeRect=function(t,e,r,n,i,o){var a=this.shape;i=i||0===i?i:this.strokeStyle,o=o||this.lineWidth,a.clear(),a.lineStyle(o,i),this.drawShapeRect(a,t,e,r,n),this.renderCore(a,void 0,!1,!1)},t.prototype.fillRect=function(t,e,r,n,i){var o=this.shape;i=i||0===i?i:this.fillStyle,o.clear(),o.beginFill(i),this.drawShapeRect(o,t,e,r,n),o.endFill(),this.renderCore(o,void 0,!1,!1)},t.prototype.drawShapeRect=function(t,e,r,n,i){this.updateGlobalContainer();var o=this.globalTransform,a=e-o.originX,s=r-o.originY;t.mask=this.mask,t.drawRect(a,s,n,i)},t.prototype.strokeCircle=function(t,e,r,n,i){var o=this.shape;o.clear(),o.lineStyle(i,n),this.drawShapeCircle(o,t,e,r),this.renderCore(o,void 0,!1,!1)},t.prototype.fillCircle=function(t,e,r,n){var i=this.shape;i.clear(),i.beginFill(n),this.drawShapeCircle(i,t,e,r),i.endFill(),this.renderCore(i,void 0,!1,!1)},t.prototype.drawShapeCircle=function(t,e,r,n){this.updateGlobalContainer();var i=this.globalTransform,o=e-i.originX,a=r-i.originY;t.mask=this.mask,t.drawCircle(o,a,n)},t.prototype.strokeArc=function(t,e,r,n,i,o,a,s){var u=this.shape;u.clear(),u.lineStyle(s,a),this.drawShapeArc(u,t,e,r,n,i,o),this.renderCore(u,void 0,!1,!1)},t.prototype.fillArc=function(t,e,r,n,i,o,a){var s=this.shape;s.clear(),s.beginFill(a),this.drawShapeArc(s,t,e,r,n,i,o),s.endFill(),this.renderCore(s,void 0,!1,!1)},t.prototype.drawShapeArc=function(t,e,r,n,i,o,a){this.updateGlobalContainer();var s=this.globalTransform,u=e-s.originX,l=r-s.originY;t.mask=this.mask,t.arc(u,l,n,i,o,a)},t.prototype.strokeText=function(t,e,r,n,i,o){o=o||{},o.stroke=n||o.stroke,o.strokeThickness=i||o.strokeThickness,this.drawText(t,e,r,o,void 0,!1)},t.prototype.fillText=function(t,e,r,n,i){i=i||{},i.fill=n||i.fill,this.drawText(t,e,r,i,void 0,!1)},t.prototype.drawText=function(t,e,r,n,i,o){this.updateGlobalContainer();var a=this.globalTransform,s=e-a.originX,u=r-a.originY,l=this.textSprite;l.transform.position.set(s,u),l.text=t,l.style=n,l.mask=this.mask,this.renderCore(l,i,o,!1),this.renderer.flush()},t.prototype.drawDisplayObject=function(t,e,r,n,i){5===arguments.length?(t.width=n,t.height=i,this.renderAt(t,e,r)):this.renderAt(t,e,r)},t.prototype.drawDisplayObjectAt=function(t,e,r){this.renderAt(t,e,r)},t.prototype.drawImage=function(t,e,r,n,i,o,a,s,u){var l=arguments.length,h=void 0;9===l?(h=this.createSprite(t,e,r,n,i,!0),h.width=s,h.height=u,this.renderAt(h,o,a)):5===l?(h=this.createSprite(t,0,0,t.width,t.height,!0),h.width=n,h.height=i,this.renderAt(h,e,r)):(h=this.createSprite(t,0,0,t.width,t.height,!0),this.renderAt(h,e,r)),this.unlinkDisplayObject(h)},t.prototype.drawImageAt=function(t,e,r){var n=this.createSprite(t,0,0,t.width,t.height,!0);this.renderAt(n,e,r),this.unlinkDisplayObject(n)},t.prototype.render=function(t,e,r,n){this.updateGlobalContainer(),this.mask&&(t.mask=this.mask),this.renderCore(t,e,r,n)},t.prototype.renderAt=function(t,e,r,n,i,o){this.updateGlobalContainer();var a=this.globalTransform,s=e-a.originX,u=r-a.originY;t.transform.position.set(s,u),this.mask&&(t.mask=this.mask),this.renderCore(t,n,i,o)},t.prototype.renderPart=function(t,e,r,n,i,o,a,s){var u=t._texture._frame;u.x=e,u.y=r,u.width=n,u.height=i,t._texture._updateUvs(),this.updateGlobalContainer(),this.mask&&(t.mask=this.mask),this.renderCore(t,o,a,s)},t.prototype.renderPartAt=function(t,e,r,n,i,o,a,s,u,l){var h=t._texture._frame;h.x=e,h.y=r,h.width=n,h.height=i,t._texture._updateUvs(),this.updateGlobalContainer();var c=this.globalTransform,f=o-c.originX,d=a-c.originY;t.transform.position.set(f,d),this.mask&&(t.mask=this.mask),this.renderCore(t,s,u,l)},t.prototype.createBaseTexture=function(t){var e=t.id||t.src,r=void 0;return e?(r=this.baseTexturePool[e],r||(r=new d(t),this.baseTexturePool[e]=r)):r=new d(t),r},t.prototype.createTexture=function(t,e,r,n,i,o){var a=arguments.length,s=this.createBaseTexture(t),u=void 0;if(2===a&&(o=e),o&&(u=this.texturePool[o]))return u;var l=n&&i?new g(e,r,n,i):null;return u=new p(s,l),o&&(this.texturePool[o]=u),u},t.prototype.createSpriteByTexture=function(t,e){var r=v.from(t);return e&&(e===!0&&(e=this.globalContainer),e.addChild(r)),r},t.prototype.createSprite=function(t,e,r,n,i,o){var a=arguments.length,s=void 0,u=void 0;a>2?u=this.createTexture(t,e,r,n,i,s):(o=e,u=this.createTexture(t,s));var l=this.createSpriteByTexture(u,o);return l},t.prototype.createNineSliceObject=function(t,e,r,n,i,o,a,s,u,h){var c=arguments.length,f=void 0,d=void 0;c>=9?d=this.createTexture(t,e,r,n,i,f):(d=this.createTexture(t,f),6===c&&(h=o),o=e,a=r,s=n,u=i);var p=new l.NineSlicePlane(d,o,a,s,u);return h&&(h===!0&&(h=this.globalContainer),
h.addChild(p)),p},t.prototype.createTextObject=function(t,e){var r=t.canvas,n=p.fromCanvas(r);n.orig=new g,n.trim=new g;var i=v.from(n);return i.resolution=this.renderer.resolution,i.context=t,i.canvas=r,i.padding=0,i.updateSize=this._updateTextSize,i.updateContent=this._updateTextContent,e&&(e===!0&&(e=this.globalContainer),e.addChild(i)),i},t.prototype.createContainer=function(t){var e=new y;return t&&(t===!0&&(t=this.globalContainer),t.addChild(e)),e},t.prototype.createParticleContainer=function(t,e){t=t||{};var r=t.particleMaxSize,n=t.particleBatchSize,i=new _(r,t,n);return e&&(e===!0&&(e=this.globalContainer),e.addChild(i)),i},t.prototype.destroy=function(){this._lastRenderTexture=null,this.baseTexturePool=null,this.texturePool=null,this.renderer=null,this.canvas=null,this.root.destroy(!0)},t.prototype._updateTextContent=function(){var t=this._texture;this._textureID=-1,t.baseTexture.emit("update",t.baseTexture)},t.prototype._updateTextSize=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t._frame.width=this.canvas.width/this.resolution,t.trim.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=-this.padding,t.trim.y=-this.padding,t.orig.width=t._frame.width-2*this.padding,t.orig.height=t._frame.height-2*this.padding,this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture)},o(t,[{key:"globalAlpha",get:function(){return this.globalTransform.alpha},set:function(t){this.globalTransform.alpha=t}},{key:"lineWidth",get:function(){return this.globalTransform.lineWidth},set:function(t){this.globalTransform.lineWidth=t}},{key:"strokeStyle",get:function(){return this.globalTransform.strokeColor},set:function(t){this.globalTransform.strokeColor=t}},{key:"fillStyle",get:function(){return this.globalTransform.fillColor},set:function(t){this.globalTransform.fillColor=t}}]),t}();r.default=x},{"../core":62,"../core/const":43,"../mesh":208,"../particles":211}],128:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../core"),l=n(u),h=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.addChild=function(t){return t.parent=this,this.transform._parentID=-1,this.children.push(t),t},e.prototype.addChildAt=function(t,e){return t.parent=this,this.children.splice(e,0,t),t},e.prototype.swapChildren=function(t,e){var r=this.children.indexOf(t),n=this.children.indexOf(e);this.children[r]=e,this.children[n]=t},e.prototype.swapChildrenAt=function(t,e){var r=this.children[t],n=this.children[e];this.children[t]=n,this.children[e]=r},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.setChildIndex=function(t,e){var r=this.children.indexOf(t);this.children.splice(r,1),this.children.splice(e,0,t)},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return e===-1?null:(t.parent=null,this.children.splice(e,1),t)},e.prototype.removeChildAt=function(t){var e=this.children[t];return e&&(e.parent=null,this.children.splice(t,1)),e},e.prototype.removeChildWithIndex=function(t,e){return t.parent=null,this.children.splice(e,1),t},e.prototype.removeChildren=function(t,e){var r=t||0,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0,a=void 0;if(i>0&&i<=n){for(o=this.children.splice(r,i),a=0;a<o.length;++a)o[a].parent=null;return o}return 0===i&&0===this.children.length?[]:null},e}(l.Container);r.default=h},{"../core":62}],129:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../particles"),l=n(u),h=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.addChild=function(t){return t.parent=this,this.transform._parentID=-1,this.children.push(t),this.onChildrenChange(this.children.length-1),t},e.prototype.addChildAt=function(t,e){return t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t},e.prototype.swapChildren=function(t,e){var r=this.children.indexOf(t),n=this.children.indexOf(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)},e.prototype.swapChildrenAt=function(t,e){var r=this.children[t],n=this.children[e];this.children[t]=n,this.children[e]=r,this.onChildrenChange(t<e?t:e)},e.prototype.getChildIndex=function(t){return this.children.indexOf(t)},e.prototype.setChildIndex=function(t,e){var r=this.children.indexOf(t);this.children.splice(r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){return this.children[t]},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);return e===-1?null:(t.parent=null,this.children.splice(e,1),this.onChildrenChange(e),t)},e.prototype.removeChildAt=function(t){var e=this.children[t];return e&&(e.parent=null,this.children.splice(t,1),this.onChildrenChange(t)),e},e.prototype.removeChildWithIndex=function(t,e){return t.parent=null,this.children.splice(e,1),this.onChildrenChange(e),t},e.prototype.removeChildren=function(t,e){var r=t||0,n="number"==typeof e?e:this.children.length,i=n-r,o=void 0,a=void 0;if(i>0&&i<=n){for(o=this.children.splice(r,i),a=0;a<o.length;++a)o[a].parent=null;return this.onChildrenChange(t),o}return 0===i&&0===this.children.length?[]:null},e}(l.ParticleContainer);r.default=h},{"../particles":211}],130:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../core"),a=n(o),s=a.Container,u=a.Sprite,l=function(){function t(e){i(this,t),e=e||10,this.size=e,this.list=[],this.container=new s;for(var r=0;r<e;r++){var n=new u;this.container.addChild(n),this.list.push(n)}this.point=0,this.disabled=!1,this.tint=null,this.alpha=null}return t.prototype.reset=function(){this.point=0},t.prototype.takeSnapshot=function(t,e,r,n){if(this.disabled)return null;var i=void 0;return this.point===this.size?(this.point=this.size-1,i=this.list.shift(),this.list.push(i),this.container.children.shift(),this.container.addChild(i)):i=this.list[this.point],i.texture=t._texture,i.visible=!0,i.anchor.set(t.anchor.x,t.anchor.y),i.pivot.set(t.pivot.x,t.pivot.y),i.scale.set(t.scale.x,t.scale.y),i.position.set(t.position.x,t.position.y),i.rotation=t.rotation,e&&(i.alpha=e*t.alpha),r&&(i.tint=r),(n||0===n)&&(i.tintScale=n),this.point++,i},t.prototype.setParent=function(t){t.addChild(this.container)},t.prototype.remove=function(){this.container.remove()},t.prototype.update=function(t){if(!this.disabled&&this.updateSnapshot)for(var e=0;e<this.point;++e){var r=this.list[e];this.updateSnapshot(r,e,t)}},t}();r.default=l},{"../core":62}],131:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("./ExtractBrightnessFilter"),f=n(c),d=t("../../../filters/blur/BlurXFilter"),p=n(d),y=t("../../../filters/blur/BlurYFilter"),v=n(y),m=t("../../../filters/void/VoidFilter"),g=n(m),b=function(t){function e(r,n,i){o(this,e);var s=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main() {","    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","    vTextureCoord = aTextureCoord;","}"].join("\n"),u=["uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform sampler2D bloomTexture;","uniform float toneScale;","void main() {","    vec4 color = vec4(0.0);","    color  = texture2D(uSampler, vTextureCoord) * toneScale;","    color += texture2D(bloomTexture, vTextureCoord);","    gl_FragColor = color;","}"].join("\n"),l=a(this,t.call(this,s,u));return l._quality=0,l.sampleCount=r||9,l.minBright=n||.2,l.toneScale=i||.8,l.strength=8,l.quality=4,l.resolution=1,l.extractBrightnessFilter=new f.default(l.minBright),l.blurXFilter=new p.default(l.strength,l.quality,l.resolution,l.sampleCount),l.blurYFilter=new v.default(l.strength,l.quality,l.resolution,l.sampleCount),l.voidFilter=new g.default,l}return s(e,t),e.prototype.apply=function(t,e,r,n,i){var o=t.getRenderTarget(!0);this.extractBrightnessFilter.apply(t,e,o,!0,i);var a=t.getRenderTarget(!0);this.blurXFilter.apply(t,o,a,!0,i),this.blurYFilter.apply(t,a,o,!0,i),this.uniforms.toneScale=this.toneScale,this.uniforms.bloomTexture=o,t.applyFilter(this,e,r,n),t.returnRenderTarget(o),t.returnRenderTarget(a)},e}(h.Filter);r.default=b},{"../../../core":62,"../../../filters/blur/BlurXFilter":187,"../../../filters/blur/BlurYFilter":188,"../../../filters/void/VoidFilter":197,"./ExtractBrightnessFilter":133}],132:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../../core"),c=i(h),f=t("../../../core/const"),d=t("../../../filters/void/VoidFilter"),p=n(d),y=t("../../../filters/blur/BlurXFilter"),v=n(y),m=t("../../../filters/blur/BlurYFilter"),g=n(m),b=function(t){function e(r,n,i,s){o(this,e);var u=a(this,t.call(this));return u.sampleCount=r||9,u.strength=n||8,u.quality=i||4,u.resolution=s||1,u.defaultFilter=new p.default,u.blurXFilter=new v.default(u.strength,u.quality,u.resolution,u.sampleCount),u.blurYFilter=new g.default(u.strength,u.quality,u.resolution,u.sampleCount),u.blurYFilter.blendMode=f.BLEND_MODES.SCREEN,u}return s(e,t),e.prototype.apply=function(t,e,r,n,i){var o=t.getRenderTarget(!0);this.defaultFilter.apply(t,e,r,n,i),this.blurXFilter.apply(t,e,o,!0,i),this.blurYFilter.apply(t,o,r,!1,i),t.returnRenderTarget(o)},l(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}]),e}(c.Filter);r.default=b},{"../../../core":62,"../../../core/const":43,"../../../filters/blur/BlurXFilter":187,"../../../filters/blur/BlurYFilter":188,"../../../filters/void/VoidFilter":197}],133:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../../core"),l=n(u),h=function(t){function e(r){i(this,e);var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main() {","    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","    vTextureCoord = aTextureCoord;","}"].join("\n"),a=["uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform float minBright;","void main() {","    vec4 textureColor = texture2D(uSampler, vTextureCoord);","    vec3 color = max(vec3(0.0), textureColor.rgb - minBright);","    gl_FragColor = vec4(color, textureColor.a);","}"].join("\n"),s=o(this,t.call(this,n,a));return s.minBright=r,s}return a(e,t),e}(l.Filter);r.default=h},{"../../../core":62}],134:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./bloom/BloomFilter");Object.defineProperty(r,"BloomFilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./bloom/BloomBrightnessFilter");Object.defineProperty(r,"BloomBrightnessFilter",{enumerable:!0,get:function(){return n(o).default}});var a=t("./outline/OutlineFilter");Object.defineProperty(r,"OutlineFilter",{enumerable:!0,get:function(){return n(a).default}});var s=t("./shockwave/ShockwaveFilter");Object.defineProperty(r,"ShockwaveFilter",{enumerable:!0,get:function(){return n(s).default}});var u=t("./zoomblur/ZoomBlurFilter");Object.defineProperty(r,"ZoomBlurFilter",{enumerable:!0,get:function(){return n(u).default}});var l=t("./perspective/PerspectiveFilter");Object.defineProperty(r,"PerspectiveFilter",{enumerable:!0,get:function(){return n(l).default}});var h=t("./radialblur/RadialBlurXFilter");Object.defineProperty(r,"RadialBlurXFilter",{enumerable:!0,get:function(){return n(h).default}});var c=t("./radialblur/RadialBlurYFilter");Object.defineProperty(r,"RadialBlurYFilter",{enumerable:!0,get:function(){return n(c).default}});var f=t("./radialblur/RadialBlurFilter");Object.defineProperty(r,"RadialBlurFilter",{enumerable:!0,get:function(){return n(f).default}})},{"./bloom/BloomBrightnessFilter":131,"./bloom/BloomFilter":132,"./outline/OutlineFilter":135,"./perspective/PerspectiveFilter":136,"./radialblur/RadialBlurFilter":137,"./radialblur/RadialBlurXFilter":138,"./radialblur/RadialBlurYFilter":139,"./shockwave/ShockwaveFilter":142,"./zoomblur/ZoomBlurFilter":143}],135:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../../../core"),h=n(l),c=(t("path"),function(t){function e(r,n){i(this,e),r=r||1;var a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterArea;\nvec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\nvoid main(void) {\n    const float PI = 3.14159265358979323846264;\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 samplePos;\n    for (float angle = 0.; angle < PI * 2.; angle += %THICKNESS% ) {\n        samplePos = vec2(vTextureCoord.x + thickness * px.x * cos(angle), vTextureCoord.y + thickness * px.y * sin(angle));\n        curColor = texture2D(uSampler, samplePos);\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/%THICKNESS%/gi,(1/r).toFixed(7))));return a.uniforms.thickness=r,a.uniforms.outlineColor=new Float32Array([0,0,0,1]),n&&(a.color=n),a}return a(e,t),u(e,[{key:"color",get:function(){return h.utils.rgb2hex(this.uniforms.outlineColor)},set:function(t){h.utils.hex2rgb(t,this.uniforms.outlineColor)}}]),e}(h.Filter));r.default=c},{"../../../core":62,path:9}],136:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("../../Matrix3"),f=n(c),d=(t("path"),f.default),p=function(t){function e(r,n){o(this,e);var i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\n\n// uniform mat3 quadToSquareMatrix;\n// uniform mat3 squareToQuadMatrix;\nuniform mat3 perspectiveMatrix;\nuniform mat3 worldMatrix;\nuniform mat3 worldMatrixT;\n\nuniform float spriteScaleX;\nuniform float spriteScaleY;\nuniform float spriteWidth;\nuniform float spriteHeight;\n\nvoid main(void) {\n    mat3 proM3 = projectionMatrix;\n    mat3 worldM3 = worldMatrix;\n    mat3 worldM3T = worldMatrixT;\n    // mat3 perM3 = quadToSquareMatrix * squareToQuadMatrix;\n    mat3 perM3 = perspectiveMatrix;\n\n    mat4 proM4;\n    proM4[0]=vec4( proM3[0][0],  proM3[0][1],  0,  proM3[0][2] );\n    proM4[1]=vec4( proM3[1][0],  proM3[1][1],  0,  proM3[1][2] );\n    proM4[2]=vec4( 0,            0,            1,  0           );\n    proM4[3]=vec4( proM3[2][0],  proM3[2][1],  0,  proM3[2][2] );\n\n    mat4 perM4;\n    perM4[0]=vec4( perM3[0][0],  perM3[0][1],  0,  perM3[0][2] );\n    perM4[1]=vec4( perM3[1][0],  perM3[1][1],  0,  perM3[1][2] );\n    perM4[2]=vec4( 0,            0,            1,  0           );\n    perM4[3]=vec4( perM3[2][0],  perM3[2][1],  0,  perM3[2][2] );\n\n    mat4 worldM4;\n    worldM4[0]=vec4( worldM3[0][0],  worldM3[0][1],  0,  worldM3[0][2] );\n    worldM4[1]=vec4( worldM3[1][0],  worldM3[1][1],  0,  worldM3[1][2] );\n    worldM4[2]=vec4( 0,              0,              1,  0             );\n    worldM4[3]=vec4( worldM3[2][0],  worldM3[2][1],  0,  worldM3[2][2] );\n\n    float w = spriteWidth / spriteScaleX;\n    float h = spriteHeight / spriteScaleY;\n    float iW = 1.0 / w;\n    float iH = 1.0 / h;\n\n    mat3 normalM3;\n    normalM3[0]=vec3(iW,  0,  0 );\n    normalM3[1]=vec3(0,   iH, 0 );\n    normalM3[2]=vec3(0,   0,  1 );\n\n    vec3 normalPos = normalM3 * worldM3T * vec3(aVertexPosition, 1.0);\n\n    mat4 restoreM4;\n    restoreM4[0]=vec4(w,  0,  0,  0 );\n    restoreM4[1]=vec4(0,  h,  0,  0 );\n    restoreM4[2]=vec4(0,  0,  1,  0 );\n    restoreM4[3]=vec4(0,  0,  0,  1 );\n\n    gl_Position = proM4 * worldM4 * restoreM4 * perM4 *  vec4(normalPos.xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}\n",s="uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\nvoid main(void) {\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n}",u=a(this,t.call(this,i,s));return u.perspectiveMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),u.updateMatrix(r,n),u}return s(e,t),e.prototype.updateMatrix=function(t,e){if(t&&e){var r=d.quadrilateralToSquare(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),n=d.squareToQuadrilateral(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);d.multiply(r,n,this.perspectiveMatrix)}else t&&(e=t,d.squareToQuadrilateral(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],this.perspectiveMatrix))},e.prototype.apply=function(t,e,r,n,i){var o=i.target;this.uniforms.perspectiveMatrix=this.perspectiveMatrix,this.uniforms.worldMatrix=o.worldTransform.toArray(9),this.uniforms.worldMatrixT=d.invert(this.uniforms.worldMatrix,new Float32Array(9)),this.uniforms.spriteWidth=o.width,this.uniforms.spriteHeight=o.height,this.uniforms.spriteScaleX=o.scale.x,this.uniforms.spriteScaleY=o.scale.y,t.applyFilter(this,e,r,n)},e}(h.Filter);r.default=p},{"../../../core":62,"../../Matrix3":126,path:9}],137:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../../core"),c=i(h),f=t("./RadialBlurXFilter"),d=n(f),p=t("./RadialBlurYFilter"),y=n(p),v=function(t){function e(r,n,i,s){o(this,e);var u=a(this,t.call(this));return u.blurXFilter=new d.default(r,n,i,s),u.blurYFilter=new y.default(r,n,i,s),u.resolution=1,u.padding=0,u.resolution=i||1,u.quality=n||4,u.blur=r||8,u}return s(e,t),e.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},e.prototype.setCenter=function(t,e){this.blurXFilter.setCenter(t,e),this.blurYFilter.setCenter(t,e)},e.prototype.getCenter=function(){return this.blurXFilter._center},l(e,[{key:"minRadius",get:function(){return this.blurXFilter._minRadius},set:function(t){this.blurXFilter._minRadius=t,this.blurYFilter._minRadius=t}},{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(c.Filter);r.default=v},{"../../../core":62,"./RadialBlurXFilter":138,"./RadialBlurYFilter":139}],138:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../../core"),c=i(h),f=t("./generateRadialBlurVertSource"),d=n(f),p=t("./generateRadialBlurFragSource"),y=n(p),v=t("../../../filters/blur/getMaxBlurKernelSize"),m=n(v),g=function(t){function e(r,n,i,s,u){o(this,e),s=s||5,u=u!==!1;var l=(0,d.default)(s,u),h=(0,y.default)(s,u),c=a(this,t.call(this,l,h));return c.horizontal=u,c._center=[0,0],c._uCenterCoord=new Float32Array(2),c._minRadius=0,c._uMinRadius=0,c.resolution=i||1,c._quality=0,c.quality=n||4,c.strength=r||8,c.firstRun=!0,c}return s(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,m.default)(i);this.vertexSrc=(0,d.default)(o,this.horizontal),this.fragmentSrc=(0,y.default)(o,this.horizontal),this.firstRun=!1}var a=e.size.width,s=e.size.height,u=a/s;this.uniforms.aspect=u,this._uCenterCoord[0]=(this._center[0]+this.padding)/a,this._uCenterCoord[1]=(this._center[1]+this.padding)/a,this.uniforms.centerCoord=this._uCenterCoord;var l=this._minRadius/s;if(this.uniforms.minRadius=l,this.uniforms.strength=this.horizontal?1/a:1/s,this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var h=t.getRenderTarget(!0),c=e,f=h,p=0;p<this.passes-1;p++){t.applyFilter(this,c,f,!0);var v=f;f=c,c=v}t.applyFilter(this,c,r,n),t.returnRenderTarget(h)}},e.prototype.setCenter=function(t,e){this._center[0]=t,this._center[1]=e},e.prototype.getCenter=function(){return this._center},l(e,[{key:"minRadius",get:function(){return this._minRadius},set:function(t){this._minRadius=t}},{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(c.Filter);r.default=g},{"../../../core":62,"../../../filters/blur/getMaxBlurKernelSize":191,"./generateRadialBlurFragSource":140,"./generateRadialBlurVertSource":141}],139:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e;
}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("./RadialBlurXFilter"),l=n(u),h=function(t){function e(r,n,a,s){return i(this,e),o(this,t.call(this,r,n,a,s,!1))}return a(e,t),e}(l.default);r.default=h},{"./RadialBlurXFilter":138}],140:[function(t,e,r){"use strict";function n(t,e){var r=i[t],n=r.length,a=o,s="",u=void 0;u=e?"gl_FragColor += texture2D(uSampler, vTextureCoord + vec2( %sampleIndex% * disStrength, 0.0)) * %value%;":"gl_FragColor += texture2D(uSampler, vTextureCoord + vec2(0.0, %sampleIndex% * disStrength)) * %value%;";for(var l=void 0,h=0;h<t;h++){var c=u.replace("%index%",h);l=h,h>=n&&(l=t-h-1),c=c.replace("%value%",r[l]),c=c.replace("%sampleIndex%",h-(n-1)+".0"),s+=c,s+="\n"}return a=a.replace("%blur%",s)}r.__esModule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["uniform sampler2D uSampler;","varying vec2 vTextureCoord;","uniform float strength;","uniform vec2 centerCoord;","uniform float minRadius;","uniform float aspect;","void main(void)","{","  float dis = distance( vec2(vTextureCoord.x, vTextureCoord.y / aspect), centerCoord);","  float disStrength;","  if (dis < minRadius) {","    disStrength = 0.0;","  } else {","    disStrength = strength * (dis - minRadius) / 1.0;","  }","  gl_FragColor = vec4(0.0);","  %blur%","}"].join("\n")},{}],141:[function(t,e,r){"use strict";function n(t,e){return e?String(i):i}r.__esModule=!0,r.default=n;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void)","{","   gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n")},{}],142:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../../core"),l=n(u),h=function(t){function e(){i(this,e);var r="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",n="#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec2 uViewSize;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform float uTime;\nuniform float uDuration;\n\n// Amplitude Effect, Refraction, Width, Lighter;\nuniform vec4 uParams;\n\n// non-loop\nfloat time = uTime;\n// loop\n// float time = mod(uTime, uDuration);\n\nfloat timeRate = time / uDuration;\n\nfloat amplitude = uParams.x;\nfloat refraction = uParams.y;\nfloat waveWidth = uParams.z * 0.5 / uViewSize.y;\nfloat lighter = uParams.w;\n\nfloat speed = (uRadius + uParams.z) / uDuration;\nfloat currentRadius = time * speed / uViewSize.y;\n\nvoid main()\n{\n    vec2 texCoord = gl_FragCoord.xy / uViewSize.xy;\n    texCoord.y = 1.0 - texCoord.y;\n\n    vec2 uv = vTextureCoord;\n\n    vec2 center = uCenter.xy / uViewSize.xy;\n    float radius = uRadius / uViewSize.y;\n\n    vec2 dir = vec2(texCoord - center);\n    dir.x *= uViewSize.x / uViewSize.y;\n\n    float dist = length(dir);\n\n    if (dist > radius || dist < (currentRadius - waveWidth) || dist > (currentRadius + waveWidth))\n    {\n        gl_FragColor = texture2D(uSampler, uv);\n        return;\n    }\n\n    // float disFade = pow(1.0 - dist / radius, 0.8);\n    float disFade = 1.0 - dist / radius;\n\n    // from -1.0 to 1.0\n    float wave = (dist - currentRadius);\n    // wave = sin( PI * 0.5 * (dist - currentRadius));\n    // wave = sin(PI * dist * 0.5 - time * 1.0);\n\n    float wavePow = 1.0 - pow(abs(wave * amplitude), refraction);\n\n    float waveFinal = wave * wavePow;\n\n    vec2 waveDir = normalize(dir);\n    uv = uv + (waveDir * waveFinal) * disFade ;// * timeFade;\n    vec4 color = texture2D(uSampler, uv);\n\n    float light = ( lighter - 1.0) *  disFade + 1.0;\n\n    gl_FragColor =  vec4(color.rgb * light, color.a);\n\n}\n\n    // float disFade = pow(1.0 - dist / radius, 0.8);\n\n    // vec2 center = uCenter.xy / uViewSize.xy;\n    // float radius = uRadius / uViewSize.y;\n\n    // vec2 vector = vec2(texCoord - center);\n    // vector.x *= uViewSize.x / uViewSize.y;\n\n// float durationRate = pow(timeRate * 1.25, 0.8);\n// float timeFade = pow(1.0 - timeRate ,0.8);\n\n// if (dist < radius && timeRate <= 1.0 && dist < durationRate)\n// {\n//     float disFade = pow(1.0-dist/radius ,0.8);\n\n//     float wave = sin(PI * 1.0 * dist/radius - time * 20.0) * disFade * timeFade;\n//     float wavePow;\n\n//     // wave = (wave + 1.0) * 0.5 - 1.0;\n//     // wavePow = wave * wave;\n\n//     wavePow = 1.0 - pow(abs(wave), 0.5);\n\n//     wave = wavePow * wave ;\n\n//     dist = 1.0 + dist * uViewSize.y * 0.5;\n//     float damping = 1.0;//(1.0 + 0.002 * dist * dist);\n//     uv = uv - normalize(vector) * wave * disFade * timeFade;\n// }\n",a=o(this,t.call(this,r,n));return a._rendererSize=new Float32Array([0,0]),a.viewSize=null,a.radius=100,a.center=new Float32Array([0,0]),a.params=new Float32Array([10,.8,20,1]),a.duration=1,a.time=0,a}return a(e,t),e.prototype.apply=function(t,e,r,n){this.viewSize?this.uniforms.uViewSize=this.viewSize:(this._rendererSize[0]=t.renderer.width,this._rendererSize[1]=t.renderer.height,this.uniforms.uViewSize=this._rendererSize),this.uniforms.uRadius=this.radius,this.uniforms.uCenter=this.center,this.uniforms.uParams=this.params,this.uniforms.uDuration=this.duration,this.uniforms.uTime=this.time,t.applyFilter(this,e,r,n)},e.prototype.setRadius=function(t){this.radius=t},e.prototype.setDuration=function(t){this.duration=t},e.prototype.setTime=function(t){this.time=t},e.prototype.setCenter=function(t,e){this.center[0]=t,this.center[1]=e},e.prototype.setParams=function(t,e,r,n){this.params[0]=t,this.params[1]=e,this.params[2]=r,this.params[3]=n||1},e.prototype.setViewSize=function(t,e){return null===t?void(this.viewSize=null):(this.viewSize||(this.viewSize=new Float32Array(2)),this.viewSize[0]=t,void(this.viewSize[1]=e))},e}(l.Filter);r.default=h},{"../../../core":62}],143:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../../core"),l=n(u),h=function(t){function e(r,n,a){i(this,e);var s="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",u="#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uViewSize;\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uRadius;\nuniform float uMinRadius;\n\nfloat random(vec3 scale, float seed) {\n    /* use the fragment position for a different seed per-pixel */\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    vec2 texCoord = gl_FragCoord.xy / uViewSize.xy;\n    texCoord.y = 1.0 - texCoord.y;\n\n    vec2 center = uCenter.xy / uViewSize.xy;\n    vec2 dir = vec2(center - texCoord);\n    dir.x *= uViewSize.x / uViewSize.y;\n\n    float dist = length(dir);\n\n    float strength = uStrength;\n\n    /* randomize the lookup values to hide the fixed number of samples */\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    const float count = 32.0;\n    float countLimit = count;\n\n    float gradient = uRadius * 0.3;\n    float minGradient = uMinRadius * 0.3;\n\n    float radius = (uRadius - gradient * 0.5) / uViewSize.y;\n    float minRadius = (uMinRadius + minGradient * 0.5) / uViewSize.y;\n\n    float delta = 0.0;\n\n    float gap;\n    if (dist <  minRadius) {\n        delta = minRadius - dist;\n        gap = minGradient;\n    } else if (dist > radius) {\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / uViewSize.y;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    dir *= strength;\n\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    for (float t = 0.0; t < count; t++) {\n        float percent = (t + offset) / count;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        /* switch to pre-multiplied alpha to correctly blur transparent images */\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    gl_FragColor = color / total;\n\n    /* switch back from pre-multiplied alpha */\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",l=o(this,t.call(this,s,u));return l._rendererSize=new Float32Array([0,0]),l.viewSize=null,l.minRadius=0,l.radius=1e9,l.center=new Float32Array([r||0,n||0]),l.strength=0===a||a?a:.1,l}return a(e,t),e.prototype.apply=function(t,e,r,n){this.viewSize?this.uniforms.uViewSize=this.viewSize:(this._rendererSize[0]=t.renderer.width,this._rendererSize[1]=t.renderer.height,this.uniforms.uViewSize=this._rendererSize),this.uniforms.uMinRadius=this.minRadius,this.uniforms.uRadius=this.radius,this.uniforms.uCenter=this.center,this.uniforms.uStrength=this.strength,t.applyFilter(this,e,r,n)},e.prototype.setRadius=function(t){this.radius=t},e.prototype.setMinRadius=function(t){this.minRadius=t},e.prototype.setStrength=function(t){this.strength=t},e.prototype.setCenter=function(t,e){this.center[0]=t,this.center[1]=e},e.prototype.setViewSize=function(t,e){return null===t?void(this.viewSize=null):(this.viewSize||(this.viewSize=new Float32Array(2)),this.viewSize[0]=t,void(this.viewSize[1]=e))},e}(l.Filter);r.default=h},{"../../../core":62}],144:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.lights=r.renderers=r.filters=r.SpriteTrail=r.Animation=r.RenderContext=r.SimpleParticleContainer=r.SimpleContainer=r.LeafSprite=r.Matrix3=void 0;var o=t("./Matrix3");Object.defineProperty(r,"Matrix3",{enumerable:!0,get:function(){return i(o).default}});var a=t("./LeafSprite");Object.defineProperty(r,"LeafSprite",{enumerable:!0,get:function(){return i(a).default}});var s=t("./SimpleContainer");Object.defineProperty(r,"SimpleContainer",{enumerable:!0,get:function(){return i(s).default}});var u=t("./SimpleParticleContainer");Object.defineProperty(r,"SimpleParticleContainer",{enumerable:!0,get:function(){return i(u).default}});var l=t("./RenderContext");Object.defineProperty(r,"RenderContext",{enumerable:!0,get:function(){return i(l).default}});var h=t("./Animation");Object.defineProperty(r,"Animation",{enumerable:!0,get:function(){return i(h).default}});var c=t("./SpriteTrail");Object.defineProperty(r,"SpriteTrail",{enumerable:!0,get:function(){return i(c).default}});var f=t("./filters"),d=n(f),p=t("./renderers"),y=n(p),v=t("./renderers/light/lights"),m=n(v);t("./mixin"),t("./patch"),r.filters=d,r.renderers=y,r.lights=m},{"./Animation":124,"./LeafSprite":125,"./Matrix3":126,"./RenderContext":127,"./SimpleContainer":128,"./SimpleParticleContainer":129,"./SpriteTrail":130,"./filters":134,"./mixin":145,"./patch":157,"./renderers":159,"./renderers/light/lights":164}],145:[function(t,e,r){"use strict";t("./mixin-CanvasRenderer"),t("./mixin-WebGLRenderer"),t("./mixin-TransformStatic"),t("./mixin-Transform"),t("./mixin-Matrix"),t("./mixin-DisplayObject"),t("./mixin-Container"),t("./mixin-Sprite"),t("./mixin-AnimatedSprite"),t("./mixin-Text"),t("./mixin-utils")},{"./mixin-AnimatedSprite":146,"./mixin-CanvasRenderer":147,"./mixin-Container":148,"./mixin-DisplayObject":149,"./mixin-Matrix":150,"./mixin-Sprite":151,"./mixin-Text":152,"./mixin-Transform":153,"./mixin-TransformStatic":154,"./mixin-WebGLRenderer":155,"./mixin-utils":156}],146:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../extras"),o=n(i),a=o.AnimatedSprite;a.prototype.play=function(){this.playing=!0},a.prototype.stop=function(){this.playing=!1}},{"../../extras":184}],147:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.CanvasRenderer;a.prototype.renderBasic=function(){}},{"../../core":62}],148:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.Container;a.prototype.removeAllChildren=function(t){if(t)for(var e=this.children,r=0;r<e.length;++r)e[r].destroy(t);this.children.length=0,this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(0)},a.prototype.updateTransformWithParent=function(t){if(this._boundsID++,this.parent?(this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha):(this.transform.updateTransformAsOrphan(),this.worldAlpha=this.alpha),t===!0)for(var e=0,r=this.children.length;e<r;++e){var n=this.children[e];n.visible&&n.updateTransformWithParent(!0)}},a.prototype._removeChildAt=function(t,e){return this.children.splice(t,1),e.parent=null,this.onChildrenChange(t),e.emit("removed",this),e},a.prototype.renderWebGLChildren=function(t){for(var e=0,r=this.children.length;e<r;){var n=this.children[e];n._toRemove?(r--,this._removeChildAt(e,n)):(n.renderWebGL(t),e++)}},a.prototype.renderCanvasChildren=function(t){for(var e=0,r=this.children.length;e<r;){var n=this.children[e];n._toRemove?(r--,this._removeChildAt(e,n)):(n.renderCanvas(t),e++)}}},{"../../core":62}],149:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.DisplayObject;a.prototype.updateTransformWithParent=function(){this.parent?(this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha):(this.transform.updateTransformAsOrphan(),this.worldAlpha=this.alpha),this._bounds.updateID++},a.prototype.remove=function(){this._toRemove=!0,this.parent&&this.parent.removeChild(this)}},{"../../core":62}],150:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.Matrix;a.prototype.toArray16=function(t,e){return e||(e=new Float32Array(16)),t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=0,e[4]=this.c,e[5]=this.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=this.tx,e[13]=this.ty,e[14]=0,e[15]=1):(e[0]=this.a,e[1]=this.c,e[2]=0,e[3]=this.tx,e[4]=this.b,e[5]=this.d,e[6]=0,e[7]=this.ty,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1),e}},{"../../core":62}],151:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.Sprite;a.prototype.perspectivePoint=function(t,e,r,n,i){var o=e*t[0]+r*t[3]+t[6],a=e*t[1]+r*t[4]+t[7],s=e*t[2]+r*t[5]+t[8];return[n*o/s,i*a/s]}},{"../../core":62}],152:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.Sprite,s=o.Text;s.prototype.updateTextFast=function(t){var e=this._style,r=this._text;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var n=void 0,i=void 0;if(!this._linePositionX||t){var o=this.canvas.width,a=this.context.measureText(r).width+e.letterSpacing*(r.length-1);a+=2*e.padding+e.strokeThickness,e.dropShadow&&(a+=e.dropShadowDistance),n=e.strokeThickness/2+e.padding,"right"===e.align?n+=o-a:"center"===e.align&&(n+=(o-a)/2),this._linePositionX=n}else n=this._linePositionX;if(!this._linePositionY||t){var u=s.calculateFontProperties(this._font);i=e.strokeThickness/2+u.ascent+e.padding,this._linePositionY=i}else i=this._linePositionY;e.stroke&&e.strokeThickness&&this.drawLetterSpacing(r,n,i,!0),e.fill&&this.drawLetterSpacing(r,n,i),this._onTextureUpdate(),this._texture.baseTexture.emit("update",this._texture.baseTexture),this.dirtyFast=!1},s.prototype.setTextFast=function(t,e){t=String(t||" "),this._text!==t&&(this._text=t,this.dirtyFast=!0,this.dirtyFastRecompute=e)},s.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.dirty?this.updateText(!0):this.dirtyFast&&(this.updateTextFast(this.dirtyFastRecompute),this.dirtyFastRecompute=!1),a.prototype.renderWebGL.call(this,t)}},{"../../core":62}],153:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.Transform;a.prototype.updateTransformAsOrphan=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var e=this.worldTransform;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty,this._worldID++}},{"../../core":62}],154:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.TransformStatic;a.prototype.updateTransformAsOrphan=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID);var e=this.worldTransform;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty,this._worldID++}},{"../../core":62}],155:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.WebGLRenderer;a.prototype.renderBasic=function(){}},{"../../core":62}],156:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../../core"),o=n(i),a=o.utils,s=o.Texture,u=o.Sprite,l=o.BaseTexture,h=o.Rectangle;a.log=function(){window.console.log.apply(window.console,arguments)},a.createBaseTexture=function(t){return"string"==typeof t?l.fromImage(t):new l(t)},a.createTexture=function(t,e,r,n,i){var o=a.createBaseTexture(t),u=void 0;n&&i&&(u=new h(e,r,n,i));var l=new s(o,u);return l},a.createSprite=function(t,e,r,n,i){var o=a.createTexture(t,e,r,n,i),s=new u(o);return s},a.createAnimation=function(t,e,r){var n=o.Animation.createSprite(t,e);return n.loop=!!r,n}},{"../../core":62}],157:[function(t,e,r){"use strict"},{}],158:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../core"),l=n(u),h=l.Shader,c=l.Quad,f=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.gl=r.gl,n.textureLocation=0,n.useNormalVertices=!1,n.autoProject=!0,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl,e=this.shader=this.generateShader(t),r=this.quad=new c(t,this.renderer.state.attribState);r.initVao(e)},e.prototype.generateShader=function(t,e){var r=this.getVertexSrc(),n=this.getFragmentSrc(),i=new h(t,r,n);return i},e.prototype.render=function(t){if(t._texture._uvs){var e=this.renderer,r=this.shader,n=this.quad,i=t._texture.baseTexture,o=t.computedGeometry?t.computedGeometry.vertices:t.vertexData,a=t._texture._uvs,s=n.vertices,u=n.uvs;if(this.useNormalVertices)s[0]=0,s[1]=0,s[2]=1,s[3]=0,s[4]=1,s[5]=1,s[6]=0,s[7]=1;else for(var l=0;l<8;l++)s[l]=o[l];u[0]=a.x0,u[1]=a.y0,u[2]=a.x1,u[3]=a.y1,u[4]=a.x2,u[5]=a.y2,u[6]=a.x3,u[7]=a.y3,n.upload(),e.bindShader(this.shader,this.autoProject),e.bindVao(n.vao),r.uniforms.uAlpha=t.worldAlpha,this.updateShaderParameters(e,r,t),e.bindTexture(i,this.textureLocation),e.state.setBlendMode(t.blendMode),this.quad.vao.draw(e.gl.TRIANGLES,6,0)}},e.prototype.updateShaderParameters=function(t,e,r){},e.prototype.getVertexHeadSrc=function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform float uAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;"].join("\n")},e.prototype.getVertexSrc=function(){return[this.getVertexHeadSrc(),"void main(void) {","    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","    vAlpha = uAlpha;","    vTextureCoord = aTextureCoord;","}"].join("\n")},e.prototype.getFragmentHeadSrc=function(){return["uniform sampler2D uSampler;","varying vec2 vTextureCoord;","varying float vAlpha;"].join("\n")},e.prototype.getFragmentSrc=function(){return[this.getFragmentHeadSrc(),"void main(void) {","    gl_FragColor = texture2D(uSampler, vTextureCoord) * vAlpha;","}"].join("\n")},e}(l.ObjectRenderer);r.default=f},{"../../core":62}],159:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./light/LightSpriteRenderer");Object.defineProperty(r,"LightSpriteRenderer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./perspective/PerspectiveRenderer");Object.defineProperty(r,"PerspectiveRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./point/DisplayPoint");Object.defineProperty(r,"DisplayPoint",{enumerable:!0,get:function(){return n(a).default}});var s=t("./point/PointRenderer");Object.defineProperty(r,"PointRenderer",{enumerable:!0,get:function(){return n(s).default}});var u=t("./point/DisplayPointGroup");Object.defineProperty(r,"DisplayPointGroup",{enumerable:!0,get:function(){return n(u).default}});var l=t("./point/PointGroupRenderer");Object.defineProperty(r,"PointGroupRenderer",{enumerable:!0,get:function(){return n(l).default}});var h=t("./trail/TrailRenderer");Object.defineProperty(r,"TrailRenderer",{enumerable:!0,get:function(){return n(h).default}})},{"./light/LightSpriteRenderer":161,"./perspective/PerspectiveRenderer":168,"./point/DisplayPoint":169,"./point/DisplayPointGroup":170,"./point/PointGroupRenderer":171,"./point/PointRenderer":172,"./trail/TrailRenderer":173}],160:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),a=n(o),s=t("../../../core/utils/createIndicesForQuads"),u=n(s),l=function(){function t(e,r){i(this,t),this.gl=e,this.vertSize=6,this.vertByteSize=4*this.vertSize,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(24);for(var n=0;n<4;n++)this.interleaved[6*n]=this.vertices[2*n],this.interleaved[6*n+1]=this.vertices[2*n+1],this.interleaved[6*n+2]=this.uvs[2*n],this.interleaved[6*n+3]=this.uvs[2*n+1],this.interleaved[6*n+4]=this.uvs[2*n+8],this.interleaved[6*n+5]=this.uvs[2*n+1+8];this.indices=(0,u.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e,r)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,this.vertByteSize,8).addAttribute(this.vertexBuffer,t.attributes.aNormalTextureCoord,this.gl.FLOAT,!1,this.vertByteSize,16)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[6*t]=this.vertices[2*t],this.interleaved[6*t+1]=this.vertices[2*t+1],this.interleaved[6*t+2]=this.uvs[2*t],this.interleaved[6*t+3]=this.uvs[2*t+1],this.interleaved[6*t+4]=this.uvs[2*t+8],this.interleaved[6*t+5]=this.uvs[2*t+1+8];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();r.default=l},{"../../../core/utils/createIndicesForQuads":117,"pixi-gl-core":16}],161:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("./LightQuad"),f=n(c),d=t("./lights/light/Light"),p=n(d),y=h.WebGLRenderer,v=h.Texture,m=function(t){function e(){return o(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.quad=new f.default(this.gl,this.renderer.state.attribState),p.default.shaderCache={},this.contextChanged=!0},e.prototype.render=function(t){if(t._texture._uvs&&t.lights){var r=this.renderer,n=r.gl,i=t.lights,o=i.length,a=t.computedGeometry?t.computedGeometry.vertices:t.vertexData,s=t.diffuseTexture?t.diffuseTexture:t._texture,u=t.normalTexture?t.normalTexture:e.defaultNormalTexture,l=t.worldTransform.toArray(!0),h=s._uvs,c=u._uvs,f=r.bindTexture(s,1,!0),d=void 0;d=s.baseTexture===u.baseTexture?f:r.bindTexture(u,2,!0);for(var p=null,y=0;y<o;y++){var v=i[y];v.init(r,this.contextChanged);var m=v.shader;if(0===y){var g=this.quad,b=g.vertices,_=g.uvs;r.bindVao(null),g.initVao(m);for(var x=0;x<8;x++)b[x]=a[x];_[0]=h.x0,_[1]=h.y0,_[2]=h.x1,_[3]=h.y1,_[4]=h.x2,_[5]=h.y2,_[6]=h.x3,_[7]=h.y3,_[8]=c.x0,_[9]=c.y0,_[10]=c.x1,_[11]=c.y1,_[12]=c.x2,_[13]=c.y2,_[14]=c.x3,_[15]=c.y3,g.upload(),r.bindVao(g.vao)}p!==m&&(p=m,r.bindShader(m)),m.uniforms.uSampler=f,m.uniforms.uNormalSampler=d,m.uniforms.uWorldMatrix=l,m.uniforms.uFixedNormal=!!t.fixedNormal,v.syncShader(t),r.state.setBlendMode(v.blendMode),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}this.contextChanged=!1}},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.applyTo=function(t){t._bak_pluginName_LightSprite=t.pluginName,t._bak__texture_LightSprite=t._texture,t._bak_diffuseTexture_LightSprite=t.diffuseTexture,
t._bak__renderWebGL_LightSprite=t._renderWebGL,t.pluginName=e.pluginName,t.diffuseTexture=t.diffuseTexture||t._texture,t._renderWebGL=e.__renderWebGL_Sprite},e.unapplyTo=function(t){t._bak__renderWebGL_LightSprite&&(t.pluginName=t._bak_pluginName_LightSprite,t._texture=t._bak__texture_LightSprite,t.diffuseTexture=t._bak_diffuseTexture_LightSprite,t._renderWebGL=t._bak__renderWebGL_LightSprite,t._bak_pluginName_LightSprite=null,t._bak__texture_LightSprite=null,t._bak_diffuseTexture_LightSprite=null,t._bak__renderWebGL_LightSprite=null)},e.__renderWebGL_Sprite=function(t){var r=this;if(r.calculateVertices(),t.renderingDiffuses){var n=r.diffuseTexture||r._texture;return r._texture=n,t.setObjectRenderer(t.plugins.sprite),void t.plugins.sprite.render(r)}if(t.renderingNormals){var i=r.normalTexture||e.defaultNormalTexture;return r._texture=i,t.setObjectRenderer(t.plugins.sprite),void t.plugins.sprite.render(r)}t.setObjectRenderer(t.plugins.lightSprite),t.plugins.lightSprite.render(r)},e}(h.ObjectRenderer);r.default=m;var g=document.createElement("canvas"),b=g.getContext("2d");g.width=g.height=10,b.fillStyle="#8080FF",b.fillRect(0,0,g.width,g.height),m.defaultNormalTexture=v.from(g),m.pluginName="lightSprite",y.registerPlugin(m.pluginName,m)},{"../../../core":62,"./LightQuad":160,"./lights/light/Light":165}],162:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../light/Light"),l=n(u),h=t("../../../../../core/const"),c=function(t){function e(r){i(this,e),r=r||{};var n=o(this,t.call(this,r));return n.position.x=0,n.position.y=0,n.position.z=0,n.falloff=new Float32Array([1,0,0]),n.blendMode=h.BLEND_MODES.NORMAL,n.shaderName="ambientLightShader",n}return a(e,t),e.prototype.getVertexSource=function(){var t="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aNormalTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormalTextureCoord = aNormalTextureCoord;\n}\n";return t},e.prototype.getFragmentSource=function(){var t='#define GLSLIFY 1\nuniform sampler2D uSampler;\nuniform sampler2D uNormalSampler;\n\n// light color, has multiplied bright for intensity.\nuniform vec3 uLightColor;\n\n// light attenuation coefficients (constant, linear, quadratic)\nuniform vec3 uLightFalloff;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nuniform vec2 uViewSize;\n\nuniform mat3 uWorldMatrix;\nuniform bool uFixedNormal;\n\nvoid main(void)\n{\n\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // bail out early when diffuse has no data\n    if (diffuseColor.a == 0.0) {\n       discard;\n    }\n\n    vec4 normalColor = texture2D(uNormalSampler, vNormalTextureCoord);\n\n    // Red layer is X coords.\n    // normalColor.r = 1.0 - normalColor.r;\n\n    // Green layer is flipped Y coords.\n    normalColor.g = 1.0 - normalColor.g;\n\n    uViewSize;\n\n    // simplified lambert shading that makes assumptions for ambient color\n\n    // compute Distance\n    float D = 1.0;\n\n    // normalize vectors\n    vec3 N;\n    if (uFixedNormal) {\n        N = normalize(normalColor.xyz * 2.0 - 1.0);\n    } else {\n        vec3 normal3 = vec3(normalColor.xyz * 2.0 - 1.0);\n        N = normalize(vec3((uWorldMatrix * vec3(normal3.xy, 0.0)).xy , normal3.z));\n    }\n\n    vec3 L = vec3(1.0, 1.0, 1.0);\n\n    // pre-multiply light color with intensity\n    // then perform "N dot L" to determine our diffuse\n    vec3 diffuse = uLightColor * max(dot(N, L), 0.0);\n\n    vec3 finalColor = diffuseColor.rgb * diffuse;\n\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n';return t},e}(l.default);r.default=c},{"../../../../../core/const":43,"../light/Light":165}],163:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../light/LightWithAmbient"),l=n(u),h=function(t){function e(r){i(this,e),r=r||{};var n=o(this,t.call(this,r));return n.target=r.target||{x:0,y:0},"z"in n.target||(n.target.z=10),n.directionArray=new Float32Array(3),n.updateDirection(),n.shaderName="directionalLightShader",n}return a(e,t),e.prototype.getVertexSource=function(){var t="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aNormalTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormalTextureCoord = aNormalTextureCoord;\n}\n";return t},e.prototype.getFragmentSource=function(){var t='#define GLSLIFY 1\n// imports the common uniforms like samplers, and ambient/light color\nuniform sampler2D uSampler;\nuniform sampler2D uNormalSampler;\n\n// light color, has multiplied bright for intensity.\nuniform vec3 uLightColor;\n\n// light attenuation coefficients (constant, linear, quadratic)\nuniform vec3 uLightFalloff;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nuniform vec2 uViewSize;\n\nuniform mat3 uWorldMatrix;\nuniform bool uFixedNormal;\n\nuniform vec3 uAmbientColor;\nuniform vec3 uLightDirection;\n\nvoid main()\n{\n\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // bail out early when diffuse has no data\n    if (diffuseColor.a == 0.0) {\n       discard;\n    }\n\n    vec4 normalColor = texture2D(uNormalSampler, vNormalTextureCoord);\n\n    // Red layer is X coords.\n    // normalColor.r = 1.0 - normalColor.r;\n\n    // Green layer is flipped Y coords.\n    normalColor.g = 1.0 - normalColor.g;\n\n    // the directional vector of the light\n    vec3 lightVector = uLightDirection;\n\n    // correct for aspect ratio\n    lightVector.x *= uViewSize.x / uViewSize.y;\n\n    // compute Distance\n    // float D = length(lightVector);\n\n    // normalize vectors\n    vec3 N;\n    if (uFixedNormal) {\n        N = normalize(normalColor.xyz * 2.0 - 1.0);\n    } else {\n        vec3 normal3 = vec3(normalColor.xyz * 2.0 - 1.0);\n        N = normalize(vec3((uWorldMatrix * vec3(normal3.xy, 0.0)).xy , normal3.z));\n    }\n\n    vec3 L = normalize(lightVector);\n\n    // pre-multiply light color with intensity\n    // then perform "N dot L" to determine our diffuse\n    vec3 diffuse = uLightColor * max(dot(N, L), 0.0);\n\n    // calculate attenuation\n    float attenuation = 1.0;\n\n    // calculate final intesity and color, then combine\n    vec3 intensity = uAmbientColor + diffuse * attenuation;\n\n    vec3 finalColor = diffuseColor.rgb * intensity;\n\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n';return t},e.prototype.updateDirection=function(){var t=this.directionArray,e=this.target.x,r=this.target.y,n=this.target.z;t[0]=this.position.x-e,t[1]=this.position.y-r,t[2]=this.position.z-n},e.prototype.syncShader=function(e){t.prototype.syncShader.call(this,e),this.shader.uniforms.uLightDirection=this.directionArray},e}(l.default);r.default=h},{"../light/LightWithAmbient":166}],164:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./light/Light");Object.defineProperty(r,"Light",{enumerable:!0,get:function(){return n(i).default}});var o=t("./light/LightWithAmbient");Object.defineProperty(r,"LightWithAmbient",{enumerable:!0,get:function(){return n(o).default}});var a=t("./ambientLight/AmbientLight");Object.defineProperty(r,"AmbientLight",{enumerable:!0,get:function(){return n(a).default}});var s=t("./directionalLight/DirectionalLight");Object.defineProperty(r,"DirectionalLight",{enumerable:!0,get:function(){return n(s).default}});var u=t("./pointLight/PointLight");Object.defineProperty(r,"PointLight",{enumerable:!0,get:function(){return n(u).default}})},{"./ambientLight/AmbientLight":162,"./directionalLight/DirectionalLight":163,"./light/Light":165,"./light/LightWithAmbient":166,"./pointLight/PointLight":167}],165:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../../../../../core"),s=n(a),u=t("../../../../../core/const"),l=s.Shader,h=function(){function t(e){i(this,t),e=e||{},this.position=e.position||{x:0,y:0},"z"in this.position||(this.position.z=10),this.position.set=function(t,e,r){this.x=t,this.y=e,this.z=void 0!==r?r:this.z},this.positionArray=new Float32Array(3),this.falloff=new Float32Array(e.falloff||[.75,3,20]),this.colorArray=new Float32Array([0,0,0]),this._color=5592405,this._brightness=1,this._colorRgb=new Float32Array([.33,.33,.33]),"color"in e&&(this.color=e.color),"brightness"in e&&(this.brightness=e.brightness),this.invertRed=!1,"invertRed"in e&&(this.invertRed=e.invertRed),this.invertGreen=!1,"invertGreen"in e&&(this.invertGreen=e.invertGreen),this.precision="lowp","precision"in e&&(this.precision=e.precision),this.blendMode=u.BLEND_MODES.ADD,this.visible=!1,this.shaderName=null,this.needsUpdate=!0,this.inited=!1}return t.prototype.init=function(t,e){if(!this.inited||e){var r=t.gl;this.viewSize=new Float32Array([t.width,t.height]),this.shader=this.generateShader(r),this.inited=!0}},t.prototype.generateShader=function(e){var r=this.getVertexSource(),n=this.getFragmentSource();if(this.invertRed){var i="normalColor.r = 1.0 - normalColor.r;";n=n.replace("// "+i,i)}if(this.invertGreen){var o="normalColor.g = 1.0 - normalColor.g;";n=n.replace(o,"// "+o)}var a=r+"@"+n,s=t.shaderCache[a];return s||(t.shaderCache[a]=s,s=new l(e,r,n,this.precision,t.locationMapping)),s},t.prototype.getVertexSource=function(){},t.prototype.getFragmentSource=function(){},t.prototype.updateColor=function(){var t=this.colorArray,e=this._colorRgb,r=this._brightness;t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r},t.prototype.syncShader=function(){var t=this.shader;t.uniforms.uViewSize=this.viewSize,t.uniforms.uLightColor=this.colorArray,t.uniforms.uLightFalloff=this.falloff},o(t,[{key:"color",get:function(){return this._color},set:function(t){this._color=t,s.utils.hex2rgb(t||0,this._colorRgb),this.updateColor()}},{key:"brightness",get:function(){return this._brightness},set:function(t){this._brightness=t,this.updateColor()}}]),t}();r.default=h,h.shaderCache={},h.locationMapping={aVertexPosition:0,aTextureCoord:1,aNormalTextureCoord:2}},{"../../../../../core":62,"../../../../../core/const":43}],166:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../../../../core"),c=i(h),f=t("./Light"),d=n(f),p=t("../../../../../core/const"),y=function(t){function e(r){o(this,e),r=r||{};var n=a(this,t.call(this,r));return n.blendMode=p.BLEND_MODES.ADD,n.ambientColorArray=new Float32Array([0,0,0]),n._ambientColorRgb=new Float32Array([0,0,0]),n._ambientColor=null,n._ambientBrightness=1,"ambientColor"in r&&(n.ambientColor=r.ambientColor),"ambientBrightness"in r&&(n.ambientBrightness=r.ambientBrightness),n}return s(e,t),e.prototype.updateAmbientColor=function(){var t=this.ambientColorArray,e=this._ambientColorRgb,r=this._ambientBrightness;t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r},e.prototype.syncShader=function(){var t=this.shader;t.uniforms.uViewSize=this.viewSize,t.uniforms.uLightColor=this.colorArray,t.uniforms.uLightFalloff=this.falloff,t.uniforms.uAmbientColor=this.ambientColorArray},l(e,[{key:"ambientColor",get:function(){return this._ambientColor},set:function(t){this._ambientColor=t,c.utils.hex2rgb(t||0,this._ambientColorRgb),this.updateAmbientColor(),null===t?this.blendMode=p.BLEND_MODES.ADD:this.blendMode=p.BLEND_MODES.NORMAL}},{key:"ambientBrightness",get:function(){return this._ambientBrightness},set:function(t){this._ambientBrightness=t,this.updateAmbientColor()}}]),e}(d.default);r.default=y},{"../../../../../core":62,"../../../../../core/const":43,"./Light":165}],167:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../../../../core"),c=i(h),f=t("../light/LightWithAmbient"),d=n(f),p=function(t){function e(r){o(this,e),r=r||{};var n=a(this,t.call(this,r));return n.radius=r.radius||1/0,n.shaderName="pointLightShader",n}return s(e,t),e.prototype.getVertexSource=function(){var t="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aNormalTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nvarying float flippedY;\n\nvoid main(void) {\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormalTextureCoord = aNormalTextureCoord;\n\n    flippedY = projectionMatrix[1][1] < 0.0 ? 1.0 : 0.0;\n}\n";return t},e.prototype.getFragmentSource=function(){var t="#define GLSLIFY 1\n// imports the common uniforms like samplers, and ambient color\nuniform sampler2D uSampler;\nuniform sampler2D uNormalSampler;\n\n// light color, has multiplied bright for intensity.\nuniform vec3 uLightColor;\n\n// light attenuation coefficients (constant, linear, quadratic)\nuniform vec3 uLightFalloff;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vNormalTextureCoord;\n\nuniform vec2 uViewSize;\n\nuniform mat3 uWorldMatrix;\nuniform bool uFixedNormal;\n\nvarying float flippedY;\n\nuniform vec3 uAmbientColor;\nuniform vec3 uLightPosition;\nuniform float uLightRadius;\n\nvoid main()\n{\n\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // bail out early when diffuse has no data\n    if (diffuseColor.a == 0.0) {\n       discard;\n    }\n\n    vec4 normalColor = texture2D(uNormalSampler, vNormalTextureCoord);\n\n    // Red layer is X coords.\n    // normalColor.r = 1.0 - normalColor.r;\n\n    // Green layer is flipped Y coords.\n    normalColor.g = 1.0 - normalColor.g;\n\n    vec2 fragCoord = gl_FragCoord.xy / uViewSize;\n\n    if (flippedY > 0.0)\n    {\n        // FBOs positions are flipped.\n        fragCoord.y = 1.0 - fragCoord.y;\n    }\n\n    vec3 lightPosition = uLightPosition / vec3(uViewSize, uViewSize.y);\n    float lightRadius = uLightRadius / uViewSize.y;\n\n    // the directional vector of the light\n    vec3 lightVector = vec3(lightPosition.xy - fragCoord, lightPosition.z);\n\n    // correct for aspect ratio\n    lightVector.x *= uViewSize.x / uViewSize.y;\n\n    // compute Distance\n    float D = length(lightVector);\n\n    vec3 intensity = uAmbientColor;\n    // bail out early when pixel outside of light sphere\n    if (D <= lightRadius) {\n\n    // normalize vectors\n    vec3 N;\n    if (uFixedNormal) {\n        N = normalize(normalColor.xyz * 2.0 - 1.0);\n    } else {\n        vec3 normal3 = vec3(normalColor.xyz * 2.0 - 1.0);\n        N = normalize(vec3((uWorldMatrix * vec3(normal3.xy, 0.0)).xy , normal3.z));\n    }\n\n        vec3 L = normalize(lightVector);\n\n        // pre-multiply light color with intensity\n        // then perform N dot L to determine our diffuse\n        vec3 diffuse = uLightColor * max(dot(N, L), 0.0);\n\n        // calculate attenuation\n        float attenuation = 1.0 / (uLightFalloff.x + (uLightFalloff.y * D) + (uLightFalloff.z * D * D));\n\n        // calculate final intesity and color, then combine\n        intensity += diffuse * attenuation;\n    }\n\n    // TODO : roughness\n    // TODO : finalColor = ambient + diffuse + specular\n\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}";return t},e.prototype.syncShader=function(e){t.prototype.syncShader.call(this,e),this.positionArray[0]=this.position.x+(e.lightOffsetX||0),this.positionArray[1]=this.position.y+(e.lightOffsetY||0),this.positionArray[2]=this.position.z+(e.lightOffsetZ||0),this.shader.uniforms.uLightPosition=this.positionArray,this.shader.uniforms.uAmbientLightColor=this._ambientLightColorRgba,this.shader.uniforms.uLightRadius=this.radius},l(e,[{key:"ambientLightColor",get:function(){return this._ambientLightColor},set:function(t){this._ambientLightColor=t,c.utils.hex2rgb(t,this._ambientColorRgba)}},{key:"ambientLightBrightness",get:function(){return this._ambientLightColorRgba[3]},set:function(t){this._ambientLightColorRgba[3]=t}}]),e}(d.default);r.default=p},{"../../../../../core":62,"../light/LightWithAmbient":166}],168:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("../BaseSpriteShaderRenderer"),f=n(c),d=t("../../Matrix3"),p=n(d),y=(t("path"),p.default),v=h.WebGLRenderer,m=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.autoProject=!1,n.useNormalVertices=!0,n.uniforms={},n._defaultMat3=new Float32Array([1,0,0,0,1,0,0,0,1]),n.projectionMat4=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.worldMat4=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n}return s(e,t),e.prototype.updateShaderParameters=function(t,e,r){var n=t._activeRenderTarget.projectionMatrix;e.uniforms.projectionMatrix=n.toArray16(!0,this.projectionMat4),e.uniforms.worldMatrix=r.worldTransform.toArray16(!0,this.worldMat4),e.uniforms.perspectiveMatrix=r.perspectiveMatrix||this._defaultMat3},e.prototype.getVertexSrc=function(){var t="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n// uniform vec4 uColor;\nuniform float uAlpha;\n\nvarying vec2 vTextureCoord;\n// varying vec4 vColor;\nvarying float vAlpha;\n\nuniform mat4 projectionMatrix;\nuniform mat4 worldMatrix;\n\nuniform mat3 perspectiveMatrix;\n// uniform mat3 quadToSquareMatrix;\n// uniform mat3 squareToQuadMatrix;\n\n\nvoid main(void) {\n\n    mat4 perM4 = mat4(\n        perspectiveMatrix[0][0],  perspectiveMatrix[0][1],  0,  perspectiveMatrix[0][2],\n        perspectiveMatrix[1][0],  perspectiveMatrix[1][1],  0,  perspectiveMatrix[1][2],\n        0,            0,            1,  0,\n        perspectiveMatrix[2][0],  perspectiveMatrix[2][1],  0,  perspectiveMatrix[2][2]\n    );\n\n    // vColor = vec4(uColor.rgb * uColor.a, uColor.a);\n    vAlpha = uAlpha;\n\n    gl_Position = projectionMatrix * worldMatrix * perM4 * vec4(aVertexPosition.xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}\n";return t},e.prototype.getFragmentSrc=function(){var t="uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\nvarying float vAlpha;\n\nvoid main(void) {\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vAlpha;\n}";return t},e.applyTo=function(t){t._renderWebGLBakPerspectiveRenderer=t._renderWebGL,t._renderWebGL=e.__renderWebGLSprite,t._calculateBoundsBakPerspectiveRenderer=t._calculateBounds,t._calculateBounds=e.__calculateBoundsSprite,t.updatePerspective=e._updatePerspectiveSprite,t.calculatePerspectiveVertices=e._calculatePerspectiveVerticesSprite,t.perspectivePoint=e._perspectivePointSprite,t.perspectiveMatrix=new Float32Array(9),t._lastPerspectiveMatrixId=-1,t._perspectiveMatrixId=1},e.unapplyTo=function(t){t._perspectiveRendererBakRenderWebGL&&(t._renderWebGL=t._renderWebGLBakPerspectiveRenderer,t._renderWebGLBakPerspectiveRenderer=null,t._calculateBounds=t._perspectivePcalculateBoundsWebGL,t._perspectivePcalculateBoundsWebGL=null,t.updatePerspective=null,t.calculatePerspectiveVertices=null,t.perspectivePoint=null,t.perspectiveMatrix=null,t._lastPerspectiveMatrixId=null,t._perspectiveMatrixId=null)},e._updatePerspectiveSprite=function(t,e){var r=this;if(t&&e){var n=y.quadrilateralToSquare(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),i=y.squareToQuadrilateral(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);y.multiply(n,i,r.perspectiveMatrix)}else if(t){e=t;var o=r._anchor,a=r._texture.orig,s=a.width*o.x,u=a.height*o.y;y.squareToQuadrilateral(e[0]-s,e[1]-u,e[2]-s,e[3]-u,e[4]-s,e[5]-u,e[6]-s,e[7]-u,r.perspectiveMatrix)}return r._perspectiveMatrixId++,!0},e.__renderWebGLSprite=function(t){var e=this;e.calculateVertices(),t.setObjectRenderer(t.plugins.perspective),t.plugins.perspective.render(e)},e.__calculateBoundsSprite=function(){var t=this,e=t._texture.trim,r=t._texture.orig;if(t.perspectiveMatrix){var n=t.calculatePerspectiveVertices();return void(n!==!1&&t._bounds.addQuad(t.vertexPerspective))}!e||e.width===r.width&&e.height===r.height?(t.calculateVertices(),t._bounds.addQuad(t.vertexData)):(t.calculateTrimmedVertices(),t._bounds.addQuad(t.vertexTrimmedData))},e._calculatePerspectiveVerticesSprite=function(){var t=this;if(t._perspectiveMatrixId===t._lastPerspectiveMatrixId&&t._transformID===t.transform._worldID&&t._textureID===t._texture._updateID)return!1;t._lastPerspectiveMatrixId=t._perspectiveMatrixId;var e=t.perspectiveMatrix,r=t.vertexPerspective=t.vertexPerspective||new Float32Array(8),n=t.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,u=n.tx,l=n.ty,h=t._anchor,c=t._texture,f=c.orig,d=f.width*(1-h._x),p=f.width*-h._x,y=f.height*(1-h._y),v=f.height*-h._y,m=d-p,g=y-v,b=t.perspectivePoint(e,0,0,m,g,p,v),_=t.perspectivePoint(e,1,0,m,g,p,v),x=t.perspectivePoint(e,1,1,m,g,p,v),T=t.perspectivePoint(e,0,1,m,g,p,v);return r[0]=i*b[0]+a*b[1]+u,r[1]=s*b[1]+o*b[0]+l,r[2]=i*_[0]+a*_[1]+u,r[3]=s*_[1]+o*_[0]+l,r[4]=i*x[0]+a*x[1]+u,r[5]=s*x[1]+o*x[0]+l,r[6]=i*T[0]+a*T[1]+u,r[7]=s*T[1]+o*T[0]+l,!0},e._perspectivePointSprite=function(t,e,r,n,i,o,a){var s=e*t[0]+r*t[3]+t[6],u=e*t[1]+r*t[4]+t[7],l=e*t[2]+r*t[5]+t[8];return[n*s/l+o,i*u/l+a]},e}(f.default);r.default=m,v.registerPlugin("perspective",m)},{"../../../core":62,"../../Matrix3":126,"../BaseSpriteShaderRenderer":158,path:9}],169:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../../core"),l=n(u),h=l.DisplayObject,c=function(t){function e(r,n,a,s,u){i(this,e);var l=o(this,t.call(this));return l.disabled=!1,l.x=r,l.y=n,l.size=a||16,l.color=s||[1,1,1],l.alpha=u||1,l.pluginName="point",l}return a(e,t),e.prototype.updateTransformWithParent=function(){},e.prototype.updateTransform=function(){},e.prototype.renderWebGL=function(t){t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.color=null},e}(h);r.default=c},{"../../../core":62}],170:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../../../core"),h=n(l),c=h.DisplayObject,f=h.Point,d=function(t){function e(r,n,a){i(this,e);var s=o(this,t.call(this));return s.position=new f(0,0),s._ax=s.position.x,s._ay=s.position.y,s.color=r||[1,1,1],s._roundedInt=0,s.rounded=n||!1,s.points=a||[],s.pluginName="pointGroup",s}return a(e,t),e.prototype.addPoint=function(t){this.points.push(t)},e.prototype.clear=function(){this.points.length=0},e.prototype.updateTransformWithParent=function(){this.parent?(this._ax=this.position.x+this.parent.transform.tx,this._ay=this.position.y+this.parent.transform.ty):(this._ax=this.position.x,this._ay=this.position.y)},e.prototype.updateTransform=function(){this._ax=this.position.x,this._ay=this.position.y},e.prototype.renderWebGL=function(t){t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.color=null,this.points=null},u(e,[{key:"rounded",get:function(){return this._rounded},set:function(t){this._rounded=t,this._roundedInt=t?1:0}}]),e}(c);r.default=d},{"../../../core":62}],171:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){
return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("../../../core/settings"),f=n(c),d=t("pixi-gl-core"),p=n(d),y=t("bit-twiddle"),v=n(y),m=t("./PointRenderer"),g=n(m),b=h.WebGLRenderer,_=function(t){function e(){return o(this,e),a(this,t.apply(this,arguments))}return s(e,t),e.prototype.initSize=function(){this.vertSize=4,this.vertByteSize=4*this.vertSize},e.prototype.onContextChange=function(){var t=this.renderer.gl,e=this.shader=this.generateShader(t);this.indexBuffer=p.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var r=0;r<this.vaoMax;r++)this.vertexBuffers[r]=p.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[r]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[r],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[r],e.attributes.aSize,t.FLOAT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[r],e.attributes.aAlpha,t.FLOAT,!0,this.vertByteSize,12);this.vao=this.vaos[0],this.currentBlendMode=99999},e.prototype.render=function(t){this.currentGroup=t,this._ax=t._ax,this._ay=t._ay,this.shader.uniforms.uColor=t.color,this.shader.uniforms.uRounded=t._roundedInt,this.renderer.bindShader(this.shader),this.renderer.state.setBlendMode(this.blendMode);for(var e=t.points,r=e.length,n=0;n<r;){var i=e[n];i.disabled?n++:(this.points[this.currentIndex++]=i,this.currentIndex>=this.size&&this.flush(),n++)}},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer,e=this.shader,r=t.gl,n=v.default.nextPow2(this.currentIndex),i=v.default.log2(n),o=this.buffers[i],a=o.float32View,s=this.points,u=this.vertSize,l=0,h=void 0;for(h=0;h<this.currentIndex;++h){var c=s[h];a[l]=c.x+this._ax,a[l+1]=c.y+this._ay,a[l+2]=c.size,a[l+3]=c.alpha,l+=u}f.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(o.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=p.default.GLBuffer.createVertexBuffer(r,null,r.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aVertexPosition,r.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aSize,r.FLOAT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aAlpha,r.FLOAT,!0,this.vertByteSize,12)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(o.vertices,0,!1),this.vertexCount++),r.drawArrays(r.POINTS,0,this.currentIndex),this.currentIndex=0}},e.prototype.stop=function(){},e.prototype.getVertexSrc=function(){return["uniform mat3 projectionMatrix;","attribute vec2 aVertexPosition;","attribute float aSize;","attribute float aAlpha;","uniform vec3 uColor;","varying vec4 vColor;","void main() {","  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","  gl_PointSize = aSize;","  vColor = vec4(uColor * aAlpha , aAlpha);","}"].join("\n")},e.prototype.getFragmentSrc=function(){return["precision mediump float;","varying vec4 vColor;","uniform float uRounded;","void main() {","  if(uRounded == 1.0 && distance(gl_PointCoord, vec2(0.5, 0.5)) > 0.5) {","    discard;","  }","  gl_FragColor = vColor;","}"].join("\n")},e}(g.default);r.default=_,b.registerPlugin("pointGroup",_)},{"../../../core":62,"../../../core/settings":98,"./PointRenderer":172,"bit-twiddle":1,"pixi-gl-core":16}],172:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("../../../core/sprites/webgl/BatchBuffer"),f=n(c),d=t("../../../core/settings"),p=n(d),y=t("pixi-gl-core"),v=n(y),m=t("bit-twiddle"),g=n(m),b=h.ObjectRenderer,_=h.WebGLRenderer,x=h.Shader,T=h.BLEND_MODES,w=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));n.initSize(),n.size=p.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var i=1;i<=g.default.nextPow2(n.size);i*=2)n.buffers.push(new f.default(4*i*n.vertByteSize));for(var s=n.size,u=n.indices=new Uint16Array(s),l=0,h=0;l<s;l+=1,h+=4)u[l+0]=h+0;return n.shader=null,n.points=[],n.vertexBuffers=[],n.vaos=[],n.currentIndex=0,n.vaoMax=2,n.vertexCount=0,n.blendMode=T.NORMAL,n.renderer.on("prerender",n.onPrerender,n),n}return s(e,t),e.prototype.initSize=function(){this.vertSize=7,this.vertByteSize=4*this.vertSize},e.prototype.onContextChange=function(){var t=this.renderer.gl,e=this.shader=this.generateShader(t);this.indexBuffer=v.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var r=0;r<this.vaoMax;r++)this.vertexBuffers[r]=v.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[r]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[r],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[r],e.attributes.aSize,t.FLOAT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[r],e.attributes.aColor,t.FLOAT,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[r],e.attributes.aAlpha,t.FLOAT,!0,this.vertByteSize,24);this.vao=this.vaos[0],this.currentBlendMode=99999},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.generateShader=function(t){var e=this.getVertexSrc(),r=this.getFragmentSrc(),n=new x(t,e,r);return n},e.prototype.render=function(t){t.disabled||(this.currentIndex>=this.size&&this.flush(),this.points[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer,e=this.shader,r=t.gl,n=g.default.nextPow2(this.currentIndex),i=g.default.log2(n),o=this.buffers[i],a=o.float32View;t.bindShader(this.shader);var s=this.points,u=this.vertSize,l=0,h=void 0;for(h=0;h<this.currentIndex;++h){var c=s[h];a[l]=c.x,a[l+1]=c.y,a[l+2]=c.size,a[l+3]=c.color[0],a[l+4]=c.color[1],a[l+5]=c.color[2],a[l+6]=c.alpha,l+=u}p.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(o.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=v.default.GLBuffer.createVertexBuffer(r,null,r.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aVertexPosition,r.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aSize,r.FLOAT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aColor,r.FLOAT,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],e.attributes.aAlpha,r.FLOAT,!0,this.vertByteSize,24)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(o.vertices,0,!1),this.vertexCount++),t.state.setBlendMode(this.blendMode),r.drawArrays(r.POINTS,0,this.currentIndex),this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),p.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.points=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},e.prototype.getVertexSrc=function(){return["uniform mat3 projectionMatrix;","attribute vec2 aVertexPosition;","attribute float aSize;","attribute vec3 aColor;","attribute float aAlpha;","varying vec4 vColor;","void main() {","  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","  gl_PointSize = aSize;","  vColor = vec4(aColor.r * aAlpha, aColor.g * aAlpha, aColor.b * aAlpha , aAlpha);","}"].join("\n")},e.prototype.getFragmentSrc=function(){return["precision mediump float;","varying vec4 vColor;","void main() {","    gl_FragColor = vColor;","}"].join("\n")},e}(b);r.default=w,_.registerPlugin("point",w)},{"../../../core":62,"../../../core/settings":98,"../../../core/sprites/webgl/BatchBuffer":102,"bit-twiddle":1,"pixi-gl-core":16}],173:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../../core"),h=i(l),c=t("pixi-gl-core"),f=n(c),d=t("../../../mesh"),p=i(d),y=h.WebGLRenderer,v=h.Shader,m=p.MeshRenderer,g=p.Mesh,b=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.gl=r.gl,n.shader=null,n.viewSize=null,n.worldTime=0,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.viewSize=new Float32Array([this.renderer.width,this.renderer.height]),this.shader=this.generateShader(t)},e.prototype.generateShader=function(t){var e="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n",r="#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float alpha;\nuniform vec3 tint;\n\nuniform vec2 viewSize;\nuniform float worldTime;\n\nvoid main(void)\n{\n    worldTime;\n\n    float aspect = viewSize.x / viewSize.y;\n\n    vec2 fragCoord = gl_FragCoord.xy / viewSize;\n    fragCoord.y = 1.0 - fragCoord.y;\n    fragCoord.x *= aspect;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n",n=new v(t,e,r);return n},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),i={shader:this.shader,vertexBuffer:f.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:f.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:f.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty},i.vao=new f.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),i.vertexBuffer.upload(t.vertices),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(t.blendMode),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.alpha=t.worldAlpha,i.shader.uniforms.tint=t.tintRgb,i.shader.uniforms.viewSize=this.viewSize,i.shader.uniforms.worldTime=t.worldTime||0;var o=t.drawMode===g.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},e}(m);r.default=b,y.registerPlugin("trail",b)},{"../../../core":62,"../../../mesh":208,"pixi-gl-core":16}],174:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../core"),a=n(o),s=new a.Rectangle,u=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof a.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,i=s,i.width=this.renderer.width,i.height=this.renderer.height);var u=i.width*n,l=i.height*n,h=new a.CanvasRenderTarget(u,l),c=r.getImageData(i.x*n,i.y*n,u,l);return h.context.putImageData(c,0,0),h.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return t&&(o=t instanceof a.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,i=s,i.width=e.width,i.height=e.height),r.getImageData(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=u,a.CanvasRenderer.registerPlugin("extract",u)},{"../../core":62}],175:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/CanvasExtract":174,"./webgl/WebGLExtract":176}],176:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("../../core"),a=n(o),s=new a.Rectangle,u=4,l=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,l=void 0;t&&(l=t instanceof a.RenderTexture?t:this.renderer.generateTexture(t)),l?(r=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=l.frame,o=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,o=!0,i=s,i.width=r.size.width,i.height=r.size.height);var h=i.width*n,c=i.height*n,f=new a.CanvasRenderTarget(h,c);if(r){e.bindRenderTarget(r);var d=new Uint8Array(u*h*c),p=e.gl;p.readPixels(i.x*n,i.y*n,h,c,p.RGBA,p.UNSIGNED_BYTE,d);var y=f.context.getImageData(0,0,h,c);y.data.set(d),f.context.putImageData(y,0,0),o&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-c))}return f.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof a.RenderTexture?t:this.renderer.generateTexture(t)),o?(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=o.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,i=s,i.width=r.size.width,i.height=r.size.height);var l=i.width*n,h=i.height*n,c=new Uint8Array(u*l*h);if(r){e.bindRenderTarget(r);var f=e.gl;f.readPixels(i.x*n,i.y*n,l,h,f.RGBA,f.UNSIGNED_BYTE,c)}return c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=l,a.WebGLRenderer.registerPlugin("extract",l)},{"../../core":62}],177:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../core"),h=n(l),c=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r[0]instanceof h.Texture?r[0]:r[0].texture));return a._textures=null,a._durations=null,a.textures=r,a._autoUpdate=n!==!1,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a._currentTime=0,a.playing=!1,a}return a(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&h.ticker.shared.add(this.update,this))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&this.updateTexture()},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.Texture.fromFrame(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.Texture.fromImage(t[n]));return new e(r)},u(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.Sprite);r.default=c},{"../core":62}],178:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../core"),c=i(h),f=t("../core/math/ObservablePoint"),d=n(f),p=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=a(this,t.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},i.font=n.font,i._text=r,i.maxWidth=0,i.maxLineHeight=0,i._anchor=new d.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return s(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new c.Point,i=[],o=[],a=null,s=0,u=0,l=0,h=-1,f=0,d=0,p=0;p<this.text.length;p++){var y=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(h=p,f=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))o.push(s),u=Math.max(u,s),l++,n.x=0,n.y+=t.lineHeight,a=null;else if(h!==-1&&this.maxWidth>0&&n.x*r>this.maxWidth)c.utils.removeItems(i,h,p-h),p=h,h=-1,o.push(f),u=Math.max(u,f),l++,n.x=0,n.y+=t.lineHeight,a=null;else{var v=t.chars[y];v&&(a&&v.kerning[a]&&(n.x+=v.kerning[a]),i.push({texture:v.texture,line:l,charCode:y,position:new c.Point(n.x+v.xOffset,n.y+v.yOffset)}),s=n.x+(v.texture.width+v.xOffset),n.x+=v.xAdvance,d=Math.max(d,v.yOffset+v.texture.height),a=y)}}o.push(s),u=Math.max(u,s);for(var m=[],g=0;g<=l;g++){var b=0;"right"===this._font.align?b=u-o[g]:"center"===this._font.align&&(b=(u-o[g])/2),m.push(b)}for(var _=i.length,x=this.tint,T=0;T<_;T++){var w=this._glyphs[T];w?w.texture=i[T].texture:(w=new c.Sprite(i[T].texture),this._glyphs.push(w)),w.position.x=(i[T].position.x+m[i[T].line])*r,w.position.y=i[T].position.y*r,w.scale.x=w.scale.y=r,w.tint=x,w.parent||this.addChild(w)}for(var S=_;S<this._glyphs.length;++S)this.removeChild(this._glyphs[S]);if(this._textWidth=u*r,this._textHeight=(n.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<_;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this.maxLineHeight=d*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,r){var n={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0];n.font=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10),n.chars={};for(var a=t.getElementsByTagName("char"),s=0;s<a.length;s++){var u=a[s],l=parseInt(u.getAttribute("id"),10),h=new c.Rectangle(parseInt(u.getAttribute("x"),10)+r.frame.x,parseInt(u.getAttribute("y"),10)+r.frame.y,parseInt(u.getAttribute("width"),10),parseInt(u.getAttribute("height"),10));n.chars[l]={xOffset:parseInt(u.getAttribute("xoffset"),10),yOffset:parseInt(u.getAttribute("yoffset"),10),xAdvance:parseInt(u.getAttribute("xadvance"),10),kerning:{},texture:new c.Texture(r.baseTexture,h)}}for(var f=t.getElementsByTagName("kerning"),d=0;d<f.length;d++){var p=f[d],y=parseInt(p.getAttribute("first"),10),v=parseInt(p.getAttribute("second"),10),m=parseInt(p.getAttribute("amount"),10);n.chars[v]&&(n.chars[v].kerning[y]=m)}return e.fonts[n.font]=n,n},l(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(c.Container);r.default=p,p.fonts={}},{"../core":62,"../core/math/ObservablePoint":65}],179:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("../core/math/Matrix"),s=n(a),u=new s.default,l=function(){function t(e,r){i(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof r?.5:r}return t.prototype.update=function(t){var e=this._texture;if(e&&e.valid&&(t||this._lastTextureID!==e._updateID)){this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(u.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(u));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;a[0]=(e._frame.x+s+l)/o.width,a[1]=(e._frame.y+s+l)/o.height,a[2]=(e._frame.x+e._frame.width-s+l)/o.width,a[3]=(e._frame.y+e._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight}},o(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();r.default=l},{"../core/math/Matrix":64}],180:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../core"),c=i(h),f=t("../core/sprites/canvas/CanvasTinter"),d=n(f),p=t("./TextureTransform"),y=n(p),v=new c.Point,m=function(t){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,e);var s=a(this,t.call(this,r));return s.tileTransform=new c.TransformStatic,s._width=n,s._height=i,s._canvasPattern=null,s.uvTransform=r.transform||new y.default(r),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return s(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,o=e.baseTexture,a=e.baseTexture.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width,u=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var l=new c.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=d.default.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/a,this.tileScale.y/a);var h=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(s,u),r.fillRect(-s+h,-u+f,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(r.translate(s+h,u+f),r.fillRect(-s,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);
this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._width,r=this._height,n=-e*this.anchor._x;if(v.x>n&&v.x<n+e){var i=-r*this.anchor._y;if(v.y>i&&v.y<i+r)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},e.from=function(t,r,n){return new e(c.Texture.from(t),r,n)},e.fromFrame=function(t,r,n){var i=c.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(i,r,n)},e.fromImage=function(t,r,n,i,o){return new e(c.Texture.fromImage(t,i,o),r,n)},l(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(c.Sprite);r.default=m},{"../core":62,"../core/sprites/canvas/CanvasTinter":101,"./TextureTransform":179}],181:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=t("../core"),a=n(o),s=a.DisplayObject,u=new a.Matrix;s.prototype._cacheAsBitmap=!1,s.prototype._cacheData=!1;var l=function t(){i(this,t),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(s.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new l),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),s.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},s.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var i=t._activeRenderTarget,o=t.filterManager.filterStack,s=a.RenderTexture.create(0|r.width,0|r.height),l=u;l.tx=-r.x,l.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,l,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var h=new a.Sprite(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(r.x/r.width),h.anchor.y=-(r.y/r.height),h.alpha=e,h._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=h.containsPoint.bind(h)}},s.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},s.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context,i=a.RenderTexture.create(0|e.width,0|e.height),o=u;this.transform.localTransform.copy(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,o,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var s=new a.Sprite(i);s.transform.worldTransform=this.transform.worldTransform,s.anchor.x=-(e.x/e.width),s.anchor.y=-(e.y/e.height),s._bounds=this._bounds,s.alpha=r,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=s,this.containsPoint=s.containsPoint.bind(s)}},s.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},s.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},s.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},s.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":62}],182:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../core"),o=n(i);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":62}],183:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t("../core"),o=n(i);o.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":62}],184:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=r.TextureTransform=void 0;var i=t("./TextureTransform");Object.defineProperty(r,"TextureTransform",{enumerable:!0,get:function(){return n(i).default}});var o=t("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return n(o).default}});var a=t("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return n(a).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(s).default}});var u=t("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return n(u).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":177,"./BitmapText":178,"./TextureTransform":179,"./TilingSprite":180,"./cacheAsBitmap":181,"./getChildByName":182,"./getGlobalPosition":183,"./webgl/TilingSpriteRenderer":185}],185:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../core"),l=n(u),h=t("../../core/const"),c=(t("path"),new l.Matrix),f=new Float32Array(4),d=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.shader=null,n.simpleShader=null,n.quad=null,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new l.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new l.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new l.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=r.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),r.upload();var i=t._texture,o=i.baseTexture,a=t.tileTransform.localTransform,s=t.uvTransform,u=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==h.WRAP_MODES.CLAMP:o.wrapMode===h.WRAP_MODES.CLAMP&&(o.wrapMode=h.WRAP_MODES.REPEAT));var d=u?this.simpleShader:this.shader;e.bindShader(d);var p=i.width,y=i.height,v=t._width,m=t._height;c.set(a.a*p/v,a.b*p/m,a.c*y/v,a.d*y/m,a.tx/v,a.ty/m),c.invert(),u?c.append(s.mapCoord):(d.uniforms.uMapCoord=s.mapCoord.toArray(!0),d.uniforms.uClampFrame=s.uClampFrame,d.uniforms.uClampOffset=s.uClampOffset),d.uniforms.uTransform=c.toArray(!0);var g=f;l.utils.hex2rgb(t.tint,g),g[3]=t.worldAlpha,d.uniforms.uColor=g,d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(i),e.setBlendMode(t.blendMode),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(l.ObjectRenderer);r.default=d,l.WebGLRenderer.registerPlugin("tilingSprite",d)},{"../../core":62,"../../core/const":43,path:9}],186:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),c=i(h),f=t("./BlurXFilter"),d=n(f),p=t("./BlurYFilter"),y=n(p),v=function(t){function e(r,n,i,s){o(this,e);var u=a(this,t.call(this));return u.blurXFilter=new d.default(r,n,i,s),u.blurYFilter=new y.default(r,n,i,s),u.padding=0,u.resolution=i||c.settings.RESOLUTION,u.quality=n||4,u.blur=r||8,u}return s(e,t),e.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},l(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(c.Filter);r.default=v},{"../../core":62,"./BlurXFilter":187,"./BlurYFilter":188}],187:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),c=i(h),f=t("./generateBlurVertSource"),d=n(f),p=t("./generateBlurFragSource"),y=n(p),v=t("./getMaxBlurKernelSize"),m=n(v),g=function(t){function e(r,n,i,s){o(this,e),s=s||5;var u=(0,d.default)(s,!0),l=(0,y.default)(s),h=a(this,t.call(this,u,l));return h.resolution=i||c.settings.RESOLUTION,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return s(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,m.default)(i);this.vertexSrc=(0,d.default)(o,!0),this.fragmentSrc=(0,y.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var a=t.getRenderTarget(!0),s=e,u=a,l=0;l<this.passes-1;l++){t.applyFilter(this,s,u,!0);var h=u;u=s,s=h}t.applyFilter(this,s,r,n),t.returnRenderTarget(a)}},l(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(c.Filter);r.default=g},{"../../core":62,"./generateBlurFragSource":189,"./generateBlurVertSource":190,"./getMaxBlurKernelSize":191}],188:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("../../core"),c=i(h),f=t("./generateBlurVertSource"),d=n(f),p=t("./generateBlurFragSource"),y=n(p),v=t("./getMaxBlurKernelSize"),m=n(v),g=function(t){function e(r,n,i,s){o(this,e),s=s||5;var u=(0,d.default)(s,!1),l=(0,y.default)(s),h=a(this,t.call(this,u,l));return h.resolution=i||c.settings.RESOLUTION,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return s(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,m.default)(i);this.vertexSrc=(0,d.default)(o,!1),this.fragmentSrc=(0,y.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var a=t.getRenderTarget(!0),s=e,u=a,l=0;l<this.passes-1;l++){t.applyFilter(this,s,u,!0);var h=u;u=s,s=h}t.applyFilter(this,s,r,n),t.returnRenderTarget(a)}},l(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(c.Filter);r.default=g},{"../../core":62,"./generateBlurFragSource":189,"./generateBlurVertSource":190,"./getMaxBlurKernelSize":191}],189:[function(t,e,r){"use strict";function n(t){for(var e=i[t],r=e.length,n=o,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<t;l++){var h=s.replace("%index%",l);u=l,l>=r&&(u=t-l-1),h=h.replace("%value%",e[u]),a+=h,a+="\n"}return n=n.replace("%blur%",a),n=n.replace("%size%",t)}r.__esModule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],190:[function(t,e,r){"use strict";function n(t,e){var r=Math.ceil(t/2),n=i,o="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(r-1)+".0"),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}r.__esModule=!0,r.default=n;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],191:[function(t,e,r){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;r>e;)r-=2;return r}r.__esModule=!0,r.default=n},{}],192:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../../core"),h=n(l),c=(t("path"),function(t){function e(){i(this,e);var r=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n    vec4 result;\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    // Premultiply alpha again.\n    result.rgb *= result.a;\n\n    gl_FragColor = result;\n}\n"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r}return a(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,o=1/3,a=i(o),s=r+(1-r)*o,u=o*(1-r)-a*n,l=o*(1-r)+a*n,h=o*(1-r)+a*n,c=r+o*(1-r),f=o*(1-r)-a*n,d=o*(1-r)-a*n,p=o*(1-r)+a*n,y=r+o*(1-r),v=[s,u,l,0,0,h,c,f,0,0,d,p,y,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r=2*t/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(n>>16&255)/255,l=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,a,s,t,0,u,l,h,e,0,o-u,a-l,s-h,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){t=t||.1;var r=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},u(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}]),e}(h.Filter));r.default=c,c.prototype.grayscale=c.prototype.greyscale},{"../../core":62,path:9}],193:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../../core"),h=n(l),c=(t("path"),function(t){function e(r,n){i(this,e);var a=new h.Matrix;r.renderable=!1;var s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));
return s.maskSprite=r,s.maskMatrix=a,s.uniforms.mapSampler=r.texture,s.uniforms.filterMatrix=a,s.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),s.scale=new h.Point(n,n),s}return a(e,t),e.prototype.apply=function(t,e,r){var n=1/r.destinationFrame.width*(r.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,r)},u(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(h.Filter));r.default=c},{"../../core":62,path:9}],194:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../core"),l=n(u),h=(t("path"),function(t){function e(){return i(this,e),o(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return a(e,t),e}(l.Filter));r.default=h},{"../../core":62,path:9}],195:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return n(i).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var a=t("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return n(a).default}});var s=t("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return n(s).default}});var u=t("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return n(u).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(h).default}});var c=t("./void/VoidFilter");Object.defineProperty(r,"VoidFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./blur/BlurFilter":186,"./blur/BlurXFilter":187,"./blur/BlurYFilter":188,"./colormatrix/ColorMatrixFilter":192,"./displacement/DisplacementFilter":193,"./fxaa/FXAAFilter":194,"./noise/NoiseFilter":196,"./void/VoidFilter":197}],196:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../../core"),h=n(l),c=(t("path"),function(t){function e(){i(this,e);var r=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return r.noise=.5,r}return a(e,t),u(e,[{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}]),e}(h.Filter));r.default=c},{"../../core":62,path:9}],197:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../core"),l=n(u),h=(t("path"),function(t){function e(){i(this,e);var r=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return r.glShaderKey="void",r}return a(e,t),e}(l.Filter));r.default=h},{"../../core":62,path:9}],198:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){t.bitmapFont=l.BitmapText.registerFont(t.data,e)}r.__esModule=!0,r.parse=i,r.default=function(){return function(t,e){if(!t.data||t.type!==u.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var r=t.isDataUrl?"":a.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,""))),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var n=r+t.data.getElementsByTagName("page")[0].getAttribute("file");if(s.utils.TextureCache[n])i(t,s.utils.TextureCache[n]),e();else{var o={crossOrigin:t.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",n,o,function(r){i(t,r.texture),e()})}}};var o=t("path"),a=n(o),s=t("../core"),u=t("resource-loader"),l=t("../extras")},{"../core":62,"../extras":184,path:9,"resource-loader":36}],199:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./loader");Object.defineProperty(r,"Loader",{enumerable:!0,get:function(){return n(i).default}});var o=t("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return o.parse}});var a=t("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return n(a).default}});var s=t("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var u=t("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return u.Resource}})},{"./bitmapFontParser":198,"./loader":200,"./spritesheetParser":201,"./textureParser":202,"resource-loader":36}],200:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("resource-loader"),l=n(u),h=t("resource-loader/lib/middlewares/parsing/blob"),c=t("eventemitter3"),f=n(c),d=t("./textureParser"),p=n(d),y=t("./spritesheetParser"),v=n(y),m=t("./bitmapFontParser"),g=n(m),b=function(t){function e(r,n){i(this,e);var a=o(this,t.call(this,r,n));f.default.call(a);for(var s=0;s<e._pixiMiddleware.length;++s)a.use(e._pixiMiddleware[s]());return a.onStart.add(function(t){return a.emit("start",t)}),a.onProgress.add(function(t,e){return a.emit("progress",t,e)}),a.onError.add(function(t,e,r){return a.emit("error",t,e,r)}),a.onLoad.add(function(t,e){return a.emit("load",t,e)}),a.onComplete.add(function(t,e){return a.emit("complete",t,e)}),a}return a(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e}(l.default);r.default=b;for(var _ in f.default.prototype)b.prototype[_]=f.default.prototype[_];b._pixiMiddleware=[h.blobMiddlewareFactory,p.default,v.default,g.default];var x=l.default.Resource;x.setExtensionXhrType("fnt",x.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":198,"./spritesheetParser":201,"./textureParser":202,eventemitter3:4,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],201:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(){return function(t,e){var r=void 0,n=t.name+"_image";if(!t.data||t.type!==i.Resource.TYPE.JSON||!t.data.frames||this.resources[n])return void e();var o={crossOrigin:t.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};r=t.isDataUrl?t.data.meta.image:a.default.dirname(t.url.replace(this.baseUrl,""))+"/"+t.data.meta.image,this.add(n,r,o,function(r){var n=new s.Spritesheet(r.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}};var i=t("resource-loader"),o=t("path"),a=n(o),s=t("../core")},{"../core":62,path:9,"resource-loader":36}],202:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(){return function(t,e){t.data&&t.type===i.Resource.TYPE.IMAGE&&(t.texture=a.default.fromLoader(t.data,t.url,t.name)),e()}};var i=t("resource-loader"),o=t("../core/textures/Texture"),a=n(o)},{"../core/textures/Texture":111,"resource-loader":36}],203:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("../core"),h=n(l),c=new h.Point,f=new h.Polygon,d=function(t){function e(r,n,a,s,u){i(this,e);var l=o(this,t.call(this));return l._texture=null,l._anchor=new h.ObservablePoint(l._onAnchorUpdate,l),l.uvs=a||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=s||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.blendMode=h.BLEND_MODES.NORMAL,l.canvasPadding=0,l.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,l.texture=r,l.shader=null,l._tint=16777215,l._tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._ready=!1,l.pluginName="mesh",l}return a(e,t),e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){},e.prototype.refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var r=this.vertices,n=f.points,i=this.indices,o=this.indices.length,a=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<o;s+=a){var u=2*i[s],l=2*i[s+1],h=2*i[s+2];if(n[0]=r[u],n[1]=r[u+1],n[2]=r[l],n[3]=r[l+1],n[4]=r[h],n[5]=r[h+1],f.contains(c.x,c.y))return!0}return!1},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._ready&&this.refresh()},u(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRgb=h.utils.hex2rgb(t)}},{key:"tintRgb",get:function(){return this._tintRgb},set:function(t){this._tintRgb=t,this._tint=h.utils.rgb2hex(this._tintRgb)}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}}]),e}(h.Container);r.default=d,d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":62}],204:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t("./Plane"),h=n(l),c=10,f=function(t){function e(r,n,a,s,u){i(this,e);var l=o(this,t.call(this,r,4,4)),h=l.uvs;return h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,l._origWidth=r.width,l._origHeight=r.height,l._uvw=1/l._origWidth,l._uvh=1/l._origHeight,l.width=r.width,l.height=r.height,h[2]=h[10]=h[18]=h[26]=l._uvw*n,h[4]=h[12]=h[20]=h[28]=1-l._uvw*s,h[9]=h[11]=h[13]=h[15]=l._uvh*a,h[17]=h[19]=h[21]=h[23]=1-l._uvh*u,l.leftWidth="undefined"!=typeof n?n:c,l.rightWidth="undefined"!=typeof s?s:c,l.topHeight="undefined"!=typeof a?a:c,l.bottomHeight="undefined"!=typeof u?u:c,l}return a(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var r=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,a=i.width,s=i.height;this.drawSegment(e,o,a,s,0,1,10,11),this.drawSegment(e,o,a,s,2,3,12,13),this.drawSegment(e,o,a,s,4,5,14,15),this.drawSegment(e,o,a,s,8,9,18,19),this.drawSegment(e,o,a,s,10,11,20,21),this.drawSegment(e,o,a,s,12,13,22,23),this.drawSegment(e,o,a,s,16,17,26,27),this.drawSegment(e,o,a,s,18,19,28,29),this.drawSegment(e,o,a,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,r,n,i,o,a,s){var u=this.uvs,l=this.vertices,h=(u[a]-u[i])*r,c=(u[s]-u[o])*n,f=l[a]-l[i],d=l[s]-l[o];h<1&&(h=1),c<1&&(c=1),f<1&&(f=1),d<1&&(d=1),t.drawImage(e,u[i]*r,u[o]*n,h,c,l[i],l[o],f,d)},u(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,r=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,r[2]=r[10]=r[18]=r[26]=t,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,r=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,r[4]=r[12]=r[20]=r[28]=this._width-t,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,r=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,r[9]=r[11]=r[13]=r[15]=t,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,r=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,r[17]=r[19]=r[21]=r[23]=this._height-t,this.dirty=!0}}]),e}(h.default);r.default=f},{"./Plane":205}],205:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("./Mesh"),h=i(l),c=t("../core"),f=n(c),d=f.Point,p=function(t){function e(r,n,i){o(this,e);var s=a(this,t.call(this,r));return s.verticesX=n||10,s.verticesY=i||10,s.drawMode=h.default.DRAW_MODES.TRIANGLES,s.initPoints(),s._ready=!0,s.refresh(),s}return s(e,t),e.prototype.initPoints=function(){this.points=[];for(var t=0;t<this.verticesY;t++){var e=[];this.points.push(e);for(var r=0;r<this.verticesX;r++){var n=new d(r,t);n.originalX=n.x,n.originalY=n.y,e.push(n)}}},e.prototype.refresh=function(){var t=this.verticesX*this.verticesY,e=[],r=[],n=[],i=[],o=this._texture,a=o.orig,s=this._anchor;this._pivotX=a.width*s.x,this._pivotY=a.height*s.y;var u=this.verticesX-1,l=this.verticesY-1,h=o.width/u,c=o.height/l,f=!1;h===this._sizeX&&c===this._sizeY||(this._sizeX=h,this._sizeY=c,f=!0);for(var d=0;d<t;d++)if(o._uvs){var p=d%this.verticesX,y=d/this.verticesX|0,v=this.points[y][p];f&&(v.x=p*h,v.y=y*c,v.originalX=v.x,v.originalY=v.y),e.push(v.x-this._pivotX,v.y-this._pivotY),n.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(p/u),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(y/l))}else n.push(0);for(var m=u*l,g=0;g<m;g++){var b=g%u,_=g/u|0,x=_*this.verticesX+b,T=_*this.verticesX+b+1,w=(_+1)*this.verticesX+b,S=(_+1)*this.verticesX+b+1;i.push(x,T,w),i.push(T,S,w)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++},e.prototype._onTextureUpdate=function(){t.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(h.default);r.default=p},{"../core":62,"./Mesh":203}],206:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t("./Mesh"),c=i(h),f=t("../core"),d=n(f),p=function(t){function e(r,n){o(this,e);var i=a(this,t.call(this,r));return i._vertical=!1,i._points=null,i.points=n,i.vertices=new Float32Array(4*n.length),i.uvs=new Float32Array(4*n.length),i.colors=new Float32Array(2*n.length),i.indices=new Uint16Array(2*n.length),i._ready=!0,i.refresh(),i}return s(e,t),e.prototype.refresh=function(){var t=this._points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors,i=this._texture,o=i.trim,a=i.orig,s=this._anchor;this._pivotX=a.width*s.x,this._pivotY=a.height*s.y,this._vertical?(this._offsetHalf=-i.frame.width/2,o?(this._leftSpace=this._pivotX-o.x,this._rightSpace=o.width-this._leftSpace):(this._leftSpace=this._pivotX,this._rightSpace=a.width-this._leftSpace),this._topSpace=this._pivotY,this._bottomSpace=a.height-this._topSpace,this._leftSpace+=this._offsetHalf,this._rightSpace+=this._offsetHalf):(this._offsetHalf=i.frame.height/2,this._leftSpace=this._pivotX,this._rightSpace=a.width-this._leftSpace,o?(this._topSpace=this._pivotY-o.y,this._bottomSpace=o.height-this._topSpace):(this._topSpace=this._pivotY,this._bottomSpace=a.height-this._topSpace),this._topSpace-=this._offsetHalf,this._bottomSpace-=this._offsetHalf);var u=i._uvs,l=new d.Point(u.x0,u.y0),h=new d.Point(u.x2-u.x0,Number(u.y2-u.y0));e[0]=0+l.x,e[1]=0+l.y,this._vertical?(e[2]=h.x+l.x,e[3]=0+l.y):(e[2]=0+l.x,e[3]=h.y+l.y),n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var c=t.length,f=1;f<c;f++){var p=4*f,y=f/(c-1);this._vertical?(e[p+0]=0+l.x,e[p+1]=y*h.y+l.y,e[p+2]=h.x+l.x,e[p+3]=y*h.y+l.y):(e[p+0]=y*h.x+l.x,e[p+1]=0+l.y,e[p+2]=y*h.x+l.x,e[p+3]=h.y+l.y),p=2*f,n[p]=1,n[p+1]=1,p=2*f,r[p]=p,r[p+1]=p+1}this.dirty++,this.indexDirty++}},e.prototype.updateTransform=function(){var t=this._points;
if(!(t.length<1)){for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,a=t.length,s=this._offsetHalf,u=0;u<a;u++){var l=t[u],h=4*u;r=u<t.length-1?t[u+1]:l,i=-(r.x-e.x),n=r.y-e.y;var c=Math.sqrt(n*n+i*i);n/=c,i/=c,n*=s,i*=s,o[h]=l.x+n-this._leftSpace,o[h+1]=l.y+i-this._topSpace,o[h+2]=l.x-n-this._leftSpace,o[h+3]=l.y-i-this._topSpace,e=l}this.containerUpdateTransform()}},e.prototype._onTextureUpdate=function(){t.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},l(e,[{key:"points",get:function(){return this._points},set:function(t){this._points=t,(!t||t.length<2)&&(this._vertical=!1);var e=t[0],r=t[t.length-1],n=r.x-e.x,i=r.y-e.y;this._vertical=0===n||Math.abs(i/n)>1}}]),e}(c.default);r.default=p},{"../core":62,"./Mesh":203}],207:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("../../core"),s=i(a),u=t("../Mesh"),l=n(u),h=function(){function t(e){o(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldTransform,i=e.resolution;e.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.setBlendMode(t.blendMode),t.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],a=2*e[n+2];this._renderDrawTriangle(t,i,o,a)}},t.prototype._renderDrawTriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,a=t.vertices,s=t._texture;if(s.valid){var u=s.baseTexture,l=u.source,h=u.width,c=u.height,f=o[e]*u.width,d=o[r]*u.width,p=o[n]*u.width,y=o[e+1]*u.height,v=o[r+1]*u.height,m=o[n+1]*u.height,g=a[e],b=a[r],_=a[n],x=a[e+1],T=a[r+1],w=a[n+1];if(t.canvasPadding>0){var S=t.canvasPadding/t.worldTransform.a,C=t.canvasPadding/t.worldTransform.d,E=(g+b+_)/3,O=(x+T+w)/3,M=g-E,P=x-O,R=Math.sqrt(M*M+P*P);g=E+M/R*(R+S),x=O+P/R*(R+C),M=b-E,P=T-O,R=Math.sqrt(M*M+P*P),b=E+M/R*(R+S),T=O+P/R*(R+C),M=_-E,P=w-O,R=Math.sqrt(M*M+P*P),_=E+M/R*(R+S),w=O+P/R*(R+C)}i.save(),i.beginPath(),i.moveTo(g,x),i.lineTo(b,T),i.lineTo(_,w),i.closePath(),i.clip();var A=f*v+y*p+d*m-v*p-y*d-f*m,D=g*v+y*_+b*m-v*_-y*b-g*m,L=f*b+g*p+d*_-b*p-g*d-f*_,I=f*v*_+y*b*p+g*d*m-g*v*p-y*d*_-f*b*m,F=x*v+y*w+T*m-v*w-y*T-x*m,j=f*T+x*p+d*w-T*p-x*d-f*w,B=f*v*w+y*T*p+x*d*m-x*v*p-y*d*w-f*T*m;i.transform(D/A,F/A,L/A,j/A,I/A,B/A),i.drawImage(l,0,0,h*u.resolution,c*u.resolution,0,0,h,c),i.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=r[o],s=r[o+1],u=r[o+2],l=r[o+3],h=r[o+4],c=r[o+5];e.moveTo(a,s),e.lineTo(u,l),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=h,s.CanvasRenderer.registerPlugin("mesh",h)},{"../../core":62,"../Mesh":203}],208:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(a).default}});var s=t("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(s).default}});var u=t("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var l=t("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":203,"./NineSlicePlane":204,"./Plane":205,"./Rope":206,"./canvas/CanvasMeshRenderer":207,"./webgl/MeshRenderer":209}],209:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../core"),h=i(l),c=t("pixi-gl-core"),f=n(c),d=t("../Mesh"),p=n(d),y=(t("path"),function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.shader=null,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),i={shader:this.shader,vertexBuffer:f.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:f.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:f.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty},i.vao=new f.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),i.vertexBuffer.upload(t.vertices),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(t.blendMode),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.alpha=t.worldAlpha,i.shader.uniforms.tint=t.tintRgb;var o=t.drawMode===p.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},e}(h.ObjectRenderer));r.default=y,h.WebGLRenderer.registerPlugin("mesh",y)},{"../../core":62,"../Mesh":203,path:9,"pixi-gl-core":16}],210:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../core"),l=n(u),h=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;i(this,e);var s=o(this,t.call(this)),u=16384;return a>u&&(a=u),a>r&&(a=r),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=a,s._glBuffers={},s._bufferToUpdate=0,s.interactiveChildren=!1,s.blendMode=l.BLEND_MODES.NORMAL,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s}return a(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,a=0,s=0,u=t.blendModes[this.blendMode];u!==e.globalCompositeOperation&&(e.globalCompositeOperation=u),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var c=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)===0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,a=c.width*h.scale.x,s=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var f=h.worldTransform;t.roundPixels?e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution|0,f.ty*t.resolution|0):e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution,f.ty*t.resolution),i=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*d,o*d,a*d,s*d)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},e}(l.Container);r.default=h},{"../core":62}],211:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return n(i).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./ParticleContainer":210,"./webgl/ParticleRenderer":213}],212:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=t("pixi-gl-core"),a=n(o),s=t("../../core/utils/createIndicesForQuads"),u=n(s),l=function(){function t(e,r,n,o){i(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<r.length;++a){var s=r[a];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,offset:s.offset},n[a]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,u.default)(this.size),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=a.default.GLBuffer.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var i=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var s=this.staticProperties[o];s.offset=i,i+=s.size,this.staticStride+=s.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=a.default.GLBuffer.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];this.vao.addAttribute(this.dynamicBuffer,h.attribute,t.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var f=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();r.default=l},{"../../core/utils/createIndicesForQuads":117,"pixi-gl-core":16}],213:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":u(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":u(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var l=t("../../core"),h=i(l),c=t("./ParticleShader"),f=n(c),d=t("./ParticleBuffer"),p=n(d),y=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new h.Matrix,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new f.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>r&&(o=r);var a=t._glBuffers[i.CONTEXT_UID];a||(a=t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var s=i.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var l=e[0]._texture.baseTexture;this.shader.uniforms.uSampler=i.bindTexture(l);for(var h=0,c=0;h<o;h+=n,c+=1){var f=o-h;f>n&&(f=n);var d=a[c];d.uploadDynamic(e,h,f),t._bufferToUpdate===c&&(d.uploadStatic(e,h,f),t._bufferToUpdate=c+1),i.bindVao(d.vao),d.vao.draw(s.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxSize,i=t._batchSize,o=t._properties,a=0;a<n;a+=i)r.push(new p.default(e,this.properties,o,i));return r},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var a=0,s=0,u=0,l=0,h=0;h<r;++h){var c=t[e+h],f=c._texture,d=c.scale.x,p=c.scale.y,y=f.trim,v=f.orig;y?(s=y.x-c.anchor.x*v.width,a=s+y.width,l=y.y-c.anchor.y*v.height,u=l+y.height):(a=v.width*(1-c.anchor.x),s=v.width*-c.anchor.x,u=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),n[o]=s*d,n[o+1]=l*p,n[o+i]=a*d,n[o+i+1]=l*p,n[o+2*i]=a*d,n[o+2*i+1]=u*p,n[o+3*i]=s*d,n[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var a=0;a<r;a++){var s=t[e+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var a=0;a<r;a++){var s=t[e+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var a=0;a<r;++a){var s=t[e+a]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,n[o+3*i+1]=s.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadAlpha=function(t,e,r,n,i,o){for(var a=0;a<r;a++){var s=t[e+a].alpha;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(h.ObjectRenderer);r.default=y,h.WebGLRenderer.registerPlugin("particle",y)},{"../../core":62,"./ParticleBuffer":212,"./ParticleShader":214}],214:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var u=t("../../core/Shader"),l=n(u),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return a(e,t),e}(l.default);r.default=h},{"../../core/Shader":41}],215:[function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},{}],216:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=t("object-assign"),o=n(i);Object.assign||(Object.assign=o.default)},{"object-assign":7}],217:[function(t,e,r){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":215,"./Object.assign":216,"./requestAnimationFrame":218}],218:[function(t,e,r){(function(t){"use strict";var e=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),t.performance&&t.performance.now||!function(){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}();for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i){var o=n[i];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var n=Date.now(),i=e+r-n;return i<0&&(i=0),r=n,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],219:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return e instanceof c.Text&&(e.updateText(!0),!0)}function s(t,e){if(e instanceof c.TextStyle){var r=c.Text.getFontStyle(e);return c.Text.fontPropertiesCache[r]||c.Text.calculateFontProperties(r),!0}return!1}function u(t,e){if(t instanceof c.Text){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function l(t,e){return t instanceof c.TextStyle&&(e.indexOf(t)===-1&&e.push(t),!0)}r.__esModule=!0;var h=t("../core"),c=i(h),f=t("./limiters/CountLimiter"),d=n(f),p=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var y=function(){function t(e){var r=this;o(this,t),this.limiter=new d.default(c.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.register(u,a),this.register(l,s)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var t=this.queue[0],e=!1,r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,a=i.length;o<a;o++)i[o]()}},t.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof c.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();r.default=y},{"../core":62,"./limiters/CountLimiter":222}],220:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":h(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":h(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(e instanceof f.BaseTexture){var r=e.source,n=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}function l(t,e){if(t instanceof f.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof f.Texture){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var c=t("../../core"),f=i(c),d=t("../BasePrepare"),p=n(d),y=16,v=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=y,n.canvas.height=y,n.ctx=n.canvas.getContext("2d"),n.register(l,u),n}return s(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(p.default);r.default=v,f.CanvasRenderer.registerPlugin("prepare",v)},{"../../core":62,"../BasePrepare":219}],221:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var a=t("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return n(a).default}});var s=t("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return n(s).default}});var u=t("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./BasePrepare":219,"./canvas/CanvasPrepare":220,"./limiters/CountLimiter":222,"./limiters/TimeLimiter":223,"./webgl/WebGLPrepare":224}],222:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();r.default=i},{}],223:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();r.default=i},{}],224:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":f(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":f(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return e instanceof p.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof p.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){if(t instanceof p.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof p.Texture){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function c(t,e){return t instanceof p.Graphics&&(e.push(t),!0)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.__esModule=!0;var d=t("../../core"),p=i(d),y=t("../BasePrepare"),v=n(y),m=function(t){function e(r){o(this,e);var n=a(this,t.call(this,r));return n.uploadHookHelper=n.renderer,n.register(h,u).register(c,l),n}return s(e,t),e}(v.default);r.default=m,p.WebGLRenderer.registerPlugin("prepare",m)},{"../../core":62,"../BasePrepare":219}],225:[function(t,e,r){(function(e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}r.__esModule=!0,r.loader=r.RenderContext=r.SpriteTrail=r.Animation=r.LeafSprite=r.SimpleParticleContainer=r.SimpleContainer=r.Matrix3=r.DisplayPointGroup=r.DisplayPoint=r.lights=r.renderers=r.extensions=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var i=t("./polyfill");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./deprecation");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./core");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{
enumerable:!0,get:function(){return a[t]}})});var s=t("./accessibility"),u=n(s),l=t("./extract"),h=n(l),c=t("./extras"),f=n(c),d=t("./filters"),p=n(d),y=t("./interaction"),v=n(y),m=t("./loaders"),g=n(m),b=t("./mesh"),_=n(b),x=t("./particles"),T=n(x),w=t("./prepare"),S=n(w),C=t("./extensions"),E=n(C);a.utils.mixins.performMixins(),r.accessibility=u,r.extract=h,r.extras=f,r.filters=p,r.interaction=v,r.loaders=g,r.mesh=_,r.particles=T,r.prepare=S;var O=E;for(var M in O.filters)p[M]=O.filters[M];var P=O.renderers,R=P.DisplayPoint,A=P.DisplayPointGroup,D=O.lights,L=O.Matrix3,I=O.SimpleContainer,F=O.SimpleParticleContainer,j=O.LeafSprite,B=O.Animation,k=O.SpriteTrail,N=O.RenderContext;r.extensions=E,r.renderers=P,r.lights=D,r.DisplayPoint=R,r.DisplayPointGroup=A,r.Matrix3=L,r.SimpleContainer=I,r.SimpleParticleContainer=F,r.LeafSprite=j,r.Animation=B,r.SpriteTrail=k,r.RenderContext=N;var U=g&&g.Loader?new g.Loader:null;r.loader=U,e.PIXI=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":2,"./core":62,"./deprecation":2,"./extensions":144,"./extract":175,"./extras":184,"./filters":195,"./interaction":2,"./loaders":199,"./mesh":208,"./particles":211,"./polyfill":217,"./prepare":221}]},{},[225])(225)});
//# sourceMappingURL=pixi.min.js.map

function getUrlParams(){var t={},i=window.location.search;if(i){i=i.substring(1);for(var s,e,n=i.split("&"),h=0;s=n[h];h++)e=n[h]=s.split("="),t[e[0]]=!(e.length>1)||decodeURIComponent(e[1])}return t}function Matrix(t,i,s,e,n,h){this.a=t,this.b=i,this.c=s,this.d=e,this.tx=n,this.ty=h}function LeafEffect(t){for(var i in t)this[i]=t[i]}var TWEEN=TWEEN||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(i){t.push(i)},remove:function(i){var s=t.indexOf(i);s!==-1&&t.splice(s,1)},update:function(i,s){if(0===t.length)return!1;var e=0;for(i=void 0!==i?i:TWEEN.now();e<t.length;)t[e].update(i)||s?e++:t.splice(e,1);return!0}}}();"undefined"==typeof window&&"undefined"!=typeof process?TWEEN.now=function(){var t=process.t();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()},TWEEN.Tween=function(t){var i,s=t,e={},n={},h={},a=1e3,o=0,r=!1,l=!1,u=!1,c=0,f=null,d=TWEEN.Easing.Linear.None,g=TWEEN.Interpolation.Linear,m=[],p=null,v=!1,w=null,b=null,C=null;this.to=function(t,i){return n=t,void 0!==i&&(a=i),this},this.start=function(t){TWEEN.add(this),l=!0,v=!1,f=void 0!==t?t:TWEEN.now(),f+=c;for(var i in n){if(n[i]instanceof Array){if(0===n[i].length)continue;n[i]=[s[i]].concat(n[i])}void 0!==s[i]&&(e[i]=s[i],e[i]instanceof Array==!1&&(e[i]*=1),h[i]=e[i]||0)}return this},this.stop=function(){return l?(TWEEN.remove(this),l=!1,null!==C&&C.call(s,s),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+a),this},this.stopChainedTweens=function(){for(var t=0,i=m.length;t<i;t++)m[t].stop()},this.delay=function(t){return c=t,this},this.repeat=function(t){return o=t,this},this.i=function(t){return i=t,this},this.yoyo=function(t){return r=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return g=t,this},this.chain=function(){return m=arguments,this},this.s=function(t){return p=t,this},this.m=function(t){return w=t,this},this.k=function(t){return b=t,this},this.n=function(t){return C=t,this},this.update=function(t){var l,C,y;if(t<f)return!0;v===!1&&(null!==p&&p.call(s,s),v=!0),C=(t-f)/a,C=C>1?1:C,y=d(C);for(l in n)if(void 0!==e[l]){var I=e[l]||0,T=n[l];T instanceof Array?s[l]=g(T,y):("string"==typeof T&&(T="+"===T.charAt(0)||"-"===T.charAt(0)?I+parseFloat(T):parseFloat(T)),"number"==typeof T&&(s[l]=I+(T-I)*y))}if(null!==w&&w.call(s,y),1===C){if(o>0){isFinite(o)&&o--;for(l in h){if("string"==typeof n[l]&&(h[l]=h[l]+parseFloat(n[l])),r){var B=h[l];h[l]=n[l],n[l]=B}e[l]=h[l]}return r&&(u=!u),f=void 0!==i?t+i:t+c,!0}null!==b&&b.call(s,s);for(var x=0,S=m.length;x<S;x++)m[x].start(f+a);return!1}return!0}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var i=1.70158;return t*t*((i+1)*t-i)},Out:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},InOut:function(t){var i=2.5949095;return(t*=2)<1?.5*(t*t*((i+1)*t-i)):.5*((t-=2)*t*((i+1)*t+i)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,i){var s=t.length-1,e=s*i,n=Math.floor(e),h=TWEEN.Interpolation.Utils.Linear;return i<0?h(t[0],t[1],e):i>1?h(t[s],t[s-1],s-e):h(t[n],t[n+1>s?s:n+1],e-n)},Bezier:function(t,i){for(var s=0,e=t.length-1,n=Math.pow,h=TWEEN.Interpolation.Utils.Bernstein,a=0;a<=e;a++)s+=n(1-i,e-a)*n(i,a)*t[a]*h(e,a);return s},CatmullRom:function(t,i){var s=t.length-1,e=s*i,n=Math.floor(e),h=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[s]?(i<0&&(n=Math.floor(e=s*(1+i))),h(t[(n-1+s)%s],t[n],t[(n+1)%s],t[(n+2)%s],e-n)):i<0?t[0]-(h(t[0],t[0],t[1],t[1],-e)-t[0]):i>1?t[s]-(h(t[s],t[s],t[s-1],t[s-1],e-s)-t[s]):h(t[n?n-1:0],t[n],t[s<n+1?s:n+1],t[s<n+2?s:n+2],e-n)},Utils:{Linear:function(t,i,s){return(i-t)*s+t},Bernstein:function(t,i){var s=TWEEN.Interpolation.Utils.Factorial;return s(t)/s(i)/s(t-i)},Factorial:function(){var t=[1];return function(i){var s=1;if(t[i])return t[i];for(var e=i;e>1;e--)s*=e;return t[i]=s,s}}(),CatmullRom:function(t,i,s,e,n){var h=.5*(s-t),a=.5*(e-i),o=n*n,r=n*o;return(2*i-2*s+h+a)*r+(-3*i+3*s-2*h-a)*o+h*n+i}}},function(t){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==t&&(t.TWEEN=TWEEN)}(this);var Base64=Base64||{};!function(t){function i(t){this.message=t}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.prototype=new Error,i.prototype.name="InvalidCharacterError",t.btoa=window.btoa?function(t){return window.btoa(t)}:function(t){for(var e,n,h=String(t),a=0,o=s,r="";h.charAt(0|a)||(o="=",a%1);r+=o.charAt(63&e>>8-a%1*8)){if(n=h.charCodeAt(a+=.75),n>255)throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return r},t.atob=window.atob?function(t){return window.atob(t)}:function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,h,a=0,o=0,r="";h=e.charAt(o++);~h&&(n=a%4?64*n+h:h,a++%4)?r+=String.fromCharCode(255&n>>(-2*a&6)):0)h=s.indexOf(h);return r}}(Base64);var Config={v:10,FPS:60,test:!0,j:!1,q:!1,l:!1,o:!0,languages:["en","zh"],u:!0,devicePixelRatio:window.devicePixelRatio||1,p:2,Iw:!1,scale:1,width:1920,height:1440,minHeight:720,maxWidth:1920,maxHeight:1440,IT:.4999,Il:.7501,device:3,loadingOptions:window.loadingOptions||{},UC:6,UZ:8,U0:1};Config.UI=1e3/Config.FPS>>0,Config.loadingOptions.Uf=0;var AppVersion=AppVersion||"0.0.1",AppVersionInfo=AppVersionInfo||AppVersion,AppVerNum;!function(){var t=AppVersion.split(".");AppVerNum=0;var i=t.length;t.forEach(function(t){i--;var s=Math.pow(100,i);AppVerNum+=t*s})}();var GameName="Flukes",DefaultLanguage=DefaultLanguage||"en";window.location.href.indexOf("lang=zh")>0&&(DefaultLanguage="zh"),function(){var t=getUrlParams();window.env=window.env||"Web",("tvOS"==window.env||t.Uj)&&(GameName="FlukesTV",DefaultLanguage="en"),t.gl&&(Config.j=!0)}(),function(){var t=Config.languages.indexOf(DefaultLanguage);t==-1&&(DefaultLanguage=Config.languages[0])}(),function(){window.env=window.env||"Web"}();var GameAppUrl,Unlimited=!1,RandomSeedFix=Unlimited?1234567:0,DefaultShareImage="marketing/share.png",DefaultShareMessage="#"+GameName+" is so hard. Do you dare to challenge? "+(GameAppUrl||""),FontName=FontName||{pixelBold:"font-8bitoperatorRegular",pixelLight:"PixelOperator",arial:"Arial",arialBold:"Arial",heitiLight:"PingFangSC-Regular",heitiMedium:"PingFangSC-Regular"};!function(){var t=Config.width>Config.height;t&&(Config.IT=4/3-1e-4,Config.Il=2.0001);var i=window.location.href;if(!("ontouchstart"in window)&&0===i.indexOf("file")||i.indexOf("dev=")>0||window.device){var s=1.25;i.indexOf("scale=1.2")>=0?s=1.2:i.indexOf("scale=1.5")>=0?s=1.5:i.indexOf("scale=2")>=0?s=2:i.indexOf("scale=1")>=0&&(s=1);var e=0;i.indexOf("wx=1")>0&&(e=128);var n=Config.device||1;i.indexOf("dev=2")>0?n=2:i.indexOf("dev=3")>0?n=3:i.indexOf("dev=4")>0?n=4:i.indexOf("dev=5")>0?n=5:i.indexOf("dev=6")>0?n=6:i.indexOf("dev=9")>0?n=9:i.indexOf("dev=13")>0?n=13:i.indexOf("dev=1")>0&&(n=1);var h,a;1===n&&(h=320,a=480),2===n&&(h=320,a=568),3===n&&(h=375,a=667),4===n&&(h=621,a=1104),5===n&&(h=384,a=512),6===n&&(h=1024,a=1366),9===n&&(h=960,a=540,s=1),13===n&&(h=1280,a=800,s=1),n&&t&&n<9&&(h+=a,a=h-a,h-=a),Config.Uw=h*s,Config.UD=a*s,Config.UD-=e}}(),Config.Ub=1e3/Config.FPS>>0,window.devicePixelRatio||(window.devicePixelRatio=1),window.debug=!0,window.log=function(t){window.debug&&console.log.apply(console,arguments)},window.resPath=window.resPath||"res/image/",window.resImagePath=window.resImagePath||"res/image/",window.resSoundPath=window.resSoundPath||"res/sound/";var resourceList=[{id:"white",src:window.resImagePath+"white.png"},{id:"bg-btn",src:window.resImagePath+"ui/bg-btn.png"},{id:"bg-leader",src:window.resImagePath+"ui/bg-leader.png"},{id:"guide-remote",src:window.resImagePath+"ui/guide-remote.png"},{id:"guide-remote-line",src:window.resImagePath+"ui/guide-remote-line.png"},{id:"guide-gamepad",src:window.resImagePath+"ui/guide-gamepad.png"},{id:"icon_selected",src:window.resImagePath+"ui/icon_selected.png"},{id:"big-button",src:window.resImagePath+"ui/big-button.png"},{id:"bg-coin",src:window.resImagePath+"ui/bg-coin.png"},{id:"p-panel-pop",src:window.resImagePath+"ui/panel-pop.png"},{id:"p-panel-outer",src:window.resImagePath+"ui/panel-outer.png"},{id:"p-panel-inner",src:window.resImagePath+"ui/panel-inner.png"},{id:"icon_ad",src:window.resImagePath+"ui/icon_ad.png"},{id:"icon_close",src:window.resImagePath+"ui/icon_close.png"},{id:"icon_coin",src:window.resImagePath+"ui/icon_coin.png"},{id:"icon_key",src:window.resImagePath+"ui/icon_key.png"},{id:"icon_cup",src:window.resImagePath+"ui/icon_cup.png"},{id:"icon_gamecenter",src:window.resImagePath+"ui/icon_gamecenter.png"},{id:"icon_help",src:window.resImagePath+"ui/icon_help.png"},{id:"icon_infinity",src:window.resImagePath+"ui/icon_infinity.png"},{id:"icon_leader-big",src:window.resImagePath+"ui/icon_leader-big.png"},{id:"icon_leader",src:window.resImagePath+"ui/icon_leader.png"},{id:"icon_lock",src:window.resImagePath+"ui/icon_lock.png"},{id:"icon_menu",src:window.resImagePath+"ui/icon_menu.png"},{id:"icon_new",src:window.resImagePath+"ui/icon_new.png"},{id:"icon_newrecord",src:window.resImagePath+"ui/icon_newrecord.png"},{id:"icon_pause",src:window.resImagePath+"ui/icon_pause.png"},{id:"icon_play",src:window.resImagePath+"ui/icon_play.png"},{id:"icon_question",src:window.resImagePath+"ui/icon_question.png"},{id:"icon_quit",src:window.resImagePath+"ui/icon_quit.png"},{id:"icon_rate",src:window.resImagePath+"ui/icon_rate.png"},{id:"icon_refresh",src:window.resImagePath+"ui/icon_refresh.png"},{id:"icon_reload",src:window.resImagePath+"ui/icon_reload.png"},{id:"icon_restart",src:window.resImagePath+"ui/icon_restart.png"},{id:"icon_setting",src:window.resImagePath+"ui/icon_setting.png"},{id:"icon_share",src:window.resImagePath+"ui/icon_share.png"},{id:"icon_shop",src:window.resImagePath+"ui/icon_shop.png"},{id:"icon_sound-off",src:window.resImagePath+"ui/icon_sound-off.png"},{id:"icon_sound-on",src:window.resImagePath+"ui/icon_sound-on.png"},{id:"icon_summary",src:window.resImagePath+"ui/icon_summary.png"},{id:"icon_surprise",src:window.resImagePath+"ui/icon_surprise.png"},{id:"icon_time-big",src:window.resImagePath+"ui/icon_time-big.png"},{id:"icon_time",src:window.resImagePath+"ui/icon_time.png"},{id:"icon_tv",src:window.resImagePath+"ui/icon_tv.png"},{id:"icon_yes",src:window.resImagePath+"ui/icon_yes.png"},{id:"bg-hero-bar",src:window.resImagePath+"ui/bg-hero-bar.png"},{id:"bg-player-bar",src:window.resImagePath+"ui/bg-player-bar.png"},{id:"hp-bg",src:window.resImagePath+"ui/hp-bg.png"},{id:"hp-value",src:window.resImagePath+"ui/hp-value.png"},{id:"mp-bg",src:window.resImagePath+"ui/mp-bg.png"},{id:"mp-value",src:window.resImagePath+"ui/mp-value.png"},{id:"icon_stomach",src:window.resImagePath+"ui/icon_stomach.png"},{id:"icon_stomach-small",src:window.resImagePath+"ui/icon_stomach-small.png"},{id:"finger",src:window.resImagePath+"ui/finger.png"},{id:"flag-bullet",src:window.resImagePath+"ui/flag-bullet.png"},{id:"flag-bullet-0",src:window.resImagePath+"ui/flag-bullet-0.png"},{id:"flag-bullet-1",src:window.resImagePath+"ui/flag-bullet-1.png"},{id:"flag-bullet-2",src:window.resImagePath+"ui/flag-bullet-2.png"},{id:"flag-bullet-3",src:window.resImagePath+"ui/flag-bullet-3.png"},{id:"flag-bullet-4",src:window.resImagePath+"ui/flag-bullet-4.png"},{id:"flag-bullet-5",src:window.resImagePath+"ui/flag-bullet-5.png"},{id:"flag-light",src:window.resImagePath+"ui/flag-light.png"},{id:"star",src:window.resImagePath+"ui/star.png"},{id:"star-dark",src:window.resImagePath+"ui/star-dark.png"},{id:"btn-left",src:window.resImagePath+"ui/btn-left.png"},{id:"btn-right",src:window.resImagePath+"ui/btn-right.png"},{id:"btn-up",src:window.resImagePath+"ui/btn-up.png"},{id:"btn-tab-selected",src:window.resImagePath+"ui/btn-tab-selected.png"},{id:"btn-tab-unselected",src:window.resImagePath+"ui/btn-tab-unselected.png"},{id:"home_bg",src:window.resImagePath+"home/home_bg.png"},{id:"home_title-en",src:window.resImagePath+"home/en/home_title.png"},{id:"home_title-zh",src:window.resImagePath+"home/zh/home_title.png"},{id:"dark-top",src:window.resImagePath+"dark-top.png"},{id:"dark-bottom",src:window.resImagePath+"dark-bottom.png"},{id:"bg-0",src:window.resImagePath+"map/bg-0.png"},{id:"platform-0",src:window.resImagePath+"map/platform-0.png"},{id:"platform-ice",src:window.resImagePath+"map/platform-ice.png"},{id:"platform-0-small",src:window.resImagePath+"map/platform-0-small.png"},{id:"platform-ice-small",src:window.resImagePath+"map/platform-ice-small.png"},{id:"food-0",src:window.resImagePath+"food/food-0.png"},{id:"fire-0",src:window.resImagePath+"enemy/fire-0.png"},{id:"fire-1",src:window.resImagePath+"enemy/fire-1.png"},{id:"fire-2",src:window.resImagePath+"enemy/fire-2.png"},{id:"fire-3",src:window.resImagePath+"enemy/fire-3.png"},{id:"bullet",src:window.resImagePath+"enemy/bullet.png"},{id:"chain",src:window.resImagePath+"enemy/chain.png"},{id:"dart",src:window.resImagePath+"enemy/dart.png"},{id:"saw",src:window.resImagePath+"enemy/saw.png"},{id:"saw-big",src:window.resImagePath+"enemy/saw-big.png"},{id:"saw-arm",src:window.resImagePath+"enemy/saw-arm.png"},{id:"saw-stick",src:window.resImagePath+"enemy/saw-stick.png"},{id:"shotgun",src:window.resImagePath+"enemy/shotgun.png"},{id:"small-saw",src:window.resImagePath+"enemy/small-saw.png"},{id:"stick-fixer",src:window.resImagePath+"enemy/stick-fixer.png"},{id:"thorn-ball",src:window.resImagePath+"enemy/thorn-ball.png"},{id:"thorn-tooth",src:window.resImagePath+"enemy/thorn-tooth.png"},{id:"thorn-wheel",src:window.resImagePath+"enemy/thorn-wheel.png"},{id:"thorn-ball-small",src:window.resImagePath+"enemy/thorn-ball-small.png"},{id:"ray-line-0",src:window.resImagePath+"enemy/ray-line-0.png"},{id:"ray-line-1",src:window.resImagePath+"enemy/ray-line-1.png"},{id:"ray-redline-0",src:window.resImagePath+"enemy/ray-redline-0.png"},{id:"player-mind",src:window.resImagePath+"player-mind.png"},{id:"coin-0",src:window.resImagePath+"coin-0.png"},{id:"coin-1",src:window.resImagePath+"coin-1.png"},{id:"coin-2",src:window.resImagePath+"coin-2.png"},{id:"coin-3",src:window.resImagePath+"coin-3.png"},{id:"key-0",src:window.resImagePath+"key-0.png"},{id:"gunfire-0",src:window.resImagePath+"effect/gunfire-0.png"},{id:"gunfire-1",src:window.resImagePath+"effect/gunfire-1.png"},{id:"gunfire-2",src:window.resImagePath+"effect/gunfire-2.png"},{id:"explosion-0",src:window.resImagePath+"effect/explosion-0.png"},{id:"explosion-1",src:window.resImagePath+"effect/explosion-1.png"},{id:"explosion-2",src:window.resImagePath+"effect/explosion-2.png"},{id:"explosion-3",src:window.resImagePath+"effect/explosion-3.png"},{id:"ghost-0",src:window.resImagePath+"player/ghost-0.png"},{id:"ghost-1",src:window.resImagePath+"player/ghost-1.png"}];!function(){for(var t=0;t<Config.U0;t++){var i=[{id:"hero-"+t,src:window.resImagePath+"player/"+t+"/hero_idle-0.png"},{id:"hero"+t+"_airjump-0",src:window.resImagePath+"player/"+t+"/hero_airjump-0.png"},{id:"hero"+t+"_airjump-0",src:window.resImagePath+"player/"+t+"/hero_airjump-0.png"},{id:"hero"+t+"_airjump-1",src:window.resImagePath+"player/"+t+"/hero_airjump-1.png"},{id:"hero"+t+"_airjump-2",src:window.resImagePath+"player/"+t+"/hero_airjump-2.png"},{id:"hero"+t+"_airjump-3",src:window.resImagePath+"player/"+t+"/hero_airjump-3.png"},{id:"hero"+t+"_fall-0",src:window.resImagePath+"player/"+t+"/hero_fall-0.png"},{id:"hero"+t+"_fall-1",src:window.resImagePath+"player/"+t+"/hero_fall-1.png"},{id:"hero"+t+"_idle-0",src:window.resImagePath+"player/"+t+"/hero_idle-0.png"},{id:"hero"+t+"_idle-1",src:window.resImagePath+"player/"+t+"/hero_idle-1.png"},{id:"hero"+t+"_idle-2",src:window.resImagePath+"player/"+t+"/hero_idle-2.png"},{id:"hero"+t+"_idle-3",src:window.resImagePath+"player/"+t+"/hero_idle-3.png"},{id:"hero"+t+"_jump-0",src:window.resImagePath+"player/"+t+"/hero_jump-0.png"},{id:"hero"+t+"_walk-0",src:window.resImagePath+"player/"+t+"/hero_walk-0.png"},{id:"hero"+t+"_walk-1",src:window.resImagePath+"player/"+t+"/hero_walk-1.png"},{id:"hero"+t+"_walk-2",src:window.resImagePath+"player/"+t+"/hero_walk-2.png"},{id:"hero"+t+"_walk-3",src:window.resImagePath+"player/"+t+"/hero_walk-3.png"},{id:"hero"+t+"_dead-0",src:window.resImagePath+"player/"+t+"/hero_dead-0.png"},{id:"hero"+t+"_dead-1",src:window.resImagePath+"player/"+t+"/hero_dead-1.png"},{id:"hero"+t+"_dead-2",src:window.resImagePath+"player/"+t+"/hero_dead-2.png"},{id:"hero"+t+"_dead-3",src:window.resImagePath+"player/"+t+"/hero_dead-3.png"},{id:"hero"+t+"_dead-4",src:window.resImagePath+"player/"+t+"/hero_dead-4.png"},{id:"hero"+t+"_dead-5",src:window.resImagePath+"player/"+t+"/hero_dead-5.png"}];i.forEach(function(t){resourceList.push(t)})}}(),function(){resourceList.push({id:"signIn",type:"fn",fn:function(t,i){this.UR=!0},update:function(){},U5:function(){return this.UR}});for(var t=0;t<4;t++)resourceList.push({type:"fn",createIndex:t,fn:function(t,i){UIImage.create(this.createIndex),this.UR=!0}});var i=[{tag:"music",id:"bgm-home",src:"./res/sound/bgm-home",volume:.4,channel:1,loop:!0},{id:"click",src:"./res/sound/click",volume:1,channel:4,loop:!1},{id:"cursor",src:"./res/sound/cursor",volume:.2,channel:4,loop:!1},{tag:"effect",id:"start-bonus",src:"./res/sound/start-bonus",volume:1,channel:3,loop:!1},{tag:"effect",id:"unlock",src:"./res/sound/unlock",volume:1,channel:5,loop:!1},{id:"got-coin",src:"./res/sound/got-coin",volume:1,channel:10,loop:!1},{id:"got-food",src:"./res/sound/got-food",volume:.6,channel:10,loop:!1},{tag:"effect",id:"shot-shotgun",src:"./res/sound/shot-shotgun",volume:.6,channel:10,loop:!1},{tag:"effect",id:"shot-wheelgun",src:"./res/sound/shot-wheelgun",volume:.4,channel:10,loop:!1},{tag:"effect",id:"shot-snakegun",src:"./res/sound/shot-snakegun",volume:.4,channel:10,loop:!1},{tag:"effect",id:"shot-machinegun",src:"./res/sound/shot-machinegun",volume:.2,channel:10,loop:!1},{tag:"effect",id:"shot-sawgun",src:"./res/sound/shot-sawgun",volume:.9,channel:10,loop:!1},{id:"player-run",src:"./res/sound/player-run",volume:.4,channel:10,loop:!1},{id:"player-jump",src:"./res/sound/player-jump",volume:.6,channel:10,loop:!1},{id:"player-doublejump",src:"./res/sound/player-doublejump",volume:.4,channel:10,loop:!1},{id:"player-land",src:"./res/sound/player-land",volume:.6,channel:10,loop:!1},{id:"player-dead",src:"./res/sound/player-dead",volume:1,channel:10,loop:!1},{id:"player-explode",src:"./res/sound/player-explode",volume:1,channel:10,loop:!1}];resourceList.unshift({id:"loadSound",type:"fn",async:!0,fn:function(t,s){if(this.UR=!1,Config.q)i=[],n.UR=!0;else{var e=GT.AudioLoader.supportFormat;console.log("supportFormat",GT.AudioLoader.supportFormat),e?i.forEach(function(t){t.src+="."+e}):i=[]}var n=this;GT.US&&GT.US.UQ(i,GT.US.U1,function(){n.UR=!0})}},{id:"waitSync",type:"fn",weight:10,fn:function(t,i){var s=this;this.UR=!1;var e=100;setTimeout(function(){s.UR=!0},e)},U5:function(){return this.UR}})}();var TextConfig={default:"en",language:null,global:{LANGUAGE_EN:"English",LANGUAGE_CN:"Chinese"},U9:function(t){TextPool[t]||(t=TextConfig.default),TEXT=JSON.parse(JSON.stringify(TextPool[t]));for(var i in TextConfig.global)i in TEXT||(TEXT[i]=TextConfig.global[i]);return TextConfig.language=t,t}},TEXT,TextPool={};TextPool.en={font:{Default:FontName.pixelBold,Art:FontName.pixelBold,Title:FontName.pixelBold,Normal:FontName.arialBold,Small:FontName.arialBold},size:{NoticeBar:32,U4:26,StartMenuButton:44,ChallengeButton:20,PanelTitle:36,PanelLabel:30,PanelContent:26,TipLabel:36,HeroButton:24},OK:"OK",CANCEL:"CANCEL",CLOSE:"CLOSE",START:"START",YES:"YES",NO:"NO",BUY:"BUY",UNLOCK:"Unlock",SELECT:"Select",SELECTED:"Selected",PLAY:"Play",CLASSIC_MODE:"Classic Mode",ARCADE_MODE:"Arcade Mode",ICE_MODE:"Ice Mode",RANDOM_MODE:"Random Endless",GALLERY:"Gallery",SHOP:"SHOP",SELECT_HERO:"SELECT HERO",GAME_OVER:"Game Over",GAME_PAUSED:"GAME PAUSED",PAUSED:"PAUSED",STAGE:"STAGE",GAME_GUIDE:"HELP",CHALLENGE_MODE:"SELECT STAGE",MATCH_MODE_TITLE:"ONLINE MATCH",COMPLETE:"Complete",GET_MORE_COINS:"Get More Coins",GET_FREE_COINS:"Free Coins",RESTORE_PURCHASED:"Restore Purchased",NEED_MORE_COINS:"Need More Coins.",NEED_MORE_KEYS:"Need More Keys.",UNLOCKED_HERO:"Unlock A Hero! ",UNLOCKED_CHALLENGE:"Unlock A new Challenge Stage! ",USED_COINS:["Used "," Coin(s)."],GOT_COINS:["You got "," Coin(s)."],USED_KEYS:["Used "," Key(s)."],GOT_KEYS:["You got "," Key(s)."],GAMEPLAY_TIP:"Tap The Same 2 Pictures",IAP_INVALID:"IAP is INVALID now.",DEAL_DONE:"The deal is Done",DEAL_FAILED:"The deal Failed",GUIDE_MOVE:"Move Left / Right",GUIDE_JUMP:"Jump / Doouble-Jump",GUIDE_MENU:"Pause / Back",CANNOT_SHARE:"Can't share game now.",GAMECENTER_INVALID:"GameCenter is INVALID now.",GAMECENTER_NOT_AUTHED:"GameCenter not authed! Try later.",BONUS:"Bonus",WATCH_AD_BONUS:"Watch Ad Video\nGet Extra Lives!",WANT_TO_TRY:"Do you want to try?",TAP_TO_FALL:"Tap to Fall Down",INERTIA_INERTIA:"Inertia! Inertia!!",LOOK_OUT_SAWS:"Look out for Saws!",TAP_AGAIN_JUMP:'Tap again to "JUMP"!',TAP_TO_SKIP:"Tap to Skip ...",WELCOME:"Welcome",TUTORIAL_BEGIN:"The Tutorial will begin.\nDon't think it's easy...",CONGRATULATIONS:"Congratulations!",TUTORIAL_END:"The Tutorial is Finished.\nMore challenges await you.",MATCH_NAME:["Match ",""],YOUR_NAME:"Your Name: ",YOUR_SCORE:"Your Time:  ",YOUR_RANK:"Your Rank:  ",YOUR_COINS:"Your Coins:  ",COMING_SOON:"Coming Soon ...",MORE_HEROS:"More Heroes\n are \ncoming ...",MORE_STAGES:"More Challenges\n are \ncoming ...",LOADING_MATCHES:"Loading Matches from server ...",LOGIN_FIRST:"( Login Your GameCenter first please, otherwise you will be anonymous. )",APP_OUT_DATE:"Your App is out date, Update first please ...",NO_CONNECTION:"Can't connect to Server , try later please ...",IAP_FREECOINS:"Free  20",IAP_MANYCOINS1:"Get  8,000",IAP_MANYCOINS2:"Get  20,000",IAP_REMOVEADS:"Remove ADs",IAP_EXTRALIVES:" + 1 Forever",REMOVE_AD_TIP:"and Remove AD",FREE:"Free",BEST:"BEST",MAP:"Map",SEED:"Seed",MENU_TO_CLOSE:" to close the window",WANNA_UNLOCK:"Unlock ?",MORE_COINS:"More Coins"},TextPool.b8={font:{Default:FontName.heitiMedium,Art:FontName.pixelBold,Title:FontName.heitiMedium,Normal:FontName.heitiMedium,Small:FontName.heitiMedium},size:{NoticeBar:36,U4:32,StartMenuButton:52,ChallengeButton:24,PanelTitle:40,PanelLabel:34,PanelContent:32,TipLabel:38,HeroButton:32},OK:" ",CANCEL:" ",CLOSE:" ",START:" ",YES:"",NO:"",BUY:"",UNLOCK:" ",SELECT:" ",SELECTED:"",PLAY:"",CLASSIC_MODE:"",ARCADE_MODE:"",ICE_MODE:"",RANDOM_MODE:"",GALLERY:" ",SHOP:" ",SELECT_HERO:"   ",GAME_OVER:"",GAME_PAUSED:"",PAUSED:"",STAGE:"",GAME_GUIDE:" ",CHALLENGE_MODE:"   ",MATCH_MODE_TITLE:"    ",COMPLETE:"",GET_MORE_COINS:"",GET_FREE_COINS:"",RESTORE_PURCHASED:"",NEED_MORE_COINS:"",NEED_MORE_KEYS:"",UNLOCKED_HERO:"! ",UNLOCKED_CHALLENGE:"! ",USED_COINS:[" "," "],GOT_COINS:[" "," "],USED_KEYS:[" "," "],GOT_KEYS:[" "," "],GAMEPLAY_TIP:"",IAP_INVALID:"",DEAL_DONE:"",DEAL_FAILED:"",GUIDE_MOVE:"/ ",GUIDE_JUMP:" / ",GUIDE_MENU:" / ",CANNOT_SHARE:"",GAMECENTER_INVALID:"GameCenter .",GAMECENTER_NOT_AUTHED:"GameCenter .",BONUS:"",WATCH_AD_BONUS:"\n",WANT_TO_TRY:"",TAP_TO_FALL:" ",INERTIA_INERTIA:"",LOOK_OUT_SAWS:"",TAP_AGAIN_JUMP:"",TAP_TO_SKIP:"  ...",WELCOME:" ",TUTORIAL_BEGIN:"\n",CONGRATULATIONS:"",TUTORIAL_END:"\n",MATCH_NAME:[" "," "],YOUR_NAME:":  ",YOUR_SCORE:":  ",YOUR_RANK:":  ",YOUR_COINS:": ",COMING_SOON:" ...",MORE_HEROS:"\n",MORE_STAGES:"\n",LOADING_MATCHES:"...",LOGIN_FIRST:"( GameCenter, . )",APP_OUT_DATE:", ...",NO_CONNECTION:",  ...",IAP_FREECOINS:"  20",IAP_MANYCOINS1:"  10,000",IAP_MANYCOINS2:"  20,000",IAP_REMOVEADS:"",IAP_EXTRALIVES:" + 1 ",REMOVE_AD_TIP:"",FREE:"",BEST:"",MAP:"",SEED:"",MENU_TO_CLOSE:" ",WANNA_UNLOCK:" ?",MORE_COINS:""},TextPool.zh=TextPool.b8,function(){"undefined"!=typeof DefaultLanguage&&TextConfig.U9(DefaultLanguage)}();var IAPConfig={},IAPList=[{key:"FreeCoins",id:"Flukes.FreeCoins",icon:"icon_coin",label:TEXT.IAP_FREECOINS,bu:"coin",value:10,add:!0,bS:!0,bX:!0},{key:"ManyCoins1",id:"Flukes.ManyCoins1",icon:"icon_coin",label:TEXT.IAP_MANYCOINS1,bu:"coin",value:8e3,add:!0,bS:!0},{key:"ManyCoins2",id:"Flukes.ManyCoins2",icon:"icon_coin",label:TEXT.IAP_MANYCOINS2,bu:"coin",value:2e4,add:!0,bS:!0},{key:"RemoveADs",id:"Flukes.RemoveADs",label:TEXT.IAP_REMOVEADS,bu:"ad",value:1,add:!1,bS:!1}];!function(){IAPList.forEach(function(t){IAPConfig[t.key]=t})}();var SysAction={reportCount:function(t,i){return},bp:function(t,i){game.bp(t,i)},b1:function(){return!(Unlimited||!window.bU)&&(!!window.bU.hasInterstitial()||(setTimeout(function(){window.bU.loadInterstitial()},900),!1))},bn:function(t,i){return!!window.bU&&(!!this.b1()&&(SysAction.reportCount(GameName+".adPage"),window.bU.showInterstitial(),setTimeout(function(){window.bU.loadInterstitial()},900),!0))},bv:function(){return!(Unlimited||!window.bL)&&window.bL.isReady},bB:function(t,i){return!!window.bL&&(this.bv()&&(SysAction.reportCount(GameName+".adVideo"),game.bj.show(),setTimeout(function(){game.bj.hide()},3333),window.bL.show({incentivized:!0,orientations:"portrait",bq:"Placement-A",beforeShow:function(){game.Va.setItem("adStartCount",game.Va.adStartCount+1),game.V9(!0),console.log("beforeShow"),t()},afterClose:function(t){game.bj.hide(),console.log("afterClose",JSON.stringify(t)),game.V9(!1),i(t)}})),!0)},Vy:function(){return window.VQ&&window.VQ.authed},Vc:function(t,i){if(!window.VQ)return t&&t(!1,null),!1;var s=window.VQ,e=i?"softAuthenticate":"authenticate";s[e](function(){console.log("GameCenter authed: "+s.authed);var i=null;s.authed&&(i=s.getLocalPlayerInfo(),console.log("getLocalPlayerInfo: "+JSON.stringify(i))),t&&t(s.authed,i)})},showGameCenter:function(){return window.VQ?void(this.Vy()?(SysAction.reportCount(GameName+".gamecenter"),window.VQ.showGameCenter()):(this.bp(TEXT.GAMECENTER_NOT_AUTHED),this.Vc(function(){window.VQ.authed&&(SysAction.reportCount(GameName+".gamecenter"),window.VQ.showGameCenter())}))):(this.bp(TEXT.GAMECENTER_INVALID),!1)},showLeaderboard:function(t){return!!window.VQ&&(t=t||0===t?t:null,void(this.Vy()?(SysAction.reportCount(GameName+".leaderboard."+t),window.VQ.showLeaderboard(t)):(this.bp(TEXT.GAMECENTER_NOT_AUTHED),this.Vc(function(){window.VQ.authed&&(SysAction.reportCount(GameName+".leaderboard."+t),window.VQ.showLeaderboard(t))}))))},showAchievements:function(){return!!window.VQ&&void(this.Vy()?window.VQ.showAchievements():(this.bp(TEXT.GAMECENTER_NOT_AUTHED),this.Vc(function(){window.VQ.showAchievements()})))},V3:function(t,i,s,e){return s=s||0,console.log("report gameCenter: ",t,i,s),!(!window.VQ||!t&&0!==t)&&void(this.Vy()?window.VQ.reportScore(t,i,s,function(){console.log("reportScore 1",t,i),e&&e()}):(console.log("GameCenter not authed! Can't reportScore."),this.Vc(function(n){n&&window.VQ.reportScore(t,i,s,function(){console.log("reportScore 2",t,i),e&&e()})})))},reportAchievement:function(t,i,s){return!!window.VQ&&void(this.Vy()?window.VQ.reportAchievement(t,i,function(){console.log("reportAchievement 1",t,i),s&&s()}):(console.log("GameCenter not authed! Can't reportAchievement."),this.Vc(function(e){e&&window.VQ.reportAchievement(t,i,function(){console.log("reportAchievement 2",t,i),s&&s()})})))},VG:function(t,i){return!!window.VQ&&void(this.Vy()?window.VQ.retrieveScores(t,{Vl:!0,V1:2},i):i&&i(null))},VL:function(t,i,s,e){return!!window.VQ&&void(this.Vy()?window.VQ.retrieveScores(t,{Vw:!1,Vg:!0,V1:2,start:i,end:s},e):e&&e(null))},VW:function(t,i,s,e){return!!window.VQ&&void(this.Vy()?window.VQ.retrieveScores(t,{Vw:!0,Vg:!0,V1:2,start:i,end:s},e):e&&e(null))},Ve:function(){if(!window.VQ)return!1},V$:function(t,i,s){if(!window.social)return this.bp(TEXT.CANNOT_SHARE),!1;var t=t||DefaultShareMessage;return window.social.openShare(t,DefaultShareImage,function(){SysAction.reportCount(GameName+".share"+(i?"EarnCoin":"")),game.Va.setItem("shareCount",game.Va.shareCount+1),i&&setTimeout(function(){game.Va.Vj(i,!0),game.Ni()},1e3),s&&s()}),!0},Na:function(t,i){SysAction.reportCount(GameName+".rate"),game.Va.setItem("rateCount",game.Va.rateCount+1),1==game.Va.rateCount&&t&&setTimeout(function(){game.Va.Vj(t,!0),game.Ni()},1e3),i&&i(),window.open(GameAppUrl)},N2:function(t,i){if(this.products={},!window.Nf)return!1;t=t||game.Nc.Ne;var s=this;console.log("getProducts",t),window.Nf.getProducts(t,function(t,e){if(t||!e||0===e.length)return console.log("getProducts",t),void(i&&i(t,null));console.log("getProducts",e.length);for(var n=0;n<e.length;n++){var h=e[n];console.log([h.id,h.title,h.description,h.price]),s.products[h.id]=h}i&&i(t,e)})},NK:function(t,i){if(!window.Nf)return!1;game.bj.show(),setTimeout(function(){},2e3);var s=this;return window.Nf.getProducts([t],function(e,n){if(e||!n||0===n.length)game.bj.hide(),console.log("getProducts",e),i&&i(e,null);else{var h=n[0];console.log([h.id,h.title,h.description,h.price]),t=h.id,s.products[t]=h,s.NM(t,i)}}),!0},NM:function(t,i){if(!window.Nf)return!1;var s=this.products[t];if(!s)return this.N2([t]),!1;game.bj.show(),setTimeout(function(){},2222);return s.purchase(1,function(t,s){game.bj.hide(),t?console.log("purchase",t):s&&console.log([s.productId,s.id,s.receipt]),i&&i(t,s)}),!0},NF:function(t,i){return!!window.Nf&&(SysAction.reportCount(GameName+".buy."+t),this.NM(t,i))},restoreTransactions:function(t){return!!window.Nf&&(game.bj.show(),window.Nf.restoreTransactions(function(i,s){if(game.bj.hide(),i)console.log(i);else if(s)for(var e=0;e<s.length;e++)console.log([s[e].productId,s[e].id,s[e].receipt]);t&&t(i,s)}),!0)}},SysActionNone={};!function(){var t=function(){
return!1};for(var i in SysAction)SysActionNone[i]=t;!window.App}();var define,exports;!function(t){if("undefined"==typeof exports){var i="undefined"!=typeof window?window:t;i.exports=i}}(this),function(t){"undefined"==typeof require&&(t.require=function(i){return t})}(exports);var Utils;!function(t){Utils=Utils||{};var i={DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,Jf:Math.PI/2,Jz:2*Math.PI,Js:function(t){return t<.001&&t>-.001},random:function(t,i){return(i-t)*Math.random()+t},Je:function(t,i){return(i-t+1)*Math.random()+t>>0},J_:function(t){return(1e3*Math.random()+1>>0)/1e3<=t},Cv:function(t,i){for(var s=t.length,e=0,n=0;n<s;n++){var h=t[n];e+=h[i]}for(var a=e*Math.random(),o=0,n=0;n<s;n++){var h=t[n];if(h[i]&&(o+=h[i],a<o))return h}return null},CE:function(t){return t[Math.random()*t.length>>0]},Cy:function(t){return t=t||16777214&Date.now(),console.log("Random seed : "+t),function(){return t=1103515245*t+12345&2147483647,t/2147483648}},CX:function(t,i){var s=[],e=t.length;i=i||1;for(var n=0;n<e;n++)for(var h=t[n],a=0;a<i;a++)s.push(h);return s},CG:function(t,i){i&&(t=t.slice(0));for(var s=t.length-1;s>0;s--){var e=Math.random()*s>>0,n=t[s];t[s]=t[e],t[e]=n}return t},C2:function(t){for(var i=[],s={},e=0,n=t.length;e<n;e++){var h=t[e];s[h]||(s[h]=1,i.push(h))}return i},Cn:function(t){return JSON.parse(JSON.stringify(t))},Ct:function(t,i,s){for(var e in i)s===!1&&e in t||(t[e]=i[e]);return t},CU:function(t){return JSON.parse(JSON.stringify(t))},aD:function(t){return JSON.stringify(t)},aY:function(t){return JSON.parse(t)},af:function(t){var i=t/1e3>>0,s=i/60>>0,e=s/60>>0,n=e/24>>0,h=i%60,a=s%60,o=e%24;return h=h<10?"0"+h:h,a=a<10?"0"+a:a,o=o<10?"0"+o:o,[n,o+":"+a+":"+h]},aF:function(t){var i=t/10>>0,s=i%100,e=Math.round((i-s)/100),n=e%60,h=Math.round((e-n)/60);return n=n<10?"0"+n:n,s=s<10?"0"+s:s,h+":"+n+"."+s},de:function(t){var i=t/1e3>>0,s=i/60>>0;i%=60;var e=t%1e3/10>>0;return[s,i,e]},dN:function(t,i){var s=t/1e4>>0,e=t%1e4>>0,n=(e/100>>0)-1,h=e%100>>0,a=new Date;return i?(a.setUTCFullYear(s),a.setUTCMonth(n),a.setUTCDate(h),a.setUTCHours(0),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0)):(a.setFullYear(s),a.setMonth(n),a.setDate(h),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),a},dn:function(t){"number"==typeof t?t=new Date(t):"object"==typeof t||(t=new Date);var i=t.getFullYear(),s=t.getMonth()+1,e=t.getDate(),n=1e4*i+100*s+e;return n},dg:function(t,i){var s=t.indexOf(i);return s>=0&&s===t.length-i.length},HF:function(t,i,s,e,n,h){return s<t&&e<i&&t<s+n&&i<e+h},HA:function(t,i,s){return s[0]<t&&s[1]<i&&t<s[2]&&i<s[3]},HZ:function(t,i,s,e){return e[0]<i&&e[1]<s&&e[2]>t&&e[3]>s},He:function(t,i){return t[0]<i[2]&&t[1]<i[3]&&t[2]>i[0]&&t[3]>i[1]},$id:function(t){return document.getElementById(t)},$q:function(t){return document.querySelector(t)},$qs:function(t){return document.querySelectorAll(t)},Hd:function(t){var i=0,s=0;if(t===window||t===document)i=window.pageXOffset||0,s=window.pageYOffset||0;else if(void 0!==t.getBoundingClientRect){var e=window.pageXOffset,n=0;e||0===e?n=window.pageYOffset:(e=document.body.scrollLeft||0,n=document.body.scrollTop||0);var h=t.getBoundingClientRect();i=h.left+e,s=h.top+n}else{for(var a=t.offsetLeft||0,o=t.offsetTop||0;(t=t.parentNode)&&t!==document.body&&t!==document;)a+=t.offsetLeft||0,o+=t.offsetTop||0;i=a,s=o}return[i,s]},HV:function(t,i,s){var e=window.devicePixelRatio||1,n=document.body.getBoundingClientRect(),h=n.width*e/t,a=n.height*e/i;return s?a:h},HX:function(){},AS:function(t,i){var s=document.createElement("canvas");return s.width=t,s.height=i,s},AQ:{},AH:function(t){var i,s=t;if("string"!=typeof s){if(!s.tagName)return null;i=s,s=i.src}else i=ResourcePool.get(s);if(i)return{id:s,img:i,x:0,y:0,w:i.width,h:i.height,ox:0,oy:0,sw:i.width,sh:i.height};var e="undefined"!=typeof ImageMapping?ImageMapping[s]:null;if(e){var n=e.img,i=ResourcePool.get(n),h={id:s,x:e.x,y:e.y,w:e.w,h:e.h,ox:e.ox,oy:e.oy,sw:e.sw,sh:e.sh};if(i)h.img=i;else{Utils.AW||(Utils.AW=document.createElement("canvas"),Utils.AW.width=1023,Utils.AW.height=1023),h.img=Utils.AW,h.id="_blank-"+n;var a=Utils.AQ[n]=Utils.AQ[n]||[];a.push(h)}return h}return console.log("Utils.getImageInfo err : ",s),null},createTexture:function(t,i){t.tagName&&(t={img:t,sx:0,sy:0,sw:t.width,sh:t.height});var s=game.renderer.createTexture(t.img,t.sx,t.sy,t.sw,t.sh,i);return s},createSprite:function(t,i,s,e){e=e!==!1&&(!e||e);var n=game.renderer.createSprite(t.img,t.sx,t.sy,t.sw,t.sh,e);return arguments.length>1&&n.anchor.set((i||0)/n.textureWidth,(s||0)/n.textureHeight),n},createSpriteByTexture:function(t,i,s,e){e=e!==!1&&(!e||e);var n=game.renderer.createSpriteByTexture(t,e);return arguments.length>1&&n.anchor.set((i||0)/n.textureWidth,(s||0)/n.textureHeight),n},A6:function(t,i,s,e){e=e!==!1&&(!e||e);var n=game.renderer.createSprite(t,0,0,t.width,t.height,e);return arguments.length>1&&n.anchor.set((i||0)/n.textureWidth,(s||0)/n.textureHeight),n},createAnimation:function(t,i){i=i||t.name||t.id;var s=t.frames,e=t.duration,n=(t.loop,[]),h=.01,a=.01;s.forEach(function(t){var i=t.duration,s=t.Aq,e=Utils.AH(s),o=e.img,r=t.x||e.x,l=t.y||e.y,u=t.w||e.w,c=t.h||e.h,f=t.ox,d=t.oy;h=Math.max(h,u),a=Math.max(a,u);var g;void 0===f&&void 0===d||(f=-(f||0),d=-(d||0),g=[f,d]);var m=new PIXI.BaseTexture(o),p=new PIXI.Rectangle(r,l,u,c),v=null,w=null,b=new PIXI.Texture(m,p,v,w);n.push({texture:b,duration:i,pivot:g})});var o=PIXI.extensions.Animation.createSprite(n,e);o.loop=t.loop,o.name=i,o.skipFrame=!!t.skipFrame;var r,l=t.ox,u=t.oy;if(void 0!==l||void 0!==u){l=-(l||0),u=-(u||0);var r=[l,u];o.pivot.set(r[0],r[1])}return o.render=function(t){t.render(this)},game.renderer.linkDisplayObject(o),o},createContainer:function(t){return t=t!==!1&&(!t||t),game.renderer.createContainer(t)},createParticleContainer:function(t,i){var s={position:!0,rotation:!0,scale:!0,alpha:!0,uvs:!0};t=t||{};for(var e in s)void 0===t[e]&&(t[e]=s[e]);return i=i!==!1&&(!i||i),game.renderer.createParticleContainer(t,i)},A3:function(t,i,s,e){return i=i||0,s=s||0,e=e||1,[i,s,i+t.width*e,s+t.height*e]},$a:function(t,i,s,e){return i=i||0,s=s||0,e=e||1,[i,s,i+t.w*e,s+t.h*e]},$O:function(t,i,s,e,n,h){var a=t.strokeStyle;t.strokeStyle=n,h&&(t.lineWidth=h),t.beginPath(),t.arc(i,s,e,0,2*Math.PI),t.stroke(),t.strokeStyle=a},fillCircle:function(t,i,s,e,n,h){var a=t.strokeStyle;t.fillStyle=n,h&&(t.lineWidth=h),t.beginPath(),t.arc(i,s,e,0,2*Math.PI),t.fill(),t.fillStyle=a},Ko:function(t,i,s,e){s=s||"red";var n=t.strokeStyle;t.strokeStyle=s,e&&(t.lineWidth=e),t.strokeRect(i[0],i[1],i[2]-i[0],i[3]-i[1]),t.strokeStyle=n},Kn:function(t,i,s){s=s||"red";var e=t.fillStyle;t.fillStyle=s,t.fillRect(i[0],i[1],i[2]-i[0],i[3]-i[1]),t.fillStyle=e},K8:function(t,i,s){s=s||"red";var e=t.strokeStyle;t.strokeStyle=s;var n=i[0];t.beginPath(),t.moveTo(n[0],n[1]);for(var h=1,a=i.length;h<a;h++){var o=i[h];t.lineTo(o[0],o[1])}t.lineTo(n[0],n[1]),t.closePath(),t.stroke(),t.strokeStyle=e},KQ:function(t,i,s,e,n,h){e=e||0,n=n||0,h=h||1;var a=i.width*h,o=i.height*h;t.drawImage(i,0,0,i.width,i.height,(s.width-a>>1)+e,(s.height-o>>1)+n,a,o)},K5:function(t,i,s,e){for(var n=0,h=t.length;n<h;){var a=t[n];a._toRemove?(h--,t.splice(n,1)):(a.render(i,s,e),n++)}},K2:function(t,i,s,e,n,h){e=e||0,n=n||0,h=h||0;for(var a=e,o=0;o<i.length;o++){var r=i[o];if(" "!==r){"."==r?r="dot":""==r&&(r="point");var l=s[r];l&&(t.drawImage(l.img,l.x,l.y,l.w,l.h,e,n,l.w,l.h),e+=l.w+h)}else e+=h+h}return e-a},KK:function(t,i,s,e,n,h){s=s||0,e=e||0,t.drawImage(i.img,i.x,i.y,i.w,i.h,s+i.ox>>0,e+i.oy>>0,n||i.w,h||i.h)},KP:function(t,i,s,e,n,h){s=s||0,e=e||0,t.drawImage(i.img,i.x,i.y,i.w,i.h,s,e,n||i.w,h||i.h)},KD:function(t,i){var s=Utils.AH(t);return s&&s.img?(s.K$=s.x,s.KR=s.y,s.Kb=s.w,s.Kz=s.h,s.x=0,s.y=0,s.alpha=1,s.scale=1,s.S5=!1,s.SL=!1,s.rotation=0,s.display=!!i,s):null},Sv:function(t,i,s,e){var n=i;if(n.display&&n.alpha>0){var h=n.ox+(s||0),a=n.oy+(e||0),o=n.rotation%Utils.Jz,r=n.scale*(n.S5?-1:1),l=n.scale*(n.SL?-1:1);1!=r||1!=l||0!=o?(t.save(),t.translate(n.x,n.y),o&&t.rotate(o),t.scale(r,l)):(h+=n.x,a+=n.y),t.globalAlpha=n.alpha<1?n.alpha:1,t.drawImage(n.img,n.K$,n.KR,n.Kb,n.Kz,h,a,n.w,n.h),1!=r||1!=l||0!=o?t.restore():t.globalAlpha=1}},St:function(t,i){var s=new Image;return s.onload=function(t){i&&i(s,t)},s.onerror=function(t){i&&i(null,t)},s.src=t,s},SR:function(t,i){var s=t.length,e={},n=-1,h=function(){if(n++,n>=s)return void(i&&i(e));var a=t[n],o=new Image;o.src=a.src,o.id=a.id,o.onload=function(t){e[o.id]=o,a.onLoad&&a.onLoad.call(o,o),h()},o.onerror=function(t){a.Sw&&a.Sw.call(o,o),h()}};return h(),e},S9:function(t,i){var s=new Image,e=t.length,n=0;s.src=t[n],s.onload=function(){return n++,n===e?void i(n,e):void(s.src=t[n])}},So:function(t,i,s){"function"==typeof i&&(s=i,i=0),i=i||0;var e=t.length,n=new Array(e),h=-1,a=function(){if(h++,h>=e)return void(s&&s(n));var o=t[h];"function"==typeof o&&(n[h]=o()),setTimeout(a,i)};a()},bo:function(t,i){i=i||{};var s,e=i.callback,n=i.ontimeout,h=(i.method||"GET").toUpperCase(),a=i.async!==!1,o=i.json||null;if(o)s=JSON.stringify(o);else{if(s=i.data,s&&"string"!=typeof s&&"number"!=typeof s){var r="";for(var l in s)r+="&"+l+"="+s[l];s=r.substr(1)}"GET"!=h||!s&&0!==s||(t+=t.indexOf("?")==-1?"?":"&",t+=s)}var u=new XMLHttpRequest;return u.open(h,t,a),o?u.setRequestHeader("Content-type","application/json"):"POST"==h&&u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e&&(u.onreadystatechange=function(){4==u.readyState&&e(u.responseText,u)}),u.timeout=i.timeout||0,u.ontimeout=function(){n&&n(u)},u.send(s),u.responseText},SQ:function(t,i){var s=document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script");return e.type="text/javascript",e.innerHTML=t||"",s.appendChild(e),e.innerHTML=t||"",window.debug,e},includeJS:function(t,i){var s=document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script");e.type="text/javascript",e.charset="UTF-8",e.defer=!1,e.src=t,s.appendChild(e),e.src=t;var n=!1;return e.onload=e.onreadystatechange=function(t){n||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n=!0,i&&i(e),this.onload=this.onreadystatechange=this.onerror=null)},e.onerror=function(t){i&&i(t),this.onload=this.onreadystatechange=this.onerror=null},e},jsonp:function(t,i,s){"function"==typeof i&&(s=i,i=null),i=i||{};var e=Utils.jsonp.ID?++Utils.jsonp.ID:1,n=i.callback=i.callback||"_cb"+e+"_"+(100*Math.random()>>0),h=[];for(var a in i){a=Utils.encodeURIComponent(a);var o=Utils.encodeURIComponent(i[a]);h.push(a+"="+o)}h.length>0&&(t=t+(t.indexOf("?")>0?"&":"?")+h.join("&")),window[n]=s;var r=Utils.includeJS(t,function(){setTimeout(function(){r.parentNode.removeChild(r),delete window[n]},197)})},Sp:function(t){var i=document.createElement("a");i.href=t||"";var s=i.href;return s},S_:function(){var t={};if(!window.navigator||!window.navigator.userAgent)return t;var i=window.navigator.userAgent.toLowerCase(),s=/(chrome)[ \/]([\w.]+)/.exec(i)||/(chromium)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||/(safari)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||!/compatible/.test(i)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(i)||[];return t[s[1]]=!0,t.weixin=/micromessenger/.test(i),t.weibo=/weibo/.test(i),t.QQBrowser=/qqbrowser/.test(i),t.QQ=/qq/.test(i)&&!t.QQBrowser,t.iPhone=/iphone/.test(i),t.iPad=/ipad/.test(i),t.iPod=/ipod/.test(i),t.iOS=t.iPhone||t.iPad||t.iPod,t.iOS5=t.iOS&&i.indexOf("os 5")>0,t.iOS6=t.iOS&&i.indexOf("os 6")>0,t.iOS7=t.iOS&&i.indexOf("os 7")>0,t.iOS8=t.iOS&&i.indexOf("os 8")>0,t.iOS9=t.iOS&&i.indexOf("os 9")>0,t.iOS10=t.iOS&&i.indexOf("os 10")>0,t.android=/android/.test(i),t.android2=/android 2/.test(i),t.android4=/android 4/.test(i),t.android44=/android 4.4/.test(i),t.android5=/android 5/.test(i),t.android6=/android 6/.test(i),t.android7=/android 7/.test(i),t.android8=/android 8/.test(i),t.android9=/android 9/.test(i),t.wp=/iemobile/.test(i)||i.indexOf("windows phone")>0,t.mobile=i.indexOf("mobile")>0,t.mobile=t.mobile||t.iOS||t.android||t.wp,t.retain=window.devicePixelRatio>=1.5,t.viewport={width:window.innerWidth,height:window.innerHeight},t.screen={width:window.screen.availWidth*(window.devicePixelRatio||1),height:window.screen.availHeight*(window.devicePixelRatio||1)},t},S8:function(){if(!document.body||!document.body.appendChild||!document.body.removeChild)return[100,100];var t=document.createElement("DIV");t.style.cssText=["width:1in; height:1in;","padding:0px; margin:0px; border:0px;","display:block;","visibility:hidden;","position:absolute;","left:1px; top:1px;","z-index:9;","opacity:0;"].join("");var i=window.devicePixelRatio||1;document.body.appendChild(t);var s=[t.offsetWidth*i,t.offsetHeight*i];return t.parentNode.removeChild(t),s},encodeURIComponent:function(t){return encodeURIComponent(t)},decodeURIComponent:function(t){return decodeURIComponent(t)},SO:function(){var t={},i=window.location.search;if(i){i=i.substring(1);for(var s,e,n=i.split("&"),h=0;s=n[h];h++)e=n[h]=s.split("="),t[e[0]]=!(e.length>1)||Utils.decodeURIComponent(e[1])}return t},SF:function(t,i,s){s=s||300;var e=setInterval(function(){if(t())return clearInterval(e),void i()},s)},SN:function(){Utils.Sh("device-width",null)},Sh:function(t,i){if(document.head){var s=document.querySelector?document.querySelector("meta[name=viewport]"):null;s||(s=document.createElement("meta"),document.head.appendChild(s),s.setAttribute("name","viewport"));var e=["width="+t,i?"height="+i:"","user-scalable=no","minimum-scale=1","maximum-scale=1","initial-scale=1"];s.setAttribute("content",e.join(", "))}},Bo:function(t,i){t=t||1;var s=["width=device-width","user-scalable="+(i?"yes":"no"),"minimum-scale="+t/(i?2:1),"maximum-scale="+t*(i?2:1),"initial-scale="+t].join(", "),e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content",s);var n=document.head||document.documentElement||document.body;return n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),!0},BM:function(t,i,s){Utils.Bo(1),setTimeout(function(){var e=window.innerWidth,n=window.innerHeight,h=t?e/t||0:0,a=i?n/i||0:0,o=Math.max(h,a);Utils.Bo(o),s&&setTimeout(function(){s(o)},110)},110)},B9:function(t,i){var s=window.location.host;window.document.cookie=t+"="+i+"; path=/; domain="+s+";"},Bp:function(t){var i=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),s=window.document.cookie.match(i);return s?s[1]:""},Bf:function(t){var i=window.location.host;window.document.cookie=t+"=; expires=Mon, 13 Jun 1982 06:00:00 GMT; path=/; domain="+i+";"},B8:function(){return document.body?{width:document.body.clientWidth,height:document.body.clientHeight}:{width:window.innerWidth,height:window.innerHeight}},Ba:function(){var t,i;document.body?(i=document.body,t=i.getBoundingClientRect()):i=t={};var s=[["inner",window.innerWidth,window.innerHeight],["screen",window.screen.width,window.screen.height],["avail",window.screen.availWidth,window.screen.availHeight],["client",i.clientWidth,i.clientHeight],["offset",i.offsetWidth,i.offsetHeight],["scroll",i.scrollWidth,i.scrollHeight],["Bounding",t.width,t.height]];return console.log(s.join("--")),s},ZERO:1e-4,BO:function(t,i,s){var e=i.x-t.x,n=i.y-t.y,h=Math.atan2(n,e),a=Math.cos(h),o=Math.sin(h);t.B1=t.BX*a,t.BW=t.BX*o,t.Bc=t.B1*s,t.BB=t.BW*s;var r,l,u=Math.abs(e),c=Math.abs(n);if((u<this.ZERO||Math.abs(t.Bc)-u>this.ZERO&&e*t.Bc>=0)&&(r=!0),(c<this.ZERO||Math.abs(t.BB)-c>this.ZERO&&n*t.BB>=0)&&(l=!0),r?(t.x=i.x,t.B1=0,t.Bc=0):t.x+=t.Bc,l){if(t.y=i.y,t.BW=0,t.BB=0,r)return!0}else t.y+=t.BB}};for(var s in i)Utils[s]=i[s]}();var $id=Utils.$id,Slider=function(t){for(var i in t)this[i]=t[i]};Slider.prototype={constructor:Slider,B1:0,BW:0,BH:0,BC:0,BT:.003,Bc:0,BB:0,Bv:null,init:function(t){this.Bv=t||this.Bv},reset:function(){this.BG=!1,this.BE=!1;this.Bv;this.Bc=this.BB=this.B1=this.BW=this.BH=this.BC=0},start:function(t,i,s){if(this.BE||s){this.Bv;this.B1=t||0,this.BW=i||0,this.BE=!1,this.BG=!0}else this.BG=!1},stop:function(){this.reset()},gf:function(t){var i=1-t*this.BT;i<0&&(i=0),i>1&&(i=1),this.B1*=i,this.BW*=i},update:function(t){if(!this.BG)return!1;this.Bv,this.B1,this.BW;if(this.gf(t),Math.abs(this.B1)>.033||Math.abs(this.BW)>.033){var i=this.B1*t,s=this.BW*t;return this.Bc=i,this.BB=s,!0}return this.stop(),!1}};var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.init()},s={constructor:i,x:0,y:0,width:0,height:0,minX:-(1/0),maxX:1/0,minY:-(1/0),maxY:1/0,top:0,right:0,bottom:0,left:0,target:null,init:function(){},gw:function(t,i,s,e){this.top=t,this.right=i,this.bottom=s,this.left=e},focus:function(t,i){if(t=t||this.gA,!t)return!1;if(i){var s=t.x-this.width/2,e=t.y-this.height/2;return this.gg(s,e),!0}var s=this.x,e=this.y,n=t.x-s,h=this.width-n;n<this.left?s=t.x-this.left:h<this.right&&(s=t.x+this.right-this.width);var a=t.y-e,o=this.height-a;return a<this.top?e=t.y-this.top:o<this.bottom&&(e=this.bottom-this.height+t.y),this.gg(s,e),!0},gg:function(t,i){this.gj=this.x,this.ge=this.y,this.x=t<this.minX?this.minX:t>this.maxX?this.maxX:t,this.y=i<this.minY?this.minY:i>this.maxY?this.maxY:i,this.x2=this.x+this.width,this.y2=this.y+this.height,this.Bc=this.x-this.gj,this.BB=this.y-this.ge,this.i2=this.Bc||this.BB},update:function(t,i){this.gj=this.x,this.ge=this.y,this.target&&this.move(t),this.Bc=this.x-this.gj,this.BB=this.y-this.ge,this.i2=this.Bc||this.BB},move:function(t){var i=this.target.x,s=this.target.y,e=this.B1*t,n=this.BW*t;this.x<i?(this.x+=e,this.x>i&&(this.x=i)):this.x>i&&(this.x+=e,this.x<i&&(this.x=i)),this.y<s?(this.y+=n,this.y>s&&(this.y=s)):this.y>s&&(this.y+=n,this.y<s&&(this.y=s));var h=this.x===i&&this.y===s;return h&&(this.target=null),h},iN:function(t,i,s){t=t<this.minX?this.minX:t>this.maxX?this.maxX:t,i=i<this.minY?this.minY:i>this.maxY?this.maxY:i;var e=t-this.x,n=i-this.y,h=Math.atan2(n,e);this.target={x:t,y:i},this.B1=s*Math.cos(h),this.BW=s*Math.sin(h)},iQ:function(t,i,s){return s=s||0,this.x-s<t&&this.y-s<i&&this.x2+s>t&&this.y2+s>i},iW:function(t,i){return i=i||0,this.x-i<t[2]&&this.y-i<t[3]&&this.x2+i>t[0]&&this.y2+i>t[1]},render:function(t){t.strokeStyle="red",t.strokeRect(this.left,this.top,this.width-this.left-this.right,this.height-this.top-this.bottom)}};for(var e in s)i.prototype[e]=s[e];t.im=i}(GT);var ImageUtils={AS:function(t,i){var s=document.createElement("canvas");return s.width=t,s.height=i,s},Y7:function(t,i,s){var e,n,h=t.width,a=t.height,o=s?Math.min(h,a):Math.max(h,a);return o==h?o>i&&(e=i,n=a*i/h):o>i&&(n=i,e=h*i/a),e&&n?ImageUtils.Yq(t,e,n):t},Yq:function(t,i,s,e,n){var h=ImageUtils.AS(i,s),a=0,o=0;e&&(h.width=e,a=e-i>>1),n&&(h.width=n,o=n-s>>1);var r=h.getContext("2d");return r.drawImage(t,a,o,i,s),h},Y5:function(t){return ImageUtils.Yq(t,t.width,t.height)},YV:function(t,i,s){var e=t.width,n=t.height,h=Math.round(n*i/e);return ImageUtils.Yq(t,i,h,null,s)},YD:function(t,i,s){var e=t.width,n=t.height,h=Math.round(e*i/n);return ImageUtils.Yq(t,h,i,s,null)},Yi:function(t,i){if(window.URL=window.URL||window.webkitURL,!window.URL)return!1;var s=document.getElementById(t);return!!s&&(s.addEventListener("change",function(t){var e=t.target;if(!(e.files.length<1)){var n=e.files[0],h=new Image;h.onload=function(){s.value=null,window.URL.revokeObjectURL(this.src),i(h)},h.src=window.URL.createObjectURL(n)}}),!0)},Yb:function(t,i,s,e,n,h){2==arguments.length&&(h=i,i=0),i=i||0,s=s||0,e=e||t.width,n=n||t.height,h?(h.width=e,h.height=n):h=ImageUtils.AS(e,n);var a=h.getContext("2d");a=h.getContext("2d"),a.drawImage(t,i,s,e,n,0,0,e,n);var o=a.getImageData(0,0,e,n).data;return o},Yf:function(t,i,s,e){var n,h,a=t.width,o=t.height;t.getContext?n=t.getContext("2d"):(e?(e.width=a,e.height=o):e=ImageUtils.AS(a,o),n=e.getContext("2d"),n.drawImage(t,0,0)),h=n.getImageData(0,0,a,o);var r=a*i,l=o*i,u=ImageUtils.AS(r,l),c=u.getContext("2d"),f=c.getImageData(0,0,r,l),d=h.data,g=f.data,m=a/4>>0;m-=m%2;var p=a%5+1,v=0,w=0,b=d.buffer;if(b){for(var C=new ArrayBuffer(g.length),y=new Uint8ClampedArray(C),I=new Uint32Array(C),T=new Uint32Array(b),B=0;B<l;B++){var x=B*r,S=B/i>>0;s&&(w=S%3,S==o-1&&o%2===0?S=0:S%2===0&&(S=(S+2)%o),v=S%p);for(var U=S*a,E=0;E<r;E++){var N=E/i>>0;s&&(N=(N+m+v+w)%a,N=a-1-N);var A=U+N;I[x]=T[A],x+=1}}f.data.set(y)}else for(var B=0;B<l;B++){var x=B*r;x<<=2;var S=B/i>>0;s&&(w=S%3,S==o-1&&o%2===0?S=0:S%2===0&&(S=(S+2)%o),v=S%p);for(var U=S*a,E=0;E<r;E++){var N=E/i>>0;s&&(N=(N+m+v+w)%a,N=a-1-N);var A=U+N;A<<=2,g[x+0]=d[A+0],g[x+1]=d[A+1],g[x+2]=d[A+2],g[x+3]=d[A+3],x+=4}}return c.putImageData(f,0,0),u},desaturate:function(t,i){var s=t.width,e=t.height;i=i||ImageUtils.AS(s,e);var n=i.getContext("2d");i!=t&&n.drawImage(t,0,0);for(var h=n.getImageData(0,0,s,e),a=h.data,o=0,r=0;r<e;r++)for(var l=0;l<s;l++){var u=a[o+0],c=a[o+1],f=a[o+2],d=(u+c+f+1.5)/3>>0;a[o+0]=d,a[o+1]=d,a[o+2]=d,o+=4}return n.putImageData(h,0,0),i},Yt:function(t,i){if(i=i||Config.p,!(i<=1)){var s=Date.now(),e=t.src.indexOf(".x5.")>0;t.loader.img=ImageUtils.YP(t,i,e),s=Date.now()-s,window.Y0=window.Y0||0,setTimeout(function(){window.Y0+=s},10)}},Y6:function(t,i,s,e,n,h){var a=i.width,o=i.height,r=n-s,l=h-e,u=Math.atan2(l,r),c=o>>1,f=Math.sqrt(r*r+l*l)+c;t.save(),t.translate(s,e),t.rotate(u),t.drawImage(i,0,0,a,o,-c,-c,f,o),t.restore()},TF:function(t,i,s,e,n,h){n=n||0,h=h||0;for(var a=s||t.width,o=e||t.height,r=0,l=0,u=ImageUtils.AS(i,o),c=u.getContext("2d"),f=i/a,d=0;d<f;d++)1!=d&&d!=f-1||(n+=a),c.drawImage(t,n,h,a,o,r,l,a,o),r+=a;return u},setFillColor:function(t,i,s,e){if(Array.isArray(i)){var n=t.createLinearGradient(0,0,0,e);i.forEach(function(t){n.addColorStop(t[0],t[1])}),t.fillStyle=n}else t.fillStyle=i},T_:function(t,i,s,e,n,h){s=s||0,"string"!=typeof e&&(h=n,n=e,e=n.color||null),n=n||{},e=e||null,n={T6:n.T6||!1,margin:n.margin||0,offsetX:n.offsetX||0,offsetY:n.offsetY||0,Tj:n.Tj||null,borderWidth:n.borderWidth||0,borderColor:n.borderColor||"#444444",TW:n.TW!==!1&&!n.TW||n.TW,shadowColor:n.shadowColor||"#333333",shadowOffsetX:n.shadowOffsetX||0,shadowOffsetY:n.shadowOffsetY||0,T2:n.T2||!1,Gi:n.Gi||null};var a=n.T6,o=Math.ceil(n.borderWidth/2),r=n.offsetX+n.margin+o,l=n.offsetY+n.margin+o,u=t-2*o-n.shadowOffsetX,c=i-2*o-n.shadowOffsetY;if(!h){var f=r+t-o+n.margin,d=l+i-o+n.margin;h=Utils.AS(f,d)}Array.isArray(s)||(s=[s]),3==s.length?s[3]=s[2]:2==s.length?(s[2]=s[0],s[3]=s[1]):1==s.length&&(s[1]=s[0],s[2]=s[0],s[3]=s[0]);var g=h.getContext("2d");if(g.lineCap="round",n.shadowOffsetX||n.shadowOffsetY){var m={offsetX:n.offsetX+n.shadowOffsetX,offsetY:n.offsetY+n.shadowOffsetY,borderWidth:n.borderWidth,borderColor:n.shadowColor,shadowOffsetX:0,shadowOffsetY:0,T6:a,T2:!1};this.T_(t-n.shadowOffsetX,i-n.shadowOffsetY,s,n.shadowColor,m,h)}this.GT(g,r,l,u,c,s[0],s[1],s[2],s[3],a),e&&(this.setFillColor(g,e,u,c),g.fill()),n.Tj&&(this.GT(g,r,l,u,Math.ceil(c/2),s[0],s[1],0,0,a),this.setFillColor(g,n.Tj,u,Math.ceil(c/2)),g.fill()),n.borderWidth&&(n.TW?this.GT(g,r,l,u+n.shadowOffsetX,c+n.shadowOffsetY,s[0],s[1],s[2],s[3],a):this.GT(g,r,l,u,c,s[0],s[1],s[2],s[3],a),g.lineWidth=n.borderWidth,n.borderColor&&(g.strokeStyle=n.borderColor),g.stroke());var p=n.Gi;if(p){var v=r+p.x||0,w=l+p.y||0;g.font=p.font,g.textAlign=p.textAlign||"center",p.shadowColor&&(g.fillStyle=p.shadowColor,g.fillText(p.text,v+p.shadowOffsetX,w+p.shadowOffsetY)),g.fillStyle=p.color||"#333333",g.fillText(p.text,v,w)}return h},GT:function(t,i,s,e,n,h,a,o,r,l){t.beginPath(),t.moveTo(i+h,s),l?(t.lineTo(i+e-a,s),t.lineTo(i+e,s+a),t.lineTo(i+e,s+n-o),t.lineTo(i+e-o,s+n),t.lineTo(i+r,s+n),t.lineTo(i,s+n-r),t.lineTo(i,s+h)):(t.lineTo(i+e-a,s),a&&t.quadraticCurveTo(i+e,s,i+e,s+a),t.lineTo(i+e,s+n-o),o&&t.quadraticCurveTo(i+e,s+n,i+e-o,s+n),t.lineTo(i+r,s+n),r&&t.quadraticCurveTo(i,s+n,i,s+n-r),t.lineTo(i,s+h),h&&t.quadraticCurveTo(i,s,i+h,s)),t.closePath()},EI:function(t,i,s){var e,n,h=t.width,a=t.height;n=i.img?i:{img:i};var e=n.img,o=n.sx||0,r=n.sy||0,l=n.sw||e.width,u=n.sh||e.height,c=n.Ex||l,f=n.EG||u,d=n.Bc,g=n.BB,m=n.ox||0,p=n.oy||0;d||0===d||(d=(h-c)/2),g||0===g||(g=(a-f)/2),s=s||ImageUtils.AS(h,a);var v=s.getContext("2d");return v.drawImage(e,o,r,l,u,d+m,g+p,c,f),v.globalCompositeOperation="destination-in",v.drawImage(t,0,0),s},EH:function(t,i,s,e,n,h,a){i=i||1,s=s||0,e=e||0,n=n||t.width,h=h||t.height;var o=n*i,r=h*i,l=a||ImageUtils.AS(o,r);l.style.imageRendering="pixelated";var u=l.getContext("2d");return u.drawImage(t,s,e,n,h,0,0,o,r),l},YP:function(t,i,s,e){s=s||0;var n,h,a=t.width,o=t.height,r=a*i,l=o*i,u=ImageUtils.AS(r,l),c=u.getContext("2d");t.getContext?n=t.getContext("2d"):(e?(e.width=a,e.height=o):e=ImageUtils.AS(a,o),n=e.getContext("2d"),n.drawImage(t,0,0)),h=n.getImageData(0,0,a,o);var f=c.getImageData(0,0,r,l),d=h.data,g=f.data,m=d.buffer;if(m){for(var p=new ArrayBuffer(g.length),v=new Uint8ClampedArray(p),w=new Uint32Array(p),b=new Uint32Array(m),C=0;C<l;C++)for(var y=C*r,I=C/i>>0,T=I*a,B=0;B<r;B++){var x=B/i>>0,S=T+x,U=b[S]>>>24;U<=s?w[y]=0:w[y]=b[S],y+=1}f.data.set(v)}else for(var C=0;C<l;C++){var y=C*r;y<<=2;for(var I=C/i>>0,T=I*a,B=0;B<r;B++){var x=B/i>>0,S=T+x;S<<=2;var U=d[S+3];U<=s?g[y+3]=0:(g[y+0]=d[S+0],g[y+1]=d[S+1],g[y+2]=d[S+2],g[y+3]=U),y+=4}}return c.putImageData(f,0,0),u},E$:function(t,i){var s=12,e=12,n=t.width,h=t.height,a=n/s>>0,o=h/e>>0;a=a<1?1:a,o=o<1?1:o;var r=n/a>>0,l=h/o>>0,u=n-r*a,c=h-l*o,i=i||(u+a)*(c+o)+n*h,f=this.AS(n,h),d=f.getContext("2d");d.drawImage(t,n-u,0,u,h-c,n-u,0,u,h-c),d.drawImage(t,0,h-c,n,c,0,h-c,n,c);for(var g=[],m=0,p=r*l;m<p;m++){var v=m%r,w=m/r>>0,b={sx:v*a,sy:w*o,sw:a,sh:o};g.push(b)}return this.EZ(g,i),g.forEach(function(i,s){var e=s%r,n=s/r>>0,h=e*a,l=n*o;d.drawImage(t,i.sx,i.sy,i.sw,i.sh,h,l,i.sw,i.sh)}),f},Cy:function(t){return t=t||16777214&Date.now(),function(){return t=1103515245*t+12345&2147483647,t/2147483648}},EZ:function(t,i){for(var s=this.Cy(i),e=[],n=t.length,h=n-1;h>0;h--)e.unshift(s()*h>>0);e.unshift(-1);for(var h=1;h<n;h++){var a=e[h],o=t[h];t[h]=t[a],t[a]=o}return t}},GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.Ek||this.init()},s={Aq:null,width:10,height:10,XJ:0,Ek:!1,Xb:null,init:function(){this.Xb=Utils.AH(this.Aq),this.Xd={};for(var t=0;t<=9;t++)this.Xd[String(t)]=[this.Xb.x+t*this.width,this.Xb.y+0,this.width,this.height]},XP:function(t,i){var s=this;this.cache={};for(var e=this.Xd,n=t;n<=i;n++){var h=String(n).split(""),a=[],o=0,r=0;h.forEach(function(t){var i=e[t],n={sx:i[0],sy:i[1],sw:i[2],sh:i[3],x:o,y:r,w:i[2],h:i[3]};o+=n.w+s.XJ,a.push(n)}),this.cache[n]={XX:a,width:o-s.XJ,height:this.height}}},XY:function(t,i,s,e,n){var h=this.cache[i];"right"==n?s-=h.width:"center"==n&&(s-=h.width/2);var a=this.Xb.img;h.XX.forEach(function(i){t.drawImage(a,i.sx,i.sy,i.sw,i.sh,s+i.x,e+i.y,i.w,i.h)})}};for(var e in s)i.prototype[e]=s[e];t.ImageNumber=i}(GT);var DomUI=function(t){for(var i in t)this[i]=t[i]},$id;!function(t){var i={constructor:DomUI,Xu:"ui-container",container:null,init:function(){this.X$=this.X$||{},this.container=this.$id(this.Xu),this.Xh=document.querySelectorAll("#"+this.Xu+" > div")},$id:function(t){return document.getElementById(t)},X4:function(){this.container.style.visibility="visible",this.container.style.left="0px",this.container.style.top="0px"},XN:function(){this.container.style.visibility="hidden",this.container.style.left="-120%",this.container.style.top="-120%"},show:function(t,i){this.X4();for(var s=this.$id(t),e=0,n=this.Xh.length;e<n;e++){var h=this.Xh[e];h!=s&&(h.style.display="none")}s.style.display="block",i?this.container.classList.add("ui-mask"):this.container.classList.remove("ui-mask")},hide:function(t){this.XN();var i=this.$id(t);i.style.display="none"},Wt:function(t){var i=this.WV;i&&(i.style.transform="scale(1,1)",i.style.webkitTransform="scale(1,1)",this.WV=null)},W6:function(t){var i=t.target,s=i.id,e=this.X$[s];return e&&!i.W0?(i.style.transform="scale(0.9,0.9)",i.style.webkitTransform="scale(0.9,0.9)",i.W0=!0,this.WV=i,!0):!!this.container.contains(i)||void 0},Wn:function(t){var i=t.target,s=i.id,e=this.X$[s];return e?(i.style.transform="scale(1,1)",i.style.webkitTransform="scale(1,1)",i.W0=!1,e(t),this.WV=null,!0):!!this.container.contains(i)||void 0},Wf:function(t){var i=t.target,s=i.id,e=this.X$[s];return e?(i.style.transform="scale(1,1)",i.style.webkitTransform="scale(1,1)",i.W0=!1,this.WV=null,!0):!!this.container.contains(i)||void 0}};for(var s in i)DomUI.prototype[s]=i[s];"undefined"!=typeof module&&(module.exports=DomUI)}();var GT=GT||{};!function(t){var i=t.WD=function(t){for(var i in t)this[i]=t[i];this.init()},s={x:0,y:0,width:0,height:0,color:"#222222",WC:0,WB:.002,WJ:0,Wq:0,paused:!0,visible:!0,init:function(){this.WJ=this.WJ||this.WB,this.Wq=this.Wq||this.WB,this.paused=!0},yn:function(t){this.WC=1,this.yX=!0,this.yl=!1,this.yR=this.WJ,this.paused=!1,t&&(this.yA=t)},O7:function(t){this.WC=0,this.yX=!1,this.yl=!0,this.O5=this.Wq,this.paused=!1,t&&(this.OQ=t)},yA:null,OQ:null,pause:function(){this.paused=!0},resume:function(){this.paused=!1},reset:function(){this.yX=!1,this.yl=!1},update:function(t,i){this.paused||(this.WC+=(this.yX?-this.yR:this.O5)*t,this.WC=Math.min(1,Math.max(0,this.WC)),this.yX&&0===this.WC&&!this.Ow?(this.yA&&this.yA(),this.Ow=!0,this.yA=null):this.yl&&1===this.WC&&!this.Ov&&(this.OQ&&this.OQ(),this.Ov=!0,this.OQ=null))},render:function(t,i,s){this.WC<=0||!this.visible||(t.globalAlpha=this.WC,t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height),t.globalAlpha=1)}};for(var e in s)i.prototype[e]=s[e];t.WD=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.init()},s={constructor:i,parent:null,children:null,OT:null,Oj:null,_g:null,_2:null,_l:null,cols:null,rows:null,x:null,y:null,width:null,height:null,init:function(t){this._a(),this.children&&this._X(this.children)},_a:function(){var t=this.parent;this.cols=this.cols||1,this.rows=this.rows||1,this.x=(this.x||0)+(t?t.x:0),this.y=(this.y||0)+(t?t.y:0),this.width=this.width||(t?t.width-t.paddingLeft-t.paddingRight:null),this.height=this.height||(t?t.height-t.paddingTop-t.paddingBottom:null),null!==this.OT&&null===this.Oj&&null===this._g?this.Oj=this._g=this.OT||0:(null===this.Oj&&this._2&&this.width&&(this.Oj=(this.width-this._2*this.cols)/(this.cols+1)),null===this._g&&this._l&&this.height&&(this._g=(this.height-this._l*this.rows)/(this.rows+1))),this.Oj=this.Oj||0,this._g=this._g||0,this.width&&!this._2?this._2=(this.width-this.Oj)/this.cols-this.Oj:this._2&&(this.width=(this._2+this.Oj)*this.cols+this.Oj),this.height&&!this._l?this._l=(this.height-this._g)/this.rows-this._g:this._l&&(this.height=(this._l+this._g)*this.rows+this._g)},_k:function(t){var i=t.sC=t.sC||0,s=t.sH=t.sH||0;t.colspan=t.colspan||1,t.rowspan=t.rowspan||1,t.x=this.x+this.Oj+i*(this._2+this.Oj),t.y=this.y+this._g+s*(this._l+this._g),t.width=t.colspan*(this._2+this.Oj)-this.Oj,t.height=t.rowspan*(this._l+this._g)-this._g},_X:function(t){if(!t)return!1;for(var i=0,s=t.length;i<s;i++)this._k(t[i]);return t}};for(var e in s)i.prototype[e]=s[e];t.sr=i}(GT);var GT=GT||{};!function(t){var i=t.sY=function(t){for(var i in t)this[i]=t[i]},s={constructor:i,x:0,y:0,width:0,height:0,radius:null,alpha:1,s2:0,su:0,sj:null,s1:0,fillColor:null,sO:null,strokeWidth:2,shape:"rect",img:null,sx:0,sy:0,sw:0,sh:0,B1:0,BW:0,BH:null,BC:null,BT:0,sT:0,s8:0,offsetX:0,offsetY:0,init:function(){this.img&&(this.sx=this.sx||0,this.sy=this.sy||0,this.sw=this.sw||this.img.width,this.sh=this.sh||this.img.height,this.width=this.width||this.sw,this.height=this.height||this.sh),this.mP&&(this.s2=this.mP,this.su=this.mP,this.sj=this.mP),"rect"==this.shape?(this.rect=!0,this.sT=this.width>>1,this.s8=this.height>>1):"circle"==this.shape&&(this.circle=!0,this.radius=this.radius||this.width>>1,this.sT=this.radius,this.s8=this.radius,null===this.sj&&(this.sj=this.s2))},reset:function(){},update:function(t,i){if(this.m8(t,i),this.s1){var s=1-t*this.s1;this.alpha*=s}if(this.s2){var s=1-t*this.s2;this.width*=s,this.sT*=s}if(this.su){var s=1-t*this.su;this.height*=s,this.s8*=s;
}if(this.sj){var s=1-t*this.sj;this.radius*=s,this.sT*=s,this.s8*=s}},m8:function(t,i){if(this.BT){var s=1-t*this.BT;s<0&&(s=0),s>1&&(s=1),this.B1*=s,this.BW*=s}if(this.BH){var e=this.B1;this.B1=this.B1+this.BH*t,this.x+=(e+this.B1)/2*t}else this.x+=this.B1*t;if(this.BC){var n=this.BW;this.BW=this.BW+this.BC*t,this.y+=(n+this.BW)/2*t}else this.y+=this.BW*t},render:function(t,i,s){t.save();var e=this.x-this.sT+this.offsetX,n=this.y-this.s8+this.offsetY;t.globalAlpha=this.alpha,this.img?t.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,e,n,this.width,this.height):(this.sO&&(t.lineWidth=this.strokeWidth||1,t.strokeStyle=this.sO,t.strokeRect(e,n,this.width,this.height)),this.fillColor&&(t.fillStyle=this.fillColor,t.fillRect(e,n,this.width,this.height))),t.restore()}};for(var e in s)i.prototype[e]=s[e];t.sY=i}(GT);var CollisionUtils={mQ:function(t,i,s,e){for(var n=i,h=s,a={x:0,y:0,deltaX:i,deltaY:s,mc:[],mv:[],mu:null,mk:null},o=t.mm,r=0,l=e.length;r<l;r++){var u=e[r];if(!u.disabled&&!u.Lm){var c=u.mm,f=o[3]<=c[1];if(f||!u.LK){var d,g,m=c[3]<=o[1],p=o[2]<=c[0],v=c[2]<=o[0],w=o[0]+i,b=o[2]+i;if(p&&b>=c[2])d=!0,i=c[0]-o[2]+1,g=1;else if(v&&w<=c[0])d=!0,i=c[2]-o[0]-1,g=1;else{d=!1;var C=b<=c[2]?b-c[0]:0,y=w>=c[0]?c[2]-w:0;g=Math.max(C,y)}var I,T,B=o[1]+s,x=o[3]+s;if(f&&x>=c[3])I=!0,s=c[1]-o[3]+1,T=1;else if(m&&B<=c[1])I=!0,s=c[3]-o[1]-1,T=1;else{I=!1;var S=x<=c[3]?x-c[1]:0,U=B>=c[1]?c[3]-B:0;T=Math.max(S,U)}if(g>0&&T>0){var E=(p||v)&&!(f||m),N=(f||m)&&!(p||v);N||T<=g&&!E?this.Lb(o,i,s,c,a)&&(s=a.deltaY,a.y++,a.mv.push(u),a.mk=u,s<h-.2?a.L$=u:s>h+.2&&(a.LC=u)):this.L6(o,i,s,c,a)&&(i=a.deltaX,a.x++,a.mc.push(u),a.mu=u,i<n-.2?a.LP=u:i>n+.2&&(a.LX=u))}}}}return a},L6:function(t,i,s,e,n){var h=t[0]+i,a=t[2]+i,o=!1;return e[0]<=a&&a<=e[2]?(i=e[0]-t[2],o=!0):e[0]<=h&&h<=e[2]&&(i=e[2]-t[0],o=!0),n.deltaX=i,o},Lb:function(t,i,s,e,n){var h=t[1]+s,a=t[3]+s,o=!1;return e[1]<=a&&a<=e[3]?(s=e[1]-t[3],o=!0):e[1]<=h&&h<=e[3]&&(s=e[3]-t[1],o=!0),n.deltaY=s,o},LJ:function(t,i,s){for(var e={},n=0;n<t.length;n++){var h=t[n];if(h.LL!==!1)for(var a=h.mm,o=a[0]/i>>0,r=a[1]/i>>0,l=a[2]/i>>0,u=a[3]/i>>0,c={},f=r*s+o,d=r;d<=u;d++){for(var g=f,m=o;m<=l;m++){var p=e[g];if(p){for(var v=0,w=p.length;v<w;v++){var b=p[v];b.mm;!c[b.id]&&h.Ls(b)&&(h.LF(b),c[b.id]=!0)}p.push(h)}else e[g]=[h];g++}f+=s}}}},GT=GT||{};!function(t){var i={};i.create=function(t,s,e){"object"==typeof t&&arguments.length<3&&(e=s,s=t,t=function(t){for(var i in t)this[i]=t[i];this.Ek===!1&&this.init()});var n=t.prototype;for(var h in s)n[h]=s[h];return i.extend(t,e),t},i.extend=function(t,i){var s=t,e=s.prototype;i=s.LE=i||s.LE||e.LE;var n;n="function"==typeof i?i.prototype:i;for(var h in n)h in e||(e[h]=n[h]);return s.$super=n,s.LE=i,e.$super=n,e.LE=i,e.constructor=s,t},t.Class=i}(GT);var GT=GT||{};!function(t){var i=t.Class,s=i.create({id:null,width:600,height:400,Uw:0,UD:0,FPS:60,LZ:"",renderer:null,u:!1,frame:0,Q_:0,offsetX:0,offsetY:0,scale:1,init:function(){this._width=this.width,this._height=this.height,this.Qy&&this.Qy.apply(this,arguments);var t=this;if(this.FPS<25)t.Qr=function(){t.Qm=setTimeout(t.Qr,t.UI),t.run()};else if(this.FPS>=25&&this.FPS<=32){var i=!1;t.Qr=function(){t.Q3=requestAnimationFrame(t.Qr),i||t.run(),i=!i}}else this.FPS>=32&&this.FPS<55?t.Qr=function(){t.Q3=requestAnimationFrame(t.Qr),t.Qm=setTimeout(function(){t.run()},t.UI)}:t.Qr=function(){t.Q3=requestAnimationFrame(t.Qr),t.run()};this.QH={now:0,last:0,step:Math.floor(1e3/this.FPS)},this.UI=this.UI||this.QH.step,this.QV(),this.Qx&&this.Qx.apply(this,arguments),this.inited=!0},QV:function(){},$id:function(t){return document.getElementById(t)},start:function(){this.QH.now=Date.now(),this.QH.last=this.QH.now,this.paused=!1,this.QY=!0,this.frame=0,this.s&&this.s(),this.Qr()},stop:function(){this.QY=!1,this.n&&this.n()},Qj:function(){clearTimeout(this.Qm),cancelAnimationFrame(this.Q3),this.QY=!1,this.n&&this.n()},pause:function(){this.paused=!0,this.QT&&this.QT()},resume:function(){this.paused=!1,this.zs&&this.zs()},z5:function(){this.QY=!1,this.Q3&&(clearTimeout(this.Qm),cancelAnimationFrame(this.Q3))},zl:function(){this.QH.last=Date.now(),this.run()},run:function(){var t,i=16,s=this.QH.now=Date.now(),e=s-this.QH.last,n=e-this.UI;n>=0&&(this.u?(n=n>i?i:n,t=this.UI):t=e,this.QH.last=s-n,this.zV(t,s),this.tick(t,s,e),this.zc(t,s),!this.QY&&this.Q3&&(clearTimeout(this.Qm),cancelAnimationFrame(this.Q3)))},tick:function(t,i,s){this.z0(s,i),!this.paused&&s>1&&(this.frame++,this.update(t,i),this.render(t,i))},zV:function(t,i){},zc:function(t,i){},kr:function(t){this.kJ&&this.kJ.kZ&&this.kJ.kZ(),this.frame=0,this.kf(t),this.kJ=t,t.k6()},kf:function(t){},update:function(t,i){this.kJ&&this.kJ.update(t,i)},render:function(t,i){this.kJ&&this.kJ.render(this.renderer,t,i)},z0:function(t,i){this.kJ&&this.kJ.z0(t,i)},Qx:null,s:null,QT:null,zs:null,n:null});t.Game=s;var e=i.create({id:null,frame:0,init:function(t){},k6:function(){},kZ:function(t){},n1:function(t){var i=new t;return i.init(this.game),this.game.kr(i),i},update:function(t,i){},render:function(t,i,s){},z0:function(t,i){}});t.np=e,function(){for(var t=["ms","moz","webkit"],i=0;!window.requestAnimationFrame&&i<t.length;++i){var s=t[i];window.requestAnimationFrame=window[s+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s+"CancelAnimationFrame"]||window[s+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){return window.setTimeout(t,16)},window.requestAnimationFrame.nA=!0),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return window.clearTimeout(t)})}()}(GT);var GT=GT||{};!function(t){var i={n_:function(t){var i=t[0]+t[1],s=t[2]+t[3],e=t[4]+t[5];return[parseInt(i,16),parseInt(s,16),parseInt(e,16)]},nF:function(t){var s=i.n_(t);return i.n$(s[0],s[1],s[2])},nd:function(t,i,s){var e=function(t){return 1==t.length?"0"+t:""+t},n=[e(Math.round(t).toString(16)),e(Math.round(i).toString(16)),e(Math.round(s).toString(16))];return n.join("")},n$:function(t,i,s){t/=255,i/=255,s/=255;var e,n,h=Math.max(t,i,s),a=Math.min(t,i,s),o=(h+a)/2;if(h==a)e=n=0;else{var r=h-a;switch(n=o>.5?r/(2-h-a):r/(h+a),h){case t:e=(i-s)/r+(i<s?6:0);break;case i:e=(s-t)/r+2;break;case s:e=(t-i)/r+4}e/=6}return[360*e,100*n,100*o]},nu:function(t,s,e){var n,h,a;if(String(s).lastIndexOf("%")>0&&(s=parseFloat(s)/100),String(e).lastIndexOf("%")>0&&(e=parseFloat(e)/100),0===s)n=h=a=e;else{var o=e<.5?e*(1+s):e+s-e*s,r=2*e-o,l=i.Rs;n=l(r,o,t+1/3),h=l(r,o,t),a=l(r,o,t-1/3)}return[255*n,255*h,255*a]},Rs:function(t,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(i-t)*s:s<.5?i:s<2/3?t+(i-t)*(2/3-s)*6:t},RJ:function(t,s,e){var n=i.nu(t,s,e);return i.nd(n[0],n[1],n[2])}};t.R8=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.reset()},s={constructor:i,fK:null,reset:function(){for(var t in this.fK)this.fK[t]=null;this.fK={}},addEventListener:function(t,i){var s=this.fK;void 0===s[t]&&(s[t]=[]),s[t].indexOf(i)===-1&&s[t].push(i)},hasEventListener:function(t,i){var s=this.fK;return void 0!==s[t]&&s[t].indexOf(i)!==-1},removeEventListener:function(t,i){var s=this.fK[t];if(void 0!==s){var e=s.indexOf(i);if(e!==-1)return s.splice(e,1),i}return null},dispatch:function(t,i){var s=this.fK[t],e=!1;if(s)for(var n=Array.prototype.slice.call(arguments,1),h=0,a=s.length;h<a;h++)s[h].apply(this,n),e=!0;return e},f2:function(t){return t?this.fK[t]:this.fK},fc:function(t){if(!t){var i=this.fK;return this.fK={},i}var i=this.fK[t]||null;return i&&(this.fK[t]=[]),i}};i.apply=function(t,s){var e=i.prototype;return s=s!==!1,(s||!t.fK)&&(t.fK={}),(s||!t.addEventListener)&&(t.addEventListener=e.addEventListener),(s||!t.hasEventListener)&&(t.hasEventListener=e.hasEventListener),(s||!t.removeEventListener)&&(t.removeEventListener=e.removeEventListener),(s||!t.dispatch)&&(t.dispatch=e.dispatch),(s||!t.f2)&&(t.f2=e.f2),(s||!t.fc)&&(t.fc=e.fc),t};for(var e in s)i.prototype[e]=s[e];t.fZ=i,"undefined"!=typeof module&&(module.exports=i)}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.QH={}};i.types={},i.prototype={constructor:i,interval:20,delay:10,fT:10,fo:"fn",fj:0,f9:!1,v4:!0,vI:function(){return!0},init:function(){this.Mt={};var t=this.Mr||[];this.Mr=[],this.MM=0,this.Mj=0;for(var i=0,s=t.length;i<s;i++){var e=t[i];this.Mq(e)}null!=this.Qx&&this.Qx()},Qx:null,MC:function(){var t=this.QH;t.current=Date.now(),t.start=t.last=t.current,t.ML=0,t.duration=0},MX:function(){var t=this.QH;t.last=t.current,t.current=Date.now(),t.ML=t.current-t.last,t.duration+=t.ML},Mq:function(t){var s=t;t={};for(var e in s)t[e]=s[e];t.options=s;var n=t.type||this.fo;t=new i.types[n](t),t.init(this),t.id=t.id||"id_"+this.Mr.length,t.delay=t.delay||0===t.delay?t.delay:this.fj||0,t.Mz=t.delay,t.weight=isNaN(t.weight)||0===t.weight?1:Number(t.weight),t.U5=t.U5||this.vI,this.Mj+=t.weight,this.Mr.push(t),this.MM=this.Mr.length},start:function(){if(this.paused=!1,this.MS=0,this.MM=this.Mr.length,this.MW={},this.Mf=0,this.M1=0,this.delay){var t=this;setTimeout(function(){t.Mg()},t.delay)}else this.Mg()},Mg:function(){this.MC(),this.run()},run:function(){function t(){var s=i.Mr.length;if(i.Mf>=s)return void i.finish();if(i.paused)return void i.Mc(e);if(!i.MF)for(var n=0;n<a&&!(h>=s);n++){var l=i.Mr[h];if(l.Mz>0)l.Mz-=e;else if(l.start(i),l.Ms=!0,a--,h++,l.block){i.MF=l;break}}for(var u=0;u<h&&!(u>=s);u++){var c=!1,l=i.Mr[u];!o[u]&&l.U5(i)?(c=!0,i.Mh(l,i)):l.M7&&l.M7(i)&&(i.MJ(l,i),i.v4&&(o[u]=-1,c=!0,i.Mf+=1,i.M1+=l.weight)),c?(a++,o[u]=1,i.MF===l&&(i.MF=null)):l.update&&!l.U5(i)&&l.update(e,i)}var f=i.M1;f!==r&&(i.Mu(e,i),r=f),i.FD=setTimeout(t,e)}var i=this,s=this.MM,e=this.interval||10,n=this.f9?"number"==typeof this.f9?this.f9:s>>2:1;n=Math.min(s,n||1);var h=0,a=n,o=this.MW,r=null;i.MF=null,t()},finish:function(){if(clearTimeout(this.FD),this.Fq)if(this.fT){var t=this;setTimeout(function(){t.Fq(t)},this.fT)}else this.Fq(this)},Fq:null,Fy:function(t){return this.Mr[t]},xp:function(t){this.MS=t;var i=this.Fy(t);if(i){var s=this;i.delay?setTimeout(function(){i.start(s),i.Ms=!0,i.Mz=0},i.delay):(i.start(s),i.Ms=!0)}},Mh:function(t,i){t.Fq&&t.Fq(i);var s;t.xQ&&(s=t.xQ(),this.Mt[t.id]=s),this.Mf+=1,this.M1+=t.weight,this.xw(t,s,i)},xw:function(t,i,s){},MJ:function(t,i){var s=t.xu;t.Sw&&t.Sw(s,i),t.xu=null,this.xt(t,s,i)},xt:function(t,i,s){},Mu:function(t,i){},xB:function(){var t=[],i=this;return this.Mr.forEach(function(s){s.U5(i)||t.push(s)}),t}};var s=function(t){for(var i in t)this[i]=t[i]};i.types.fn=s,s.prototype={constructor:s,id:null,async:!1,block:!1,xu:null,init:function(t){},fn:function(t){},start:function(t){this.result=this.fn(t),this.UR=!this.async},update:null,Fq:function(t){},xQ:function(){return this.result},U5:function(t){return this.UR},M7:function(t){return this.xu}};var e=function(t){for(var i in t)this[i]=t[i]};i.types.img=e,e.prototype={constructor:e,id:null,src:null,UR:!1,async:!0,block:!1,x8:!1,xu:null,init:function(t){this.src=this.src||this.url,this.id=this.id||this.src||"id_"+t.Mr.length,t.rootPath?"/"!=t.rootPath[t.rootPath.length-1]&&(t.rootPath+="/"):t.rootPath="",this.src&&("/"==this.src[0]&&(this.src=this.src.substring(1)),this.src=t.rootPath+this.src)},start:function(t){return this.x8?void(this.UR=!0):(this.img=this.xx(this.src,this.crossOrigin),this.img.addEventListener("load",this._onLoad),this.img.addEventListener("error",this._onError),this.img.loader=this,this.UR=!this.async,void(this.loading=!0))},xx:function(t,i){var s=new Image;return s.src=t,i!==!1&&("string"==typeof i?s.crossOrigin=i:s.crossOrigin="anonymous"),s},_onLoad:function(t){var i=this;i.removeEventListener("load",i.loader._onLoad),i.loaded=!0,i.loader.UR=!0,i.loader.loading=!1,i.loader.onLoad(i,t),delete i.loader},onLoad:function(t,i){},_onError:function(t){var i=this;i.removeEventListener("error",i.loader._onError),i.loaded=!1,i.loader.UR=!1,i.loader.xu=t,i.loader.Sw(i,t),delete i.loader},Sw:function(t,i){},xQ:function(){return this.x8?this:this.img},Fq:function(t){},U5:function(t){return this.UR},M7:function(t){return this.xu}};var n=function(t){for(var i in t)this[i]=t[i]};n.Ph={ogg:"audio/ogg; codecs=vorbis",mp3:"audio/mpeg"},i.types.audio=n,function(){var t=new Audio;for(var i in n.Ph)if(t.canPlayType(n.Ph[i])){n.supportFormat=i;break}}(),n.prototype={constructor:n,id:null,src:null,UR:!1,async:!0,block:!1,x8:!1,xu:null,wrap:null,PR:!0,init:function(t){this.src=this.src||this.url,this.id=this.id||this.src||"id_"+t.Mr.length,t.rootPath?"/"!=t.rootPath[t.rootPath.length-1]&&(t.rootPath+="/"):t.rootPath="",this.src&&("/"==this.src[0]&&(this.src=this.src.substring(1)),this.src=t.rootPath+this.src)},P6:function(){if("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase){var t=window.navigator.userAgent.toLowerCase(),i=/iphone/.test(t),s=/ipad/.test(t),e=/ipod/.test(t),n=i||s||e,h=window.location,a=h&&h.replace&&h.reload;return n&&a}return!1},start:function(t){if(this.x8)return void(this.UR=!0);if(this.wrap=null===this.wrap?t.Pn:this.wrap,this.UR=this.async,this.PR&&this.P6())return this.UR=!0,this.wrap=!1,void(this.audio=null);var i;i=this.src.indexOf("."+n.supportFormat)==-1?this.src+"."+n.supportFormat:this.src,this.PD(i),this.loading=!0},PD:function(t){var i=this.PY(t,this.crossOrigin);return this.audio=i,i.addEventListener("canplaythrough",this._onLoad),i.addEventListener("error",this._onError),i.loop=this.loop||!1,this.volume&&(i.volume=this.volume),i.preload="auto",i.autobuffer=!0,i.autoplay=!1,i.loader=this,i.load(),i},PY:function(t,i){var s=new Audio;return s.src=t,i!==!1&&("string"==typeof i?s.crossOrigin=i:s.crossOrigin="anonymous"),s},_onLoad:function(t){this.removeEventListener("canplaythrough",this.loader._onLoad),this.loaded=!0,this.loader.UR=!0,this.loader.loading=!1,this.loader.onLoad(this,t),delete this.loader},onLoad:function(t,i){},_onError:function(t){this.removeEventListener("error",this.loader._onError),this.loaded=!1,this.loader.UR=!1,this.loader.xu=t,this.loader.Sw(this,t),delete this.loader},Sw:function(t,i){},xQ:function(){return this.x8?this:this.audio},U5:function(t){return this.UR},M7:function(t){return this.xu}},t.PV=i,t.FunctionProcesser=s,t.ImageProcesser=e,t.AudioLoader=n}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.cache=this.cache||{};var s=Object.keys(this.cache);this.P4=s.length};i.prototype={P4:0,cache:null,PN:function(t,i){var s=this.get(t);if(!s.x8)return s;var e=s;return e.onLoad=function(){s.x8=!1;var n=e.xQ();this.cache[t]=n,i&&i(n)},e.start(),this.get("blank")},get:function(t,i){var s=this.cache[t]||null;return i&&null!=s&&(s=s.cloneNode(!0)),s},set:function(t,i){this.cache[t]=i},add:function(t,i){this.cache[t]||this.P4++,this.cache[t]=i},remove:function(i){var s=this.cache[i];delete this.cache[i],t.PE(s)&&t.Pz(s),this.P4--},clear:function(){for(var t in this.cache)this.remove(t);this.cache={},this.P4=0},size:function(){return this.P4},getAll:function(){return this.cache}},t.P9=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.init()};i.CENTER=1,i.P5=2,i.PL=3,i.Pf=4,i.jt=5,i.jF=6,i.prototype={constructor:i,width:null,height:null,jR:null,j6:null,screenWidth:0,screenHeight:0,j8:0,jM:0,jL:0,jc:0,offsetX:null,offsetY:null,qj:"center",qS:"center",qN:i.CENTER,qf:.02,scale:null,qG:null,e_:null,eh:0,eM:1/0,e5:0,ei:1/0,init:function(){this.e9(this.width,this.height),this.e3(this.screenWidth,this.screenHeight)},e9:function(t,i){this.width=t,this.height=i,this.eE=t/i},e3:function(t,i){this.screenWidth=t||this.width,this.screenHeight=i||this.height,this.e4=this.screenWidth/this.screenHeight,this.ek()},ek:function(){this.e4<this.e5?(this.eV=this.screenWidth,this.lf=this.eV/this.e5):this.e4>this.ei?(this.lf=this.screenHeight,this.eV=this.lf*this.ei):(this.eV=this.screenWidth,this.lf=this.screenHeight),this.lh=this.eV/this.lf},lJ:function(t){this.qN=t,this.update()},update:function(){switch(this.qN){case i.P5:this.lI();break;case i.PL:this.l4();break;case i.Pf:this.lm();break;case i.jt:this.lE();break;case i.jF:this.lN();break;case i.CENTER:this.ZJ();break;default:this.ZJ()}},Z8:function(t){t=Math.min(this.eM,Math.max(this.eh,t)),Math.abs(t-1)<=this.qf&&(t=1),this.ZL(t),this.Zv(t),this.scale=t},ZL:function(t){this.scale=null,this.qG=t,this.jR=this.width*this.qG,this.j8=Math.ceil(this.screenWidth/this.qG),this.Z4=this.j8-this.width,this.jL=this.Z4<0?this.j8:this.width,"center"==this.qj?(this.offsetX=this.Z4>>1,this.Zw=this.screenWidth-this.jR>>1):"right"==this.qj?(this.offsetX=this.Z4,this.Zw=this.screenWidth-this.jR):(this.offsetX=0,this.Zw=0),this.ZQ=-this.offsetX},Zv:function(t){this.scale=null,this.e_=t,this.j6=this.height*this.e_,this.jM=Math.ceil(this.screenHeight/this.e_),this.oX=this.jM-this.height,this.jc=this.oX<0?this.jM:this.height,"center"==this.qS?(this.offsetY=this.oX>>1,this.oL=this.screenHeight-this.j6>>1):"bottom"==this.qS?(this.offsetY=this.oX,this.oL=this.screenHeight-this.j6):(this.offsetY=0,this.oL=0),this.oT=-this.offsetY},ZJ:function(){this.qG=this.e_=this.scale=1,this.oH()},lm:function(){var t=this.eV/this.width;t=Math.min(this.eM,Math.max(this.eh,t)),Math.abs(t-1)<=this.qf&&(t=1),this.qG=this.e_=this.scale=t,this.oH()},lE:function(){var t=this.lf/this.height;t=Math.min(this.eM,Math.max(this.eh,t)),Math.abs(t-1)<=this.qf&&(t=1),this.qG=this.e_=this.scale=t,this.oH()},lN:function(){this.qG=Math.min(this.eM,Math.max(this.eh,this.eV/this.width)),this.e_=Math.min(this.eM,Math.max(this.eh,this.lf/this.height)),this.scale=null,this.oH()},lI:function(){this.eE>=this.lh?this.lE():this.lm()},l4:function(){this.eE>=this.lh?this.lm():this.lE()},oH:function(){this.jR=this.width*this.qG,this.j6=this.height*this.e_,this.j8=Math.ceil(this.screenWidth/this.qG),this.jM=Math.ceil(this.screenHeight/this.e_),this.Z4=this.j8-this.width,this.oX=this.jM-this.height,this.jL=this.Z4<0?this.j8:this.width,this.jc=this.oX<0?this.jM:this.height,"center"==this.qj?(this.offsetX=this.Z4>>1,this.Zw=this.screenWidth-this.jR>>1):"right"==this.qj?(this.offsetX=this.Z4,this.Zw=this.screenWidth-this.jR):(this.offsetX=0,this.Zw=0),this.ZQ=-this.offsetX,"center"==this.qS?(this.offsetY=this.oX>>1,this.oL=this.screenHeight-this.j6>>1):"bottom"==this.qS?(this.offsetY=this.oX,this.oL=this.screenHeight-this.j6):(this.offsetY=0,this.oL=0),this.oT=-this.offsetY}},i.prototype.ot=function(t,i,s){i?(t.width=this.jM,t.height=this.j8):(t.width=this.j8,t.height=this.jM),s?this.oB(t,i):i?(t.style.width=this.screenHeight+"px",t.style.height=this.screenWidth+"px"):(t.style.width=this.screenWidth+"px",t.style.height=this.screenHeight+"px")},i.prototype.oB=function(t,i){var s;s=i?"translateZ(0) scale("+this.e_+","+this.qG+")":"translateZ(0) scale("+this.qG+","+this.e_+")","transform"in t.style?(t.style.transformOrigin="0 0",t.style.transform=s):"webkitTransform"in t.style&&(t.style.webkitTransformOrigin="0 0",t.style.webkitTransform=s)},t.o_=i}(GT);var GT=GT||{};!function(t){if(window.AudioContext=window.AudioContext||window.webkitAudioContext||window.oM||window.oF,window.AudioContext){var i=window.AudioContext.prototype;i.createGain=i.createGain||i.createGainNode,i.createDelay=i.createDelay||i.createDelayNode}var s=function(t){var i;i=t.oY&&s.U1?e:n;for(var h in i.prototype)this[h]=i.prototype[h];i.call(this,t),this.init()};s.prototype={constructor:s,id:1,tag:null,channel:1,oY:!0},s.hT=!1,s.hM=1;var e=function(t){for(var i in t)this[i]=t[i]};e.prototype={constructor:e,context:null,gain:null,source:null,audio:null,buffer:null,src:null,loaded:!1,error:!1,c4:!1,currentTime:0,loop:!1,volume:1,muted:!1,cD:0,endTime:0,c2:0,onended:null,init:function(){this.context=this.context||s.context,this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.currentTime=0,s.set(this.id,this),this.audio&&this.cr()},cr:function(){this.context;this.buffer?this.cm=this.buffer.duration:this.audio&&(this.cm=this.audio.duration),this.c0()},c0:function(){this.cD=Math.min(this.cD,this.cm),this.endTime?(this.endTime=Math.min(this.endTime,this.cm),this.duration=this.endTime-this.cD,this.cC=!0):this.duration?(this.endTime=Math.min(this.cD+this.duration,this.cm),this.duration=this.endTime-this.cD,this.cC=!0):(this.cC=!1,this.duration=this.duration||this.cm)},cc:function(t,i){return t},load:function(t){if(this.loaded===!0)return!1;var i=this;i.loaded=!1,i.error=!1;var s=function(s){var n=i.cc(h.response,h.responseType);i.context.decodeAudioData(n,function(s){i.buffer=s,i.cr(),i.loaded=!0,i.error=!1,i.onLoad(i.source),h.onload=null,h.onerror=null,t&&t(i)},e)},e=function(s){t&&t(i)},n=function(s){i.loaded=!1,i.error=!0,i.uP(s),h.onload=null,h.onerror=null,t&&t(null)},h=new XMLHttpRequest;h.open("GET",i.src,!0),h.responseType="arraybuffer",h.onload=s,h.onerror=n,h.send(null)},onLoad:function(t){},uP:function(t){console.log("Load "+this.src+" ... Failed")},play:function(t){if(!t||!this.c4){this.source&&this.channel<=1&&this.c4&&this.source.stop(0),this.currentTime=0;var i=this;setTimeout(function(){i.resume()},1)}},pause:function(){this.currentTime+=this.context.currentTime-this.c2,this.source&&this.source.stop(0),this.c4=!1,this.ue=!0},resume:function(){this.c2=this.context.currentTime;var t;if(this.audio)t=this.context.createMediaElementSource(this.audio);else{if(!this.buffer)return this.source=null,this.c4=!0,void(this.ue=!1);t=this.context.createBufferSource(),t.buffer=this.buffer}this.source=t,t.connect(this.gain),t.loop=!!this.loop,this.onended&&(t.onended=this.onended),this.setVolume(this.volume),this.setMute(this.muted),this.endTime&&(t.loopStart=this.cD,t.loopEnd=this.endTime);var i=this.cD+this.currentTime;if(this.loop)this.endTime&&i>=this.endTime&&(i=this.cD),this.source.start(0,i);else{var s;if(this.endTime){if(i>=this.endTime)return;s=this.endTime-i}else s=this.cm;this.source.start(0,i,s)}this.c4=!0,this.ue=!1},stop:function(){this.source&&this.c4&&this.source.stop(0),this.currentTime=0,this.c2=0,this.c4=!1,this.ue=!1},uK:function(){return this.currentTime},uH:function(t){this.pause(),this.currentTime=t,this.resume()},um:function(){return this.duration},uf:function(){return this.loop},ua:function(t){this.loop=t,this.source&&(this.source.loop=t)},getVolume:function(t){return this.volume},setVolume:function(t){this.volume=t;var i=t*s.hM;this.gain.gain.value=i},isMuted:function(){return this.muted},setMute:function(t){t=this.muted=!!t,t?this.gain.gain.value=0:this.gain.gain.value=this.volume}};var n=function(t){for(var i in t)this[i]=t[i]};n.prototype={constructor:n,audio:null,channel:1,uk:!1,src:null,loaded:!1,error:!1,c4:!1,currentTime:0,loop:!1,volume:1,muted:!1,duration:0,cD:0,endTime:0,init:function(){this.audio||(this.audio=this.PY(this.src),this.audio.volume=this.volume,this.audio.muted=this.muted,this.audio.loop=this.loop,this.audio.preload="auto",this.audio.autoplay=!1,this.audio.autobuffer=!0),this.channel<=1?this.play=this.play||this.uA:(this.pool=[],this.pool.push(this.audio),this.audio.u5=this.pool.length,this.play=this.play||this.ul),this.index=0,s.set(this.id,this)},PY:function(t){var i=new Audio;return i.src=t,i},cr:function(){if(this.cm=this.audio.duration,this.c0(),this.cC){var t=this;this.u2=function(i){t.u8(i)},this.audio.addEventListener("timeupdate",this.u2,!1)}if(this.channel>1&&!this.uk)for(var i=1;i<this.channel;i++)this.ut()},c0:function(){this.cD=Math.min(this.cD,this.cm),this.endTime?(this.endTime=Math.min(this.endTime,this.cm),this.duration=this.endTime-this.cD,this.cC=!0):this.duration?(this.endTime=Math.min(this.cD+this.duration,this.cm),this.duration=this.endTime-this.cD,this.cC=!0):(this.cC=!1,this.duration=this.duration||this.cm)},u8:function(t){var i=t.target;if(i.currentTime>=this.endTime&&!i.paused){if(i.pause(),!this.loop)return!0;i.currentTime=this.cD,i.play()}return!1},reload:function(t){this.loaded=!1,this.load(t)},load:function(t){if(this.loaded===!0)return!1;var i=this;i.loaded=!1,i.error=!1;var s=function(){i.loaded=!0,i.error=!1,i.cr(),i.onLoad(i.audio),i.audio.removeEventListener("canplaythrough",s),i.audio.removeEventListener("error",e),t&&t(i)},e=function(n){i.loaded=!1,i.error=!0,i.uP(n),i.audio.removeEventListener("canplaythrough",s),i.audio.removeEventListener("error",e),t&&t(null)};this.audio.addEventListener("canplaythrough",s),this.audio.addEventListener("error",e),this.audio.load()},onLoad:function(){},uP:function(t){console.log("Load "+this.src+" ... Failed")},play:null,pause:function(){this.loaded&&(this.currentTime=this.audio.currentTime-this.cD,this.audio.pause()),this.c4=!1,this.ue=!0},resume:function(){if(this.loaded){var t=this.cD+this.currentTime;this.audio.currentTime=t,this.audio.play()}this.c4=!0,this.ue=!1},stop:function(){this.loaded&&(this.audio.pause(),this.audio.currentTime=0),this.currentTime=0,this.c4=!1,this.ue=!1},uK:function(){return this.audio.currentTime-this.cD},uH:function(t){this.currentTime=t,this.audio.currentTime=this.cD+t},um:function(){return this.duration},uf:function(){return this.loop},ua:function(t){this.loop=t,this.pool?this.pool.forEach(function(i){i.loop=t}):this.audio.loop=t},getVolume:function(t){return this.volume},setVolume:function(t){this.volume=t;var i=t*s.hM;this.pool?this.pool.forEach(function(t){t.volume=i}):this.audio.volume=i},isMuted:function(){return this.muted},setMute:function(t){t=this.muted=!!t;this.pool?this.pool.forEach(function(i){i.muted=t}):this.audio.muted=t},uA:function(t){if(!t||!this.c4){this.channel<=1&&!this.audio.paused&&this.pause(),this.currentTime=0;var i=this;setTimeout(function(){i.resume()},1)}},ul:function(t){if(!t||!this.c4){this.pool.length<=this.index&&this.ut(),this.audio=this.pool[this.index],this.index=++this.index%this.channel,this.currentTime=0;var i=this;setTimeout(function(){i.resume()},1)}},ut:function(){var t=this.audio.cloneNode();return t.loop=this.loop,t.volume=this.volume,t.muted=!!this.muted,this.cC&&t.addEventListener("timeupdate",this.u2,!1),this.pool.push(t),t.u5=this.pool.length,t}},s.Ph={mp3:"audio/mpeg",m4a:"audio/mp4; codecs=mp4a",ogg:"audio/ogg; codecs=vorbis",webm:"audio/webm; codecs=vorbis",caf:"audio/x-caf"},s.rT=[],s.rK=null;var h=new Audio;for(var a in s.Ph){var o=s.Ph[a];h.canPlayType(o)&&(s.rT[a]=o,s.rK||(s.rK=a))}s.createContext=function(){var t;try{t=new window.AudioContext}catch(t){return null}return t.gain=t.createGain(),t.gain.gain.value=1,t.gain.connect(t.destination),t},window.AudioContext&&(s.context=s.createContext(),s.U1=!!s.context),s.rm=function(){var t=s.context;if(!t||t&&t.currentTime>0)return!1;var i=t.createBufferSource();i.buffer=t.createBuffer(1,1,22050);var e=t.createGain();return e.gain.value=0,e.connect(t.destination),i.connect(e),i.start(0),s.rm.played=!0,document.removeEventListener("touchstart",s.rm,!1),i},document.addEventListener("touchstart",s.rm,!1);var r={};s.get=function(t){return r[t]},s.set=function(t,i){return r[t]=i,i},s.clear=function(){r={}},s.remove=function(t){var i=r[t];return delete r[t],i},s.size=function(){var t=Object.keys(r);return t.length},s.getAll=function(){return r};var l=["play","stop","pause","resume","setMute","isMuted","setVolume","getVolume"];l.forEach(function(t){s[t]=function(i,e){var n=s.get(i);if(n&&n[t])return n[t](e)}}),s.muted=!1,s.rb=function(t,i,e){t=!!t;for(var n in r)if(e===!0||n!==i){var h=r[n];e===!0&&"tag"in h&&h.tag===i||h.setMute(t)}s.muted=t},s.rS=function(t,i){i=!!i;for(var e in r){var n=r[e];n.tag===t&&n.setMute(i)}s[t+"Muted"]=i},s.r$=function(t){for(var i in r){var e=r[i];e.tag===t&&e.c4&&e.pause()}s[t+"Paused"]=!0},s.rs=function(t){for(var i in r){var e=r[i];e.tag===t&&e.ue&&e.resume()}s[t+"Paused"]=!1,s[t+"Stopped"]=!0},s.rW=function(t){for(var i in r){var e=r[i];e.tag===t&&e.stop()}s[t+"Paused"]=!0,s[t+"Stopped"]=!0},s.rU=function(t){for(var i in r){var e=r[i];e.tag===t&&e.play()}s[t+"Paused"]=!1,s[t+"Stopped"]=!1},s.r7=function(t,i){var e=s.get(t);if(!e||e.loaded!==!0)return!1;i=i||0===i?i:30;var n=s.r7.QH[t],h=Date.now();if(!n||h-n>i){s.r7.QH[t]=h;try{e.play()}catch(t){console.log("Sound.smartPlay ERROR:",e.id,t)}return!0}return!1},s.r7.QH={};var u=[],c=function(t){var i=t.target;i.loaded=!0,i.error=!1,i.removeEventListener("canplaythrough",c)};s.loadSound=function(t,i,e){if(s.U1){var n=t.oY;n!==!0&&n!==!1&&(t.oY=i!==!1)}else t.oY=!1;var h=new s(t);return h.load(e),h},s.UQ=function(t,i,e){for(var n=t.length,h=0,a=[],o=0;o<n;o++){var r=t[o];s.loadSound(r,i,function(t){t&&(a.push(t),h++)})}var l=function(){return h>=n?void(e&&e(a)):void setTimeout(l,100)};l()},s.DE=function(t,i){for(var e=0;e<t.length;e++){var n=t[e],h=s.loadSound(n,i);u.push(h)}},s.D6=function(){if(!(u.length<1)){var t=u.shift();if(t.loaded)return void console.log("Sound.touchLoad: loaded");"AUDIO"===t.tagName&&t.addEventListener("canplaythrough",c),t.load()}},t.US=s,t.AudioWrap=n,t.WebAudioWrap=e}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.D7=this.D7||[]},s={constructor:i,reset:function(){this.D7.length=0,this.DA=0},size:function(){return this.D7.length},DS:function(t,i,s,e){var n=++this.DA,h={id:n,fn:t,tag:e,timeout:i,interval:s};return h},Mq:function(t,i,s,e){var n;if("function"==typeof t)n=this.DS(t,i,s,e);else{n=t,n.id=n.id||++this.DA;var h=arguments.length;h>=1&&(n.timeout=i),h>=2&&(n.DT=s),h>=3&&(n.tag=e)}return n._toRemove=!1,n.pE=n.timeout,this.D7.push(n),n},Fy:function(t){for(var i=0,s=this.D7.length;i<s;i++){var e=this.D7[i];if(e.fn===t)return e}return null},pn:function(t,i){var s=this.Fy(t);return this.pK(s,i)},pK:function(t,i){var s=i-t.timeout;return t._toRemove=!1,t.pE=Math.max(0,t.pE+s),t.timeout=i,t},po:function(t){return this.D7[t]},pR:function(t,i){for(var s=0,e=this.D7.length;s<e;s++){var n=this.D7[s];n.tag===t&&(i?(this.D7.splice(s,1),e--,s--):n._toRemove=!0)}return this.D7.length},pM:function(t,i){i?this.D7.splice(t,1):this.D7[t]._toRemove=!0},pj:function(t,i,s){for(var e=0,n=this.D7.length;e<n;e++){var h=this.D7[e];if(h.fn===t&&(s?(this.D7.splice(e,1),n--,e--):h._toRemove=!0,!i))break}return this.D7.length},p1:function(t,i){if(i){for(var s=0,e=this.D7.length;s<e;s++)if(t===this.D7[s]){this.D7.splice(s,1);break}}else t._toRemove=!0},pQ:function(){this.reset()},update:function(t,i){for(var s=0,e=this.D7.length;s<e;s++){var n=this.D7[s];if(n._toRemove)n._toRemove=!1,this.D7.splice(s,1),e--,s--;else if((n.pE-=t)<=0){var h=n.fn;h(t,i,n),e=this.D7.length,n.interval?n.pE=n.timeout:n._toRemove=!0}else n.update&&(n.update(t,i,n),e=this.D7.length)}}};for(var e in s)i.prototype[e]=s[e];t.IW3=i,"undefined"!=typeof module&&module.exports&&(module.exports=i)}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]};i.I6q=1;var s={constructor:i,IO4:null,id:null,II1:!1,IMI:!1,Ia1:">>S<<",init:function(){this.id=this.id||"DS_"+i.I6q++,this.II1?this.Ihd=this.id+"@":this.Ihd="",this.IMI?this.IbI():this.data?this.IO4=this.data:this.IO4={},this.IDL=this.IDL||{}},IQX:function(t,i){this.IDL[t]=i},Iyt:function(t,i){var s=this.IDL[t];s&&s(i)},get:function(t){return this.IO4[t]},set:function(t,i){this.IO4[t]=i},update:function(t,i){var s=this.IO4[t]||{};for(var t in i)s[t]=i[t];return this.IO4[t]=s,s},remove:function(t){var i=this.IO4[t];return delete this.IO4[t],i},IEJ:function(){return this.IO4},I$W:function(t){this.IO4=t},getData:function(){var t={};for(var i in this.IO4)t[i]=this.IO4[i];return t},setData:function(t,i){i&&(this.IO4={});for(var s in t)this.IO4[s]=t[s];return this.IO4},clearData:function(){this.IO4={}},save:function(t,i){1==arguments.length&&(i=this.get(t)),this.set(t,i),window.localStorage.setItem(this.Ihd+t,JSON.stringify(i)),this.Iyt(t,i)},load:function(t,i){var s=window.localStorage.getItem(this.Ihd+t);return null!==s&&(s=JSON.parse(s),i&&(s=this.IO5(s))),this.set(t,s),s},delete:function(t){var i=window.localStorage.getItem(this.Ihd+t);return window.localStorage.removeItem(this.Ihd+t),this.remove(t),i},clear:function(){for(var t in this.IO4)window.localStorage.removeItem(this.Ihd+t);window.localStorage.removeItem(this.Ia1+"@"+this.id),this.IO4={}},aD:function(){return JSON.stringify(this.IO4);
},aY:function(t,i){var s=t?JSON.parse(t):{};if(i)this.IO4=s;else for(var e in s)this.set(e,s[e]);return s},IHM:function(){var t=this.aD();return window.localStorage.setItem(this.Ia1+"@"+this.id,t),t},IbI:function(){var t=window.localStorage.getItem(this.Ia1+"@"+this.id);return this.aY(t,!0)},IO5:function(t){return null===t||void 0===t?t:("true"===t?t=!0:"false"===t?t=!1:"null"===t?t=null:"undefined"===t?t=void 0:isNaN(Number(t))||(t=Number(t)),t)},CU:function(t){return JSON.parse(JSON.stringify(t))},B9:function(t,i){var s=window.location.host;window.document.cookie=t+"="+i+"; path=/; domain="+s+";"},Bp:function(t){var i=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),s=window.document.cookie.match(i);return s?s[1]:""},Bf:function(t){var i=window.location.host;window.document.cookie=t+"=; expires=Mon, 13 Jun 1982 06:00:00 GMT; path=/; domain="+i+";"}};for(var e in s)i.prototype[e]=s[e];t.Ibh=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={constructor:i,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,Jf:Math.PI/2,Jz:2*Math.PI,img:null,sx:null,sy:null,sw:null,sh:null,x:0,y:0,width:null,height:null,sT:0,s8:0,offsetX:0,offsetY:0,I5F:0,IMS:0,scale:1,qG:1,e_:1,S5:!1,SL:!1,rotation:0,visible:!0,I_Y:0,ItP:0,I4O:0,init:function(){this.children=[],this.Ipn={},this.ITX(this.img),this.ILi(this.sx,this.sy,this.sw,this.sh),this.Izm()},ITX:function(t){this.img=t},ILi:function(t,i,s,e){null!==t&&void 0!==t||(t=0),null!==i&&void 0!==i||(i=0),null!==s&&void 0!==s||(s=this.img.width),null!==e&&void 0!==e||(e=this.img.height),this.sx=t,this.sy=i,this.sw=s,this.sh=e,null!==this.width&&void 0!==this.width||(this.width=this.sw),null!==this.height&&void 0!==this.height||(this.height=this.sh)},Z8:function(t){this.scale=t,this.qG=t,this.e_=t},ICT:function(t,i){var s=this.Ixh;return s[0]<t&&t<s[2]&&s[1]<i&&i<s[3]},update:function(t,i){},Inj:function(){var t=this.Iqq-this.sT,i=this.I5G-this.s8;this.Ixh[0]=t,this.Ixh[1]=i,this.Ixh[2]=t+this.width,this.Ixh[3]=i+this.height,this.mm=this.Ixh},IsA:function(t,i,s){if(this.img){var e=this.x-this.sT+this.offsetX,n=this.y-this.s8+this.offsetY,h=this.width+this.I5F,a=this.height+this.IMS;t.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,e,n,h,a)}},IzS:function(t,i,s){t.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.I_Y,this.ItP,this.IVS,this.I$y)},IkI:function(t,i,s){this.children.forEach(function(e){e.render(t,i,s)})},render:function(t,i,s){if(!this.visible)return!1;if(this.parent?this.I4O=this.alpha*(this.parent.I4O||1):this.I4O=this.alpha,this.I4O=this.I4O>1?1:this.I4O,this.I4O<=0)return!1;var e=-this.sT,n=-this.s8,h=this.qG*(this.S5?-1:1),a=this.e_*(this.SL?-1:1),o=this.rotation%this.Jz;1!=h||1!=a||0!=o?(t.save(),t.translate(this.x,this.y),o&&t.rotate(o),t.scale(h,a)):(e+=this.x,n+=this.y),this.I_Y=e+this.offsetX,this.ItP=n+this.offsetY,this.IVS=this.width+this.I5F,this.I$y=this.height+this.IMS,t.globalAlpha=this.I4O,this.IzS(t,i,s),this.children&&this.IkI(t,i,s),1!=h||1!=a||0!=o?t.restore():t.globalAlpha=1,this.I4O=1},Izm:function(t){return t=t||this.parent,this.absolute||!t?(this.I4O=this.alpha,this.Iqq=this.x,this.I5G=this.y,this.IFv=this.rotation,this.IWp=this.scale,this.IxG=this.qG,this.I6N=this.e_,this.Iwr=this.S5,void(this.I9_=this.SL)):(this.I4O=this.alpha*t.I4O,this.Iqq=this.x+t.Iqq,this.I5G=this.y+t.I5G,this.IFv=this.rotation+t.IFv,this.IWp=this.scale*t.IWp,this.IxG=this.qG*t.IxG,this.I6N=this.e_*t.I6N,this.Iwr=this.S5^t.Iwr,void(this.I9_=this.SL^t.I9_))},addChild:function(t){t.id=t.id||0===t.id?t.id:i.IRw(),this.Ipn[t.id]=t,this.children.push(t),t.parent=this},IJa:function(t){return this.Ipn[t]},getChildAt:function(t){return this.children[t]},removeChild:function(t){var i=this.indexOf(t);return i>=0&&(delete this.Ipn[t.id],this.children.splice(i,1),t.parent=null,t)},Iq1:function(t){var i=this.Ipn[t];return!!i&&this.removeChild(i)},removeChildAt:function(t){var i=this.children[t];return!!i&&(delete this.Ipn[i.id],this.children.splice(t,1),i.parent=null,i)},indexOf:function(t){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i]===t)return i;return-1},I8F:function(t){return!!this.children[t.id]},IFx:function(t){i.IvB(this.children,t)}};i.UH5=0,i.IRw=function(){i.UH5++;var t="do_"+i.UH5;return t},i.IvB=function(t,i){for(var s,e,n=t.length,h=1;h<n;h++){s=t[h];for(var a=s[i],o=h;o>0&&(e=t[o-1])[i]>a;o--)t[o]=e;t[o]=s}};for(var e in s)i.prototype[e]=s[e];t.DisplayObject=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.init()};i.prototype={constructor:i,name:null,parent:null,init:function(){},k6:function(t,i,s){},execute:function(t,i,s){},UO$:function(t,i,s){},back:function(t,i,s){},suspend:function(t,i,s){},resume:function(t,i,s){},reset:function(t,i,s){}},t.State=i,"object"==typeof module&&module&&module.exports&&(module.exports=i)}(GT);var GT=GT||{};!function(t){var i=function(){};i.apply=function(t){var s=i.prototype;for(var e in s)e in t||(t[e]=s[e])},i.prototype={U2j:null,USR:null,state:null,U$D:null,UN1:function(t){this.state=t,this.U$D=t.name},U$3:function(t,i,s){this.state&&this.state.UO$(this,i,s),this.U2j=this.state,this.USR=this.U$D,this.state=t,this.U$D=t.name,t.k6(this,i,s)},UlZ:function(t,i,s){this.state&&this.state.suspend(this,i,s),this.U2j=this.state,this.USR=this.U$D,this.state=t,this.U$D=t.name,t.k6(this,i,s)},UWQ:function(t,i,s){t=t||this.U2j,this.state&&this.state.UO$(this,i,s),this.U2j=this.state,this.USR=this.U$D,this.state=t,this.U$D=t.name,t.resume(this,i,s)},UG0:function(t,i){this.state&&this.state.execute(this,t,i)},URA:function(t,i){this.state&&this.state.reset(this,t,i)}},t.Usu=i,"object"==typeof module&&module&&module.exports&&(module.exports=i)}(GT);var Toucher=Toucher||{};!function(t){var i={};i.Ut0=["touches","changedTouches","targetTouches"],i.touches="touches",i.changedTouches="changedTouches",i.targetTouches="targetTouches",i.Ucq=1;var s=function(i){for(var s in i)this[s]=i[s];this.Uwt=this.Uwt||t.UFX},e={constructor:s,Uwt:null,host:window,UCA:document,UXg:1,offsetLeft:0,offsetTop:0,j8:0,jM:0,orientation:0,offsetX:0,offsetY:0,Utz:!1,Ud1:null,Un8:null,USh:!0,preventDefault:!1,UKJ:!0,UCi:!1,Uf$:!1,UE1:!1,UuW:!1,UK3:30,UOV:5,UoT:null,UDu:null,Ugc:null,UXw:0,Ukr:0,Uk1:0,UCB:0,Qy:function(){},init:function(){if(this.UUg=[],this.EVENT={},this.reset(),this.Qy(),this.Utz="ontouchstart"in this.UCA,this.Utz&&this.Un8!==!1?this.Un8=!0:this.Un8=!1,this.Utz||this.Ud1===!1?this.Ud1=!1:this.Ud1=!0,this.Un8!==!1||this.Ud1!==!1){this.Ud1===!0?(this.EVENT.START="mousedown",this.EVENT.UHn="mousemove",this.EVENT.END="mouseup",this.EVENT.CANCEL=null):(this.EVENT.START="touchstart",this.EVENT.UHn="touchmove",this.EVENT.END="touchend",this.EVENT.CANCEL="touchcancel");var t=this.UCA,i=this;this.UZt=function(t){i.Uk1++;var s=Date.now();i.Ud1===!0&&i.reset(),null!==i.UQD&&i.UQD(t,s)===!1||(i.s(t,s),(i.UCi||i.preventDefault)&&t.preventDefault())},t.addEventListener(this.EVENT.START,this.UZt,this.USh),this.UXm=function(t){var s=Date.now();s-i.UXw<i.Ukr||null!==i.UnV&&i.UnV(t,s)===!1||(i.UXw=s,i.Uwr(t,s),(i.Uf$||i.preventDefault)&&t.preventDefault())},t.addEventListener(this.EVENT.UHn,this.UXm,this.USh),this.U_6=function(t){i.Uk1--;var s=Date.now();null!==i.U3N&&i.U3N(t,s)===!1||(i.Uhf(t,s),(i.UE1||i.preventDefault)&&t.preventDefault())},t.addEventListener(this.EVENT.END,this.U_6,this.USh),this.Ud1===!0?(this.Upy=function(t){i.Uk1--;var s=t.relatedTarget||t.toElement;s&&"HTML"!==s.nodeName||i.U_6(t),t.preventDefault()},window.addEventListener("mouseout",this.Upy,!1)):(this.U2E=function(t){console.log("===== "+i.EVENT.CANCEL+" ====="),i.Uk1--;var s=Date.now();null!==i.Uf6&&i.Uf6(t)===!1||(i.UVY(t,s),(i.UuW||i.preventDefault)&&t.preventDefault())},t.addEventListener(this.EVENT.CANCEL,this.U2E,this.USh)),this.Ud1===!1&&this.UKJ&&"ongesturestart"in window&&(this.U1b=function(t){t.preventDefault()},window.addEventListener("gesturestart",this.U1b,!1),window.addEventListener("gesturechange",this.U1b,!1),window.addEventListener("gestureend",this.U1b,!1)),this.UP5(),this.Qx()}},Qx:function(){},reset:function(){this.UoT=[],this.UDu=[],this.Ugc=[],this.UoT.lastTime=this.UDu.lastTime=this.Ugc.lastTime=0,this.W0={},this.UCB=0;for(var t=0,i=this.UUg.length;t<i;t++){var s=this.UUg[t];s.reset()}},UP5:function(t){var t=this.UCA,i=0,s=0;if(t===window||t===document)i=window.pageXOffset||0,s=window.pageYOffset||0;else if(void 0!==t.getBoundingClientRect){var e=window.pageXOffset,n=0;e||0===e?n=window.pageYOffset:(e=document.body.scrollLeft||0,n=document.body.scrollTop||0);var h=t.getBoundingClientRect();i=h.left+e,s=h.top+n}else{for(var a=t.offsetLeft||0,o=t.offsetTop||0;(t=t.parentNode)&&t!==document.body&&t!==document;)a+=t.offsetLeft||0,o+=t.offsetTop||0;i=a,s=o}this.offsetLeft=i,this.offsetTop=s},UQD:null,s:function(t,i){var s=this.UVE(t,i);this.dispatch("start",s,t)},UnV:null,Uwr:function(t,i){var s=this.UQK(t,i);this.dispatch("move",s,t)},U3N:null,Uhf:function(t,i){var s=this.UhO(t,i);this.dispatch("end",s,t)},Uf6:null,UVY:function(t,i){for(var s=0,e=this.UUg.length;s<e;s++){var n=this.UUg[s];if(null!=n.cancel&&n.cancel(null,t,this)===!1)break}},UQ2:function(t,i){t.length>=this.UOV&&t.shift(),t.push(i)},UCv:function(t,i){t.length>=this.UOV&&t.shift(),t.push(i)},UVE:function(t,s){for(var e=t[i.changedTouches]||[t],n=[],h=0,a=e.length;h<a;h++){var o=e[h],r=o.identifier,l=r||0===r?r:i.Ucq,u=this.W0[l];u=new this.Uwt(l),u.UXg=this.UXg,u.offsetX=this.offsetX,u.offsetY=this.offsetY,u.offsetLeft=this.offsetLeft,u.offsetTop=this.offsetTop,u.orientation=this.orientation,u.j8=this.j8,u.jM=this.jM,u.EVENT=this.EVENT,this.W0[l]=u,this.UCB++,u.start(o,t),n.push(u);var c=this.UoT;s-c.lastTime>this.UK3&&(c.length=0),c.lastTime=s,c.push(u)}return n},UQK:function(t,s){for(var e=t[i.changedTouches]||[t],n=[],h=0,a=e.length;h<a;h++){var o=e[h],r=o.identifier,l=r||0===r?r:i.Ucq,u=this.W0[l];if(u){if(!u.U34){var c=this.UDu;s-c.lastTime>this.UK3&&(c.length=0),c.lastTime=s,c.push(u)}u.move(o,t),n.push(u)}}return n},UhO:function(t,s){var e=t[i.changedTouches]||[t],n={};if(this.Ud1===!1)for(var h=t[i.touches],a=h.length-1;a>=0;a--){var o=h[a];n[o.identifier]=!0}for(var r=[],l=0,u=e.length;l<u;l++){var c=e[l],f=c.identifier,d=f||0===f?f:i.Ucq;if(!n[d]){var g=this.W0[d];if(g){g.end(c,t),delete this.W0[d],this.UCB--,r.push(g);var m=this.Ugc;s-m.lastTime>this.UK3&&(m.length=0),m.lastTime=s,m.push(g),this.Ueo(this.UoT,d),this.Ueo(this.UDu,d)}}}return r},Ueo:function(t,i){for(var s=t.length-1;s>=0;s--)if(t[s].identifier===i)return t.splice(s,1),i;return!1},dispatch:function(t,i,s){for(var e=0,n=this.UUg.length;e<n;e++){var h=this.UUg[e];if(null!=h[t]){var a=h.UoS(t,i,s,this);if(a===!0&&(a=i),a&&a.length>0&&h[t](a,s,this)===!1)break}}},addListener:function(t){t.controller=this,t.init(),this.UUg.push(t),t.order=t.order||0},removeListener:function(t){for(var i=this.UUg.length-1;i>=0;i--)if(this.UUg[i]===t)return this.UUg.splice(i,1),t.controller=null,t;return null},removeAllListeners:function(){for(var t=this.UUg.length-1;t>=0;t--){var i=this.UUg[t];i.controller=null}this.UUg.length=0},destroy:function(){this.reset(),this.removeAllListeners();var t=this.UCA;t.removeEventListener(this.EVENT.START,this.UZt,this.USh),t.removeEventListener(this.EVENT.UHn,this.UXm,this.USh),t.removeEventListener(this.EVENT.END,this.U_6,this.USh),window.removeEventListener("mouseout",this.Upy,!1),t.removeEventListener(this.EVENT.CANCEL,this.U2E,this.USh),window.removeEventListener("gesturestart",this.U1b,!1),window.removeEventListener("gesturechange",this.U1b,!1),window.removeEventListener("gestureend",this.U1b,!1)}};for(var n in e)s.prototype[n]=e[n];t.Uaq=s,t.CONST=i}(Toucher);var Toucher=Toucher||{};!function(t){var i=(t.CONST,function(t){this.identifier=t,this.id=t}),s={constructor:i,UXg:1,offsetLeft:0,offsetTop:0,j8:0,jM:0,orientation:0,offsetX:0,offsetY:0,start:function(t,i){this.type=this.EVENT.START,this.update(t,i),this.Ud7=this.U9V=this.pageX,this.UgF=this.UGR=this.pageY,this.UZi=this.Ugf=this.target,this.deltaX=0,this.deltaY=0,this.UBG=0,this.UkY=0,this.UqF=!0,this.startTime=this.endTime=this.U34=Date.now()},move:function(t,i){this.type=this.EVENT.UHn,this.ULo=this.U34,this.update(t,i),this.U34=Date.now()},end:function(t,i){this.type=this.EVENT.END;var s=this.deltaX,e=this.deltaY;this.update(t,i),this.deltaX=s,this.deltaY=e,this.UuZ=this.pageX,this.ULe=this.pageY,this.Um6=this.target,this.UqF=!1,this.endTime=Date.now()},update:function(t,i){this.UJP=i,this.UUL=t,this.Ugf=this.target,this.U9V=this.pageX,this.UGR=this.pageY,this.target=t.target;var s=(t.pageX-this.offsetLeft)*this.UXg,e=(t.pageY-this.offsetTop)*this.UXg;0===this.orientation?(this.pageX=s,this.pageY=e):this.orientation===-90?(e-=this.jM,this.pageX=-e,this.pageY=s):90===this.orientation?(s-=this.j8,this.pageX=e,this.pageY=-s):180===this.orientation&&(s-=this.j8,e-=this.jM,this.pageX=-s,this.pageY=-e),this.pageX-=this.offsetX,this.pageY-=this.offsetY,this.deltaX=this.pageX-this.U9V,this.deltaY=this.pageY-this.UGR,this.UBG=this.pageX-this.Ud7,this.UkY=this.pageY-this.UgF},getData:function(){var t={};return t.UqF=this.UqF,t.type=this.type,t.startTime=this.startTime,t.U34=this.U34,t.endTime=this.endTime,t.Ud7=this.Ud7,t.UgF=this.UgF,t.pageX=this.pageX,t.pageY=this.pageY,t.UuZ=this.UuZ,t.ULe=this.ULe,t.deltaX=this.deltaX,t.deltaY=this.deltaY,t.UBG=this.UBG,t.UkY=this.UkY,t}};for(var e in s)i.prototype[e]=s[e];t.UFX=i}(Toucher);var Toucher=Toucher||{};!function(t){var i=(t.CONST,function(t){for(var i in t)this[i]=t[i]});i.extend=function(t){var i=function(t){for(var i in t)this[i]=t[i]},s=i.prototype,e=this.prototype;for(var n in e)s[n]=e[n];for(var n in t)s[n]=t[n];return s.constructor=i,i.extend=this.extend,i.$super=e,i.LE=this,i};var s={constructor:i,id:null,type:null,order:1,UoE:1,Qy:function(){},init:function(){this.Qy(),this.Qx()},Qx:function(){},reset:function(){},UoS:function(t,i,s,e){for(var n=[],h=0,a=i.length;h<a;h++){var o=i[h];this.UK9(t,o,s,e)&&n.push(o)}return n},UK9:function(t,i,s,e){return!1},start:null,W6:null,move:null,Wt:null,end:null,Wf:null,cancel:null,USq:null};for(var e in s)i.prototype[e]=s[e];t.UBE=i}(Toucher),Toucher.Uvr=Toucher.UBE.extend({UK9:function(t,i,s,e){return!0},start:function(t,i,s){},move:function(t,i,s){},end:function(t,i,s){},cancel:function(t,i,s){}}),Toucher.U$L=Toucher.UBE.extend({Ug6:800,UG_:15,UK9:function(t,i,s,e){return!0},UG8:function(t,i,s,e,n){},W6:null,Wf:null,Uc0:function(t){var i=Math.abs(t.UBG),s=Math.abs(t.UkY);return i<=this.UG_&&s<=this.UG_},UgJ:function(t){return t.endTime-t.startTime<this.Ug6},start:function(t,i,s){if(this.W6)for(var e=Math.min(t.length,this.UoE),n=0;n<e;n++){var h=t[n],a=h.pageX,o=h.pageY;this.W6(a,o,h,i,s)}},end:function(t,i,s){for(var e=0,n=Math.min(t.length,this.UoE),h=0;h<n;h++){var a=t[h],o=a.UuZ,r=a.ULe;this.Uc0(a)&&this.UgJ(a)&&(a.index=e++,this.UG8(o,r,a,i,s)),null!=this.Wf&&this.Wf(o,r,a,i,s)}}}),Toucher.UXn=Toucher.UBE.extend({valid:!1,UK9:function(t,i,s,e){return!0},U$c:function(t,i,s,e,n,h,a){},move:function(t,i,s){for(var e=0,n=Math.min(t.length,this.UoE),h=0;h<n;h++){var a=t[h],o=a.deltaX,r=a.deltaY,l=a.pageX,u=a.pageY;a.index=e++,this.U$c(o,r,l,u,a,i,s)}}}),Toucher.Uoo=Toucher.UBE.extend({UrH:50,Uj_:1e3,UK9:function(t,i,s,e){return!0},U0Y:function(t,i,s,e,n){},Wf:null,end:function(t,i,s){for(var e=0,n=Math.min(t.length,this.UoE),h=0;h<n;h++){var a=t[h],o=a.UuZ,r=a.ULe,l=a.endTime-a.startTime;if(l<=this.Uj_){var u=o-a.Ud7,c=r-a.UgF;if(Math.abs(u)>=this.UrH||Math.abs(c)>=this.UrH){var f=u/l,d=c/l;a.index=e++,this.U0Y(f,d,a,i,s)}}null!=this.Wf&&this.Wf(o,r,a,i,s)}}}),Toucher.Uqx=Toucher.UBE.extend({Ukl:null,UvL:null,UDG:null,UK9:function(t,i,s,e){return!0},URP:function(t,i,s,e,n,h,a){},UPZ:null,start:function(t,i,s){for(var e=0;e<t.length;e++){var n=t[e];if(this.Ukl){if(this.UvL)break;this.UvL=n}else this.Ukl=n}if(this.Ukl&&this.UvL){var h=this.UvL.Ud7-this.Ukl.Ud7,a=this.UvL.UgF-this.Ukl.UgF;this.UDG=Math.sqrt(h*h+a*a),this.btl=this.Ukl.Ud7+this.UvL.Ud7>>1,this.bRe=this.Ukl.UgF+this.UvL.UgF>>1}},move:function(t,i,s){var e=this.Ukl,n=this.UvL;if(e&&n){var h=n.U9V-e.U9V,a=n.UGR-e.UGR,o=Math.sqrt(h*h+a*a),h=n.pageX-e.pageX,a=n.pageY-e.pageY,r=Math.sqrt(h*h+a*a);this.URP(r,o,this.UDG,[this.btl,this.bRe],[e,n],i,s)}},end:function(t,i,s){for(var e=0;e<t.length;e++){var n=t[e];if(this.Ukl&&this.Ukl.id==n.id)this.Ukl=null;else{if(!this.UvL||this.UvL.id!=n.id)break;this.UvL=null}}this.Ukl&&this.UvL||(this.UDG=null,null!=this.UPZ&&this.UPZ(t,i,s))},cancel:function(t,i,s){this.Ukl=null,this.UvL=null,this.UDG=null}}),Toucher.bZF=Toucher.UBE.extend({Ukl:null,UvL:null,UDG:-1,UK9:function(t,i,s,e){return!0},byN:function(t,i,s,e,n){},start:function(t,i,s){for(var e=0;e<t.length;e++){var n=t[e];if(this.Ukl){if(this.UvL)break;this.UvL=n}else this.Ukl=n}if(this.Ukl&&this.UvL){var h=this.UvL.Ud7-this.Ukl.Ud7,a=this.UvL.UgF-this.Ukl.UgF;this.bgf=Math.atan2(a,h)}},move:function(t,i,s){var e=this.Ukl,n=this.UvL;if(e&&n){var h=n.pageX-e.pageX,a=n.pageY-e.pageY,o=Math.atan2(a,h);this.byN(o,this.bgf,[e,n],i,s)}},end:function(t,i,s){for(var e=0;e<t.length;e++){var n=t[e];if(this.Ukl&&this.Ukl.id==n.id)this.Ukl=null;else{if(!this.UvL||this.UvL.id!=n.id)break;this.UvL=null}}this.Ukl&&this.UvL||(this.bgf=null)},cancel:function(t,i,s){this.Ukl=null,this.UvL=null,this.bgf=null}});var Toucher=Toucher||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={controller:null,buttons:null,type:"touchpad",bAy:!1,Ud1:null,init:function(){this.Qy&&this.Qy(),this.connected=!0,this.bz3(),this.Qx&&this.Qx()},Qy:null,Qx:null,bz3:function(){if(this.Ud1===!1&&!this.controller.Utz)return void(this.disabled=!0);for(var t in this.buttons){var i=this.buttons[t];i.name=i.name||t,i.init(),this.controller.addListener(i)}},update:function(t,i){if(this.bAy=!1,!this.disabled)for(var s in this.buttons){var e=this.buttons[s];e.update(t,i),this.bAy=this.bAy||e.pressed||e.bmh||e.bKl}},enable:function(){this.disabled=!1;for(var t in this.buttons){var i=this.buttons[t];i.enable()}},disable:function(){this.bAy=!1,this.disabled=!0;for(var t in this.buttons){var i=this.buttons[t];i.disable()}},reset:function(){this.disabled=!1;for(var t in this.buttons){var i=this.buttons[t];i.reset()}},render:function(t,i,s){if(!this.disabled&&this.visible)for(var e in this.buttons){var n=this.buttons[e];n.render(t,i,s)}}};for(var e in s)i.prototype[e]=s[e];t.bPc=i}(Toucher),Toucher.bfP=Toucher.UBE.extend({b3_:null,disabled:!1,bHX:null,b78:!1,pressed:!1,W0:!1,x:0,y:0,width:0,height:0,b8_:!0,bqk:!0,b9f:0,visible:!0,init:function(){this.Qy(),this.sT=this.width>>1,this.s8=this.height>>1,this.Inj(),this.bHX=this.bHX||this.Ixh,this.Qx()},Inj:function(){this.Ixh=[this.x-this.sT,this.y-this.s8,this.x+this.sT,this.y+this.s8]},Z8:function(t){t=this.scale=t||1,this.width*=t,this.height*=t,this.sT=this.width>>1,this.s8=this.height>>1,this.Inj()},UK9:function(t,i,s,e){return!this.disabled},bdo:function(t,i){var s=this.bHX;return!s||s[0]<t&&t<s[2]&&s[1]<i&&i<s[3]},HA:function(t,i){var s=this.Ixh;return s[0]<t&&s[1]<i&&t<s[2]&&i<s[3]},enable:function(){this.reset(),this.disabled=!1},disable:function(){this.reset(),this.disabled=!0},reset:function(){this.disabled=!1,this.b3_=null,this.pressed=!1,this.W0=!1,this.b_6=!1,this.b9f=0,this.hold=!1},bs2:function(t,i,s){this.bMx=!0,this.pressed=!0,this.b9f=1,this.hold=!0,this.b9h()},b9h:function(){},bel:function(t,i,s,e){this.bMx=!1,this.pressed=!1,this.bdZ(this.b9f),this.b9f=0,this.hold=!1},bdZ:function(t){},start:function(t,i,s){if(!this.disabled)for(var e=0;e<t.length;e++){var n=t[e];if(null===this.b3_&&this.HA(n.pageX,n.pageY)){this.b3_=n.id,this.W0=!0,this.b_6=!0;break}}},move:function(t,i,s){if(!this.disabled)if(this.b3_||0===this.b3_)for(var e=0;e<t.length;e++){var n=t[e];if(this.b3_===n.id){var h=this.HA(n.pageX,n.pageY);!this.W0&&this.b8_&&h?(this.W0=!0,this.b_6=!0):this.W0&&this.bqk&&!h&&(this.b3_=null,this.W0=!1,this.b_6=!1);break}}else for(var e=0;e<t.length;e++){var n=t[e];if(this.b8_&&this.HA(n.pageX,n.pageY)){this.b3_=n.id,this.W0=!0,this.b_6=!0;break}}},end:function(t,i,s){if(!this.disabled)for(var e=0;e<t.length;e++){var n=t[e];if(this.b3_===n.id){this.b3_=null,this.W0=!1,this.b_6=this.HA(n.pageX,n.pageY);break}}},update:function(t,i){if(!this.disabled){var s=this.W0;this.brW(s,t,i)}},brW:function(t,i,s){var e=t;this.bwI=!1,this.bmh=!1,this.pressed&&e?(this.b9f+=i,this.hold=!0):this.pressed||!e||this.bMx?!this.pressed&&!this.bMx||e?(this.pressed=!1,this.b9f=0,this.hold=!1):(this.bmh=!0,this.bel()):(this.bwI=!0,this.bs2())},render:function(t,i,s){if(this.visible){var e=this.bHX;this.W0?t.fillStyle="rgba(0,0,0,0.5)":t.fillStyle="rgba(0,0,0,0.2)",t.fillRect(e[0],e[1],e[2]-e[0],e[3]-e[1])}}}),Toucher.bnm=Toucher.bfP.extend({b_y:0,cos:1,sin:0,x:0,y:0,bey:null,bhu:null,bBV:0,b2K:0,bKl:0,bb9:0,boO:35,bYX:0,bv2:100,byw:null,bkk:0,b8w:0,b6D:0,bwm:!1,b1t:0,scale:1,bTZ:0,screenWidth:0,screenHeight:0,bgColor:"rgba(0,0,0,0.5)",bR$:"rgba(255,100,100,0.2)",bY0:"rgba(0,0,0,0.2)",init:function(){this.Qy(),this.Z8(this.scale),this.Qx()},bc4:function(){this.bkk&&(this.bO_=2*Math.PI/this.bkk),this.b8w&&(this.b6D=Math.max(this.bv2,this.b6D))},Z8:function(t){t=this.scale=t||1,this.boO*=t,this.bYX*=t,this.bv2*=t,this.b8w*=t,this.b6D*=t,this.byw=this.bv2,this.bc4()},start:function(t,i,s){if(!this.disabled)for(var e=0;e<t.length;e++){var n=t[e];if(null===this.b3_&&this.bdo(n.pageX,n.pageY)){this.b3_=n.id,this.W0=!0,this.pageX=n.pageX,this.pageY=n.pageY,this.b78?(this.x=n.Ud7,this.y=n.UgF):this.bdj();break}}},move:function(t,i,s){if(!this.disabled&&null!==this.b3_)for(var e=0;e<t.length;e++){var n=t[e];if(this.b3_===n.id){this.pageX=n.pageX,this.pageY=n.pageY,this.bdj();break}}},bdj:function(){return this.b4O(this.pageX-this.x,this.pageY-this.y),!0},b4O:function(t,i,s,e){var n=this.bsq=t,h=this.bKe=i;if(!n&&!h)return this.b1t=0,this.bb9=0,this.bBV=this.b2K=this.bKl=0,!1;var a=this.bb9=Math.sqrt(n*n+h*h);if(a<this.bYX)return this.bBV=this.b2K=this.bKl=this.b1t=0,!1;var o=Math.atan2(h,n);this.bO_&&(o=Math.floor(o/this.bO_+.5)*this.bO_),this.b_y=o,this.cos=Math.cos(o),this.sin=Math.sin(o),a>this.bv2&&(a=this.bv2,n=a*this.cos,h=a*this.sin),this.bBV=n,this.b2K=h,this.bKl=a},end:function(t,i,s){if(!this.disabled)for(var e=0;e<t.length;e++){var n=t[e];if(this.b3_===n.id){this.reset();break}}},reset:function(){this.b3_=null,this.W0=!1,null!==this.bey&&(this.x=this.bey),null!==this.bhu&&(this.y=this.bhu),this.bsq=0,this.bKe=0,this.pageX=0,this.pageY=0,this.bBV=0,this.b2K=0,this.bKl=0,this.bb9=0,this.b_y=0,this.cos=1,this.sin=0},beR:function(t){if(!this.disabled&&this.W0&&this.b8w&&!(this.bb9<=this.b6D)){var i=this.b8w*t;if(i){var s=this.bb9-this.b6D;s<i&&(i=s),this.bb9-=i,this.x+=this.cos*i,this.y+=this.sin*i}}},update:function(t,i){if(!this.disabled){if(this.bKl<this.bYX)return void(this.b1t=0);this.beR(t),this.bwm?this.b1t=(this.bKl-this.bYX)/(this.bv2-this.bYX):this.b1t=1}},render:function(t,i,s){if(this.visible){!this.W0;var e=this.x,n=this.y;t.strokeStyle=this.bgColor,t.beginPath(),t.arc(e,n,this.bv2,0,2*Math.PI),t.closePath(),t.stroke(),this.bYX>0&&(t.fillStyle=this.bR$,t.beginPath(),t.arc(e,n,this.bYX,0,2*Math.PI),t.closePath(),t.fill()),t.fillStyle=this.bY0,t.beginPath(),t.arc(e+this.bBV,n+this.b2K,this.boO,0,2*Math.PI),t.closePath(),t.fill()}}});var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={disabled:!1,init:function(){this.reset()},update:function(t,i,s,e){this.bwI=!1,this.bmh=!1,this.bnF=0,this.pressed&&t?(this.b1K=i||1,this.b9f+=s,this.hold=!0):this.pressed||!t||this.bMx?!this.pressed&&!this.bMx||t?(this.pressed=!1,this.b9f=0,this.hold=!1,this.b1K=0):(this.bmh=!0,this.bel()):(this.b1K=i||1,this.bwI=!0,this.bs2())},clone:function(t){return t=t||{},t.bMx=this.bMx,t.b1K=this.b1K,t.bwI=this.bwI,t.pressed=this.pressed,t.bmh=this.bmh,t.hold=this.hold,t.b9f=this.b9f,t},enable:function(){this.reset(),this.disabled=!1},disable:function(){this.reset(),this.disabled=!0},reset:function(){this.pressed=!1,this.b9f=0,this.hold=!1},bs2:function(){this.bMx=!0,this.pressed=!0,this.b9f=1,this.hold=!0,this.b9h()},b9h:function(){},bel:function(){this.bMx=!1,this.pressed=!1,this.bnF=this.b9f,this.bdZ(this.b9f),this.b9f=0,this.hold=!1},bdZ:function(t){}};for(var e in s)i.prototype[e]=s[e];t.bAZ=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={type:"gamepad",id:null,index:0,timestamp:null,mapping:null,connected:!1,bXd:null,exitOnMenuPress:!1,allowsRotation:!0,buttons:null,bAy:!1,init:function(){this.Qy&&this.Qy(),this.buttons=this.buttons||{},this.bnE=!!window.navigator.getGamepads,this.connected=!0,this.bz3(),this.Qx&&this.Qx()},Qy:null,Qx:null,bz3:function(){if(!this.bnE)return!1;for(var t in this.buttons){var i=this.buttons[t];i.name=i.name||t,i.init()}},update:function(t,i,s){if(this.bAy=!1,!this.disabled&&t){t.exitOnMenuPress=this.exitOnMenuPress,t.allowsRotation=this.allowsRotation;for(var e in this.buttons){var n=this.buttons[e];n.update(t,i,s),this.bAy=this.bAy||n.pressed||n.bmh||n.bKl}}},bGy:function(){this.connected=!0,this.bz3()},bRm:function(){this.connected=!1,this.bnE=!1,this.disable()},enable:function(){this.disabled=!1;for(var t in this.buttons){var i=this.buttons[t];i.enable()}},disable:function(){this.bAy=!1,this.disabled=!0;for(var t in this.buttons){var i=this.buttons[t];i.disable()}},reset:function(){this.disabled=!1;for(var t in this.buttons){var i=this.buttons[t];i.reset()}}};for(var e in s)i.prototype[e]=s[e];t.Gamepad=i}(GT);var GT=GT||{};!function(t){var i=t.bAZ,s=function(t){for(var i in t)this[i]=t[i]},e={bLf:null,bHj:null,bvb:.2,bYX:.1,bv2:1,b1t:0,bkk:0,disabled:!1,init:function(){if(this.bo6=this.bo6||{pressed:!1,value:0},this.bHj||0===this.bHj){this.b_C=2*this.bHj,this.bXJ=2*this.bHj+1,this.bLf=this.bHj+10,this.bgj={Up:new i,Down:new i,Left:new i,Right:new i};for(var t in this.bgj)this.bgj[t].name=t}this.bkk&&(this.bO_=2*Math.PI/this.bkk),this.reset()},update:function(t,i,s){if(!this.disabled){if(this.bHj||0===this.bHj){var e=t.axes[this.b_C],n=t.axes[this.bXJ];this.b4O(e,n,i,s)}if(this.bLf||0===this.bLf){var h=t.buttons[this.bLf]||this.bo6;this.brW(h,i,s)}}},brW:function(t,i,s){var e=t.pressed;this.bwI=!1,this.bmh=!1,this.pressed&&e?(this.b1K=t.value||1,this.b9f+=i,this.hold=!0):this.pressed||!e||this.bMx?!this.pressed&&!this.bMx||e?(this.pressed=!1,this.b9f=0,this.hold=!1,this.b1K=0):(this.bmh=!0,this.bel()):(this.b1K=t.value||1,this.bwI=!0,this.bs2())},b4O:function(t,i,s,e){var n=this.bsq=t,h=this.bKe=i;if(!n&&!h)return this.b1t=0,this.bMh(0,0,s,e),!1;if(this.b1t=Math.sqrt(n*n+h*h),this.b1t<this.bYX)return this.b1t=0,this.bMh(0,0,s,e),!1;var a=Math.atan2(h,n);this.bO_&&(a=Math.floor(a/this.bO_+.5)*this.bO_),this.b_y=a,this.cos=Math.cos(a),this.sin=Math.sin(a),this.bMh(n,h,s,e)},bMh:function(t,i,s,e){var n=Math.abs(t),h=Math.abs(i);this.bgj.Left.update(t<-this.bvb,n,s,e),this.bgj.Right.update(t>this.bvb,n,s,e),this.bgj.Up.update(i<-this.bvb,h,s,e),this.bgj.Down.update(i>this.bvb,h,s,e)},enable:function(){this.reset(),this.disabled=!1},disable:function(){this.reset(),this.disabled=!0},reset:function(){this.pressed=!1,this.b1K=0,this.b9f=0,this.hold=!1,this.b1t=0,this.bsq=0,this.bKe=0,this.b_y=0,this.cos=1,this.sin=0},bs2:function(){this.bMx=!0,this.pressed=!0,this.b9f=1,this.hold=!0,this.b9h()},b9h:function(){},bel:function(){this.bMx=!1,this.pressed=!1,this.b1K=0,this.bnF=this.b9f,this.bdZ(this.b9f),this.b9f=0,this.hold=!1},bdZ:function(t){}},n=i.prototype;for(var h in n)s.prototype[h]=n[h];for(var h in e)s.prototype[h]=e[h];t.GamepadButton=s}(GT);var GT=GT||{};!function(t){window.navigator.getGamepads=window.navigator.getGamepads||window.navigator.webkitGetGamepads||window.navigator.webkitGamepads;var i=t.Gamepad,s=function(t){for(var i in t)this[i]=t[i];this.Ek||this.init()},e={name:"gamepadManager",type:"manager",exitOnMenuPress:!1,allowsRotation:!0,init:function(){this.Qy&&this.Qy(),this.bnE=!!window.navigator.getGamepads,this.bAy=!1,this.bHE=0,this.b7z=0,this.bch=[],this.b36={},this.initEvent(),this.Qx&&this.Qx()},Qy:null,Qx:null,initEvent:function(){var t=this;this.ongamepadconnected=function(i){var s=i.gamepad;if(s){var e=t.b$o(s);t.bvO(e)}},this.ongamepaddisconnected=function(i){var s=i.gamepad;if(s){var e=t.bn_(s.index);e&&t.bJH(e)}},"ongamepadconnected"in window?(window.addEventListener("gamepadconnected",this.ongamepadconnected,!1),window.addEventListener("gamepaddisconnected",this.ongamepaddisconnected,!1)):"onwebkitgamepadconnected"in window&&(window.addEventListener("webkitgamepadconnected",this.ongamepadconnected,!1),window.addEventListener("webkitgamepaddisconnected",this.ongamepaddisconnected,!1))},bXi:function(t){return this.b36[t]},bn_:function(t){return this.bch[t]},bXv:function(t){for(var i=[],s=0;s<this.bch.length;s++){var e=this.bch[s];!e||e.bXd&&t!=e.bXd||i.push(e)}return i},getGamepads:function(){for(var t=[],i=0;i<this.bch.length;i++){var s=this.bch[i];s&&t.push(s)}return t},bSC:function(t){var i,s=this.getGamepads();return i="first"===t?s[0]:"last"===t?s[s.length-1]:s[t]},b6a:function(){return this.bnE?window.navigator.getGamepads():null},update:function(t,i){if(this.bAy=!1,!this.disabled&&this.bnE){this.bHE=0;var s=this.b6a();if(s)for(var e=0;e<s.length;e++){var n=s[e];if(n){n.index!==e&&console.log("WARNING: Gamepad Index is not correct."),this.bHE++,this.bAy=!0;var h=this.bch[n.index];h||(h=this.b$o(n),this.bvO(h)),h.exitOnMenuPress=this.exitOnMenuPress,h.allowsRotation=this.allowsRotation,h.update(n,t,i)}else{var h=this.bch[e];h&&this.bJH(h)}}}},bX4:function(t,i){return null},b$o:function(t){var s=t.id,e=t.index,n=t.timestamp,h=t.mapping,a=t.profile,o=new i({id:s,index:e,timestamp:n,mapping:h,bXd:a});return o.buttons=this.bX4(o,t),o.init(),o},bvO:function(t){this.bch[t.index]=t,this.b36[t.id]=t,this.b7z++,t.bGy()},bJH:function(t){this.bch[t.index]=null,delete this.b36[t.id],this.b7z--,t.bRm()},enable:function(){this.disabled=!1,this.bch.forEach(function(t){t.enable()})},disable:function(){this.disabled=!0,this.bch.forEach(function(t){t.disable()})},reset:function(){this.disabled=!1,this.bch.forEach(function(t){t.reset()})}};for(var n in e)s.prototype[n]=e[n];t.bvZ=s}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={buttons:null,type:"keypad",bAy:!1,bRj:!1,init:function(){this.Qy&&this.Qy(),this.buttons=this.buttons||{},this.bwK={},this.initEvent(),this.connected=!0,this.bz3(),this.Qx&&this.Qx()},Qy:null,Qx:null,initEvent:function(){var t=this;window.addEventListener("keydown",function(i){t.bRj=!0,t.bwK[i.keyCode]=1},!0),window.addEventListener("keyup",function(i){t.bRj=!0,t.bwK[i.keyCode]=0},!0)},bz3:function(){for(var t in this.buttons){var i=this.buttons[t];i.name=i.name||t,i.init()}},update:function(t,i){if(this.bAy=!1,!this.disabled)for(var s in this.buttons){var e=this.buttons[s];e.update(this.bwK,t,i),this.bAy=this.bAy||e.pressed||e.bmh}},enable:t.Gamepad.prototype.enable,disable:t.Gamepad.prototype.disable,reset:t.Gamepad.prototype.reset};for(var e in s)i.prototype[e]=s[e];t.b7y=i}(GT);var GT=GT||{};!function(t){var i={b$y:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},s=t.bAZ,e=function(t){for(var i in t)this[i]=t[i]},n={key:null,b9f:0,disabled:!1,init:function(){this.keyCode=i[this.key],this.reset()},update:function(t,i,s){if(!this.disabled){var e=t[this.keyCode];this.brW(e,i,s)}},brW:function(t,i,s){var e=t;this.bwI=!1,this.bmh=!1,this.bnF=0,this.pressed&&e?(this.b9f+=i,this.hold=!0):this.pressed||!e||this.bMx?!this.pressed&&!this.bMx||e?(this.pressed=!1,this.b9f=0,this.hold=!1):(this.bmh=!0,this.bel()):(this.bwI=!0,this.bs2())}},h=s.prototype;for(var a in h)e.prototype[a]=h[a];for(var a in n)e.prototype[a]=n[a];t.bQP=e}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={buttons:null,cursor:null,type:"mouse",bAy:!1,Vj5:!1,UXg:1,offsetX:0,offsetY:0,offsetLeft:0,offsetTop:0,orientation:0,j8:0,jM:0,init:function(){this.Qy&&this.Qy(),
this.buttons=this.buttons||{},this.bwK={},this.cursor={x:0,y:0,pageX:0,pageY:0},this.initEvent(),this.connected=!0,this.bz3(),this.Qx&&this.Qx()},Qy:null,Qx:null,initEvent:function(){var t=this;window.addEventListener("mousemove",function(i){t.cursor.pageX=i.pageX,t.cursor.pageY=i.pageY},!0),window.addEventListener("mousedown",function(i){t.Vj5=!0,t.bwK[i.button]=1},!0),window.addEventListener("mouseup",function(i){t.bwK[i.button]=0},!0)},bz3:function(){for(var t in this.buttons){var i=this.buttons[t];i.name=i.name||t,i.init()}},update:function(t,i){if(this.bAy=!1,!this.disabled){var s=(this.cursor.pageX-this.offsetLeft)*this.UXg,e=(this.cursor.pageY-this.offsetTop)*this.UXg;this.cursor.x=s-this.offsetX,this.cursor.y=e-this.offsetY;for(var n in this.buttons){var h=this.buttons[n];h.update(this.bwK,t,i),this.bAy=this.bAy||h.pressed||h.bmh}}},enable:t.Gamepad.prototype.enable,disable:t.Gamepad.prototype.disable,reset:t.Gamepad.prototype.reset};for(var e in s)i.prototype[e]=s[e];t.GameMouse=i}(GT);var GT=GT||{};!function(t){var i={LEFT:0,MIDDLE:1,RIGHT:2},s=t.bQP,e=function(t){for(var i in t)this[i]=t[i]},n={Vxk:!0,init:function(){this.keyCode=i[this.key],this.reset()}},h=s.prototype;for(var a in h)e.prototype[a]=h[a];for(var a in n)e.prototype[a]=n[a];t.GameMouseButton=e}(GT);var CUI=CUI||{};!function(t){var i={};i.create=function(t,s,e){"object"==typeof t&&arguments.length<3&&(e=s,s=t,t=function(t){for(var i in t)this[i]=t[i];this.Ek===!1&&this.init()});var n=t.prototype;for(var h in s)n[h]=s[h];return i.extend(t,e),t},i.extend=function(t,i){var s=t,e=s.prototype;i=s.LE=i||s.LE||e.LE;var n;n="function"==typeof i?i.prototype:i;for(var h in n)h in e||(e[h]=n[h]);return s.$super=n,s.LE=i,e.$super=n,e.LE=i,e.constructor=s,t},t.Class=i,"undefined"!=typeof module&&(module.exports=i)}(CUI);var CUI=CUI||{};!function(t){CUI.Vjk=CUI.Vjk||{},CUI.V5E=CUI.V5E||{};var i=document.createElement("canvas"),s=i.getContext("2d"),e={St:function(t,i){var s=new Image;return s.onload=function(t){i&&i(s,t)},s.onerror=function(t){i&&i(null,t)},s.src=t,s},SR:function(t,i){var s=t.length,e={},n=-1,h=function(){if(n++,n>=s)return void(i&&i(e));var a=t[n],o=new Image;o.src=a.src,o.id=a.id,o.onload=function(t){e[o.id]=o,a.onLoad&&a.onLoad.call(o,o),h()},o.onerror=function(t){a.Sw&&a.Sw.call(o,o),h()}};return h(),e},IO5:function(t,i,s){if("string"==typeof t){if(t=t.trim(),"auto"===t)return void 0===s?0:s;var n,h,a;if((n=t.lastIndexOf("+"))>0){var o=t.substring(0,n),r=t.substring(n+1);return o=e.IO5(o,i),r=e.IO5(r,i),o+r}if((h=t.lastIndexOf("-"))>0){var o=t.substring(0,h),r=t.substring(h+1);return o=e.IO5(o,i),r=e.IO5(r,i),o-r}return(a=t.lastIndexOf("%"))>0?t=parseFloat(t)/100*(i||0):parseFloat(t)||0}return"number"==typeof t||t===!0||t===!1||null===t||void 0===t?t:parseFloat(t)||0},AS:function(t,i){var s=document.createElement("canvas");return s.width=t,s.height=i,s},VDa:function(t,i,e){var n=s,h=n.font;n.font=i+"px"+(e?" "+e:"");var a=n.measureText(t);return n.font=h,a.width},AH:function(t){var i,s=t;if("string"!=typeof s){if(!s.tagName)return null;i=s,s=i.src}else i=CUI.Vjk[s];if(i){var e={id:s,img:i,sx:0,sy:0,sw:i.width,sh:i.height,ox:0,oy:0,w:i.width,h:i.height};return e}var n=CUI.V5E[s];if(n){var h=n.img,i=CUI.Vjk[h],e={id:s,sx:n.x,sy:n.y,sw:n.w,sh:n.h,ox:n.ox,oy:n.oy,w:n.sw,h:n.sh};return e.img=i,e}return console.log("Utils.getUIImgInfo err : ",s),null},KK:function(t,i,s,e,n,h){s=s||0,e=e||0,t.drawImage(i.img,i.sx,i.sy,i.sw,i.sh,s+i.ox>>0,e+i.oy>>0,n||i.sw,h||i.sh)},KP:function(t,i,s,e,n,h){s=s||0,e=e||0,t.drawImage(i.img,i.sx,i.sy,i.sw,i.sh,s,e,n||i.sw,h||i.sh)},Ko:function(t,i,s,e){s=s||"red";var n=t.strokeStyle;e&&(t.lineWidth=e),t.strokeStyle=s,t.strokeRect(i[0],i[1],i[2]-i[0],i[3]-i[1]),t.strokeStyle=n},Kn:function(t,i,s){s=s||"red";var e=t.fillStyle;t.fillStyle=s,t.fillRect(i[0],i[1],i[2]-i[0],i[3]-i[1]),t.fillStyle=e}};t.Utils=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=i.create({addChild:function(t){t.id=t.id||0===t.id?t.id:s.IRw(),this.Ipn[t.id]=t,this.children.push(t),t.parent=this},IJa:function(t){return this.Ipn[t]},getChildAt:function(t){return this.children[t]},V3T:function(t){delete this.Ipn[t.id],t.parent=null,t.root&&(delete t.root.all[t.id],t.root=null)},removeChild:function(t){var i=this.indexOf(t);return i>=0&&(this.children.splice(i,1),this.V3T(t),t)},Iq1:function(t){var i=this.Ipn[t];return!!i&&this.removeChild(i)},removeChildAt:function(t){var i=this.children[t];return!!i&&(this.children.splice(t,1),this.V3T(i),i)},indexOf:function(t){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i]===t)return i;return-1},I8F:function(t){return!!this.children[t.id]},IFx:function(t){s.IvB(this.children,t)}});s.UH5=0,s.IRw=function(){s.UH5++;var t="comp_"+s.UH5;return t},s.IvB=function(t,i){for(var s,e,n=t.length,h=1;h<n;h++){s=t[h];for(var a=s[i],o=h;o>0&&(e=t[o-1])[i]>a;o--)t[o]=e;t[o]=s}},s.apply=function(t,i){var e=s.prototype;for(var n in e){var h=e[n];"function"==typeof h&&(i||!t[n])&&(t[n]=h)}return(i||!t.children)&&(t.children=[]),(i||!t.Ipn)&&(t.Ipn={}),t},t.Vhd=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=i.create({constructor:s,fK:null,VLS:function(){for(var t in this.fK)this.fK[t]=null;this.fK={}},addEventListener:function(t,i){var s=this.fK;void 0===s[t]&&(s[t]=[]),s[t].indexOf(i)===-1&&s[t].push(i)},hasEventListener:function(t,i){var s=this.fK;return void 0!==s[t]&&s[t].indexOf(i)!==-1},removeEventListener:function(t,i){var s=this.fK[t];if(void 0!==s){var e=s.indexOf(i);if(e!==-1)return s.splice(e,1),i}return null},dispatch:function(t,i){var s=this.fK[t],e=!1;if(s){i=Array.prototype.slice.call(arguments,1);for(var n=0,h=s.length;n<h;n++)s[n].apply(this,i),e=!0}return e},f2:function(t){return t?this.fK[t]:this.fK},fc:function(t){if(!t){var i=this.fK;return this.fK={},i}var i=this.fK[t]||null;return i&&(this.fK[t]=[]),i}});s.apply=function(t,i){var e=s.prototype;for(var n in e){var h=e[n];"function"==typeof h&&(i||!t[n])&&(t[n]=h)}return(i||!t.fK)&&(t.fK={}),t},t.fZ=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=i.create({modalFlag:-1048576,V3Y:function(t,i){if(!this.visible||this.alpha<=0)return!1;var s=Array.prototype.slice.call(arguments,1),e=s[0],n=s[1];if(!this.ICT(e,n)){if(this.VJx||this.mask)return"tap"==t&&this.VjI.apply(this,s),this.modalFlag;if("tap"==t||"touchStart"==t)return!1}if(this.VE_){var h=this.VLC(t,arguments);if(h!==!1)return h}var h=this.VXR(t,s);return h===!1&&(this.VJx||this.mask)?this.modalFlag:h},VXR:function(t,i){if(this.visible&&this[t]){var s=this[t].apply(this,i);if(s!==!1)return this}return!1},Vzd:function(){return this.children},VLC:function(t,i){var s=this.Vzd();if(s)for(var e=s.length-1;e>=0;e--){var n=s[e];if(n.visible&&!(n.alpha<=0)){var h=n.V3Y.apply(n,i);if(h!==!1)return h}}return!1},touchStart:function(t,i,s){return this.W6(t,i,s)},touchEnd:function(t,i,s){return this.Wf(t,i,s)},touchMove:function(t,i,s){return this.Wt(t,i,s)},tap:function(t,i,s){return this.UG8(t,i,s)},pan:function(t,i,s,e,n,h,a){return this.U$c(t,i,s,e,n,h,a)},swipe:function(t,i,s,e,n,h,a){return this.U0Y(t,i,s,e,n,h,a)},VCD:function(t,i,s){return this.VjI(t,i,s)},W6:function(t,i,s){return!1},Wt:function(t,i,s){return!1},Wf:function(t,i,s){return!1},UG8:function(t,i,s){return!1},U$c:function(t,i,s,e,n,h,a){return!1},U0Y:function(t,i,s,e,n,h,a){return!1},VjI:function(t,i,s){return!1}});s.apply=function(t,i){var e=s.prototype;for(var n in e){var h=e[n];"function"!=typeof h&&"modalFlag"!==n||(i||!t[n])&&(t[n]=h)}return t},t.VQo=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=i.create({B1:0,BW:0,BH:0,BC:0,BT:.003,Bc:0,BB:0,Bv:null,init:function(t){this.Bv=t||this.Bv},reset:function(){this.BG=!1,this.BE=!1;this.Bv;this.Bc=this.BB=this.B1=this.BW=this.BH=this.BC=0},start:function(t,i,s){if(this.BE||s){this.Bv;this.B1=t||0,this.BW=i||0,this.BE=!1,this.BG=!0}else this.BG=!1},stop:function(){this.reset()},gf:function(t){var i=1-t*this.BT;i<0&&(i=0),i>1&&(i=1),this.B1*=i,this.BW*=i},update:function(t){if(!this.BG)return!1;this.Bv,this.B1,this.BW;if(this.gf(t),Math.abs(this.B1)>.033||Math.abs(this.BW)>.033){var i=this.B1*t,s=this.BW*t;return this.Bc=i,this.BB=s,!0}return this.stop(),!1}});t.Vue=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.VlI,i.create({Ek:!1,VVs:null,Vfd:0,V1O:0,Vkp:!0,disabled:!0,color:"#FF7F00",Vy1:null,V6j:null,init:function(){this.V1O&&this.Vv8(this.V1O),this.Qx&&this.Qx()},Qx:null,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},reset:function(){this.Vx2=null,this.Vvm=null,this.VVs=null,this.Vfd=null},tap:function(){var t=this.VVs;if(!t||t.disabled)return!1;var i=123,s=t.x+1,e=t.y+1;return t.touchStart(s,e,i),setTimeout(function(){t.touchEnd(s,e,i),t.tap(s,e,i)},100),!0},VmG:function(t){var i=this.VVs;if(!i||!this.V6j)return!1;var s=this.V6j[i.id];if(s&&s[t]){var e=s[t];e===-1&&(e=this.Vvm),this.Vv8(e)}},back:function(){this.Vv8(this.Vvm)},bel:function(){this.VmG(0)},right:function(){this.VmG(1)},bs2:function(){this.VmG(2)},left:function(){this.VmG(3)},VIo:function(){this.Vv8(this.V1O)},Vv8:function(t){var i=this.Vy1.all[t];return!!i&&(this.Vx2=this.VVs,this.Vvm=this.Vfd,this.VCl(this.VVs),this.VVs=i,this.Vfd=t,this.VwI(i),!0)},VwI:function(t){},VCl:function(t){},render:function(t,i,s){var e=this.VVs;if(e){var n=4;t.strokeRect(e.x-4,e.y-4,e.w+8,e.h+8,this.color,n,this.VI1)}}}));t.Ve1=s}(CUI);var CUI=CUI||{};!function(t){var i={},s={V87:function(t,s){var e=i[s?t+" "+s:t];return e&&(t=e),t},VNY:function(t,i,e){return t=t||12,"normal"==e&&(e=null),window.App?(i=s.V87(i,e),t+"px "+i):(e=e?e+" ":"",e+t+"px "+i)}};t.Font=s,t.VWV=i,"undefined"!=typeof module&&(module.exports=s,module.exports=i)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.Font,i.create({Ek:!1,canvas:null,context:null,clearColor:null,webgl:!1,init:function(){this.context=this.context||this.canvas.getContext("2d"),this.canvas=this.canvas||this.context.canvas,this.defaultTransform={x:0,y:0,qG:1,e_:1,rotation:0,alpha:1,originalX:0,originalY:0,blend:"source-over"},this.resetGlobalContainer(),this.drawDisplayObject=this.render},begin:function(t){t&&this.clear()},end:function(){},colorRgb:function(t,i,s){return"rgba("+t+", "+i+", "+s+", 1)"},colorHex:function(t){return t},colroName:function(t){return t},save:function(){this.context.save();var t=this.globalTransform;this.transformStack.push({x:t.x,y:t.y,qG:t.qG,e_:t.e_,rotation:t.rotation,alpha:t.alpha,originalX:t.originalX,originalY:t.originalY})},restore:function(){this.context.restore();var t=this.transformStack.pop();if(t){var i=this.globalTransform;i.x=t.x,i.y=t.y,i.qG=t.qG,i.e_=t.e_,i.rotation=t.rotation,i.alpha=t.alpha,i.originalX=t.originalX,i.originalY=t.originalY}},translate:function(t,i){this.context.translate(t,i)},scale:function(t,i){this.context.scale(t,i)},rotate:function(t){this.context.rotate(t)},setAlpha:function(t){this._lastAlpha=this.context.globalAlpha,this.context.globalAlpha=t},restoreAlpha:function(t){this.context.globalAlpha=this._lastAlpha},getAlpha:function(){return this.context.globalAlpha},setOrigin:function(t,i){this.context.translate(t,i),this.globalTransform.originalX=t,this.globalTransform.originalY=i},getOrigin:function(){return{x:this.globalTransform.originX,y:this.globalTransform.originY}},clipRect:function(t,i,s,e){this.context.save();var n=this.globalTransform,h=t-n.originalX,a=i-n.originalY,o=this.context;return o.beginPath(),o.moveTo(h,a),o.lineTo(h+s,a),o.lineTo(h+s,a+e),o.lineTo(h,a+e),o.closePath(),o.clip(),o},unclipRect:function(){this.context.restore()},setBlendByName:function(t){this.setBlend(t)},getBlend:function(){return this.blend},setBlend:function(t){this._lastBlend=this.blend,this.blend=t;var i=t;this.context.globalCompositeOperation=i},restoreBlend:function(){this.context.globalCompositeOperation=this._lastBlend},resetGlobalContainer:function(){this.transformStack=[],this.globalTransform={};for(var t in this.defaultTransform)this.globalTransform[t]=this.defaultTransform[t];this._lastAlpha=this.globalTransform.alpha},clear:function(){return null!==this.clearColor?(this.fillStyle=this.clearColor,void this.fillRect(0,0,this.canvas.width,this.canvas.height)):void this.clearRect(0,0,this.canvas.width,this.canvas.height)},strokeRect:function(t,i,s,e,n,h){var a=this.globalTransform,o=t-a.originalX,r=i-a.originalY;n&&(this.context.strokeStyle=n),h&&(this.context.lineWidth=h),this.context.strokeRect(o,r,s,e)},fillRect:function(t,i,s,e,n){var h=this.globalTransform,a=t-h.originalX,o=i-h.originalY;n&&(this.context.fillStyle=n),this.context.fillRect(a,o,s,e)},clearRect:function(t,i,s,e){var n=this.globalTransform,h=t-n.originalX,a=i-n.originalY;null!==this.clearColor?(this.context.fillStyle=this.clearColor,this.context.fillRect(h,a,s,e)):this.context.clearRect(h,a,s,e)},drawDisplayObject:function(t,i,s,e,n){var h=arguments.length,a=t.img,o=t.sx,r=t.sy,l=t.sw,u=t.sh,c=this.globalTransform;i-=c.originalX,s-=c.originalY,5===h?this.context.drawImage(a,o,r,l,u,i,s,e,n):3===h&&this.context.drawImage(a,o,r,l,u,i,s,l,u)},render:function(t){},renderAt:function(t,i,s){var e=(arguments.length,t.img),n=t.sx,h=t.sy,a=t.sw,o=t.sh,r=this.globalTransform;i-=r.originalX,s-=r.originalY,this.context.drawImage(e,n,h,a,o,i,s,a,o)},drawImage:function(t,i,s,e,n,h,a,o,r){var l=arguments.length,u=this.globalTransform;return 9===l?(h-=u.originalX,a-=u.originalY,this.context.drawImage(t,i,s,e,n,h,a,o,r)):5===l?(h=i-u.originalX,a=s-u.originalY,this.context.drawImage(t,i,s,e,n)):(h=i-u.originalX,a=s-u.originalY,this.context.drawImage(t,i,s)),t},VbE:function(t,i,s,e,n){var h=t,a=i,o=s,r=e,l=n,u=h.T,c=h.R,f=h.B,d=h.L,g=r-d-c,m=l-u-f;h.CL&&this.render(h.CL,a,o+u,d,m),h.CC&&this.render(h.CC,a+d,o+u,g,m),h.CR&&this.render(h.CR,a+r-c,o+u,c,m),h.TL&&this.render(h.TL,a,o,d,u),h.TC&&this.render(h.TC,a+d,o,g,u),h.TR&&this.render(h.TR,a+r-c,o,c,u),h.BL&&this.render(h.BL,a,o+l-f,d,f),h.BC&&this.render(h.BC,a+d,o+l-f,g,f),h.BR&&this.render(h.BR,a+r-c,o+l-f,c,f)},Vu1:function(t,i,s,e,n,h){var a=arguments.length;2===a&&(h=i,i=0);var o={img:t,sx:i||0,sy:s||0,sw:e||t.width,sh:n||t.height,sT:0,s8:0,tx:0,ty:0,alpha:1,qG:1,e_:1,rotation:0};return o},createTextObject:function(t,i){var s=t.canvas,e=this.Vu1(s);return e.resolution=1,e.context=t,e.canvas=s,e.padding=0,e.updateSize=function(){this.sw=this.canvas.width,this.sh=this.canvas.height},e},createNineSliceObject:function(t,i,s,e,n,h,a,o,r,l){var u=e-r-a,c=n-h-o,f={},d=f;return d.T=h,d.R=a,d.B=o,d.L=r,d.CL=this.Vu1(t,i,s+h,r,c,l),d.CC=this.Vu1(t,i+r,s+h,u,c,l),d.CR=this.Vu1(t,i+e-a,s+h,a,c,l),h>0&&(r>0&&(d.TL=this.Vu1(t,i,s,r,h,l)),d.TC=this.Vu1(t,i+r,s,u,h,l),a>0&&(d.TR=this.Vu1(t,i+e-a,s,a,h,l))),o>0&&(r>0&&(d.BL=this.Vu1(t,i,s+n-o,r,o,l)),d.BC=this.Vu1(t,i+r,s+n-o,u,o,l),a>0&&(d.BR=this.Vu1(t,i+e-a,s+n-o,a,o,l))),f}}));t.CanvasRenderer=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=i.create({Ek:!1,VQN:null,renderer:null,canvas:null,context:null,clearColor:null,webgl:!1,init:function(){if(this.VQN)this.canvas=this.VQN.renderer.view;else{var t=this.renderer;if(!t){var i=this.canvas;t=new PIXI.WebGLRenderer(i.width,i.height,{view:i}),this.webgl=t.type===PIXI.RENDERER_TYPE.WEBGL,t.resize(i.width,i.height)}this.VQN=new PIXI.RenderContext(t,this.root)}this.webgl=this.VQN.webgl,this.root=this.VQN.root,this.globalContainer=this.VQN.globalContainer,this.V6K=0,this.Vf5=0,this.VbE=this.drawDisplayObject},begin:function(t){this.VQN.begin(t)},end:function(){this.VQN.end()},colorRgb:function(t,i,s){return this.VQN.colorRgb(t,i,s)},colorHex:function(t){return this.VQN.colorHex(t)},colroName:function(t){return this.VQN.colroName(t)},save:function(){this.VQN.save()},restore:function(){this.VQN.restore()},translate:function(t,i){this.VQN.translate(t,i)},scale:function(t,i){this.VQN.scale(t,i)},rotate:function(t){this.VQN.rotate(t)},setAlpha:function(t){this.VQN.setAlpha(t)},restoreAlpha:function(){this.VQN.restoreAlpha()},getAlpha:function(){return this.VQN.getAlpha()},setOrigin:function(t,i){this.VQN.setOrigin(t,i)},getOrigin:function(){return this.VQN.getOrigin()},clipRect:function(t,i,s,e){this.VQN.clipRect(t,i,s,e)},unclipRect:function(){this.VQN.unclipRect()},setBlendByName:function(t){this.VQN.setBlendByName(t)},getBlend:function(){return this.VQN.getBlend()},setBlend:function(t){this.VQN.setBlend(t)},restoreBlend:function(){this.VQN.restoreBlend()},resetGlobalContainer:function(){this.VQN.resetGlobalContainer()},clear:function(){this.VQN.clear(this.clearColor)},strokeRect:function(t,i,s,e,n,h){this.VQN.strokeRect(t,i,s,e,n,h)},fillRect:function(t,i,s,e,n){this.VQN.fillRect(t,i,s,e,n)},clearRect:function(t,i,s,e){this.VQN.clearRect(t,i,s,e,this.clearColor,1)},strokeText:function(t,i,s,e,n,h){this.VQN.strokeText(t,i,s,e,n,h)},fillText:function(t,i,s,e,n){this.VQN.fillText(t,i,s,e,n)},drawText:function(t,i,s,e){this.VQN.drawText(t,i,s,e)},drawDisplayObject:function(t,i,s,e,n){5===arguments.length?(t.width=e,t.height=n,this.VQN.renderAt(t,i,s)):this.VQN.renderAt(t,i,s)},render:function(t){this.VQN.render(t)},renderAt:function(t,i,s){this.VQN.renderAt(t,i,s)},drawImage:function(t,i,s,e,n,h,a,o,r){var l=arguments.length;3===l?this.VQN.drawImageAt(t,i,s):9===l?this.VQN.drawImage(t,i,s,e,n,h,a,o,r):this.VQN.drawImage(t,i,s,e,n)},VbE:null,Vu1:function(t,i,s,e,n,h){return this.VQN.createSprite.apply(this.VQN,arguments)},createTextObject:function(t,i){return this.VQN.createTextObject(t,i)},createNineSliceObject:function(t,i,s,e,n,h,a,o,r,l){return arguments.length>9?this.VQN.createNineSliceObject(t,i,s,e,n,r,h,a,o,l):(h=i,a=s,o=e,r=n,this.VQN.createNineSliceObject(t,r,h,a,o,l))}});Object.defineProperty(s.prototype,"globalAlpha",{get:function(){return this.VQN.globalAlpha},set:function(t){this.VQN.globalAlpha=t}}),Object.defineProperty(s.prototype,"lineWidth",{get:function(){return this.VQN.lineWidth},set:function(t){this.VQN.lineWidth=t}}),Object.defineProperty(s.prototype,"strokeStyle",{get:function(){return this.VQN.strokeStyle},set:function(t){this.VQN.strokeStyle=t}}),Object.defineProperty(s.prototype,"fillStyle",{get:function(){return this.VQN.fillStyle},set:function(t){this.VQN.fillStyle=t}}),t.PIXIRenderer=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,i.create({init:function(){},V11:function(t){for(var i=t.children,s=0,e=i.length;s<e;s++){var n=i[s];"parent"==n.VQi?this.VG3(n,n.parent):"root"==n.VQi?this.VG3(n,n.root):this.VG3(n,t),n.VbW(!0)}},VG3:function(t,i){t.Vac(i)},VU7:function(t,i,s,e){var n=!1;"auto"!=t.width||t.w||(t.VI1.width=i,t.w=i,n=!0),"auto"!=t.height||t.h||(t.VI1.height=s,t.h=s,n=!0),n&&(t.Vbn(),t.VF8||t.VIj(t.parent),t.VcY||t.V0K(t.parent),t.Vmd(),t.Inj(),t.VFr=!0,e&&t.VbW())}}));t.Vhg=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.Vhg,n=i.create({LE:e,align:"top",size:null,VjU:!1,V11:function(t){for(var i,e=t.children,n=e.length,h=0,a=t.VI1.paddingTop,o=-(1/0),r=0,l=this.VjU?t.VI1.innerHeight/n:this.size,u=0;u<n;u++){var c=e[u];c.VcY=!1,"parent"==c.VQi?this.VG3(c,c.parent):"root"==c.VQi?this.VG3(c,c.root):(c.VD7(t),c.VSK(t),c.Vt5(),c.VCK(),c.V0_||(i=a,l?(i+=c.VI1.marginTop,a+=l):(i+=Math.max(o,c.VI1.marginTop),a=i+c.VI1.height)),c.VI1.top=s.IO5(c.top,c.VI1.VOS),c.VI1.V8t=i+c.VI1.top,c.y=c.VI1.V8t+t.y,c.VcY=!0,c.VIj(t),c.Vmd(),c.Inj(),o=c.VI1.marginBottom,r=Math.max(r,c.VI1.marginLeft+c.VI1.width+c.VI1.marginRight),h++),c.VbW(!0)}if(n>0){var f=l?t.VI1.height:a+o;if(this.VU7(t,r,f,!0),!l&&"bottom"==this.align){var d=t.VI1.height-f;if(d>0)for(var u=0;u<n;u++){var c=e[u];"parent"!==c.VQi&&"root"!=c.VQi&&(c.VI1.top+=d,c.VI1.V8t+=d,c.y+=d,c.Inj(),c.VbW(!0))}}}return h}});t.V_2=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.Vhg,n=i.create({LE:e,align:"left",size:null,VjU:!1,V11:function(t){for(var i,e=t.children,n=e.length,h=0,a=t.VI1.paddingLeft,o=-(1/0),r=0,l=this.size||(this.VjU?t.VI1.innerWidth/n:this.size),u=0;u<n;u++){var c=e[u];c.VF8=!1,"parent"==c.VQi?this.VG3(c,c.parent):"root"==c.VQi?this.VG3(c,c.root):(c.VD7(t),c.VSK(t),c.Vt5(),c.VCK(),c.V0_||(i=a,l?(i+=c.VI1.marginLeft,a+=l):(i+=Math.max(o,c.VI1.marginLeft),a=i+c.VI1.width)),c.VI1.left=s.IO5(c.left,c.VI1.Vh1),c.VI1.V$A=i+c.VI1.left,c.x=c.VI1.V$A+t.x,c.VF8=!0,c.V0K(t),c.Vmd(),c.Inj(),o=c.VI1.marginRight,r=Math.max(r,c.VI1.marginTop+c.VI1.height+c.VI1.marginBottom),h++),c.VbW(!0)}if(n>0){var f=l?t.VI1.width:a+o;if(this.VU7(t,f,r,!0),!l&&"right"==this.align){var d=t.VI1.width-f;if(d>0)for(var u=0;u<n;u++){var c=e[u];"parent"!==c.VQi&&"root"!=c.VQi&&(c.VI1.left+=d,c.VI1.V$A+=d,c.x+=d,c.Inj(),c.VbW(!0))}}}return h}});t.VRv=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.Vhg,n=i.create({LE:e,_2:null,_l:null,ViM:null,VV6:null,cols:1,rows:1,V11:function(t){var i=t.children,s=i.length,e=0;this.V7p(t);for(var n=0;n<s;n++){var h=i[n];"parent"==h.VQi?this.VG3(h,h.parent):"root"==h.VQi?this.VG3(h,h.root):(this._k(h,t,e),e++),h.VbW(!0)}return s>0&&this.VU7(t,t.VI1.width,t.VI1.height),e},V7p:function(t){var i=this.VI1={},e=t.VI1;"auto"==t.width&&(e.width=(this._2+this.OT)*this.cols+this.OT,e.width+=(e.paddingLeft||0)+(e.paddingRight||0)),"auto"==t.height&&(e.height=(this._l+this.OT)*this.rows+this.OT,e.height+=(e.paddingTop||0)+(e.paddingBottom||0)),i.OT=s.IO5(this.OT,e.width)||0,i.ViM=s.IO5(this.ViM,e.width),i.VV6=s.IO5(this.VV6,e.height),null===i.ViM&&(i.ViM=i.OT),null===i.VV6&&(i.VV6=i.OT);var n=e.width-e.paddingLeft-e.paddingRight,h=e.height-e.paddingTop-e.paddingBottom,a=(n+i.ViM)/(this.cols||1)-i.ViM>>0,o=(h+i.VV6)/(this.rows||1)-i.VV6>>0;this._2?i._2=s.IO5(this._2,a)||a:i._2=a,this.cols||(this.cols=(n+i.ViM)/i._2>>0),this._l?i._l=s.IO5(this._l,o)||o:i._l=o,this.rows||(this.rows=(h+i.VV6)/i._l>>0),this.V7e={x:0,y:0,VI1:{width:0,height:0,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0}}},_k:function(t,i,s){var e=t.sC=t.sC||0,n=t.sH=t.sH||0;t.colspan=t.colspan||1,t.rowspan=t.rowspan||1,t.width=null===t.width?"100%":t.width,t.height=null===t.height?"100%":t.height;var h=(t.VI1,this.VI1._2),a=this.VI1._l,o=this.VI1.ViM,r=this.VI1.VV6;this.V7e.x=i.x,this.V7e.y=i.y,this.V7e.VI1.width=t.colspan*(h+o)-o,this.V7e.VI1.height=t.rowspan*(a+r)-r,t.VD7(this.V7e),t.VSK(this.V7e),t.VI1.VDf=Math.max(t.marginLeft,i.paddingLeft)+e*(h+o),t.VI1.VeB=Math.max(t.marginTop,i.paddingTop)+n*(a+r),t.Vt5(),t.VCK(),t.VIj(this.V7e),t.V0K(this.V7e),t.Vmd(),t.Inj()}});t.VlA=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.Vhg),e=(t.V_2,t.VRv,t.VlA,i.create({init:function(){}}));e.VN8=new s,t.VnU=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.Vhd,n=t.fZ,h=t.VQo,a=t.VnU,o=function(){},r=i.create({id:null,Ek:!1,left:null,top:null,right:null,bottom:null,width:null,height:null,visible:!0,zIndex:0,index:0,alpha:1,scale:1,offsetX:0,offsetY:0,sT:"50%",s8:"50%",VF_:0,NyV:0,Nhq:0,NBc:0,NYV:null,root:null,parent:null,VJx:!1,NcW:"#000000",Ni0:.35,NZ_:null,transform:null,NXS:!1,NI0:!1,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null,margin:null,marginTop:null,marginRight:null,marginBottom:null,marginLeft:null,VQi:!1,backgroundColor:null,NYs:1,backgroundImage:null,Nm6:null,borderColor:null,Npd:1,borderWidth:0,NU2:null,NWl:!1,x:0,y:0,w:0,h:0,Ixh:null,VI1:null,VE_:!0,children:null,Ipn:null,VFr:!0,NAg:!1,NI2:!1,NIt:!1,init:function(){this.N6k(),this.inited=!0,this.id=this.id||"cmp_"+r.Nlo++,this.root=this.root||this.parent&&this.parent.root,this.root&&(this.root.all[this.id]&&console.log("Duplicate id : "+this.id),this.root.all[this.id]=this),this.Ixh=[],this.VI1={V$A:0,V8t:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},n.apply(this),h.apply(this),this.VE_&&(e.apply(this),this.NFl(this.NYV),this.NGi=0),this.NbO(this.margin||0),this.gw(this.padding||0),this.N3S(this.parent,!0),this.N3p(),this.NZZ()},N3p:function(t){this.NX8&&!t||(this.Nm6=this.Nm6||this.Ny6,this.backgroundImage=this.backgroundImage||this.NDU||this.Nnf,this.NU2?this.NCj(this.NU2):this.Nm6?this.NRf(this.Nm6):this.backgroundImage&&this.Nr6(this.backgroundImage))},NRf:function(t){var i=null;t&&("color"in t&&(this.backgroundColor=t.color),i=new CUI.BackgroundImageHolder(t)),this.Njq(i)},NCj:function(t){var i=t?new CUI.BorderImageHolder(t):null;this.Njq(i)},Nr6:function(t){this.NRf({img:t})},Njq:function(t){this.NX8=t,t&&(this.NX8.N3S(this),this.NX8.init(),this.NX8.updateSize(),this.NX8.NTM()),this.VFr=!0},Qy:null,N6k:function(){},NZZ:function(){},Njy:null,NFl:function(t){var i,s;if("string"==typeof t)i=t;else if(t&&t.constructor==Object){var i=t.name;s=t}if(i)switch(i){case"vbox":t=new CUI.V_2(s);break;case"hbox":t=new CUI.VRv(s);break;case"table":t=new CUI.VlA(s);break;default:t=new CUI.Vhg(s)}t||(t=a.VN8),this.NYV=t},N3S:function(t,i){t&&(t!=this.parent||i)&&this.parent.addChild(this)},addChild:function(t){this.VE_&&(e.prototype.addChild.call(this,t),t.root=this.root,t.index=this.NGi++,"auto"==this.width&&(this.VI1.w=0),"auto"==this.height&&(this.VI1.h=0),this.VFr=!0,this.N8V())},removeChild:function(t){if(this.VE_){var i=e.prototype.removeChild.call(this,t);i&&("auto"==this.width&&(this.VI1.w=0),"auto"==this.height&&(this.VI1.h=0),this.VFr=!0)}},N8V:function(){this.children.sort(function(t,i){return t.zIndex-i.zIndex||t.index-i.index})},NqT:function(t){this.zIndex=t;var i=this.parent||this.root;i.N8V()},NbO:function(t){this.margin=t,this.marginLeft=null===this.marginLeft?this.margin:this.marginLeft,this.marginTop=null===this.marginTop?this.margin:this.marginTop,this.marginRight=null===this.marginRight?this.margin:this.marginRight,this.marginBottom=null===this.marginBottom?this.margin:this.marginBottom},gw:function(t){this.padding=t,this.paddingLeft=null===this.paddingLeft?this.padding:this.paddingLeft,this.paddingTop=null===this.paddingTop?this.padding:this.paddingTop,this.paddingRight=null===this.paddingRight?this.padding:this.paddingRight,this.paddingBottom=null===this.paddingBottom?this.padding:this.paddingBottom},Nq3:function(t,i){if(!t)return this.VFr=!1,!1;if("root"==t){var s=this.root||this.parent;s&&(s.VFr=!0,i&&s.VbW())}else if("parent"==t){var e=this.parent||this.root;e&&(e.VFr=!0,i&&e.VbW())}else if(t===!0){for(var n,h=!1,a=this;a&&(n=a,a.VFr=!0,!h&&"root"!=a.VQi);)"parent"==a.VQi&&(h=!0),a=a.parent;i&&n.VbW()}else this.VFr=!0,i&&this.VbW();return!0},setPosition:function(t,i){this.left!=t&&(this.left=t,this.VIj()),this.top!=i&&(this.top=i,this.V0K()),this.Nq3("parent")},e9:function(t,i,s){(s||this.width!=t)&&(this.width=t,this.Vt5()),(s||this.height!=i)&&(this.height=i,this.VCK())},NKf:function(t,i){this.sT=t,this.s8=i},Vbn:function(){this.VI1.sT=s.IO5(this.sT,this.w)||0,this.VI1.s8=s.IO5(this.s8,this.h)||0},NUM:function(){var t=this.parent||this.root;this.x=this.VI1.V$A+t.x,this.y=this.VI1.V8t+t.y,this.Inj(),this.VE_&&this.children.forEach(function(t){t.NUM()})},Inj:function(){this.Ixh[0]=this.x-this.VF_,this.Ixh[1]=this.y-this.Nhq,this.Ixh[2]=this.x+this.w+this.NyV,this.Ixh[3]=this.y+this.h+this.NBc},N0z:function(t){this.VI1.V$A=t,this.NUM()},N2I:function(t){this.VI1.V8t=t,this.NUM()},moveTo:function(t,i){this.VI1.V$A=t,this.VI1.V8t=i,this.NUM()},moveBy:function(t,i){this.VI1.V$A+=t,this.VI1.V8t+=i,this.NUM()},show:function(){return!this.visible&&(this.visible=!0,this.NFs(),!0)},NFs:o,hide:function(){return!!this.visible&&(this.visible=!1,this.NPb(),!0)},NPb:o,NzF:function(t){this.left!==t&&(this.left=t,this.Nq3("parent"))},N4B:function(t){this.right!==t&&(this.right=t,this.Nq3("parent"))},NDY:function(t){this.top!==t&&(this.top=t,this.Nq3("parent"))},NM7:function(t){this.bottom!==t&&(this.bottom=t,this.Nq3("parent"))},Vac:function(t){this.VD7(t),this.VSK(t),this.Vt5(),this.VCK(),this.VIj(t),this.V0K(t),this.Vmd(),this.Inj()},VbW:function(t){this.VE_&&(this.VFr||t)&&(this.VFr=!1,this.NYV.V11(this)),this.NX8&&(this.NX8.updateSize(),this.NX8.NTM())},NoV:function(){return this.VE_?this.children.length:0},ICT:function(t,i){var s=this.Ixh;return s[0]<t&&t<s[2]&&s[1]<i&&i<s[3]},He:function(t){var i=this.Ixh;return t[0]<i[2]&&t[2]>i[0]&&t[1]<i[3]&&t[3]>i[1]},NPl:function(t,i){},Nq9:function(t,i){this.children.forEach(function(s){s.update(t,i)})},update:function(t,i){this.VbW(),this.NPl(t,i),this.VE_&&this.Nq9(t,i),this.m(t,i)},m:o,NFr:function(){if(!this.NbJ){var t=r.N8Q(this.id);t.width=this.w+4,t.height=this.h+4,this.NbJ=t}var i=this.NbJ.getContext("2d"),s=new CUI.CanvasRenderer({context:i}),e=this.NAg,n=this.visible;this.NAg=!1,this.visible=!0,s.translate(-this.x+2,-this.y+2);var h=0,a=Date.now();this.IzS(s,h,a),this.VE_&&this.IkI(s,h,a),s.translate(this.x-2,this.y-2),this.NAg=e,this.visible=n,this.NIt=!0},IzS:function(t,i,s){null!==this.backgroundColor&&(t.setAlpha(this.NYs),t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor,this.VI1),t.restoreAlpha()),this.NX8&&this.NX8.render(t,i,s),this.borderWidth&&null!==this.borderColor&&(t.setAlpha(this.Npd),t.strokeRect(this.x,this.y,this.w,this.h,this.borderColor,this.borderWidth,this.VI1),t.restoreAlpha())},IkI:function(t,i,s){this.children.forEach(function(e){e.render(t,i,s)})},NIC:function(t,i,s){if(this.NcW||0===this.NcW){var e=this.root,n=e.x,h=e.y,a=e.w,o=e.h,r=e.NTY;r&&(n+=r.x||0,h+=r.y||0,a+=r.w||0,o+=r.h||0),t.setAlpha(this.Ni0),t.fillRect(n,h,a,o,this.NcW),t.restoreAlpha()}},render:function(t,i,s){if(this.visible&&!(this.alpha<=0)){this.VJx&&this.NIC(t,i,s),this.NcS&&this.NcS(t,i,s);var e=t.getAlpha();1!=this.alpha&&t.setAlpha(this.alpha),this.Nqm(t,i,s),this.NAg&&this.NI2?(this.NIt||(this.NFr(),this.NaH=t.Vu1(this.NbJ)),t.renderAt(this.NaH,this.x-2,this.y-2)):(this.NI2=!0,this.IzS(t,i,s),this.VE_&&this.IkI(t,i,s)),this.ND8(t,i,s),t.setAlpha(e),this.Nei&&this.Nei(t,i,s)}},NcS:null,Nei:null,Nqm:function(t,i,s){if(1!=this.scale){var e=this.x+this.VI1.sT,n=this.y+this.VI1.s8;t.save(),t.setOrigin(e,n),t.translate(this.offsetX,this.offsetY),t.scale(this.scale,this.scale)}else(this.offsetX||this.offsetY)&&(t.save(),t.translate(this.offsetX,this.offsetY))},ND8:function(t,i,s){(1!=this.scale||this.offsetX||this.offsetY)&&t.restore()},VD7:function(t){t=t||this.parent;var i=t.VI1,e=this.VI1;this.marginLeft=null===this.marginLeft?this.margin:this.marginLeft,this.marginTop=null===this.marginTop?this.margin:this.marginTop,this.marginRight=null===this.marginRight?this.margin:this.marginRight,this.marginBottom=null===this.marginBottom?this.margin:this.marginBottom,e.marginLeft=s.IO5(this.marginLeft,i.width)||0,e.marginRight=s.IO5(this.marginRight,i.width)||0,e.marginTop=s.IO5(this.marginTop,i.height)||0,e.marginBottom=s.IO5(this.marginBottom,i.height)||0},VSK:function(t){t=t||this.parent;var i=t.VI1,s=this.VI1;s.VDf=Math.max(i.paddingLeft,s.marginLeft)||0,s.VeB=Math.max(i.paddingTop,s.marginTop)||0,s.Ngy=Math.max(i.paddingRight,s.marginRight)||0,s.NGl=Math.max(i.paddingBottom,s.marginBottom)||0,s.Vh1=i.width-s.VDf-s.Ngy,s.VOS=i.height-s.VeB-s.NGl},Vt5:function(){var t=this.VI1,i=t.Vh1;t.width=s.IO5(this.width,i),t.sT=s.IO5(this.sT,t.width)||0,t.innerWidth=t.width-t.paddingLeft-t.paddingRight,this.w=t.width},VCK:function(){var t=this.VI1,i=t.VOS;t.height=s.IO5(this.height,i),t.s8=s.IO5(this.s8,t.height)||0,t.innerHeight=t.height-t.paddingTop-t.paddingBottom,this.h=t.height},Vmd:function(){var t=this.VI1;this.paddingLeft=null===this.paddingLeft?this.padding:this.paddingLeft,this.paddingTop=null===this.paddingTop?this.padding:this.paddingTop,this.paddingRight=null===this.paddingRight?this.padding:this.paddingRight,this.paddingBottom=null===this.paddingBottom?this.padding:this.paddingBottom,t.paddingLeft=s.IO5(this.paddingLeft,t.width)||0,t.paddingRight=s.IO5(this.paddingRight,t.width)||0,t.paddingTop=s.IO5(this.paddingTop,t.height)||0,
t.paddingBottom=s.IO5(this.paddingBottom,t.height)||0,t.innerWidth=t.width-t.paddingLeft-t.paddingRight,t.innerHeight=t.height-t.paddingTop-t.paddingBottom},VIj:function(t){t=t||this.parent;var i=this.VI1,e=i.Vh1;i.left=s.IO5(this.left,e),i.right=s.IO5(this.right,e);var n=0;n=this.NXS===!0?(e-i.width)/2+(i.left||0):null===i.left&&null!==i.right?e-i.width-i.right:i.left||0,i.V$A=n+i.VDf,this.x=i.V$A+(t?t.x:0)},V0K:function(t){t=t||this.parent;var i=this.VI1,e=i.VOS;i.top=s.IO5(this.top,e),i.bottom=s.IO5(this.bottom,e);var n=0;n=this.NI0===!0?(e-i.height)/2+(i.top||0):null===i.top&&null!==i.bottom?e-i.height-i.bottom:i.top||0,i.V8t=n+i.VeB,this.y=i.V8t+ +(t?t.y:0)},NpX:function(){this.root&&(delete this.root.all[this.id],this.root=null),this.parent=null,this.NYV=null,this.VE_&&(this.children.forEach(function(t){t.N3S(t.root)}),this.children=null,this.Ipn=null)}});r.Nlo=0,r.all={},r.NAm=function(t){return!!t&&(r.all[t.id]=t,t.id)},r.NIc=function(t){return r.all[t]},r.NCM={},r.N8Q=function(t){var i=r.NCM[t];return i||(i=document.createElement("canvas"),i.id=t,i.width=3,i.height=3,r.NCM[t]=i),i},t.NOU=r,t.VlI=o}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.Vhd,t.NOU),e=t.VlI,n=i.create({LE:s,id:"cmp_root",width:null,height:null,NPl:e,IzS:e,VXR:e,N8q:1,init:function(){this.all={},(this.N8q||0===this.N8q)&&(s.Nlo=Number(this.N8q)||1),this.Qy&&this.Qy(),this.left=this.left||0,this.top=this.top||0,this.VQi="root",n.$super.init.call(this),this.VI1={paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,marginLeft:0,marginTop:0,marginRight:0,marginBottom:0,VDf:0,VeB:0,Ngy:0,NGl:0,Vh1:this.width,VOS:this.height},this.Ixh=[0,0],this.e9(this.width,this.height,!0),this.VIj(),this.V0K(),this.root=this,this.Njy&&this.Njy()},e9:function(t,i,s){(s||this.width!=t)&&(this.Nbw=t,this.width=t,this.w=t,this.VI1.width=t,this.Ixh[2]=t,this.VFr=!0),(s||this.height!=i)&&(this.N5C=i,this.height=i,this.h=i,this.VI1.height=i,this.Ixh[3]=i,this.VFr=!0)},V3Y:function(t,i){if(this.disabled||!this.visible||this.alpha<=0)return!1;var s=this.VLC(t,arguments);return s!==!1?s:void 0}});t.NxI=n}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.Font,i.create({DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,Jf:Math.PI/2,Jz:2*Math.PI,x:0,y:0,width:null,height:null,sT:0,s8:0,alpha:1,offsetX:0,offsetY:0,NHn:0,qj:"center",qS:"middle",visible:!0,parent:null,VFr:!0,init:function(){this.N3S(this.parent)},N3S:function(t){this.parent=t,this.VFr=!0},NKf:function(t,i){this.sT=t,this.s8=i},NVP:function(t,i){this.offsetX=t,this.offsetY=i},updateSize:function(){},NTM:function(){var t=this.parent;"center"==this.qj?this.x=t.x+(t.w-this.VI1.width>>1):"right"==this.qj?this.x=t.x+t.w-t.VI1.paddingRight-this.VI1.width:this.x=t.x+t.VI1.paddingLeft,"middle"==this.qS||"center"==this.qS?this.y=t.y+(t.h-this.VI1.height>>1):"bottom"==this.qS?this.y=t.y+t.h-t.VI1.paddingBottom-this.VI1.height:this.y=t.y+t.VI1.paddingTop},render:function(t,i,s){if(!this.visible)return!1}}));t.BaseHolder=s,"undefined"!=typeof module&&(module.exports=s)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=t.BaseHolder,n=t.Font,h=i.create({LE:e,text:null,color:"#000000",textAlign:"start",verticalAlign:"middle",textBaseline:"top",lineCap:"butt",lineJoin:"round",sO:null,strokeWidth:1,fontStyle:null,fontWeight:null,fontSize:14,fontName:"Arial",lineHeight:null,NqO:null,NMZ:1,shadowColor:null,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,measure:null,NAg:!1,Ndz:0,NMF:0,Ndd:4,NG$:!1,NcV:!0,init:function(){this.VI1={width:this.width,height:this.height},this.N_f(this),this.N3S(this.parent),this.id=this.id||"text-holder-"+this.parent.id,this.NQQ(),this.NgZ()},N$U:function(){this.NbJ||(this.NG$?this.NbJ=h.NbJ:this.NcV?this.NbJ=s.N8Q(this.id):this.NbJ=document.createElement("canvas")),this.NhX=this.NbJ.getContext("2d"),this.NhX.textBaseline="top"},NQQ:function(){!CUI.renderer,CUI.renderer.webgl&&(this.NAg=!0,this.NG$=!1),this.NAg&&(this.N$U(),this.NgB=CUI.renderer.createTextObject(this.NhX,!0))},N_f:function(t){this.qj=this.textAlign,this.qS=this.verticalAlign,this.setText(t.text,!0),this.color=t.color||this.color,this.fontName=t.fontName||this.fontName,this.fontSize=t.fontSize||this.fontSize,this.fontWeight=t.fontWeight,this.fontStyle=n.VNY(this.fontSize,this.fontName,this.fontWeight)},N6X:function(t){this.fontName=t,this.fontStyle=n.VNY(this.fontSize,this.fontName,this.fontWeight)},N9E:function(t){this.fontSize=t,this.fontStyle=n.VNY(this.fontSize,this.fontName,this.fontWeight)},NTs:function(t){this.fontWeight=t,this.fontStyle=n.VNY(this.fontSize,this.fontName,this.fontWeight)},NHu:function(t){this.color!==t&&(this.color=t,this.VFr=!0)},NzG:function(t,i){this.shadowOffsetX===t&&this.shadowOffsetY===i||(this.shadowOffsetX=t,this.shadowOffsetY=i,this.VFr=!0)},setText:function(t,i){this._text!==t&&(this.NRh=!0,this._text=t,t=this.text=null===t||void 0===t?"":t,Array.isArray(t)?this.NqO=t:this.NqO=String(t).split(/(?:\r\n|\r|\n)/),this.NMZ=this.NqO.length,this.VFr=i!==!1)},NgZ:function(){if(!this.NqO)return void(this.VFr=!1);var t=o;t.font=this.fontStyle;var i=t.measureText(this.NqO[0]);i.height=Math.ceil(1.5*this.fontSize),this.lineHeight=this.lineHeight||i.height,this.measure=i,this.width=i.width,this.height=this.lineHeight*this.NMZ,this.VI1.width=this.width,this.VI1.height=this.height,this.NTM(),this.VFr=!1,this.NAg&&("center"==this.textAlign?this.Ndz=-Math.ceil(this.width/2+this.strokeWidth+this.Ndd):"right"==this.textAlign||"end"==this.textAlign?this.Ndz=-(this.width+this.strokeWidth+this.Ndd):this.Ndz=-(this.strokeWidth+this.Ndd),this.NMF=-(this.strokeWidth+this.Ndd),this.Nnx(),this.NgB.updateSize())},Nnx:function(){this.NbJ.width=this.width+2*(this.strokeWidth+this.Ndd),this.NbJ.height=this.height+2*(this.strokeWidth+this.Ndd),this.NoX(this.NhX,-this.Ndz,-this.NMF)},NTM:function(){var t=this.parent;"center"==this.qj?this.x=t.x+(t.w>>1):"right"==this.qj?this.x=t.x+t.w-t.VI1.paddingRight:this.x=t.x+t.VI1.paddingLeft,"middle"==this.qS||"center"==this.qS?this.y=t.y+(t.h-this.height>>1):"bottom"==this.qS?this.y=t.y+t.h-t.VI1.paddingBottom-this.height:this.y=t.y+t.VI1.paddingTop},render:function(t,i,s){if(!this.visible||""===this.text||!this.NqO)return!1;this.VFr?this.NgZ():(this.NRh||this.NG$)&&this.NAg&&(this.Nnx(),this.NgB.updateContent());var e=this.x-this.sT+this.offsetX,n=this.y-this.s8+this.offsetY;this.NAg&&(e+=this.Ndz,n+=this.NMF),t.renderAt(this.NgB,e,n)},NoX:function(t,i,s){t.font=this.fontStyle,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;var e;null!==this.shadowColor&&(e={blur:t.shadowBlur,color:t.shadowColor,offsetX:t.shadowOffsetX,offsetY:t.shadowOffsetY},t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),null!==this.color&&(t.fillStyle=this.color),null!==this.sO&&(t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.lineWidth=this.strokeWidth,t.strokeStyle=this.sO),this.NOw(t,i,s),this.NRh=!1,e&&(t.shadowBlur=e.blur,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY)},NOw:function(t,i,s,e){if(this.NMZ>1){var n=this,h=this.lineHeight;this.NqO.forEach(function(a){n.K2(t,a,i,s,e),s+=h})}else this.K2(t,this.NqO[0],i,s,e)},K2:function(t,i,s,e,n){i&&(this.sO&&!n&&t.strokeText(i,s,e),t.fillText(i,s,e))}}),a=document.createElement("canvas"),o=a.getContext("2d");h.NbJ=document.createElement("canvas"),h.NbJ.width=3,h.NbJ.height=3,t.TextHolder=h,"undefined"!=typeof module&&(module.exports=h)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.BaseHolder,n=(t.NOU,i.create({LE:e,src:null,img:null,sx:null,sy:null,sw:null,sh:null,ox:null,oy:null,w:null,h:null,alpha:null,scale:1,qG:1,e_:1,S5:!1,SL:!1,rotation:0,x:0,y:0,offsetX:0,offsetY:0,I5F:0,IMS:0,width:"auto",height:"auto",init:function(){this.VI1={},this.src?this.load(this.src):this.img&&this.ITX(this.img),this.N3S(this.parent),this.id=this.id||"image-holder-"+this.parent.id},load:function(t){this.NNH(this.src,t)},NNH:function(t,i){this.src=t;var s=this;this.img=null;var e=new Image;return e.onload=function(t){s.ITX(e,i)},e.onerror=function(t){s.ITX(null,i)},e.src=t,e},ITX:function(t,i){this.img=t,this.NFa(),i&&i(t)},ILi:function(t){for(var i in t)this[i]=t[i];t.src?this.NNH(t.src):t.img&&this.ITX(t.img)},NFa:function(t){t=t||this;var i=t.sx,s=t.sy,e=t.sw,n=t.sh,h=t.w,a=t.h,o=t.ox,r=t.oy;null!==i&&void 0!==i||(i=0),null!==s&&void 0!==s||(s=0),null!==e&&void 0!==e||(e=this.img?this.img.width:0),null!==n&&void 0!==n||(n=this.img?this.img.height:0),null!==o&&void 0!==o||(o=0),null!==r&&void 0!==r||(r=0),null!==h&&void 0!==h||(h=e),null!==a&&void 0!==a||(a=n),this.sx=i,this.sy=s,this.sw=e,this.sh=n,this.w=h,this.h=a,this.ox=o,this.oy=r,this.Nsp()},Nsp:function(){this.NZ_=CUI.renderer.Vu1(this.img,this.sx,this.sy,this.sw,this.sh,!0)},N0l:function(){this.img=null},updateSize:function(){this.parent?this.VI1.width=s.IO5(this.width,this.parent.VI1.width,this.w)||0:this.VI1.width=s.IO5(this.width,this.w,this.w)||0,this.VI1.width=this.VI1.width*this.qG,this.VI1.sw=this.sw*this.VI1.width/this.w,this.VI1.ox=this.ox*this.VI1.width/this.w,this.parent?this.VI1.height=s.IO5(this.height,this.parent.VI1.height,this.h)||0:this.VI1.height=s.IO5(this.height,this.h,this.h)||0,this.VI1.height=this.VI1.height*this.e_,this.VI1.sh=this.sh*this.VI1.height/this.h,this.VI1.oy=this.oy*this.VI1.height/this.h},Z8:function(t){this.scale=t,this.qG=t,this.e_=t},IsA:function(t,i,s){if(!this.visible||!this.img)return!1;var e=this.x-this.sT+this.offsetX+this.ox,n=this.y-this.s8+this.offsetY+this.oy,h=this.VI1.sw+this.I5F,a=this.VI1.sh+this.IMS;t.drawDisplayObject(this.NZ_,e,n,h,a)},render:function(t,i,s){if(!this.visible||!this.img)return!1;var e=-this.sT,n=-this.s8,h=this.VI1.sw,a=this.VI1.sh,o=this.S5?-1:1,r=this.SL?-1:1,l=this.rotation%this.Jz;1!=o||1!=r||0!=l?(t.save(),t.translate(this.x+this.offsetX+this.VI1.ox,this.y+this.offsetY+this.VI1.oy),l&&t.rotate(l),t.scale(o,r)):(e+=this.x+this.offsetX+this.VI1.ox,n+=this.y+this.offsetY+this.VI1.oy),null!==this.alpha&&t.setAlpha(this.alpha),t.drawDisplayObject(this.NZ_,e,n,h+this.I5F,a+this.IMS),1!=o||1!=r||0!=l?t.restore():null!==this.alpha&&t.restoreAlpha()}}));t.ImageHolder=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.ImageHolder),e=i.create({LE:s,width:"100%",height:"100%",render:function(t,i,s){t.drawDisplayObject(this.NZ_,this.x+this.ox,this.y+this.oy,this.VI1.sw,this.VI1.sh)}});t.BackgroundImageHolder=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=t.ImageHolder,n=i.create({LE:e,width:"100%",height:"100%",T:null,R:null,B:null,L:null,fill:!0,NAg:!1,render:function(t,i,s){var e=this.VI1.sw,n=this.VI1.sh;this.NAg?(this.NbJ||(this.NbJ=this.NWl(e,n),this.NaH=t.Vu1(this.NbJ)),t.drawDisplayObject(this.NaH,0,0,e,n)):this.N0a(t,this.x,this.y,e,n)},Nsp:function(){},N7a:function(t,i,s,e){var n=this.img,h=this.sx||0,a=this.sy||0,o=this.sw||n.width,r=this.sh||n.height,l=this.T,u=this.R,c=this.B,f=this.L;this.N0Z=t.createNineSliceObject(n,h,a,o,r,l,u,c,f,!0),this.N0Z.width=i,this.N0Z.height=s,this.Nev=!0},N0a:function(t,i,s,e,n,h){this.Nev?(this.N0Z.width=e,this.N0Z.height=n):this.N7a(t,e,n,h),t.VbE(this.N0Z,i,s,e,n)},NWl:function(t,i){var e=s.N8Q(this.id);e.width=t,e.height=i;var n=e.getContext("2d"),h=new CUI.CanvasRenderer({context:n});return this.N0a(h,0,0,t,i,!0),e}});t.BorderImageHolder=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=i.create({LE:s,VE_:!1,disabled:!1,backgroundColor:null,VbW:function(t){this.VFr=!1},render:function(t,i,s){null!==this.backgroundColor&&(t.setAlpha(this.NYs),t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor,this.VI1),t.restoreAlpha())}});e.create=function(t,i,s){var e=new CUI.NKR({parent:s,width:t,height:i});return e},t.NKR=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.NOU,n=t.ImageHolder,h=(t.TextHolder,i.create({LE:e,VE_:!1,disabled:!1,width:null,height:null,qG:null,e_:null,JLL:!0,init:function(){h.$super.init.call(this),this.J1k=new n({parent:this,width:this.JLL?"100%":"auto",height:this.JLL?"100%":"auto",qj:"center",qS:"center"}),this.J1k.init(),this.src?this.NNH(this.src):this.img?this.ITX(this.img):this.Xb&&this.ILi(this.Xb),null!==this.qG&&(this.width=this.J1k.w*this.qG),null!==this.e_&&(this.height=this.J1k.h*this.e_)},NNH:function(t){this.src=t;var i=this;this.J1k.NNH(t,function(t){t&&i.Nq3(!0),i.JcN=!!i.J1k.img,i.VFr=!0})},ITX:function(t){this.img=t;var i=this;this.J1k.ITX(t,function(t){t&&i.Nq3(!0),i.JcN=!!i.J1k.img,i.VFr=!0})},ILi:function(t){this.J1k.ILi(t),this.JcN=!!this.J1k.img,this.VFr=!0},Vt5:function(){var t=this.VI1,i=!1;null===this.width||"auto"===this.width?t.width=this.J1k.w:(i=!0,t.width=s.IO5(this.width,t.Vh1)),t.sT=s.IO5(this.sT,t.width)||0,this.w=t.width,this.J1k.VI1.width=this.w,this.JcN||i||(this.w=.01,t.width=.01)},VCK:function(){var t=this.VI1,i=!1;null===this.height||"auto"===this.height?t.height=this.J1k.h:(i=!0,t.height=s.IO5(this.height,t.VOS)),t.s8=s.IO5(this.s8,t.height)||0,this.h=t.height,this.J1k.VI1.height=this.h,this.JcN||i||(this.h=.01,t.height=.01)},VbW:function(t){(this.VFr||t)&&(this.J1k.updateSize(),this.JLL?(this.J1k.x=this.x,this.J1k.y=this.y):this.J1k.NTM(),this.VFr=!1)},NUM:function(){this.x=this.VI1.V$A+this.parent.x,this.y=this.VI1.V8t+this.parent.y,this.Inj(),this.JLL?(this.J1k.x=this.x,this.J1k.y=this.y):this.J1k.NTM()},IzS:function(t,i,s){null!==this.backgroundColor&&(t.setAlpha(this.NYs),t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor,this.VI1),t.restoreAlpha()),this.NX8&&this.NX8.render(t,i,s),this.J1k&&this.J1k.render(t,i,s),this.borderWidth&&null!==this.borderColor&&(t.setAlpha(this.Npd),t.strokeRect(this.x,this.y,this.w,this.h,this.borderColor,this.borderWidth,this.VI1),t.restoreAlpha())}}));t.J77=h,"undefined"!=typeof module&&(module.exports=h)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=t.Utils,e=t.NOU,n=t.ImageHolder,h=t.TextHolder,a=i.create({LE:e,VE_:!1,disabled:!1,width:null,height:null,Jba:!1,backgroundColor:null,borderWidth:0,J5D:!1,JD8:1e-4,J$I:2,init:function(){this.Qy&&this.Qy(),a.$super.init.call(this),this.JU7&&this.JsW(this.JU7),this.J6F&&this.Jal(this.J6F),this.JSl(),this.N_f(this.Gi),this.Njy&&this.Njy(),this.Vac(this.parent),this.JZO()},J88:function(t,i){i?this[t]?this[t].ILi(i):(this[t]=new n(i),this[t].N3S(this),this[t].init()):this[t]=null,this.VFr=!0},JsW:function(t){t?this.JsD?this.JsD.ILi(t):(this.JsD=new n(t),this.JsD.N3S(this),this.JsD.init()):this.JsD=null,this.VFr=!0},Jal:function(t){t?this.JKp?this.JKp.ILi(t):(this.JKp=new n(t),this.JKp.N3S(this),this.JKp.init()):this.JKp=null,this.VFr=!0},N_f:function(t){this.JVO?this.JVO.N_f(t):(this.JVO=new h(t),this.JVO.N3S(this),this.JVO.init()),this.VFr=!0,this.JYE=!0},JSl:function(){var t=this;t.Gi=t.Gi||{};var i=["text","color","textAlign","verticalAlign","strokeWidth","fontSize","fontWeight","fontStyle","fontName","lineHeight"];i.forEach(function(i){!(i in t.Gi)&&i in t&&(t.Gi[i]=t[i])})},setText:function(t,i){this.JVO.setText(t,i),this.VFr=i!==!1,this.JYE=i!==!1},Vt5:function(){var t=this.VI1,i=null===this.width||"auto"===this.width;!i||!this.J5D&&this.NX8?i&&this.NX8?t.width=this.NX8.w:t.width=s.IO5(this.width,t.Vh1):(t.width=t.width||0,this.J59=!0),t.sT=s.IO5(this.sT,t.width)||0,t.width=t.width||this.JD8,this.w=t.width,this.Jba&&(this.NX8.width=this.w)},VCK:function(){var t=this.VI1,i=null===this.height||"auto"===this.height;!i||!this.J5D&&this.NX8?i&&this.NX8?t.height=this.NX8.h:t.height=s.IO5(this.height,t.VOS):(t.height=t.height||0,this.J59=!0),t.s8=s.IO5(this.s8,t.height)||0,t.height=t.height||this.JD8,this.h=t.height,this.Jba&&(this.NX8.height=this.h)},JZO:function(){var t=this.JVO.measure;if(t){this.JYE=!1;var i=!1,s=this.borderWidth+this.paddingLeft+this.paddingRight,e=this.borderWidth+this.paddingTop+this.paddingBottom;if(null===this.width||"auto"===this.width){var n=t.width+s;this.VI1.width=n,this.w=n,i=!0}if(null===this.height||"auto"===this.height){var h=t.height*this.JVO.NMZ+e;this.VI1.height=h,this.h=h,i=!0}i&&this.Nq3("parent",!0)}},VbW:function(t){(this.VFr||t)&&(this.JVO&&this.JVO.NTM(),this.NX8&&(this.NX8.updateSize(),this.NX8.NTM()),this.JsD&&(this.JsD.updateSize(),this.JsD.NTM()),this.JKp&&(this.JKp.updateSize(),this.JKp.NTM()),this.Vbn(),this.VFr=!1)},NUM:function(){this.x=this.VI1.V$A+this.parent.x,this.y=this.VI1.V8t+this.parent.y,this.Inj(),this.NX8&&this.NX8.NTM(),this.JsD&&this.JsD.NTM(),this.JVO&&this.JVO.NTM(),this.JKp&&this.JKp.NTM()},IzS:function(t,i,s){if(this.J59&&this.JYE&&this.JVO&&(this.JVO.VFr&&this.JVO.NgZ(),this.JZO()),null!==this.backgroundColor&&(t.setAlpha(this.NYs),t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor,this.VI1),t.restoreAlpha()),this.NX8&&this.NX8.render(t,i,s),this.JsD&&this.JsD.render(t,i,s),this.JVO&&this.JVO.render(t,i,s),this.JKp&&this.JKp.render(t,i,s),this.borderWidth&&null!==this.borderColor){t.setAlpha(this.Npd);var e=this.Ixh;t.strokeRect(e[0],e[1],e[2]-e[0],e[3]-e[1],this.borderColor,this.borderWidth,this.VI1),t.restoreAlpha()}}});t.JYx=a,"undefined"!=typeof module&&(module.exports=a)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.JYx),e=i.create({LE:s,borderWidth:0,J5D:!1,textAlign:"center",JyN:function(){this.b3_=null,this.pressed=!1,this.bdZ()},JoK:function(){this.pressed=!0,this.b9h()},b9h:function(){this.offsetY=2,this.scale=.92},bdZ:function(){this.offsetY=0,this.scale=1},touchStart:function(t,i,s){return!this.disabled&&(this.b3_=s,this.W6(t,i,s),void this.JoK())},pan:function(t,i,s,e,n,h,a){return!this.disabled&&(this.b3_!==a||this.ICT(t,i)||(this.JyN(),this.Jb3(t,i,s,e,n,h,a)),!1)},Jb3:function(t,i,s,e,n,h,a){},touchEnd:function(t,i,s){return!this.disabled&&(!(this.b3_!==s||(this.JyN(),!this.ICT(t,i)))&&this.Wf(t,i,s))},swipe:function(t,i,s){return!this.disabled&&(this.b3_===s&&this.JyN(),!1)},tap:function(t,i,s){if(!this.disabled){this.Jhb(t,i,s);var e=this.UG8(t,i,s);return this.JkS(t,i,s),e}},Jhb:function(t,i,s){},JkS:function(t,i,s){},NcS:function(t,i,s){this.disabled&&(this.JY6=this.alpha,this.alpha=.6)},Nei:function(t,i,s){this.disabled&&(this.alpha=this.JY6)}});t.U4=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=i.create({LE:s,init:function(){this.Qy&&this.Qy(),e.$super.init.call(this),this.Njy&&this.Njy()}});t.J$A=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=t.JYx,n=t.U4,h=i.create({LE:s,init:function(){this.Qy&&this.Qy(),h.$super.init.call(this),this.Jlv(),this.Njy&&this.Njy()},Jlv:function(){this.Jhk&&("left"in this.Jhk||(this.Jhk.left=8),"top"in this.Jhk||(this.Jhk.top=8),this.Jhk.fontSize=this.Jhk.fontSize||20,this.Jhk.parent=this,this.Jbr=new e(this.Jhk)),this.JYh&&(this.JYh.parent=this,this.JnL=new n(this.JYh))}});t.JfE=h,"undefined"!=typeof module&&(module.exports=h)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=t.Vue,n=i.create({LE:s,J7o:!1,Jt6:!0,scrollX:0,scrollY:0,Jg$:0,JAs:0,clip:!0,JaL:90,BT:.0025,Jwa:1.2,JMg:.12,JU9:160,Jva:700,JdK:!0,JYS:10,JQ5:"rgba(255,255,255,0.6)",JyT:"rgba(0,0,0,0.4)",JvQ:null,JYY:null,init:function(){n.$super.init.call(this),this.Jxl=[],this.JEX=new e({}),this.BT&&(this.JEX.BT=this.BT),this.JBG=this.scrollWidth,this.J4X=this.scrollHeight,this.Jv_()},Jv_:function(){this.JEX.reset(),this.JCI=0,this.scrollX=this.Jg$=0,this.scrollY=this.JAs=0,this.Jvz=this.Jo9=0,this.Jxl.length=0;var t=this.children[0];if(t){var i=this.children[this.children.length-1],s=i.x+i.w-t.x;s+=this.paddingLeft+this.paddingRight;var e=i.y+i.h-t.y;e+=this.paddingTop+this.paddingBottom,this.scrollWidth=this.JBG||s,this.scrollHeight=this.J4X||e}else this.scrollWidth=this.JBG||0,this.scrollHeight=this.J4X||0;this.Jb_=this.J_S=0,this.Jgc=Math.max(0,this.scrollWidth-this.w),this.JX0=Math.max(0,this.scrollHeight-this.h),this.Jqo=this.w/this.scrollWidth,this.J2Q=this.h/this.scrollHeight,this.J4O=(this.w-this.paddingLeft-this.paddingRight)*this.Jqo>>0,this.JAt=(this.h-this.paddingTop-this.paddingBottom)*this.J2Q>>0,this.JK4=this.scrollX*this.Jqo>>0,this.J79=this.scrollY*this.J2Q>>0},reset:function(){var t=this;this.children.forEach(function(i){i.moveBy(t.scrollX,t.scrollY)}),this.Jv_()},JxH:function(t,i){this.J7o||(t=0),this.Jt6||(i=0),Math.abs(t)<this.JMg&&Math.abs(i)<this.JMg||(this.JBS=!1,this.JEX.BE=!0,this.JEX.start(t,i))},JfN:function(){this.JEX.stop(),this.JEV()},Jn1:function(t,i,s){i=i||this.paddingLeft,s=s||this.paddingTop;var e=t.Ixh,n=this.Ixh,h=e[0]-i-n[0],a=e[2]+i-n[2],o=e[1]-s-n[1],r=e[3]+s-n[3],l=0,u=0;return h<0?l=h:a>0&&(l=a),o<0?u=o:r>0&&(u=r),!(!l&&!u)&&(this.scrollBy(l,u),[l,u])},scrollTo:function(t,i){this.J7o&&this.Jck(t),this.Jt6&&this.JK8(i)},scrollBy:function(t,i){this.JCI=this.Jva,this.J7o&&((this.scrollX<this.Jb_&&t<0||this.scrollX>this.Jgc&&t>0)&&(t*=.3),this.Jck(this.scrollX+t)),this.Jt6&&((this.scrollY<this.J_S&&i<0||this.scrollY>this.JX0&&i>0)&&(i*=.3),this.JK8(this.scrollY+i))},Jck:function(t){this.scrollX=Math.max(this.Jb_-this.JaL,Math.min(this.Jgc+this.JaL,t)),this.JK4=this.scrollX*this.Jqo>>0},JK8:function(t){this.scrollY=Math.max(this.J_S-this.JaL,Math.min(this.JX0+this.JaL,t)),this.J79=this.scrollY*this.J2Q>>0},J6k:function(){var t=this.J7o;if((this.scrollX<=this.Jb_-this.JaL/2||this.scrollX>=this.Jgc+this.JaL/2)&&(t=!1),t)return!0;var i=this.Jt6;return(this.scrollY<=this.J_S-this.JaL/2||this.scrollY>=this.JX0+this.JaL/2)&&(i=!1),i},JSn:function(){if(this.scrollX<this.Jb_||this.scrollX>this.Jgc||this.scrollY<this.J_S||this.scrollY>this.JX0){var t=this;this.JEV();var i=Math.min(this.Jgc,Math.max(this.Jb_,this.scrollX)),s=Math.min(this.JX0,Math.max(this.J_S,this.scrollY)),e=this.scrollX,n=this.scrollY,h=i-e,a=s-n;this.tween={duration:this.JU9,played:0,m:function(i){var s=e+h*i-t.scrollX,o=n+a*i-t.scrollY;(s||o)&&t.scrollBy(s,o)},k:function(){t.JK4=t.scrollX*t.Jqo>>0,t.J79=t.scrollY*t.J2Q>>0,t.JBS=!0,t.JfN()}}}},JEV:function(){this.tween=null},J86:function(t){var i=this.tween;if(!i)return!1;if(i.played+=t,i.played<0)return!1;var s=i.played/i.duration;return s>=1?(s=1,i.k(),this.JEV()):i.m(s),!0},W6:function(t,i,s){return this.ICT(t,i)&&this.JfN(),!1},Wf:function(t,i,s){return this.JSn(),!1},U$c:function(t,i,s,e,n,h,a){return!!this.ICT(n,h)&&void this.scrollBy(-s,-e)},U0Y:function(t,i,s,e,n,h,a){return!!this.ICT(n,h)&&(s*=this.Jwa,e*=this.Jwa,void this.JxH(-s,-e))},VbW:function(t){this.VE_&&(this.VFr||t)&&(this.VFr=!1,this.NYV.V11(this),this.reset())},NPl:function(t,i){if(this.J86(t),!this.JBS){var s=this.JEX.update(t);s&&this.scrollBy(this.JEX.Bc,this.JEX.BB),s&&this.J6k()||(this.JBS=!0,this.JSn())}},Nq9:function(t,i){var s=this;this.Jg$=this.scrollX-this.Jvz,this.JAs=this.scrollY-this.Jo9;var e=this.Jxl,n=this.Jg$||this.JAs||0===e.length;n&&(e.length=0),this.children.forEach(function(h,a){n&&(h.moveBy(-s.Jg$,-s.JAs),s.He(h.Ixh)&&e.push(h)),h.update(t,i)}),this.Jg$=0,this.JAs=0,this.Jvz=this.scrollX,this.Jo9=this.scrollY},JCK:function(t,i,s){if(this.JYS&&!(this.JdK&&this.JCI<=0)){if(this.JCI-=i,this.J7o&&this.Jqo<1){var e=this.y+this.h-this.JYS;t.fillRect(this.x+this.paddingLeft+0,e,this.w,this.JYS,this.JyT,this.VI1),t.fillRect(this.x+this.paddingLeft+this.JK4+1,e+1,this.J4O-2,this.JYS-2,this.JQ5,this.VI1)}if(this.Jt6&&this.J2Q<1){var n=this.x+this.w-this.JYS;t.fillRect(n,this.y+this.paddingTop+0,this.JYS,this.h,this.JyT,this.VI1),t.fillRect(n+1,this.y+this.paddingTop+this.J79+1,this.JYS-2,this.JAt-2,this.JQ5,this.VI1)}}},Jlf:function(t){t.clipRect(this.x,this.y,this.w,this.h)},CnQ:function(t){t.unclipRect()},IkI:function(t,i,s){this.clip&&this.Jlf(t),this.Jxl.forEach(function(e){e.render(t,i,s)}),this.JCK(t,i,s),this.clip&&this.CnQ(t)},Vzd:function(){return this.Jxl}});t.CfP=n,"undefined"!=typeof module&&(module.exports=n)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU,t.JYx,t.U4,t.JfE),e=i.create({LE:s,buttons:null,C5l:null,CKv:0,CNo:0,CFr:function(t,i,s){this.buttons=t||[],this.C5l=i||[],s&&this.Cqk()},Cqk:function(){var t=this;this.buttons&&this.buttons.forEach(function(i,s){i.Cu7=t,i.tabIndex=s,i.CcY=!1,i.JkS=t.C0b;var e=t.C5l[s];e&&(s===t.CNo?t.CUK(s):t.Ckd(s))})},CUK:function(t){null!==this.CKv&&this.Ckd(this.CKv);var i=this.buttons[t],s=this.C5l[t];i.CcY=!0,i.activate&&i.activate(),s.show(),this.CKv=t},C1k:function(){return this.buttons[this.CKv]||null},CL3:function(){return this.C5l[this.CKv]||null},Ckd:function(t){if(this.CKv===t&&(this.CKv=null),null!==t){var i=this.buttons[t],s=this.C5l[t];i.CcY=!1,i.C$t&&i.C$t(),s.hide()}},C0b:function(){var t=this,i=t.Cu7;i.Ckd(i.CKv),i.CUK(t.tabIndex)}});t.CX5=e,"undefined"!=typeof module&&(module.exports=e)}(CUI);var CUI=CUI||{};!function(t){var i=t.Class,s=(t.Utils,t.NOU),e=t.JYx,n=t.ImageHolder,h=(t.TextHolder,i.create({LE:s,VE_:!1,disabled:!1,width:null,height:null,Jba:!1,CU7:0,Cfd:!1,backgroundColor:"rgba(50,50,50,0.5)",borderColor:"rgba(50,50,50,1)",CHv:"rgba(230,60,60,1)",init:function(){this.Qy&&this.Qy(),h.$super.init.call(this),this.CPW&&(this.ClT=new n(this.CPW),this.ClT.N3S(this),this.ClT.init()),this.Njy&&this.Njy()},Vt5:e.prototype.Vt5,VCK:e.prototype.VCK,VbW:function(t){(this.VFr||t)&&(this.NX8&&(this.NX8.updateSize(),this.NX8.NTM()),this.ClT&&(this.ClT.updateSize(),this.ClT.NTM(),this.ClT.C0Z||(this.ClT.C0Z=this.ClT.sw,this.ClT.CGN=this.ClT.sh,this.ClT.ClA=this.ClT.VI1.width,this.ClT.CXB=this.ClT.VI1.height)),this.Vbn(),this.VFr=!1)},NUM:function(){this.x=this.VI1.V$A+this.parent.x,this.y=this.VI1.V8t+this.parent.y,this.Inj(),this.NX8&&this.NX8.NTM(),this.ClT&&this.ClT.NTM()},IzS:function(t,i,s){var e=Math.min(1,this.CU7);this.NX8?this.NX8.IsA(t,i,s):t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor,this.VI1),this.ClT?(this.ClT.sw=this.ClT.C0Z*(this.Cfd?1:e),this.ClT.VI1.width=this.ClT.ClA*e,this.ClT.IsA(t,i,s)):(t.fillRect(this.x,this.y,this.w*e,this.h,this.CHv,this.VI1),t.strokeRect(this.x,this.y,this.w,this.h,this.borderColor,2,this.VI1))}}));t.Chj=h,"undefined"!=typeof module&&(module.exports=h)}(CUI),Matrix.prototype={clone:function(){return new Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(t){if(!t)return this;var i=arguments,s=this.a,e=this.b,n=this.c,h=this.d,a=this.tx,o=this.ty;if(i.length>=6)var r=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5];else r=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,d=t.ty;return this.a=s*r+e*u,this.b=s*l+e*c,this.c=n*r+h*u,this.d=n*l+h*c,this.tx=a*r+o*u+f,this.ty=a*l+o*c+d,this},rotate:function(t){var i=Math.sin(t),s=Math.cos(t),e=this.a,n=this.b,h=this.c,a=this.d,o=this.tx,r=this.ty;return this.a=e*s-n*i,this.b=e*i+n*s,this.c=h*s-a*i,this.d=h*i+a*s,this.tx=o*s-r*i,this.ty=o*i+r*s,this},scale:function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},translate:function(t,i){return this.tx+=t,this.ty+=i,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,i=this.b,s=this.c,e=this.d,n=this.tx,h=t*e-i*s;return this.a=e/h,this.b=-i/h,this.c=-s/h,this.d=t/h,this.tx=(s*this.ty-e*n)/h,this.ty=-(t*this.ty-i*n)/h,this},Cd0:function(t,i){var s=t*this.a+i*this.c+this.tx,e=t*this.b+i*this.d+this.ty;return[s,e]},Cxo:function(t){var i=[],s=this;return t.forEach(function(t){var e=t[0]*s.a+t[1]*s.c+s.tx,n=t[0]*s.b+t[1]*s.d+s.ty;i.push([e,n])}),i},Cy2:function(t){var i=[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]];return this.Cxo(i)}};var BezierEasing;!function(t){function i(t,i){return 1-3*i+3*t}function s(t,i){return 3*i-6*t}function e(t){return 3*t}function n(t,n,h){return((i(n,h)*t+s(n,h))*t+e(n))*t}function h(t,n,h){return 3*i(n,h)*t*t+2*s(n,h)*t+e(n)}function a(t,i,s,e,h){var a,o,r=0;do o=i+(s-i)/2,a=n(o,e,h)-t,a>0?s=o:i=o;while(Math.abs(a)>f&&++r<d);return o}function o(t,i,s,e){for(var a=0;a<u;++a){var o=h(i,s,e);if(0===o)return i;var r=n(i,s,e)-t;i-=r/o}return i}function r(t,i,s,e){if(4===arguments.length)return new r([t,i,s,e]);if(!(this instanceof r))return new r(t);if(!t||4!==t.length)throw new Error("BezierEasing: points must contains 4 values");for(var n=0;n<4;++n)if("number"!=typeof t[n]||isNaN(t[n])||!isFinite(t[n]))throw new Error("BezierEasing: points should be integers.");if(t[0]<0||t[0]>1||t[2]<0||t[2]>1)throw new Error("BezierEasing x values must be in [0, 1] range.");this.CAL="BezierEasing("+t+")",this.CMk="cubic-bezier("+t+")",this.CVc=t,this.Cuq=p?new Float32Array(g):new Array(g),this.ChJ=!1,this.get=this.get.bind(this)}var l={},u=4,c=.001,f=1e-7,d=10,g=11,m=1/(g-1),p="function"==typeof Float32Array;r.prototype={get:function(t){if(t<=0)return 0;if(t>=1)return 1;var i=this.CVc[0],s=this.CVc[1],e=this.CVc[2],h=this.CVc[3];return this.ChJ||this.CrL(),i===s&&e===h?t:0===t?0:1===t?1:n(this.CGq(t),s,h)},CIT:function(){return this.CVc},toString:function(){return this.CAL},CPl:function(){return this.CMk},CrL:function(){var t=this.CVc[0],i=this.CVc[1],s=this.CVc[2],e=this.CVc[3];this.ChJ=!0,t===i&&s===e||this.CuV()},CuV:function(){for(var t=this.CVc[0],i=this.CVc[2],s=0;s<g;++s)this.Cuq[s]=n(s*m,t,i)},CGq:function(t){for(var i=this.CVc[0],s=this.CVc[2],e=this.Cuq,n=0,r=1,l=g-1;r!==l&&e[r]<=t;++r)n+=m;--r;var u=(t-e[r])/(e[r+1]-e[r]),f=n+u*m,d=h(f,i,s);return d>=c?o(t,f,i,s):0===d?f:a(t,n,n+m,i,s)}},r.CPx={ease:r.ease=r(.25,.1,.25,1),linear:r.linear=r(0,0,1,1),"ease-in":r.CaV=r(.42,0,1,1),"ease-out":r.Ca2=r(0,0,.58,1),"ease-in-out":r.Cr0=r(.42,0,.58,1)},l.exports=r,t.BezierEasing=r}(window);var Dragons=Dragons||{Class:GT.Class};!function(t){var i=(t.Class,t.Utils,t.Vhd,GT.Class.create({CBj:null,CYu:null,I$W:function(t){this.CBj=JSON.parse(JSON.stringify(t))},CRi:function(t){var i=this;t.forEach(function(t){"string"==typeof t?i.C7r(t):i.C7r(t[0],t[1],t[2])})},C7r:function(t,i,s){s=s||t,1==arguments.length&&(i=this[t]);var e=this.CBj;return t in e?this[s]=e[t]:this[s]=i,this[s]},Cp$:function(){return{x:0,y:0,C01:1,Cea:1,CyL:0,C9x:0,qG:1,e_:1,angle:0,rotation:0}},setTransform:function(t){var i=this.Cp$();this.transform=t||{};for(var s in i)s in this.transform||(this.transform[s]=i[s]);this.transform.angle=this.transform.CyL,this.transform.rotation=this.transform.CyL*Math.PI/180,this.transform.qG=this.transform.C01,this.transform.e_=this.transform.Cea;var e=new Matrix(1,0,0,1,0,0);e.rotate(this.transform.rotation),e.scale(this.transform.qG,this.transform.e_),e.translate(this.transform.x,this.transform.y),this.CZm=e},CEJ:function(t){return{rO:0,gO:0,bO:0,aO:0,rM:100,gM:100,bM:100,aM:100}},Ckx:function(t){var i=this.CEJ();this.color=t||{};for(var s in i)s in this.color||(this.color[s]=i[s])},C6_:function(t){0===t?this.CyD=this.CoO:t||(this.CyD=this.CrI)},CD_:function(t){this.curve=t,t&&(this.CyD=this.C2N(t))},C2N:function(t){var i=new BezierEasing(t);return function(t){return i.get(t)}},CrI:function(t){return t>=1?1:0},CoO:function(t){return t},CyD:function(t){return t},CtB:function(t){return t%=360,t>180?t-=360:t<-180&&(t=360+t),t},CXC:function(t,i,s){return t+(i-t)*this.CyD(s)},Cp1:function(t,i,s,e){e=e||0;var n=i-t;if(n=this.CtB(n),n+=360*e,0==n)return t;var h=t+n*this.CyD(s);return h},ClI:function(t,i,s){var e=t.transform;if(!i)return{x:e.x,y:e.y,C01:e.C01,Cea:e.Cea,CyL:e.CyL,C9x:e.C9x,qG:e.qG,e_:e.e_,angle:e.angle,rotation:e.rotation};var n,h=i.transform,a=t.CXC(e.x,h.x,s),o=t.CXC(e.y,h.y,s),r=t.CXC(e.qG,h.qG,s),l=t.CXC(e.e_,h.e_,s),u=e.angle,c=h.angle;if(this.Cyz){var f=this.Cyz.transform.angle;u=this.CtB(u+f),c=this.CtB(c+f),n=t.Cp1(u,c,s,t.tweenRotate),n-=f}else n=t.Cp1(u,c,s,t.tweenRotate);var d={x:a,y:o,C01:r,Cea:l,CyL:n,C9x:n,qG:r,e_:l,angle:n,rotation:n*Math.PI/180};return d},Cn5:function(t,i,s){var e=t.color||this.CEJ();if(!i)return{rO:e.rO,gO:e.gO,bO:e.bO,aO:e.aO,rM:e.rM,gM:e.gM,bM:e.bM,aM:e.aM};var n=i.color||this.CEJ(),h=["rO","gO","bO","aO","rM","gM","bM","aM"],a={};return h.forEach(function(i){a[i]=t.CXC(e[i],n[i],s)}),a},C_w:function(t){for(var i,s,e=0,n=0,h=this.frames.length;n<h;n++){
var a=this.frames[n];if(a.CjV<=t&&t<a.C4R){i=a,e=t-a.CjV,e>0&&(s=this.frames[n+1]||null);break}}return i?{Cej:e,Cgk:e/i.duration,duration:i.duration,CX$:i,Cy4:s}:null},Ko:function(t,i){t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[0],i[3]),t.closePath(),t.stroke()},CgM:function(t,i,s,e,n){e=e||0,n=n||0,s&&(t.strokeStyle=s);var h=i.length,a=i[0];t.beginPath(),t.moveTo(a[0]+e,a[1]+n);for(var o=1;o<h;o++){var a=i[o];t.lineTo(a[0]+e,a[1]+n)}t.closePath(),t.stroke()}}));t.BaseElement=i}(Dragons);var Dragons=Dragons||{};!function(t){var i=t.Class,s=i.create({addChild:function(t){t.id=t.id||0===t.id?t.id:s.IRw(),this.Ipn[t.id]=t,this.children.push(t),t.parent=this},IJa:function(t){return this.Ipn[t]},getChildAt:function(t){return this.children[t]},removeChild:function(t){var i=this.indexOf(t);return i>=0&&(delete this.Ipn[t.id],this.children.splice(i,1),t.parent=null,t)},Iq1:function(t){var i=this.Ipn[t];return!!i&&this.removeChild(i)},removeChildAt:function(t){var i=this.children[t];return!!i&&(delete this.Ipn[i.id],this.children.splice(t,1),i.parent=null,i)},indexOf:function(t){for(var i=0,s=this.children.length;i<s;i++)if(this.children[i]===t)return i;return-1},I8F:function(t){return!!this.children[t.id]},IFx:function(t){s.IvB(this.children,t)}});s.UH5=0,s.IRw=function(){s.UH5++;var t="comp_"+s.UH5;return t},s.IvB=function(t,i){for(var s,e,n=t.length,h=1;h<n;h++){s=t[h];for(var a=s[i],o=h;o>0&&(e=t[o-1])[i]>a;o--)t[o]=e;t[o]=s}},s.apply=function(t,i){var e=s.prototype;for(var n in e){var h=e[n];"function"==typeof h&&(i||!t[n])&&(t[n]=h)}return(i||!t.children)&&(t.children=[]),(i||!t.Ipn)&&(t.Ipn={}),t},t.Vhd=s,"undefined"!=typeof module&&(module.exports=s)}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=GT.Class.create({LE:i,name:"displayName",type:"image",transform:null,parentName:null,Cr$:null,C0H:null,CBj:null,parent:null,init:function(){this.I$W(this.CBj),this.C7r("name"),this.C7r("type"),this.C7r("id",this.name),this.setTransform(this.CBj.transform),this.CCP()},CCP:function(){var t=this.Cr$.CbR,i=t[this.parentName];i&&(this.parent=i,i.CVw(this))},clone:function(){var t=new s({parentName:this.parentName,Cr$:this.Cr$,CBj:this.CBj});return t.init(),t}});t.DisplaySkin=s}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=(t.Vhd,t.DisplaySkin),e=GT.Class.create({LE:i,name:null,Cr$:null,CaT:null,init:function(){this.I$W(this.CBj),this.C7r("name"),this.C7r("id",this.name),this.CYG(this.CBj.CMF)},CYG:function(t){var i=this;this.CaT=[],this.Cho={},t.forEach(function(t){i.Clu(t)})},Clu:function(t){var i=this,e=t.display;e.forEach(function(e){var n=new s({parentName:t.name,Cr$:i.Cr$,CBj:e});n.init(),i.Cho[n.name]=!0,i.CaT.push(n)})}});t.SkinSet=e}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=GT.Class.create({LE:i,duration:1,displayIndex:0,zOrder:0,C7_:0,action:null,color:null,curve:null,parent:null,init:function(){this.I$W(this.CBj),this.CRi(["duration","displayIndex","zOrder","action"]),this.Ckx(this.CBj.color),this.C6_(this.CBj.C7_),this.CD_(this.CBj.curve),this.Cy3()},Cy3:function(){var t=this.parent.C$5.color;this.CFz={rO:t.rO+this.color.rO,gO:t.gO+this.color.gO,bO:t.bO+this.color.bO,aO:t.aO+this.color.aO,rM:t.rM*this.color.rM,gM:t.gM*this.color.gM,bM:t.bM*this.color.bM,aM:t.aM*this.color.aM}}});t.SlotFrame=s}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=GT.Class.create({LE:i,duration:1,event:null,sound:null,C7_:0,tweenRotate:0,C$n:0,transform:null,curve:null,parent:null,init:function(){this.CBj&&(this.I$W(this.CBj),this.CRi(["duration","event","sound","tweenRotate"]),this.setTransform(this.CBj.transform),this.C6_(this.CBj.C7_),this.CD_(this.CBj.curve))},Cm4:function(t){var i=this.transform.qG,s=this.transform.e_,e=this.transform.rotation,n=this.transform.x,h=this.transform.y,a=this.parent?this.parent.Cyz:null;a&&a.transform&&(i*=a.transform.qG,s*=a.transform.e_,e+=a.transform.rotation,n+=a.transform.x,h+=a.transform.y);var o=new Matrix(1,0,0,1,0,0);return o.scale(i,s),o.rotate(e),o.translate(n,h),t&&o.concat(t),o}});t.BoneFrame=s}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=GT.Class.create({LE:i,duration:1,event:null,sound:null,action:null,animation:null,Cr$:null,parent:null,init:function(){this.I$W(this.CBj),this.CRi(["duration","event","sound","action"])}});t.MainFrame=s}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=t.SlotFrame,e=GT.Class.create({LE:i,name:null,parent:null,Cxm:null,scale:1,offset:0,init:function(){this.I$W(this.CBj),this.CRi(["name","scale","offset"]),this.C7r("id",this.name);var t=this;this.C$5=this.Cr$.CbR[this.name],this.parentName=this.C$5.parentName,this.parent=this.animation.CAA[this.parentName],this.parent.CdX.push(this),this.CaT=[],this.C$5.CaT.forEach(function(i){t.CaT.push(i.clone())}),this.CBM(this.CBj.frame)},CBM:function(t){var i=this;this.frames=[];var e=0;t.forEach(function(t){var n=new s({parent:i,animation:i.animation,Cr$:i.Cr$,CBj:t});n.init(),n.CjV=e,e=n.C4R=n.duration+e,i.frames.push(n)})},CWv:function(t){var i=this.C_w(t),s=this.C$5.displayIndex||0,e=1;if(i&&i.CX$){if(s=i.CX$.displayIndex||0,s<0)return null;var n=this.Cn5(i.CX$,i.Cy4,i.Cgk);e=n.aM/100}if(s<0)return null;var h=this.CaT[s],a=new Matrix(1,0,0,1,0,0);a.concat(h.CZm),a.concat(this.parent.CrU[t]);var o={parent:this,Aq:h.name,CZm:a,alpha:e,displayIndex:s,Chg:h.parent.z||0};return o}});t.Slot=e}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=t.Vhd,e=t.BoneFrame,n=GT.Class.create({LE:i,CSB:null,scale:1,offset:0,pX:0,pY:0,parent:null,COk:null,animation:null,Cr$:null,absolute:null,Cdt:!0,Cvu:!0,init:function(){s.apply(this),this.I$W(this.CBj),this.CRi(["name","scale","offset","pX","pY"]),this.C7r("id",this.name),this.Cyz=this.Cr$.CAA[this.name],this.CdX=[],this.CrU={},this.CBM(this.CBj.frame)},CBM:function(t){var i=this;this.frames=[];var s=0;t.forEach(function(t){var n=new e({parent:i,animation:i.animation,Cr$:i.Cr$,CBj:t});n.init(),n.CjV=s,s=n.C4R=n.duration+s,i.frames.push(n)})},CCP:function(){var t=this.animation.CAA,i=this.Cyz.parentName,s=t[i];s&&s.addChild(this)},C_p:function(t,i){var s=this.C_w(t),n=this.Cp$();s&&(n=this.ClI(s.CX$,s.Cy4,s.Cgk));var h=new e({parent:this});h.transform=n;var a=this.CrU[t]=h.Cm4(i);this.children.forEach(function(i){i.C_p(t,a)})}});t.Bone=n}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=(t.Vhd,t.DisplaySkin,t.Bone),e=t.Slot,n=t.MainFrame,h=(t.BoneFrame,t.SlotFrame,GT.Class.create({LE:i,name:null,duration:0,fadeInTime:0,scale:1,playTimes:1,frames:null,CBU:null,CdX:null,Cr$:null,CBj:null,Cmi:.11,init:function(){this.I$W(this.CBj),this.CRi(["name","duration","fadeInTime","scale","playTimes"]),this.C7r("id",this.name),this.CKK(this.CBj.Civ),this.CYC(this.CBj.CMF),this.CBM(this.CBj.frame)},CBM:function(t){var i=this;this.frames=[];var s=0;t.forEach(function(t){var e=new n({animation:i,Cr$:i.Cr$,CBj:t});e.init(),e.CjV=s,s=e.C4R=(e.duration||i.Cmi)+s,i.frames.push(e)})},CKK:function(t){var i=this;this.CBU=[],this.CAA={},t.forEach(function(t){var e=new s({animation:i,Cr$:i.Cr$,CBj:t});e.init(),i.CBU.push(e),i.CAA[e.name]=e}),this.CO0=[],this.CCf={},this.CBU.forEach(function(t){t.CCP(),t.parent||(i.CO0.push(t),i.CCf[t.name]=t)})},CYC:function(t){var i=this;this.CdX=[],t.forEach(function(t,s){var n=new e({CfQ:s,animation:i,Cr$:i.Cr$,CBj:t});n.init(),i.CdX.push(n)})},C_p:function(t){this.CO0.forEach(function(i){i.C_p(t)})},Cjw:function(t,i){i=i||0;for(var s=null,e=i,n=this.frames.length;e<n;e++){var h=this.frames[e];if(h.CjV<=t){s=h;break}}return s},CVC:function(t,i,s){s=s||{};for(var e=s.Czp||!1,n=s.qG||s.scale||1,h=s.e_||s.scale||n,a=(s.COS||!1,s.CDn||""),o=i*t/1e3,r=t/o,l=this.duration/o,u=0,c=0,f=[],d=0,g=function(t,i){var s=t.zIndex-i.zIndex;return 0==s?t.displayIndex-i.displayIndex:s},m=0;m<o;m++){this.C_p(u);var p=this.Cjw(u,d),v={duration:r,Ce_:[]};p&&(d++,v.event=p.event,v.action=p.action,v.sound=p.sound),this.CdX.forEach(function(t){var i=t.CWv(u);if(i){var s={displayIndex:i.displayIndex,zIndex:i.Chg,slotName:t.name,Aq:i.Aq,alpha:i.alpha,CZm:i.CZm,ox:i.ox,oy:i.oy};s.ox*=n,s.oy*=h,s.CZm.tx*=n,s.CZm.ty*=h,v.Ce_.push(s)}}),v.Ce_.sort(g),f.push(v),c+=r,u+=l}if(e)for(var m=f.length-2;m>0;m--)f.push(f[m]);var w={CTj:f,CDn:a,loop:0===this.playTimes||this.playTimes-1};return w}}));t.SKAnimation=h}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=(t.Vhd,t.DisplaySkin,GT.Class.create({LE:i,name:"slotName",z:0,parentName:null,displayIndex:0,Cr$:null,parent:null,CaT:null,blendMode:null,color:null,init:function(){this.I$W(this.CBj),this.CRi(["name","displayIndex","z",["parent",null,"parentName"]]),this.Ckx(this.CBj.color),this.Cho={},this.CaT=[],this.CCP()},CVw:function(t){t&&!this.Cho[t.name]&&(this.Cho[t.name]=!0,this.CaT.push(t))},CCP:function(){var t=this.Cr$.CAA,i=t[this.parentName];i&&(this.parent=i,i.CdX.push(this))}}));t.BaseSlot=s}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=t.Vhd,e=(t.DisplaySkin,GT.Class.create({LE:i,name:"boneName",length:0,parentName:null,transform:null,Cr$:null,parent:null,CdX:null,init:function(){s.apply(this),this.I$W(this.CBj),this.CRi(["name","length",["parent",null,"parentName"]]),this.C7r("id",this.name),this.setTransform(this.CBj.transform),this.CdX=[]},CCP:function(){var t=this.Cr$.CAA,i=t[this.parentName];i&&i.addChild(this)}}));t.BaseBone=e}(Dragons);var Dragons=Dragons||{};!function(t){var i=(t.Class,t.Utils,t.BaseElement),s=(t.Vhd,t.DisplaySkin,t.SkinSet),e=t.BaseBone,n=t.BaseSlot,h=t.SKAnimation,a=GT.Class.create({LE:i,name:"skeletonName",CBU:null,CdX:null,Cnq:null,CfU:null,init:function(){this.CBj=this.CBj||this.json.Ceq[0],this.I$W(this.CBj),this.C7r("name"),this.CKK(this.CBj.Civ),this.CYC(this.CBj.CMF),this.C1p(this.CBj.Cxm),this.CGx(this.CBj.animation)},St:function(t,i){var s=new Image;return s.src=t,s.onload=function(t){i&&i(s,t)},s},Ctt:function(t,i,s){var e=this;this.Cbd(t,i,function(t,i){e.json=t,e.init(),s&&s(t,i)})},CYf:function(t,i,s){var e={};return this.Cbd(t,i,function(t,i){var n=t.name,h=(t.ClZ,t.SubTexture);h.forEach(function(t){var i=t.name,s={img:n,x:t.x,y:t.y,w:t.width,h:t.height,ox:-t.CJe,oy:-t.C8y,sw:t.CqU,sh:t.CEl};e[i]=s}),s&&s(e)}),e},Cbd:function(t,i,s){i=!!i;var e="GET",n=function(){var t=h.responseText,i=JSON.parse(t);s&&s(i,h)},h=new XMLHttpRequest;h.open(e,t,i),i&&(h.onreadystatechange=function(){4==h.readyState&&n()}),h.send(),i||n()},CKK:function(t){var i=this;this.CBU=[],this.CAA={},t.forEach(function(t){var s=new e({Cr$:i,CBj:t});s.init(),i.CBU.push(s),i.CAA[s.name]=s}),this.CO0=[],this.CCf={},this.CBU.forEach(function(t){t.CCP(),t.parent||(i.CO0.push(t),i.CCf[t.name]=t)})},CYC:function(t){var i=this;this.CdX=[],this.CbR={},t.forEach(function(t,s){var e=new n({Cr$:i,CBj:t});e.init(),e.CMa=s,i.CdX.push(e),i.CbR[e.name]=e}),i.CdX.sort(function(t,i){return t.z-i.z||t.CMa-i.CMa})},C1p:function(t){var i=this;this.Cnq=[],this.Cs4={},t.forEach(function(t){var e=new s({Cr$:i,CBj:t});e.init(),i.Cnq.push(e),i.Cs4[e.name]=e})},CGx:function(t){var i=this;this.CfU=[],this.Cfz={},t.forEach(function(t){var s=new h({Cr$:i,CBj:t});s.init(),i.CfU.push(s),i.Cfz[s.name]=s})}});t.Skeleton=a}(Dragons);var Sprite=Sprite||{};!function(t){var i=t.Vjk||{},s=t.V5E||{},e=t.CRs||{};t.Vjk=i,t.V5E=s,t.CRs=e,t.Ca6=function(t,i,s,e,n){e=e||"-",n=n||0,s=s||{};for(var h in t)h in s||(s[h]=t[h]);"loop"in s||(s.loop=t.loop||!1),"ox"in s||(s.ox=t.ox||0),"oy"in s||(s.oy=t.oy||0);var a=s.frames=[];if(Array.isArray(t.frames))for(var o=0;o<t.frames.length;o++){var r=t.frames[o],l=Array.isArray(t.duration)?t.duration[o]:t.duration;a.push({Aq:i+e+(r+n),duration:l})}else for(var o=0;o<t.frames;o++){var r=o,l=Array.isArray(t.duration)?t.duration[o]:t.duration;a.push({Aq:i+e+(r+n),duration:l})}return s}}(Sprite);var Sprite=Sprite||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={constructor:i,animation:null,Ce_:null,ChH:0,startTime:null,endTime:null,duration:null,alpha:1,Aq:null,CZm:null,init:function(){this.C87=t.Vjk,this.C6D=t.V5E,this.duration=this.duration||this.endTime-this.startTime||0,this.Ce_?(this.CpT(),this.render=this.Cdf):(this.CYc(this),this.render=this.IzS)},CpT:function(){this.ChH=this.Ce_.length;for(var t=0;t<this.ChH;t++){var i=this.Ce_[t];i.zIndex=i.zIndex||0,i.CMa=t,this.CYc(i)}this.Ce_.sort(function(t,i){return t.zIndex-i.zIndex||t.CMa-i.CMa})},CYc:function(t){t.alpha=t.alpha||0===t.alpha?t.alpha:1,t.Aq=t.Aq||t.CZM,t.Aq||"string"!=typeof t.img||(t.Aq=t.img);var i=this.CBI(t.Aq);t.img=i.img,t.x=i.x,t.y=i.y,t.w=i.w,t.h=i.h,t.ox=(t.ox||0)+i.ox,t.oy=(t.oy||0)+i.oy},CAS:function(t){return this.C87?this.C87[t]:this.img||this.animation.img},CBI:function(t){var i=this.CDn||this.animation.CDn;i&&(t=i+t);var s,e;if(this.C6D&&(s=this.C6D[t])){var n=this.CAS(s.img);e={img:n,x:s.x,y:s.y,w:s.w,h:s.h,ox:s.ox||0,oy:s.oy||0,sw:s.sw,sh:s.sh}}else{var n=this.CAS(t);if(!n)return{img:t,x:0,y:0,w:0,h:0,ox:0,oy:0,sw:0,sh:0};e={img:n,x:0,y:0,w:n.width,h:n.height,ox:0,oy:0,sw:n.width,sh:n.height}}return this.animation.CRO&&(e.ox-=e.sw/2,e.oy-=e.sh/2),e},IzS:function(t,i,s){this.C23(t,this,i,s)},Cdf:function(t,i,s){for(var e=0;e<this.ChH;e++){var n=this.Ce_[e];this.C23(t,n,i,s)}},C23:function(t,i,s,e){var n=i.CZm;n?(t.save(),t.globalAlpha=i.alpha,t.transform(n.a,n.b,n.c,n.d,n.tx+s,n.ty+e),t.drawImage(i.img,i.x,i.y,i.w,i.h,i.ox,i.oy,i.w,i.h),t.restore()):(t.globalAlpha=i.alpha,t.drawImage(i.img,i.x,i.y,i.w,i.h,s+i.ox,e+i.oy,i.w,i.h),t.globalAlpha=1)},CcT:function(t,i,s){var e,n=this.ChH;n?e=this.Ce_:(e=[this],n=1);for(var h=0;h<n;h++){var a=e[h];t.save(),t.globalAlpha=a.alpha;var o=a.CZm;t.transform(o.a,o.b,o.c,o.d,o.e,o.f),t.strokeStyle="#ff6600",t.strokeRect(0,0,a.w,a.h),t.strokeRect(0,0,2,2),t.restore()}}};for(var e in s)i.prototype[e]=s[e];t.CY6=i}(Sprite);var Sprite=Sprite||{};!function(t){var i=t.CY6,s=t.CTV,e=function(t){for(var i in t)this[i]=t[i]},n={constructor:e,x:0,y:0,ox:0,oy:0,parent:null,loop:!1,COS:!0,duration:0,played:0,CTj:null,frames:null,frameCount:-1,CjV:0,C4R:1/0,currentFrame:null,currentIndex:-1,CXn:-1,paused:!1,img:null,CDn:null,CRO:!1,CHN:i,classic:!1,init:function(){if(this.classic&&(this.CHN=s),this.CDW(this.COS),this.frames=this.frames||this.Cmj(),this.duration=this.duration||0,this.frameCount=this.frames.length,this.C4R=Math.min(this.C4R,this.frameCount-1),this.frameCount>0){var t=this.CQ0(this.frames[0]);this.frames[0]=t;for(var i=0,e=1;e<this.frameCount;e++){var n=this.CQ0(this.frames[e]);t.duration?(t.startTime=i,t.endTime=i+t.duration):t.endTime=n.startTime,t.init(),i+=t.duration,t=n,this.frames[e]=t}t.duration&&(t.startTime=i,t.endTime=i+t.duration),!this.duration&&t.endTime?this.duration=t.endTime:t.endTime||(t.endTime=this.duration||i),t.init(),this.reset()}},CDW:function(t){this.COS=t,t?this.changeFrame=this.Cy4:this.changeFrame=this.a4_},Cmj:function(){var t=JSON.parse(JSON.stringify(this.CTj));return t||[]},CQ0:function(t){var i=new this.CHN(t);return i.animation=this,i},reset:function(){this.ended=!1,this.played=0,this.a4_(0)},start:function(t){if(this.paused=!1,this.reset(),t>0){var i=this.frames[t-1].endTime;this.played=i,this.a4_(t)}},changeFrame:null,a4_:function(t){this.currentIndex=t,this.currentFrame=this.frames[t],this.CXn=this.currentFrame.endTime},Cy4:function(){for(var t,i,s=this.currentIndex;t=this.frames[s],i=t.endTime,!(s==this.C4R||this.played<i);)s++;this.currentIndex=s,this.currentFrame=t,this.CXn=i},setTime:function(t){t%=this.duration;for(var i=0,s=this.C4R;s>=0;s--){var e=this.frames[s];if(t>=e.startTime){i=s;break}}this.played=t,this.a4_(i)},update:function(t){if(this.paused||this.ended)return!1;if(!(this.played>=this.CXn))return this.played+=t,!1;if(this.currentIndex===this.C4R){if(this.Uhf&&this.Uhf(t),!(this.loop===!0||--this.loop>0))return this.ended=!0,!1;this.played-=this.CXn,this.currentIndex=this.CjV}else this.currentIndex++,this.played+=t;return this.changeFrame(this.currentIndex),this.aIj=!0},Uhf:null,render:function(t){var i,s,e=this.currentFrame;this.apg?(t.save(),t.translate(this.x,this.y),t.scale(-1,1),i=this.ox,s=this.oy):(i=this.x+this.ox,s=this.y+this.oy),e.render(t,i,s),this.debug&&(e.aTs(t,i,s),e.CcT(t,i,s),t.strokeRect(i-2,s-2,4,4)),this.apg&&t.restore()}};for(var h in n)e.prototype[h]=n[h];t.Animation=e}(Sprite);var TileMapCollision={border:0,acU:function(t){var i=t.no;"number"==typeof this.aqo?t.block=i>=this.aqo:t.block=this.aqo.indexOf(i)!=-1},ae5:function(t,i,s){var e={x:t[0],y:t[1],width:t[2]-t[0],height:t[3]-t[1],deltaX:i,deltaY:s,abi:!1,acx:!1,ah9:null,ac3:null},n=Math.abs(i),h=Math.abs(s),a=Math.max(Math.ceil(n/this.avd),Math.ceil(n/this.av2));if(e.aiQ=a,this.a2O=n<h?this.a2P:this.aPi,this.amH=0,a>1)for(var o=i/a,r=s/a,l=0;l<a&&(o||r)&&(this.a2O(t,e,o,r),e.abi&&(o=0),e.acx&&(r=0),!e.aIv);l++);else this.a2O(t,e,i,s);return null!=this.LF&&this.LF(t,e,i,s),e},aPi:function(t,i,s,e){0!=s&&this.aAG(i,s,e),0!=e&&this.aHC(i,s,e)},a2P:function(t,i,s,e){0!=e&&this.aHC(i,s,e),0!=s&&this.aAG(i,s,e)},aHC:function(t,i,s){var e=1,n=s>0,h=t.y;t.a8o=t.y+s,t.deltaY=s;for(var a=(t.a8o+(n?t.height-e:0))/this.av2>>0,o=t.x/this.avd>>0,r=(t.x+t.width-e)/this.avd>>0,l=o;l<=r;l++){var u=this.aQk(l,a);if(this.amH++,u){if(u.block){t.a8o=a*this.av2+(n?-t.height+e-1:this.av2),t.acx=!0,t.deltaY=t.a8o-h,t.ac3=u;break}u.a61}}t.y=t.a8o},aAG:function(t,i,s){var e=1,n=i>0,h=t.x;t.aTR=t.x+i,t.deltaX=i;for(var a=(t.aTR+(n?t.width-e:0))/this.avd>>0,o=t.y/this.av2>>0,r=(t.y+t.height-e)/this.av2>>0,l=o;l<=r;l++){var u=this.aQk(a,l);if(this.amH++,u){if(u.block){t.aTR=a*this.avd+(n?-t.width+e-1:this.avd),t.abi=!0,t.deltaX=t.aTR-h,t.ah9=u;break}u.a61}}t.x=t.aTR},aic:function(t,i,s,e){function n(){var s=r.y+r.height-(i.y+i.height);u>s&&(s=i.height+u,i.a61=!0,i.a5G=!0,i.a8o=r.y+r.height-s,i.deltaY=i.a8o-t[1])}var h=i.x/this.avd>>0,a=(i.y/this.av2>>0,(i.x+i.width-1)/this.avd>>0),o=(i.y+i.height-1)/this.av2>>0,r=this.aQk(a,o);if(this.amH++,r){var l=this.ary[r.no];if(1==l){var u=i.x+i.width-r.x;n()}}if(r=this.aQk(h,o),this.amH++,r&&(l=this.ary[r.no],l==-1)){var u=r.x+r.width-i.x;n()}i.x=i.aTR,i.y=i.a8o}},GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i]},s={constructor:i,id:null,avd:null,av2:null,Uw:0,UD:0,aWc:null,aQ$:null,aua:null,a3v:null,eh:.5,eM:2,scale:1,afo:null,data:null,aNa:null,atj:-(1/0),aQ_:1/0,aeV:-(1/0),agQ:1/0,a$p:0,aL6:0,ajw:0,a8N:0,a5w:0,aWd:0,aGy:0,aDE:0,aFE:null,a$H:null,a3x:!0,a7m:!0,x:0,y:0,aBL:null,aqo:1,aQh:0,init:function(){if(this.aWc?this.aua=this.aWc*this.avd:this.aWc=Math.ceil(this.aua/this.avd),this.aQ$?this.a3v=this.aQ$*this.av2:this.aQ$=Math.ceil(this.a3v/this.av2),null===this.aFE&&(this.aFE=this.aDE+Math.ceil(this.Uw/this.avd/this.eh)),null===this.a$H&&(this.a$H=this.aGy+Math.ceil(this.UD/this.av2/this.eh)),this.aXF(),this.afo={},this.data&&(this.setData(this.data),this.am8(0,0,this.a$H,this.aFE,!0)),this.aFV={},this.aNa)for(var t in this.aNa){var i=this.aFV[t]=this.aFV[t]||{};for(var s in this.aNa[t]){var e=this.aNa[t][s],n=this.aMo(s,t,e),h=this.createNode(s,t,0,n);i[s]=h}}this.Z8(this.scale,0,0,!0),this.a3x&&(this.amf=this.Uw,this.ah7=this.UD,this.aO$=this.AS(this.amf,this.ah7),this.ajm=this.aO$.getContext("2d")),this.NZZ&&this.NZZ(),this.Qx&&this.Qx()},PN:function(t){return ResourcePool.get(t)},aXF:function(){if(this.a0_=[],this.ajo=this.PN(this.aBL),this.ajo){this.aAP=this.ajo.width/this.avd>>0,this.auC=this.ajo.height/this.av2>>0;for(var t=0;t<this.auC;t++)for(var i=0;i<this.aAP;i++)this.a0_.push({x:i*this.avd,y:t*this.av2})}},AS:function(t,i){var s=document.createElement("canvas");return s.width=t,s.height=i,s},setData:function(t){this.data=t},am8:function(t,i,s,e,n){if(this.data){var h=!1;if(n?h=!0:(t<this.aGy&&(h=!0),i<this.aDE&&(h=!0),s>this.a$H&&(h=!0),e>this.aFE&&(h=!0)),!h)return!1;this.aGy=t,this.aDE=i,this.a$H=s,this.aFE=e;for(var a=i;a<e;a++){var o=this.data[a];o||(o=[]);var r=this.afo[a];r||(r=this.afo[a]={});for(var l=t;l<s;l++){var u=o[l];void 0===u&&(u=1);var c=this.aVP(l,a,u);u=0===u?0:1;var f=this.createNode(l,a,u,c);this.acU(f),r[l]=f}}return!0}},Z8:function(t,i,s,e){if(t=Math.max(this.eh,Math.min(this.eM,t)),!e&&this.scale===t)return void(this.a8_=!1);i=i||0,s=s||0;var n=1/this.scale-1/t,h=i*n+this.a$p,a=s*n+this.aL6;this.scale=t,this.a8_=!0,this.oH(),this.aSs(h,a,!0)},oH:function(){this.a0I=this.avd*this.scale,this.aQS=this.av2*this.scale,this.awq=this.Uw/this.scale,this.aam=this.UD/this.scale,this.a5w=Math.ceil(this.Uw/this.a0I+1)+1,this.aWd=Math.ceil(this.UD/this.aQS+1)+1},aSs:function(t,i,s){var e=this.atj||0,n=null===this.aQ_?this.aua-this.awq:this.aQ_,h=this.aeV||0,a=null===this.agQ?this.a3v-this.aam:this.agQ;return t=Math.max(e,Math.min(n,t)),i=Math.max(h,Math.min(a,i)),s||this.a$p!==t||this.aL6!==i?(this.agg=!0,this.i2=!0,this.a$p=t,this.aL6=i,this.ajw=t/this.avd>>0,this.a8N=i/this.av2>>0,this.aNT=-(this.a$p%this.avd)*this.scale,this.a6K=-(this.aL6%this.av2)*this.scale,t<0&&(this.ajw-=1,this.aNT-=this.a0I),i<0&&(this.a8N-=1,this.a6K-=this.aQS),void this.am8(this.ajw,this.a8N,this.ajw+this.a5w,this.a8N+this.aWd,s)):void(this.i2=!1)},a1k:function(t,i){var s=this.a$p+t,e=this.aL6+i;this.aSs(s,e)},render:function(t){this.aWm=[],this.a3x?(this.agg&&this.aY0(),t.drawImage(this.aO$,this.x,this.y)):this.NoX(t,this.x,this.y,!0),this.i2=!1},aY0:function(){this.a7m&&this.ajm.clearRect(0,0,this.amf,this.ah7),this.NoX(this.ajm,0,0,!0),this.agg=!1},NoX:function(t,i,s){for(var e=this.ajw,n=this.a8N,h=this.a8N+this.aWd,a=this.ajw+this.a5w,o=i+this.aNT+this.a$p,r=s+this.a6K+this.aL6,l=this.a0I,u=this.aQS,s=r,c=n;c<h;c++){var f=this.afo[c],d=this.aFV[c];if(f)for(var i=o,g=e;g<a;g++){var m=f[g];m&&this.af9(t,m,i,s);var m=d?d[g]:void 0;void 0!==m&&(m.x=i,m.y=s,this.aWm.push(m)),i+=l}s+=u}},af9:function(t,i,s,e){t.drawImage(this.ajo,i.sx,i.sy,i.w,i.h,s,e,this.a0I,this.aQS)},aah:function(t){var i=this;this.aWm.forEach(function(s){t.drawImage(i.ajo,s.sx,s.sy,s.w,s.h,s.x,s.y,i.a0I,i.aQS)})},a3R:function(){return this.aO$},aVP:function(t,i,s){var e=(s||0)-this.aQh;return e},aMo:function(t,i,s){var e=(s||0)-this.aQh;return e},createNode:function(t,i,s,e){var n=s,h=this.a0_[e]||{},a={aJO:1,no:n,sC:t,sH:i,x:t*this.avd,y:i*this.av2,w:this.avd,h:this.av2,color:n?"#66aaee":"#ffffff",sx:h.x||0,sy:h.y||0};return a},aQk:function(t,i){var i=this.afo[i];return i?i[t]:null},a_r:function(t,i){var s=t/this.avd>>0,e=i/this.av2>>0,n=this.afo[e];return n?n[s]:null},akC:function(t,i){t-=this.x,i-=this.y,t/=this.scale,i/=this.scale,t+=this.a$p,i+=this.aL6;var s=t/this.avd>>0,e=i/this.av2>>0,n=this.afo[e];return n?n[s]:null},ad3:function(t,i){t/=this.scale,i/=this.scale,this.a1k(t,i)},aft:function(t,i){return t-=this.x,i-=this.y,t=t/this.scale+this.a$p,i=i/this.scale+this.aL6,[t,i]},aak:function(t,i){return t=(t-this.a$p)*this.scale,i=(i-this.aL6)*this.scale,t+=this.x,i+=this.y,[t,i]},destroy:function(){this.afo=null,this.data=null}};for(var e in TileMapCollision)i.prototype[e]=TileMapCollision[e];for(var e in s)i.prototype[e]=s[e];t.aBw=i}(GT);var Maze=function(t){for(var i in t)this[i]=t[i]};Maze.prototype={constructor:Maze,cols:0,rows:0,afo:null,size:0,as_:0,aJI:0,aBW:0,a3D:0,currentNode:null,a9v:null,ae9:null,init:function(){this.akV=[],this.size=this.cols*this.rows,this.avD(),this.Qx()},avD:function(){for(var t=this.afo=[],i=0;i<this.rows;i++){var s=[];t.push(s);for(var e=0;e<this.cols;e++){var n={x:e,y:i,value:Maze.aLf.NONE,a8f:!1,aEM:!1,aGO:null};s.push(n)}}},Qx:function(){},aQk:function(t,i){var s=this.afo[i];return s?s[t]:null},aQm:function(t){var i=t.value,s=Maze.aLf.N,e=Maze.aLf.S,n=Maze.aLf.W,h=Maze.aLf.E,a=0;return(i&s)===s&&a++,(i&h)===h&&a++,(i&e)===e&&a++,(i&n)===n&&a++,a},ab7:function(t){var i=t.value,s=Maze.aLf.N,e=Maze.aLf.S,n=Maze.aLf.W,h=Maze.aLf.E;return(i&s)===s?s:(i&h)===h?h:(i&e)===e?e:(i&n)===n?n:Maze.aLf.NONE},aOb:function(){var t=this.Je(0,this.rows-1),i=this.Je(0,this.cols-1);return this.afo[t][i]},a0M:function(t,i){return t.value|=i},a_Q:function(t,i){return t.value&=~i},aPY:function(t,i){return(t.value&i)===i},setStart:function(t,i){var s=this.afo[i][t];this.a9v=s},setEnd:function(t,i){var s=this.afo[i][t];this.ae9=s},aAL:function(t){var i=0;return this.aPY(t,Maze.aLf.N)&&i++,this.aPY(t,Maze.aLf.E)&&i++,this.aPY(t,Maze.aLf.S)&&i++,this.aPY(t,Maze.aLf.W)&&i++,i},a8v:function(t,i){this.currentNode=t,t.aGO=this.a3D,this.aue.push(t),this.aBW++,this.aOt=i||this.agD(t),t.aEM=!0,this.aOt&&!t.a8f&&(t.a8f=!0,this.akV.push(t),this.a3P(t)),this.ajd(t)},ajd:function(t){},a3P:function(t){},moveTo:function(t){var i=this.aOt[t];this.as_==t?this.aJI++:(this.as_=t,this.aJI=1),this.currentNode.value|=t,i.value|=Maze.aLf.dgK[t],i.aEM=!0},dZw:function(t,i){var s=t.x,e=t.y,n=Maze.aLf.dRJ[i],h=Maze.aLf.doL[i],a=this.aQk(s+n,e+h);return!!a&&(t.value|=i,a.value|=Maze.aLf.dgK[i],t.aEM=!0,a.aEM=!0,a)},dDp:function(t,i){var s=t.x,e=t.y,n=Maze.aLf.dRJ[i],h=Maze.aLf.doL[i],a=this.aQk(s+n,e+h);return!!a&&(t.value&=~i,a.value&=~Maze.aLf.dgK[i],t.aEM=!1,a.aEM=!1,a)},dTR:function(t,i){var s=t.x,e=t.y,n=t.value;t.value=Maze.aLf.NONE,t.aEM=!1;var h,a=Maze.aLf.N,o=Maze.aLf.S,r=Maze.aLf.W,l=Maze.aLf.E;return(n&a)===a&&(h=this.aQk(s+0,e-1))&&(this.a_Q(h,o),i)?h:(n&o)===o&&(h=this.aQk(s+0,e+1))&&(this.a_Q(h,a),i)?h:(n&r)===r&&(h=this.aQk(s-1,e+0))&&(this.a_Q(h,l),i)?h:(n&l)===l&&(h=this.aQk(s+1,e+0))&&(this.a_Q(h,r),i)?h:!!h},dwq:function(){this.aJI=0,this.aBW=0,this.aue=[],this.dLE.push(this.aue),this.a3D++},dCU:function(){},dDY:function(){},dHu:function(){this.dLE=[],this.diN=0,this.a3D=0,this.dwq(),this.dCU(),this.a8v(this.a9v)},d5g:function(){for(this.dHu();this.dMa()&&(this.diN++,this.dMs()!==!0););this.dFQ()},d2_:function(t,i){t=t||0;var s=this;s.dHu();var e=setInterval(function(){if(s.dMa()){if(s.diN++,i&&i(),s.dMs()!==!0)return}else i&&i();clearInterval(e),s.dFQ()},t)},dFQ:function(){console.log("Step Count : "+this.diN),this.dDY(),this.aBW=0,this.aue=null},dMs:function(){},dMa:function(){var t=this.do4();if(t){this.dwq(),this.dKv(),this.aOt=null;var i=this.dJs();return i?(this.a8v(i,this.aOt),!0):(this.aue.length<1&&(this.dLE.pop(),this.a3D--),!1)}var s=this.dWE();return this.a8v(s),!0},d$U:function(t,i,s,e,n){for(var h=this.afo,a=t+s,o=i+e,r=i;r<o;r++){var l=h[r];if(l)for(var u=t;u<a;u++){var c=l[u];if(c){for(var f in n)c[f]=n[f];c.aEM=!0}}}},dbs:function(t,i,s,e,n){n=n||1;for(var h=this.afo,a=t+s,o=i+e,r=Maze.aLf.N,l=Maze.aLf.S,u=Maze.aLf.W,c=Maze.aLf.E,f=i;f<o;f++){var d=h[f];if(d){var g=0;g=f==i?l:f+1==o?r:l|r;for(var m=t;m<a;m++){var p=d[m];if(p){var v=0;v=m==t?c:m+1==a?u:c|u,p.value|=v|g,p.dWv=n,p.dWJ=!0,p.block=!1}}}}},dUA:function(t,i,s,e,n){n=n||1;for(var h,a,o=this.afo,r=t+s,l=i+e,u=-1,c=null,f=-1,d=Maze.aLf.N,g=Maze.aLf.S,m=Maze.aLf.W,p=Maze.aLf.E,v=i;v<l;v++)if(h=o[v]){c=h,f=v;var w,b=!1;u<0?(b=!0,u=v,a=o[v-1],w=g):w=d|g;for(var C,y=-1,I=t;I<r;I++)if(C=h[I]){var T,B=!1;y<0?(B=!0,y=I,T=p):T=p|m;var x=C.value;if(C.value=T|w,C.dWv=n,C.dWJ=!0,C.block=!1,B){var S=h[I-1];S&&S.dWv===n?(S.value|=p,C.value|=m):S&&(C.dIz&&(x&m)===m?C.value|=m:S.value&=~p)}if(b&&a){var U=a[I];U&&U.dWv===n?(U.value|=g,C.value|=d):U&&(C.dIz&&(x&d)===d?C.value|=d:U.value&=~g)}}if(C){var E=h[C.x+1];E&&E.dWv===n?E.value|=m:C.dIz&&(x&p)===p?C.value|=p:(C.value&=~p,E&&(E.value&=~m))}}if(c)for(var N=o[f+1],I=t;I<r;I++){var C=c[I];if(C&&N){var A=N[C.x];A&&A.dWv===n?A.value|=d:C.dIz&&(x&g)===g?C.value|=g:(C.value&=~g,A&&(A.value&=~d))}}},dP4:function(t,i,s,e){this.d$U(t,i,s,e,{value:Maze.aLf.BLOCK,dWJ:!1,block:!0})},dNa:function(t){for(var i=this.afo,s=0;s<this.rows;s++){var e=i[s];if(e)for(var n=0;n<this.cols;n++){var h=e[n];if(h&&h.value===t)return h}}return null},dkl:function(t,i){return(t.value&i)!==i},d1Y:function(t,i){if((t.value&i)===i)return!1;var s=t.x+Maze.aLf.dRJ[i],e=t.y+Maze.aLf.doL[i];return s>=0&&e>=0&&s<this.cols&&e<this.rows},dBD:function(t,i){return(t.value&i)===i},d1B:function(t){var i=[];return this.dkl(t,Maze.aLf.N)&&i.push(Maze.aLf.N),this.dkl(t,Maze.aLf.E)&&i.push(Maze.aLf.E),this.dkl(t,Maze.aLf.S)&&i.push(Maze.aLf.S),this.dkl(t,Maze.aLf.W)&&i.push(Maze.aLf.W),i},d0T:function(t){var i=[];return t.y>0&&this.dkl(t,Maze.aLf.N)&&i.push(Maze.aLf.N),t.x<this.cols-1&&this.dkl(t,Maze.aLf.E)&&i.push(Maze.aLf.E),t.y<this.rows-1&&this.dkl(t,Maze.aLf.S)&&i.push(Maze.aLf.S),t.x>0&&this.dkl(t,Maze.aLf.W)&&i.push(Maze.aLf.W),i},dDe:function(t){var i=[];return this.dBD(t,Maze.aLf.N)&&i.push(Maze.aLf.N),this.dBD(t,Maze.aLf.E)&&i.push(Maze.aLf.E),this.dBD(t,Maze.aLf.S)&&i.push(Maze.aLf.S),this.dBD(t,Maze.aLf.W)&&i.push(Maze.aLf.W),i},dSR:function(t,i,s){return t&&t.value===Maze.aLf.NONE},dlX:function(t){return this.agD(t,!0)},agD:function(t,i){var s,e,n={},h=t.x,a=t.y,o=!1;return i=i||!1,s=Maze.aLf.N,e=a>0?this.afo[a-1][h]:null,(i||this.dSR(e,t,s))&&(n[s]=e)&&(o=!0),s=Maze.aLf.E,e=this.afo[a][h+1],(i||this.dSR(e,t,s))&&(n[s]=e)&&(o=!0),s=Maze.aLf.S,e=a<this.rows-1?this.afo[a+1][h]:null,(i||this.dSR(e,t,s))&&(n[s]=e)&&(o=!0),s=Maze.aLf.W,e=this.afo[a][h-1],(i||this.dSR(e,t,s))&&(n[s]=e)&&(o=!0),o?n:null},dyL:function(){var t=this.akV.length-1;return t},dhA:function(){return!this.aOt},do4:function(){return this.dhA()},dK3:function(){return this.dgN[this.Je(0,this.dgN.length-1)]},dWE:function(){this.dgN=this.aOt?Object.keys(this.aOt):[];var t=this.dK3();return this.moveTo(t),this.aOt[this.as_]},dKv:function(){},dJs:function(){return this.d_t()},d_t:function(){for(var t=this.akV.length;t>0;){var i=this.dyL(),s=this.akV[i],e=this.agD(s);if(e)return this.aOt=e,s;this.akV.splice(i,1),t--}return!1},random:function(){return Math.random()},Je:function(t,i){return(i-t+1)*this.random()+t>>0},drT:function(t){var i=[],s=[],e=[],n=this.afo,h=2*this.rows+1,a=2*this.cols+1,o=0,r=1;t&&(o=1,r=0);for(var l=function(t,n,h,a){var o={value:h,sC:t,sH:n,dL2:a||null};i[n][t]=o,h===r?s.push(o):e.push(o)},u=0;u<n.length;u++){var c=n[u];i.push([]),i.push([]);for(var f=2*u,d=0;d<c.length;d++){var g=2*d,m=c[d],p=(m.value&Maze.aLf.W)!==Maze.aLf.W,v=(m.value&Maze.aLf.N)!==Maze.aLf.N;p&&v?(l(g,f,r,m),l(g+1,f,r,m),l(g,f+1,r,m),l(g+1,f+1,o,m)):p?(l(g,f,r,m),l(g+1,f,o,m),l(g,f+1,r,m),l(g+1,f+1,o,m)):v?(l(g,f,r,m),l(g+1,f,r,m),l(g,f+1,o,m),l(g+1,f+1,o,m)):(i[f-1]&&i[f-1][g].value===r&&i[f]&&i[f][g-1].value===r?l(g,f,r,m):l(g,f,o,m),l(g+1,f,o,m),l(g,f+1,o,m),l(g+1,f+1,o,m))}l(2*d,f,r,null),l(2*d,f+1,r,null)}var c=[];i.push(c);for(var w=0;w<a;w++)l(w,h-1,r,null);return[i,e,s]}},Maze.aLf={NONE:0,N:1,E:2,S:4,W:8,ALL:15,BLOCK:-1,dVo:[1,2,4,8],dgK:{1:4,2:8,4:1,8:2},dRJ:{1:0,2:1,4:0,8:-1},doL:{1:-1,2:0,4:1,8:0},dYL:{"0,-1":1,"1,0":2,"0,1":4,"-1,0":8},dD6:{1:[0,-1],2:[1,0],4:[0,1],8:[-1,0]}};var MovePath=function(t){for(var i in t)this[i]=t[i]};MovePath.prototype={constructor:MovePath,d5R:null,d6h:0,round:!1,loop:!1,closed:!1,reverse:!1,duP:null,init:function(){},length:function(){return this.d5R?this.d5R.length:0},daw:function(t){return this.d5R[t]},dHd:function(t){return{x:Math.round(t.x),y:Math.round(t.y),z:Math.round(t.z),stop:t.stop||0,dls:t.dls||0}},d39:function(t,i,s){i=i||[];var e=t.length,n=this.dHd(t[0]),h=i[i.length-1];h&&(h._next=n);var a=n;a.u5=i.length,i.push(a);for(var o=1;o<e;o++){var r=this.dHd(t[o]);this.dnK(a,r),a=r,a.u5=i.length,i.push(a)}if(this.closed)this.loop||(n=this.dHd(n),n.u5=i.length,i.push(n)),this.dnK(a,n);else{var a=i[i.length-2];a&&(a.b_y=a.b_y,a.cos=a.cos,a.sin=a.sin,a.dpC=1,a.dbn=0,a.Bc=0,a.BB=0,a.dzu=0)}return i},dG6:function(t){this.dw2=t;var i=this.duP||[];t.forEach(function(t,s){t.stop=i[s]||0}),this.d5R=[];var s=this.d39(t,this.d5R,this.reverse);if(this.size=this.dHv=s.length,this.dd6=s[0],this.d5E=s[this.dHv-1],this.round){this.d5E.stop=0,t.reverse(),this.d39(t,this.d5R,!this.reverse),t.reverse(),this.size*=2;var e=this.d5R[this.size-1];e.stop=0,this.loop&&(e._next=this.dd6)}else this.loop&&(this.d5E._next=this.dd6)},dnK:function(t,i){var s=i.x-t.x,e=i.y-t.y,n=i.z-t.z,h=Math.atan2(e,s);if(t.b_y=h,t.cos=Math.cos(h),t.sin=Math.sin(h),n){var a=Math.sqrt(s*s+e*e+n*n);
t.dbn=n/a,t.dpC=Math.sqrt(1-t.dbn*t.dbn)}else t.dpC=1,t.dbn=0;t.Bc=s,t.BB=e,t.dzu=n,t._next=i},dwA:function(t,i){i=i||0===i?i:t.dhZ,t.dhZ=i;var s=this.d5R[i];t.d7R=s.u5,t.duP?t.d4M=t.duP[t.d7R]||0:t.d4M=s.stop,t.dnf=s.x,t.HWu=s.y,t.HQB=s.z,t.x=s.x,t.y=s.y,t.z=s.z,t.Bc=t.BB=t.dzu=0,t.B1=t.BW=t.HZ4=0,t.HEv=!1,t.path=this,t.BX=t.BX||0===t.BX?t.BX:t.Hjl||0,t.HqJ||0===this.HqJ||(t.HqJ=t.BX||0),t.HFx||0===this.HFx||(t.HFx=t.BX||0)},Hs0:function(t){t.HiY=t.B1,t.HEy=t.BW,t.H3L=t.HZ4,t.HMQ=!0},HC5:function(t){t.B1=t.HiY,t.BW=t.HEy,t.HZ4=t.H3L,t.HMQ=!1},update:function(t,i){if(t.H_i)return t.HMQ||this.Hs0(t),!0;if(t.HMQ&&this.HC5(t),!t.HEv){var s=this.d5R[t.d7R||0];return this.HeB(s,t),t.HEv=!0,!0}var s=this.d5R[t.d7R];if(t.HBM){if(t.d4M-=i,t.d4M>0)return!0;t.HBM=!1,t.d4M=0,this.Hdw(t,s)}if(s.dls){for(var e=s.dls;e>0;){if(e--,!s._next)return!1;s=s._next}return void this.HeB(s,t)}if(s=s._next,!s)return!1;var n=s.x-t.x,h=s.y-t.y,a=s.z-t.z;t.Bc=t.B1*i,t.BB=t.BW*i,t.dzu=t.HZ4*i;var o=Math.abs(n);(o<1e-5||Math.abs(t.Bc)-o>1e-5||n*t.Bc<0)&&(t.B1=0,t.Bc=0,t.x=s.x);var r=Math.abs(h);(r<1e-5||Math.abs(t.BB)-r>1e-5||h*t.BB<0)&&(t.BW=0,t.BB=0,t.y=s.y);var l=Math.abs(a);if((l<1e-5||Math.abs(t.dzu)-l>1e-5||a*t.dzu<0)&&(t.HZ4=0,t.dzu=0,t.z=s.z),t.x==s.x&&t.y==s.y&&t.z==s.z){if(t.B1=t.BW=t.HZ4=0,t.d7R=s.u5,t.duP?t.d4M=t.duP[t.d7R]||0:t.d4M=s.stop,!s.action){var u=this.HP$(t);return u||this.Fq(t),u}t.actionPoint=s}return!0},Fq:function(t){},HeB:function(t,i){i.d7R=t.u5,i.x=t.x,i.y=t.y,i.z=t.z,i.Bc=0,i.BB=0,i.dzu=0,i.duP?i.d4M=i.duP[i.d7R]||0:i.d4M=t.stop,t.action&&(i.actionPoint=t),0==i.d4M?this.Hdw(i,t):i.HBM=!0},Hdw:function(t,i){t.Hbr=i.u5>=this.dHv-1&&i.u5<this.size-1;var s;s=t.Hbr?t.HqJ:t.HFx,t.cos=i.cos,t.sin=i.sin,t.Hw5=i.b_y,t.actionPoint=null,t.HZ4=s*i.dbn;var e=s*i.dpC;t.B1=e*i.cos,t.BW=e*i.sin},HBW:function(t){var i=this.d5R[t.d7R]._next;i?t.d7R=this.size-1-i.u5:t.d7R=0,i=this.d5R[t.d7R],t.Bc=0,t.BB=0,t.dzu=0,0==t.d4M?this.Hdw(t,i):t.HBM=!0},HP$:function(t){var i=this.d5R[t.d7R],s=i._next;return!!s&&(0==t.d4M?this.Hdw(t,i):t.HBM=!0,!0)}};var Path=GT.Class.create({LE:MovePath,Hvt:!0,BX:.015,init:function(){var t=[];if("string"==typeof this.duP){var i=this.duP.split(",");this.duP=[];for(var s=0;s<i.length;s++)this.duP.push(Number(i[s]||0))}var e=this.d5R;if(this.ellipse){this.closed=!0,this.loop=this.loop!==!0&&this.loop!==!1||this.loop,this.round=!1;var n=this.ellipse.x,h=this.ellipse.y,a=this.ellipse.r,o=this.HyR||12,r=this.start||0,l=this.end||0===this.end?this.end:(r+360)%361;l<r&&(this.Hvt=!1,l+=r,r=l-r,l-=r);for(var u=l-r,c=u/o,f=Math.PI/180,d=r;d<=l;d+=c){var g=d*f,m=n+a*Math.cos(g),p=h+a*Math.sin(g);t.push({x:m,y:p,z:0})}this.Hvt===!1&&t.reverse()}else if(this.Huk||e&&this.closed){this.closed=!0,this.loop=!this.loop&&this.loop!==!1||this.loop,this.round=!1;var v=this.Huk||e,r=this.start||0,w=v.length;v.forEach(function(i,s){var e=(s+r)%w;i=v[e],t.push({x:i[0],y:i[1],z:i[2]||0,dls:i[3]||0})}),this.Hvt===!1&&t.reverse()}else{this.closed=!1,this.loop=this.loop!==!0&&this.loop!==!1||this.loop,this.round=this.round!==!0&&this.round!==!1||this.round;var v=this.Hm_||e;v.forEach(function(i){t.push({x:i[0],y:i[1],z:i[2]||0,dls:i[3]||0})})}this.dG6(t)},binding:function(t){this.HgN=[];var i=this.Hh7||this.name;if(t){i=i.split(",");var s=this;i.forEach(function(i){i=i.trim();var e=t[i];e&&(s.HgN.push(e),s.dwA(e))})}},Hp1:function(t){t.d7R=t.dhZ||0,this.dwA(t,t.d7R)},HsQ:function(t,i){return t.gj=t.x,t.ge=t.y,!(!this.disabled&&!t.H_i)||(this.update(t,i)===!1?(t.Bc=t.B1=0,t.BB=t.BW=0,t.dzu=t.HZ4=0,!1):(t.x+=t.Bc,t.y+=t.BB,t.z+=t.dzu,!0))},render:function(t){t.strokeStyle=this.color||"#ff0000",t.lineWidth=2,t.beginPath();var i=this.d5R;if(i){t.moveTo(i[0].x,i[0].y);if(i.forEach(function(i,s){t.lineTo(i.x,i.y),t.fillStyle="blue",t.fillRect(i.x-3,i.y-3,6,6)}),this.closed){var s=i[0];t.lineTo(s.x,s.y),t.fillStyle="blue",t.fillRect(s.x-3,s.y-3,6,6)}t.stroke(),t.closePath()}}}),GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.Ek||this.init()},s={Ek:!1,id:null,HSf:null,Hfn:null,HAC:null,init:function(){this.reset(),this.H8d()},reset:function(){this.HAC=null,this.Hfn=[],this.HSf={}},H8d:function(){var t=[],i=this;t.forEach(function(t){i.HOa(t)})},HOa:function(i){var s={},e={};i=[].concat(i),i.forEach(function(t){if(t.HSF){var i={id:t.HSF,type:t.HJz,H$q:t.Hdc,Haa:t.HzT,time:t.HzA};s[i.id]=i}if(t.HFh){var n={id:t.HFh,type:t.HSG,position:t.HwZ,time:t.HTB,delay:t.HZD,text:t.HcD,CZM:t.HCp,HXq:t.Hf4};e[n.id]=n}});var n={HKh:i.HKh,VJx:i.VJx,HqI:e,H$t:s},h=new t.Hdr(n);return this.Hcu(h),h},HB$:function(){return!!(this.BG&&this.HAC&&this.HAC.VJx)},Hug:function(t,i){return!(this.BG&&this.HAC&&this.HAC.VJx)||this.HAC.Hm6(t,i)},Hcu:function(t){t.u5=this.Hfn.length,this.Hfn.push(t),this.HSf[t.id]=t},Hfg:function(){return this.Hfn[0]},dMa:function(){var t,i=this.HAC;return i?(i.end(),t=i.H8A(),t||0===t?"string"==typeof t?t=this.HSf[t]:"number"==typeof t&&(t=this.Hfn[t]):t=this.Hfn[i.u5+1]):t=this.HAC=this.Hfg(),this.HAC=t,t&&t.start(),t},update:function(t,i){if(!this.paused&&this.BG){var s=this.HAC;s||(s=this.HAC=this.Hfg()),s&&(s.update(t,i),s.U5()&&(this.dMa(),this.HAC||this.end(s)))}},start:function(){this.paused=!1,this.BG=!0,this.HAC=this.Hfg()},pause:function(){this.paused=!0},resume:function(){this.paused=!1},end:function(t){this.BG=!1,this.HAC=null,this.Fq()},stop:function(){this.HAC&&this.HAC.end(),this.BG=!1,this.HAC=null},Fq:function(){},getSize:function(){return this.Hfn.length()},HBf:function(){return this.HAC?this.HAC.u5:-1},HHj:function(){return this.HAC?this.HAC.id:null}};for(var e in s)i.prototype[e]=s[e];t.HWM=i}(GT);var GT=GT||{};!function(t){var i=function(t){for(var i in t)this[i]=t[i];this.Ek||this.init()},s={Ek:!1,id:null,AAb:null,HKh:null,VJx:!0,BG:!1,UR:!1,HqI:null,H$t:null,init:function(){this.reset()},reset:function(){this.BG=!1,this.UR=!1,this.AMN(),this.APz()},AzC:function(){},AEE:function(){},ADW:function(){},A7b:function(){},getElementById:function(t){},ACZ:function(t){var i=this.getElementById(t)||{};return{x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}},AMN:function(){for(var t in this.HqI){var i=this.HqI[t];Array.isArray(i.position)&&(i.position={x:i.position[0],y:i.position[1]})}},APz:function(){for(var t in this.H$t){var i=this.H$t[t];Array.isArray(i.Haa)&&(i.Haa={x:i.Haa[0],y:i.Haa[1],width:i.Haa[2],height:i.Haa[3]})}},UG8:function(t,i){if(this.BG)for(var s in this.H$t){var e=this.H$t[s];if("tap"==e.type){var n=e.AZr||s,h=e.Haa||this.ACZ(n);this.ACs(t,i,h)&&(e.AO7=!0)}}},AgJ:function(t,i){for(var s in this.H$t){var e=this.H$t[s];"time"==e.type&&(e.time<=0&&(e.AO7=!0),e.time-=t)}},ANv:function(t,i){for(var s in this.H$t){var e=this.H$t[s];if("play"==e.type){var n=this.getElementById(s);this.Awq(n)&&(e.AO7=!0)}}},A$0:function(t,i){var s=!1,e=!0;for(var n in this.H$t){s=!0;var h=this.H$t[n];if(!h.AO7){e=!1;break}}s&&e&&(this.UR=!0)},start:function(){this.BG=!0,this.UR=!1,this.AzC(),this.AEE(),this.s()},s:function(){},update:function(t,i){this.AgJ(t,i),this.ANv(t,i),this.A$0(t,i)},U5:function(){return this.UR},end:function(){this.BG=!1,this.ADW(),this.A7b(),this.Fq()},Fq:function(){},H8A:function(){return this.AAb},ACs:function(t,i,s){return s.x<t&&s.y<i&&t<s.x+s.width&&i<s.x+s.height},Hm6:function(t,i){for(var s in this.H$t){var e=this.H$t[s];if("tap"==e.type||e.Haa){var n=e.AZr||s,h=e.Haa||this.ACZ(n);if(this.ACs(t,i,h))return!0}}return!1}};for(var e in s)i.prototype[e]=s[e];t.Hdr=i}(GT);var SimpleButton=function(t){for(var i in t)this[i]=t[i]};!function(){var t={constructor:SimpleButton,x:0,y:0,width:120,height:70,alpha:1,backgroundColor:null,color:null,fontSize:14,fontName:"Arial",text:null,tx:0,ty:0,img:null,sx:null,sy:null,sw:null,sh:null,Bc:null,BB:null,Ex:null,EG:null,init:function(){this.img&&(this.sx=this.sx||0,this.sy=this.sy||0,this.sw=this.sw||this.img.width,this.sh=this.sh||this.img.height,null===this.Bc&&(this.Bc=0),null===this.BB&&(this.BB=0),null===this.Ex&&(this.Ex=this.sw),null===this.EG&&(this.EG=this.sh),this.width=this.width||this.sw,this.height=this.height||this.sh),this.text&&(this.A7p=this.width/2,this.AXJ=(this.height-this.fontSize>>1)+this.fontSize)},ICT:function(t,i){return this.x<t&&this.y<i&&t<this.x+this.width&&i<this.y+this.height},W6:function(t,i,s){},Wf:function(t,i,s){},UG8:function(t,i,s){},update:function(t,i){},render:function(t,i,s){var e=t.globalAlpha,n=t.fillStyle;t.globalAlpha=this.alpha,this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fillRect(this.x,this.y,this.width,this.height)),this.img&&t.drawImage(this.img,this.sx,this.sy,this.sw,this.sh,this.x+this.Bc,this.y+this.BB,this.Ex,this.EG),this.text&&(t.font=this.fontSize+"px "+this.fontName,t.textAlign="center",t.fillStyle=this.color||"black",t.fillText(this.text,this.x+this.A7p+this.tx,this.y+this.AXJ+this.ty)),t.fillStyle=n,t.globalAlpha=e}};for(var i in t)SimpleButton.prototype[i]=t[i];"undefined"!=typeof module&&(module.exports=SimpleButton)}();var DefaultGame=GT.Class.create({LE:GT.Game,FPS:45,width:600,height:400,LZ:"",u:!1,APU:null,UXg:null,A9r:!1,Amp:!0,AN8:"#060606",A9L:!0,AH4:!0,ARF:!1,qN:null,ADs:!1,orientation:0,Iw:!1,Qx:function(t){this.AJx(),this.AR2(this.Uw,this.UD),this.AXG=new GT.IW3,this.LZ=t,this.ABT(),this.initEvent(),this.Az0(),this.Amp&&this.load()},log:function(t){console.log.apply(console,t)},AJx:function(){this.A$4=new GT.o_({width:this.width,height:this.height,qS:this.An0||"center",qj:this.A7w||"center",qN:null===this.qN?GT.o_.PL:this.qN,e5:this.IT||0,ei:this.Il||1/0})},load:function(){var t=new LoadingScene(this.loadingOptions);t.init(this),this.kr(t)},QV:function(){this.canvas=document.getElementById("canvas"),this.ALk=Utils.Hd(this.canvas),this.context=this.canvas.getContext("2d"),this.renderer=this.context},Asl:function(){setTimeout(function(){window.scrollX=0,window.scrollY=0},10)},A$9:function(){var t=Config.Uw||window.innerWidth,i=Config.UD||window.innerHeight;t=Math.min(t,Config.maxWidth),i=Math.min(i,Config.maxHeight),this.AR2(t,i)},AR2:function(t,i){this.Uw=t||window.innerWidth,this.UD=i||window.innerHeight,this.resize()},e9:function(t,i){this.width=t,this.height=i,this.resize()},resize:function(){this.AEX=Math.max(this.width,this.height),this.A9k=Math.min(this.width,this.height),90==window.orientation||window.orientation==-90?this.AJN=!0:this.AJN=!1,this.A$4||this.AJx(),this.A$4.e9(this.width,this.height),this.A$4.e3(this.Uw,this.UD),this.A$4.update();var t=90==this.orientation||this.orientation==-90;this.A$4.ot(this.canvas,t,this.Iw),this.j8=this.A$4.j8,this.jM=this.A$4.jM,this.canvas.parentNode&&"DIV"==this.canvas.parentNode.tagName&&(this.canvas.parentNode.style.width=this.canvas.style.width,this.canvas.parentNode.style.height=this.canvas.style.height),this.ALk=Utils.Hd(this.canvas),this.Z4=this.A$4.Z4,this.oX=this.A$4.oX,this.offsetX=this.A$4.offsetX*this.scale,this.qN==GT.o_.jt||this.qN==GT.o_.P5,this.offsetY=this.A$4.offsetY*this.scale,this.qN==GT.o_.Pf||this.qN==GT.o_.P5,this.UXg=1/this.A$4.scale,this.kJ&&(this.kJ.width=this.width,this.kJ.height=this.height,this.kJ.resize&&this.kJ.resize()),this.AOc(),this.onResize()},ABT:function(){},initEvent:function(){var t=this;t.APU=t.APU||{},window.addEventListener("keydown",function(i){t.APU[i.keyCode]=!0},!0),window.addEventListener("keyup",function(i){t.APU[i.keyCode]=!1},!0),window.addEventListener("pagehide",function(i){console.log("pagehide"),t.pageHidden=!0},!0),window.addEventListener("pageshow",function(i){console.log("pageshow"),t.pageHidden=!1},!0);var i,s;"undefined"!=typeof document.hidden?(i="hidden",s="visibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",s="webkitvisibilitychange"),document.addEventListener(s,function(s){document[i]?(t.pageHidden=!0,t.AFM()):(t.pageHidden=!1,t.QH&&(t.QH.now=t.QH.last=Date.now()),t.AYX=!0,t.AMz())},!1)},VlI:function(){},Az0:function(){},Ac8:function(){},AQP:function(){},s:function(){},AOc:function(){},onResize:function(){},Aqe:function(){},AFM:function(){console.log("============ Page Hidden ============"),this.kJ&&this.kJ.AFM&&this.kJ.AFM(),this.V9(!0),this.pause()},AMz:function(){console.log("============ Page Visible ============"),this.resume(),controller.reset(),TouchInfo.reset(),this.V9(!1),this.kJ&&this.kJ.AMz&&this.kJ.AMz()},AJZ:function(t){t&&(t.UXg=this.UXg||1,t.offsetX=this.offsetX||0,t.offsetY=this.offsetY||0,t.offsetLeft=this.ALk[0],t.offsetTop=this.ALk[1],t.orientation=this.orientation||0,this.canvas&&(t.j8=this.canvas.width,t.jM=this.canvas.height))},kf:function(t){TouchInfo.reset()},z0:function(t,i){if(this.ADs)return!1;var s=TouchInfo.AWJ,e=TouchInfo.Ab0,n=TouchInfo.AZm,h=TouchInfo.A9R,a=TouchInfo.ATt;if(!this.ARF)if(this.AR0){if(s){var o=i-s.time;o<400&&(this.AR0.touchStart(s.x,s.y,s.id,i),TouchInfo.AZm=null)}if(n){var o=i-n.time;o<400&&(this.AR0.tap(n.x,n.y,n.id,i),TouchInfo.AZm=null)}}else{var r=this.kJ;if(r){if(r.Az3&&s){var l=!this.Uj&&r.Vy1&&r.Vy1.V3Y("touchStart",s.x,s.y,s.id);l||r.Az3(s.x,s.y,s.id,i),TouchInfo.AWJ=null}if(r.Ajo&&a){var l=!this.Uj&&r.Vy1&&r.Vy1.V3Y("swipe",a.x,a.y,a.AM6,a.Afa,a.sx,a.sy,a.id);l&&l!=r.Vy1.modalFlag||r.Ajo(a.x,a.y,a.AM6,a.Afa,a.sx,a.sy,a.id,i),TouchInfo.ATt=null}if(r.A2d&&h){var l=!this.Uj&&r.Vy1&&r.Vy1.V3Y("pan",h.x,h.y,h.Bc,h.BB,h.sx,h.sy,h.id);l||r.A2d(h.x,h.y,h.Bc,h.BB,h.sx,h.sy,h.id,i),TouchInfo.A9R.Bc=0,TouchInfo.A9R.BB=0,TouchInfo.A9R=null}if(r.AgV&&e){var o=i-e.time;if(o<400){var l=!this.Uj&&r.Vy1&&r.Vy1.V3Y("touchEnd",e.x,e.y,e.id);l&&l!=r.Vy1.modalFlag||r.AgV(e.x,e.y,e.id,i),TouchInfo.Ab0=null}}if(r.AGW&&n){var o=i-n.time;if(o<400){var l=!this.Uj&&r.Vy1&&r.Vy1.V3Y("tap",n.x,n.y,n.id);l?game.AR9&&game.AR9(l,n.x,n.y,n.id,i):r.AGW(n.x,n.y,n.id,i),TouchInfo.AZm=null}}r.z0&&r.z0(t,i)}}},update:function(t,i){this.pageHidden||this.ADs||(t=Math.min(t,100),this.AXG.update(t,i),TWEEN.update(),this.kJ&&this.kJ.update(t,i),this.A0R(t,i))},A0R:function(t,i){if(this.A8l-=t,!(this.A8l>0)){this.A8l=300;var s=function(t){t.img=n};for(var e in Utils.AQ){var n=ResourcePool.get(e);if(n){var h=Utils.AQ[e];h.forEach(s),delete Utils.AQ[e]}}}},Aae:function(t){this.orientation==-90?(t.rotate(-Math.PI/2),t.translate(-t.canvas.height,0)):90==this.orientation?(t.rotate(Math.PI/2),t.translate(0,-t.canvas.width)):180==this.orientation&&(t.rotate(Math.PI),t.translate(-t.canvas.width,-t.canvas.height))},render:function(t,i){if(!this.pageHidden){var s=this.context;if(this.ADs)return s.fillStyle="#222222",s.fillRect(0,0,this.j8,this.jM),s.fillStyle="#f3f3f3",s.textAlign="center",s.font="70px Arial",void s.fillText("",this.j8/2,this.jM/2-50);t=Math.min(t,100),this.NcS(s,t,i);var e=!1;this.kJ&&((this.offsetX||this.offsetY)&&(e=!0,s.translate(this.offsetX,this.offsetY)),this.kJ.render(s,t,i),this.debug,e&&s.translate(-this.offsetX,-this.offsetY),this.A9L&&this.Z4>0&&this.Ats(s),this.AH4&&this.oX>0&&this.Auw(s)),this.Nei(s,t,i)}},Ats:function(t){(this.offsetX>0||this.Z4>0)&&(this.AN8?(t.fillStyle=this.AN8,t.fillRect(0,this.offsetY-1,this.offsetX,this.jM-2*this.offsetY+2),t.fillRect(this.offsetX+this.width,this.offsetY-1,this.Z4-this.offsetX+2,this.jM-2*this.offsetY+2)):(t.clearRect(0,this.offsetY-1,this.offsetX,this.jM-2*this.offsetY+2),t.clearRect(this.offsetX+this.width,this.offsetY-1,this.Z4-this.offsetX+2,this.jM-2*this.offsetY+2)))},Auw:function(t){(this.offsetY>0||this.oX>0)&&(this.AN8?(t.fillStyle=this.AN8,t.fillRect(-1,-2,this.j8+2,this.offsetY+2),t.fillRect(-1,this.offsetY+this.height,this.j8+2,this.oX-this.offsetY+2)):(t.clearRect(-1,-2,this.j8+2,this.offsetY+2),t.clearRect(-1,this.offsetY+this.height,this.j8+2,this.oX-this.offsetY+2)))},NcS:function(t,i,s){},Nei:function(t,i,s){},AEe:function(t,i){try{GT.US&&!GT.US.muted&&GT.US.play(t,i)}catch(t){console.log(t)}},AFx:function(t,i,s){if(GT.US&&!GT.US.muted){var e=GT.US.get(t),n=e.getVolume();game.Apa(e,0,n,i,s),e.play()}},Ajn:function(t,i,s){if(GT.US&&!GT.US.muted){var e=GT.US.get(t),n=e.getVolume();game.Apa(e,n,0,i,s),e.play()}},Apa:function(t,i,s,e,n){var h=i,a=(s-i)/(e/game.UI>>0);t.setVolume(h),n=n||game.AXG,n.Mq(function(i,e,o){h=Math.max(0,Math.min(1,h+a)),t.setVolume(h),(a>0&&h>=s||a<0&&h<=s)&&n.p1(o)},game.UI,!0)},A0z:function(t,i){try{GT.US&&!GT.US.muted&&GT.US.stop(t,i)}catch(t){console.log(t)}},r7:function(t,i){GT.US&&!GT.US.muted&&GT.US.r7(t,i)},V9:function(t){0==t?this.muted||GT.US&&GT.US.rb(!1):GT.US&&GT.US.rb(t)},AZu:function(t){this.A_s=0,this.ALb=!1;var i=this;window.container&&window.container.classList.add("custom-cursor"),window.addEventListener("mousemove",function(){i.A_s=0},!0)},AFh:function(t){var i=3e3;!this.ALb&&this.A_s>i&&(window.container.classList.add("hidden-cursor"),window.container.classList.remove("custom-cursor"),this.ALb=!0),this.ALb&&0===this.A_s&&(window.container.classList.remove("hidden-cursor"),window.container.classList.add("custom-cursor"),this.ALb=!1),this.A_s+=t},AR9:function(t){},dataLogPV:function(t){},dataLogEvent:function(t,i){},dataLogPayment:function(t,i){},Aej:function(){return window.parent!=window},APV:function(){return!!window.WeixinJSBridge},ArB:function(){return this.Aej()&&!!window.AF$&&"endgame"==window.name},AEB:function(){return this.browser.weixin||!!window.WeixinJSBridge},Aj2:function(){return this.browser.weibo},A_d:function(){return this.browser.qq}}),PIXIGame=GT.Class.create({LE:DefaultGame,antialias:!1,backgroundColor:0,QV:function(){this.canvas=document.getElementById("canvas"),this.ALk=Utils.Hd(this.canvas),PIXI.utils.skipHello();var t=new PIXI.WebGLRenderer(this.canvas.width,this.canvas.height,{legacy:!1,view:this.canvas,antialias:this.antialias,backgroundColor:this.backgroundColor});this.AXX=t,this.renderer=new PIXI.RenderContext(t),this.Aay=this.renderer.root,this.AN8=this.renderer.colorHex(this.AN8)},AOc:function(){this.renderer.resize(this.j8,this.jM)},Aae:function(t){this.orientation==-90?(t.rotate(-Math.PI/2),t.translate(-t.canvas.height,0)):90==this.orientation?(t.rotate(Math.PI/2),t.translate(0,-t.canvas.width)):180==this.orientation&&(t.rotate(Math.PI),t.translate(-t.canvas.width,-t.canvas.height))},render:function(t,i){if(!this.pageHidden){var s=this.renderer;s.clear(),this.ADs,t=Math.min(t,100),this.NcS(s,t,i);var e=!1;this.kJ&&(this.Aay.scale.set(game.scale,game.scale),(this.offsetX||this.offsetY)&&(e=!0,this.Aay.scale.set(this.scale,this.scale),this.Aay.position.set(this.offsetX*this.scale,this.offsetY*this.scale),s.updateRootContainer()),this.kJ.render(s,t,i),this.debug&&s.strokeRect(0,0,this.width,this.height,s.colorRgb(255,0,0),8),e&&(this.Aay.position.set(0,0),s.updateRootContainer()),this.A9L&&this.Z4>0&&this.Ats(s),this.AH4&&this.oX>0&&this.Auw(s)),this.Nei(s,t,i)}},Ats:function(t){(this.offsetX>0||this.Z4>0)&&(this.AN8?(t.fillRect(0,this.offsetY-1,this.offsetX,this.jM-2*this.offsetY+2,this.AN8),t.fillRect(this.offsetX+this.width,this.offsetY-1,this.Z4-this.offsetX+2,this.jM-2*this.offsetY+2,this.AN8)):(t.clearRect(0,this.offsetY-1,this.offsetX,this.jM-2*this.offsetY+2),t.clearRect(this.offsetX+this.width,this.offsetY-1,this.Z4-this.offsetX+2,this.jM-2*this.offsetY+2)))},Auw:function(t){(this.offsetY>0||this.oX>0)&&(this.AN8?(t.fillRect(-1,-2,this.j8+2,this.offsetY+2,this.AN8),t.fillRect(-1,this.offsetY+this.height,this.j8+2,this.oX-this.offsetY+2,this.AN8)):(t.clearRect(-1,-2,this.j8+2,this.offsetY+2),t.clearRect(-1,this.offsetY+this.height,this.j8+2,this.oX-this.offsetY+2)))},tick:function(t,i,s){this.z0(s,i),!this.paused&&s>1&&(this.frame++,this.update(t,i),this.renderer.begin(),this.render(t,i),this.renderer.end())}}),BaseScene=GT.Class.create({LE:GT.np,Ae_:0,A$l:0,A9Z:!1,exitOnMenuPress:!1,allowsRotation:!0,A3p:function(t,i){if(!this.Vy1.cursor||this.Vy1.cursor.disabled)return!1;this.Ae_-=t,this.A$l-=t;var s=200,e=300;if(this.A$l<0){if(!this.AGz){var n=!1;!game.Uj&&this.Ae_<=0&&(n=!0,this.input.Up&&this.input.Up.b9f>800?(this.Vy1.cursor.bel(),this.Ae_=s):this.input.Down&&this.input.Down.b9f>800?(this.Vy1.cursor.bs2(),this.Ae_=s):this.input.Left&&this.input.Left.b9f>800?(this.Vy1.cursor.left(),this.Ae_=s):this.input.Right&&this.input.Right.b9f>800?(this.Vy1.cursor.right(),this.Ae_=s):n=!1),n||TouchInfo.W0||(this.input.Up&&this.input.Up.bmh?(this.Vy1.cursor.bel(),this.Ae_=s):this.input.Down&&this.input.Down.bmh?(this.Vy1.cursor.bs2(),this.Ae_=s):this.input.Left&&this.input.Left.bmh?(this.Vy1.cursor.left(),this.Ae_=s):this.input.Right&&this.input.Right.bmh&&(this.Vy1.cursor.right(),this.Ae_=s))}(this.input.BtnA&&this.input.BtnA.bwI||this.input.BtnB&&this.input.BtnB.bwI)&&(this.Vy1.cursor.tap(),this.A$l=e)}return this.AGz=!1,!0},Aq0:function(t,i,s){var e="ontouchstart"in window,n=!e||GameInput.keypad&&GameInput.keypad.bRj,h=GameInput.gamepadManager.bAy;if(!h&&!n)return!1;var a=this.Vy1.cursor;return!(!a||a.disabled)&&void a.render(t,i,s)},A4L:function(t,i){this.AMV=["Next","Prev","BtnA","BtnB","Menu","Pause","Stick","StickB","Up","Down","Left","Right","ButtonA","ButtonB","LeftButton","RightButton"];for(var s in GameInput)if(e){var e=GameInput[s];e.reset()}var n=this.input={},h={none:1};this.AMV.forEach(function(t){n[t]=h})},$Ry:function(t,i){var s=this.input;s.disabled=!1;var e,n,h,a=null,o=null,r=null,l=null;GameInput.gamepadManager&&(GameInput.gamepadManager.exitOnMenuPress=this.exitOnMenuPress,GameInput.gamepadManager.allowsRotation=this.allowsRotation,GameInput.gamepadManager.update(t,i),n=GameInput.gamepadManager.bSC("first"),h=GameInput.gamepadManager.bSC("last"),GameInput.$0Q=n,GameInput.$XV=h),GameInput.$xv=n||h;var u;for(var c in GameInput)if(e=GameInput[c]){var u=e.type;if(!("manager"==u||"touchpad"==u&&this.A9Z)){"gamepad"!=u&&e.update(t,i);var f=e.buttons,d="microGamepad"===e.bXd;d&&(e.$7z=GravityInfo.x<-3&&GravityInfo.y>-3),"keypad"==u&&this.A9Z;var g=[f.Stick,f.StickB],m=this;g.forEach(function(t,i){if(t&&!t.disabled){var s;if(s=m.A9Z?d?.6:.5:d?.075:.35,s*=t.bv2,t.bvb=s,t.b1t||d){var n=!0,h=!0;m.A9Z&&(Math.abs(t.bsq)>=Math.abs(t.bKe)?h=!1:n=!1);for(var a in t.bgj){var o=t.bgj[a],r=f[a];o.clone(r)}0==i&&(n||(f.Left.bel(),f.Right.bel()),h||(f.Up.bel(),f.Down.bel())),e.bAy=!0}}}),e.bAy&&(a=e.buttons,o=e.type,r=e.bXd,l=d)}}a=a||[];var p={none:1};this.AMV.forEach(function(t){var i=a[t];s[t]=!i||i.disabled?p:i}),s.type=o,s.profile=r,s.$gL=l},$e2:function(t,i,s,e){t[i]=s,s&&t["prev"+i]?(t["hold"+i]+=e,t["press"+i]=!1,t["release"+i]=!1):(t["hold"+i]=1,t["press"+i]=s,t["release"+i]=!s&&t["prev"+i]),t["prev"+i]=s},$NL:function(t,i,s,e,n){var h=this,a=this.AXG;i=i||0,s=s||1,e=e||0,h.$fj=h.$fj||[];var o=a.Mq(function(){if(e)for(var i=0,o=function(){t(),n&&n()},r=0;r<s;r++){var l=r<s-1?t:o,u=a.Mq(l,i);i+=e,h.$fj.push(u)}else{for(var r=0;r<s;r++)t();n&&n()}},i);return h.$fj.push(o),i+e*s},$aM:function(){this.input.disabled=!0},$kD:function(){this.A4L(),this.input.disabled=!1},$ze:function(t){this.$A_=t,this.random=Utils.Cy(t)},random:function(){return Math.random()},Je:function(t,i){return(i-t+1)*this.random()+t>>0},CG:function(t,i){i&&(t=t.slice(0));for(var s=t.length-1;s>0;s--){var e=this.random()*s>>0,n=t[s];t[s]=t[e],t[e]=n}return t},Az3:function(t,i,s,e){},AgV:function(t,i,s,e){},AGW:function(t,i,s,e){},A2d:function(t,i,s,e,n,h,a,o){},Ajo:function(t,i,s,e,n,h,a,o){if(game.Uj&&this.Vy1&&this.Vy1.cursor&&!this.Vy1.cursor.disabled){Math.abs(s)>=Math.abs(e)?e=0:s=0;var r=!1;GravityInfo.x<-3&&GravityInfo.y>-3&&(r=!0),r?(s<0?this.Vy1.cursor.bs2():s>0&&this.Vy1.cursor.bel(),e<0?this.Vy1.cursor.left():e>0&&this.Vy1.cursor.right()):(s<0?this.Vy1.cursor.left():s>0&&this.Vy1.cursor.right(),e<0?this.Vy1.cursor.bel():e>0&&this.Vy1.cursor.bs2()),this.AGz=!0}},z0:function(t,i){}}),GT=GT||{},controller,TouchInfo={UoE:2,W0:0,reset:function(){this.W0=0,this.start={},this.move={},this.end={},this.tap={},this.pan={},this.swipe={},this.AWJ=null,this.$wy=null,this.Ab0=null,this.AZm=null,this.A9R=null,this.ATt=null,this.$M3=null,this.$fq=null,this.$bv=null,this.$4h=null}};TouchInfo.reset();var initTouchController=function(){return controller=new Toucher.Uaq({Qy:function(){this.UCA=document},Uf$:!0,Ukr:0,UXg:1}),controller.init(),game&&game.AJZ&&game.AJZ(controller),controller},initTapListener=function(){var t=new Toucher.U$L({Ug6:700,UG_:40,UK9:function(t,i,s,e){return!0},start:function(t,i,s){TouchInfo.W0=Math.min(TouchInfo.W0+1,1),GT.US&&(GT.US.D6(),GT.US.rm());for(var e=Math.min(t.length,this.UoE),n=0;n<e;n++){var h=t[n],a=h.pageX,o=h.pageY;"CANVAS"==h.target.tagName&&i.preventDefault(),null!=this.W6&&this.W6(a,o,h,i,s)}},W6:function(t,i,s,e,n){if(game.$tO){var h=game.$tO.W6(e);if(h)return}TouchInfo.start[s.id]={id:s.id,x:t,y:i,time:s.startTime},null===TouchInfo.AWJ&&(TouchInfo.AWJ=TouchInfo.start[s.id]),null===TouchInfo.$M3&&(TouchInfo.$M3=s.id,TouchInfo.$fq=t,TouchInfo.$bv=i)},end:function(t,i,s){TouchInfo.W0=Math.max(TouchInfo.W0-1,0);for(var e=0,n=Math.min(t.length,this.UoE),h=0;h<n;h++){var a=t[h],o=a.UuZ,r=a.ULe;null!=this.Wf&&this.Wf(o,r,a,i,s),this.Uc0(a)&&this.UgJ(a)&&(a.index=e++,this.UG8(o,r,a,i,s))}},cancel:function(t,i,s){TouchInfo.W0=0,s.reset()},Wf:function(t,i,s,e,n){if(game.$tO){var h=game.$tO.Wf(e);if(h)return!1}var a=s.id;delete TouchInfo.start[a],delete TouchInfo.pan[a],TouchInfo.$M3===a&&(TouchInfo.$M3=null,TouchInfo.$fq=null,TouchInfo.$bv=null),TouchInfo.end[a]={id:a,x:t,y:i,time:s.endTime},null===TouchInfo.Ab0&&(TouchInfo.Ab0=TouchInfo.end[a])},UG8:function(t,i,s,e,n){if(game.$tO){var h=game.$tO.Wn(e),a=game.$tO.Wf(e);if(h||a)return!1}TouchInfo.tap[s.id]={id:s.id,x:t,y:i,time:s.endTime,duration:s.endTime-s.startTime},null===TouchInfo.AZm&&(TouchInfo.AZm=TouchInfo.tap[s.id])}});return controller.addListener(t),t},initPanListener=function(){var t=new Toucher.UXn({UoS:function(t,i,s,e){return!(i.length>1)},UK9:function(t,i,s,e){return"CANVAS"==i.target.tagName},U$c:function(t,i,s,e,n,h,a){var o=TouchInfo.pan[n.id]=TouchInfo.pan[n.id]||{id:n.id,Bc:0,BB:0};o.time=n.U34,o.x=s,o.y=e,o.sx=n.Ud7,o.sy=n.UgF,o.Bc+=t,o.BB+=i,null===TouchInfo.A9R&&(TouchInfo.A9R=TouchInfo.pan[n.id]),TouchInfo.$M3===n.id&&(TouchInfo.$fq=s,TouchInfo.$bv=e)}});return controller.addListener(t),t},initSwipeListener=function(){var t=new Toucher.Uoo({UrH:4,Uj_:900,UoE:2,UoS:function(t,i,s,e){return!(i.length>1)},UK9:function(t,i,s,e){return"CANVAS"==i.target.tagName},U0Y:function(t,i,s,e,n){TouchInfo.swipe[s.id]={id:s.id,x:s.pageX,y:s.pageY,sx:s.Ud7,sy:s.UgF,AM6:t,Afa:i,time:s.endTime,duration:s.endTime-s.startTime},null===TouchInfo.ATt&&(TouchInfo.ATt=TouchInfo.swipe[s.id])}});return controller.addListener(t),t},initPinchListener=function(){var t=new Toucher.Uqx({UrH:4,Uj_:810,UoE:2,UK9:function(t,i,s,e){return"CANVAS"==i.target.tagName},URP:function(t,i,s,e,n,h,a){n[0];TouchInfo.$4h={bb9:t,$XY:i,UDG:s,btl:e[0],bRe:e[1]}},UPZ:function(){TouchInfo.$4h=null}});return controller.addListener(t),t},TouchStickConfig={name:"Stick",b78:!1,bwm:!0,bv2:100,bYX:20,b8w:0,b6D:60,bTZ:0,left:60,bottom:60,bgColor:"rgba(0,0,0,0.5)",bR$:"rgba(255,100,100,0.2)",bY0:"rgba(0,0,0,0.2)"},initTouchStick=function(t){t=t||{};for(var i in TouchStickConfig)i in t||(t[i]=TouchStickConfig[i]);var s=game.A$4.j8,e=game.A$4.jM,n="StickB"==t.name?s-(t.left+t.bv2):0+t.left+t.bv2,h=e-t.bottom-t.bv2,a="StickB"==t.name?[s>>1,150,s,e]:[0,150,s>>1,e],o=new Toucher.bnm({disabled:!1,bHX:a,bkk:null,x:n,y:h,bey:n,bhu:h,bYX:t.bYX,bv2:t.bv2,bwm:t.bwm,b78:t.b78,b8w:t.b8w,b6D:t.b6D,bTZ:t.bTZ,bgColor:t.bgColor,bR$:t.bR$,bY0:t.bY0});return o},TouchButtonConfig={right:null,bottom:null,width:100,height:100,color:"rgba(0,0,0,0.5)"},initTouchButton=function(t){t=t||{};for(var i in TouchButtonConfig)i in t||(t[i]=TouchButtonConfig[i]);var s=game.A$4.j8,e=game.A$4.jM,n=t.x||0;t.left||0===t.left?n=t.left+t.width/2:(t.right||0===t.right)&&(n=s-t.width/2-t.right),n+=game.A$4.ZQ;var h=t.y||0;t.top||0===t.top?h=t.top+t.height/2:(t.bottom||0===t.bottom)&&(h=e-t.height/2-t.bottom),h+=game.A$4.oT;var a=new Toucher.bfP({name:t.name,disabled:!1,x:t.x||n,y:t.y||h,width:t.width,height:t.height,color:t.color});return a},initGamepadButton=function(t){var i=new GT.GamepadButton({name:t.name,bLf:t.bLf,bHj:t.bHj});return i},initGameKeyButton=function(t){var i=new GT.bQP({name:t.name,key:t.key});return i},initGameMouseButton=function(t){var i=new GT.GameMouseButton({name:t.name,key:t.key});return i};window.addEventListener("load",function(){}),window.document.addEventListener("touchend",function(t){"INPUT"==t.target.tagName?t.stopPropagation():t.preventDefault()},!1),window.document.addEventListener("touchmove",function(t){t.preventDefault()},!1),window.addEventListener("resize",function(){console.log("resize"),window.game&&window.game.A9r||window.game&&(game.inited?game.A$9():setTimeout(function(){game.A$9()},100))}),function(){var t;window.addEventListener("orientationchange",function(i){t&&clearTimeout(t),t=setTimeout(function(){window.$_e(i)},10)},!1),window.$_e=function(t){90==window.orientation||window.orientation==-90,setTimeout(function(){window.scrollX=0,window.scrollY=0,game&&game.Aqe&&game.Aqe()},1)}}();var KeyDown={get:function(t,i){i=i||1;var s=this[t];return s&&(this[t]+=i),s},first:function(t){var i=this[t];return 1===i}},KeyUp={get:function(t,i){i=i||1;var s=this[t];return s&&(this[t]+=i),s},first:function(t){var i=this[t];return this[t]=0,1===i}};window.addEventListener("keydown",function(t){KeyDown[t.keyCode]=1,KeyUp[t.keyCode]=0},!0),window.addEventListener("keyup",function(t){KeyDown[t.keyCode]=0,KeyUp[t.keyCode]=1},!0);var AccelerationGravityInfo={timeStamp:0,x:0,y:0,z:0},AccelerationInfo={timeStamp:0,x:0,y:0,z:0},GravityInfo={timeStamp:0,x:0,y:0,z:0},DeviceOrientationInfo={timeStamp:0,alpha:0,beta:0,gamma:0};window.addEventListener("deviceorientation",function(t){DeviceOrientationInfo.alpha=t.alpha,DeviceOrientationInfo.beta=t.beta,DeviceOrientationInfo.gamma=t.gamma,DeviceOrientationInfo.alpha&&(DeviceOrientationInfo.alpha=DeviceOrientationInfo.alpha.toFixed(3),DeviceOrientationInfo.beta=DeviceOrientationInfo.beta.toFixed(3),DeviceOrientationInfo.gamma=DeviceOrientationInfo.gamma.toFixed(3))}),window.addEventListener("devicemotion",function(t){var i=t.timeStamp;t.accelerationIncludingGravity&&(AccelerationGravityInfo.timeStamp=i,AccelerationGravityInfo.x=t.accelerationIncludingGravity.x,AccelerationGravityInfo.y=t.accelerationIncludingGravity.y,AccelerationGravityInfo.z=t.accelerationIncludingGravity.z),t.acceleration&&(AccelerationInfo.timeStamp=i,AccelerationInfo.x=t.acceleration.x,AccelerationInfo.y=t.acceleration.y,AccelerationInfo.z=t.acceleration.z,GravityInfo.timeStamp=i,GravityInfo.x=AccelerationGravityInfo.x-AccelerationInfo.x,GravityInfo.y=AccelerationGravityInfo.y-AccelerationInfo.y,GravityInfo.z=AccelerationGravityInfo.z-AccelerationInfo.z),AccelerationGravityInfo.x&&(AccelerationGravityInfo.x=AccelerationGravityInfo.x.toFixed(3),AccelerationGravityInfo.y=AccelerationGravityInfo.y.toFixed(3),AccelerationGravityInfo.z=AccelerationGravityInfo.z.toFixed(3)),AccelerationInfo.x&&(AccelerationInfo.x=AccelerationInfo.x.toFixed(3),AccelerationInfo.y=AccelerationInfo.y.toFixed(3),AccelerationInfo.z=AccelerationInfo.z.toFixed(3)),GravityInfo.x&&(GravityInfo.x=GravityInfo.x.toFixed(3),GravityInfo.y=GravityInfo.y.toFixed(3),GravityInfo.z=GravityInfo.z.toFixed(3))}),CUI.U4.prototype.Jhb=function(t,i,s){game.AEe("click")},CUI.TextHolder.prototype.a3x=!0,CUI.TextHolder.prototype.$nA=!0,CUI.TextHolder.prototype.fontName=TEXT.font.Default,CUI.NOU.prototype.NcW="rgba(0,0,0,0.6)",CUI.JfE.prototype.NcW="rgba(0,0,0,0.6)",GT.WD.prototype.render=function(t,i,s){if(!(this.WC<=0)&&this.visible){var e=t.getAlpha();t.setAlpha(this.WC),t.fillRect(this.x,this.y,this.width,this.height,this.color),t.setAlpha(e)}},GT.sY.prototype.render=function(t,i,s){var e=this.x-this.sT+this.offsetX,n=this.y-this.s8+this.offsetY;if(this.img&&!this.cC){var h={img:this.img,sx:this.sx,sy:this.sy,sw:this.sw||this.width,sh:this.sh||this.height};this.cC=Utils.createSprite(h),this.tint&&(this.cC.tint=this.tint),this.blend&&(this.cC.blendMode=this.blend),this.cC.anchor.set(.5,.5),this.cC.width=this.width,this.cC.height=this.height}t.setAlpha(this.alpha),this.cC?t.renderAt(this.cC,e,n):(this.sO&&t.strokeRect(e,n,this.width,this.height,this.sO,this.strokeWidth),
this.fillColor&&t.fillRect(e,n,this.width,this.height,this.fillColor)),t.restoreAlpha()};var BaseEntity=GT.Class.create({ZERO:.01,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,x:0,y:0,width:10,height:10,rotation:0,init:function(t){this.kJ=t},gg:function(t,i){this.x=t,this.y=i},$Al:function(t){this.rotation=t},update:function(t,i){},render:function(t,i,s){}}),Entity=GT.Class.create({LE:BaseEntity,width:60,height:60,sT:0,s8:0,x:0,y:0,B1:0,BW:0,BH:0,BC:0,$F$:-(1/0),$B4:1/0,$74:-(1/0),$jJ:1/0,BX:null,$mw:null,$x4:null,rotation:0,sin:0,cos:1,$om:0,qG:1,e_:1,Ixh:null,mm:null,color:"red",$MF:null,img:null,Xb:null,alpha:1,init:function(t){this.kJ=t,this.Ixh=[],this.mm=this.Ixh,this.Inj()},$bV:function(t,i){var s=2*t/i,e=-s/i;return[s,e]},$mk:function(t,i){var s=t/i;return s},$va:function(t){this.$ua&&(this.path=new Path(this.$ua),"loop"in this.$ua||(this.path.loop=!0),this.path.init(t)),this.$aO(this.path)},$aO:function(t,i){this.target=null,this.path=t,this.path&&(this.dhZ=i||0,this.path.Hp1(this))},$IG:function(){var t=this.path;t&&(t.disabled=!0,this.Bc=0,this.BB=0,this.B1=0,this.BW=0)},$qj:function(t){var i=this.path;if(i&&(i.disabled||t)){var s=i.d5R[0],e=this;this.moveTo(s.x,s.y,function(){t&&i.Hp1(e),i.disabled=!1})}},gg:function(t,i){this.x=t,this.y=i,this.Inj()},Hs0:function(){this.HiY=this.B1,this.HEy=this.BW,this.HMQ=!0},HC5:function(){this.B1=this.HiY,this.BW=this.HEy,this.HMQ=!1},$dU:function(t){this.rotation+=this.$om*t,this.cos=Math.cos(this.rotation),this.sin=Math.sin(this.rotation)},m8:function(t){this.gj=this.x,this.ge=this.y,this.$tC=this.B1,this.$5z=this.BW;var i=this.B1+this.BH*t,s=this.BW+this.BC*t;this.B1=Math.max(this.$F$,Math.min(this.$B4,i)),this.BW=Math.max(this.$74,Math.min(this.$jJ,s)),this.Bc=(this.B1+i)/2*t,this.BB=(this.BW+s)/2*t},$9y:function(){this.Bc=0,this.BB=0,this.B1=0,this.BW=0,this.BH=0,this.BC=0},moveTo:function(t,i,s){var e=t-this.x,n=i-this.y;if(!e&&!n)return this.Bc=0,this.BB=0,this.B1=0,this.BW=0,this.target=null,void(s&&s(this));this.target={x:t,y:i,$tg:s};var h=Math.atan2(n,e),a=Math.cos(h),o=Math.sin(h),r=this.BX||0===this.BX?this.BX:this.Hjl||this.$mw||0;this.B1=r*a,this.BW=r*o,this.cos=a,this.sin=o,this.Hw5=h,this.actionPoint=null},$Q4:function(t,i){if(this.target&&this.$hQ()){this.B1=0,this.BW=0,this.Bc=0,this.BB=0,this.x=this.target.x,this.y=this.target.y;var s=this.target.$tg;return this.target=null,s&&s(this),!0}return!1},$hQ:function(){var t=Math.abs(this.target.x-this.x);if(t<1e-5||Math.abs(this.Bc)-t>1e-5){var i=Math.abs(this.target.y-this.y);if(i<1e-5||Math.abs(this.BB)-i>1e-5)return!0}return!1},$_S:function(t){this.BX=t,this.HFx=t,this.HqJ=t},CLAMP_LEFT:1,CLAMP_TOP:2,CLAMP_RIGHT:4,CLAMP_BOTTOM:8,$yo:function(){var t=0;return this.x<=this.minX&&(t|=this.CLAMP_LEFT,this.x=this.minX),this.y<=this.minY&&(t|=this.CLAMP_TOP,this.y=this.minY),this.x>=this.maxX&&(t|=this.CLAMP_RIGHT,this.x=this.maxX),this.y>=this.maxY&&(t|=this.CLAMP_BOTTOM,this.y=this.maxY),t},$Nf:function(){var t=0;return this.B1<=this.$F$&&(t|=this.CLAMP_LEFT,this.B1=this.$F$),this.BW<=this.$74&&(t|=this.CLAMP_TOP,this.BW=this.$74),this.B1>=this.$B4&&(t|=this.CLAMP_RIGHT,this.B1=this.$B4),this.BW>=this.$jJ&&(t|=this.CLAMP_BOTTOM,this.BW=this.$jJ),t},Inj:function(){var t=this.x-this.sT,i=this.y-this.s8;this.Ixh[0]=t,this.Ixh[1]=i,this.Ixh[2]=t+this.width,this.Ixh[3]=i+this.height,this.mm=this.Ixh},ICT:function(t,i){var s=this.Ixh;return s[0]<t&&t<s[2]&&s[1]<i&&i<s[3]},$8i:function(t){return t[0]<this.x&&t[1]<this.y&&this.x<t[2]&&this.y<t[3]},$OT:function(t,i){var s=this.Ixh;return s[0]<t&&t<s[2]&&s[1]<i&&i<s[3]},He:function(t){var i=this.Ixh;return t[0]<i[2]&&t[2]>i[0]&&t[1]<i[3]&&t[3]>i[1]},Ls:function(t){var i=this.mm,s=t.mm;return i[0]<s[2]&&i[2]>s[0]&&i[1]<s[3]&&i[3]>s[1]},$BC:function(){var t=this.kJ.map,i=this.Ixh;return t.screenX<i[2]&&t.screenY<i[3]&&t.screenX+t.$I9>i[0]&&t.screenY+t.$oB>i[1]},update:function(t,i){},render:function(t,i,s){},remove:function(){this._toRemove=!0},NpX:function(t){this.remove();for(var i in this)this[i]=void 0;this.kJ=null}});Entity.UH5=0,Entity.IRw=function(){Entity.UH5++;var t="do_"+Entity.UH5;return t},Entity.IvB=function(t,i,s){var e,n,h=t.length;if(s)for(var a=1;a<h;a++){e=t[a];for(var o=e[i],r=a;r>0&&(n=t[r-1])[i]<o;r--)t[r]=n;t[r]=e}else for(var a=1;a<h;a++){e=t[a];for(var o=e[i],r=a;r>0&&(n=t[r-1])[i]>o;r--)t[r]=n;t[r]=e}};var Trigger=GT.Class.create({LE:Entity,B1:0,BW:0,init:function(t){this.kJ=t,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj()},LF:function(t){},$p8:function(t,i){return i=i||t.mm,!!this.He(i)&&(this.LF(t),!0)},update:function(t,i){},render:function(t,i,s){}},null),StageEntity=GT.Class.create({LE:Entity,B1:0,BW:0,$Yi:"StageEntity",$5u:!0,NTM:function(t,i){this.path&&!this.path.disabled?this.kJ.KeM>1e3&&this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB)},$dU:function(t,i){this.KtV||(this.$5u&&(this.rotation+=this.$om*t),this.rotation<this.KSi?(this.rotation=this.KSi,this.$om=this.Kiv):this.rotation>this.Kt_&&(this.rotation=this.Kt_,this.$om=-this.Kiv),this.Kh$?(this.KhR=this.x+Math.cos(this.rotation)*this.Kh$,this.K76=this.y+Math.sin(this.rotation)*this.Kh$):(this.KhR=0,this.K76=0))},Ks2:function(t,i){var s=this,e=function(){s.moveTo(t[0],t[1],function(){i&&i(s)})},n=this.path;if(n&&!n.disabled){n.disabled=!0;var h=n.d5R[0];this.moveTo(h.x,h.y,function(){e()})}else e()},Ki1:function(t,i){var s=this,e=t.d5R[0];this.moveTo(e.x,e.y,function(){s.$aO(t),i&&i(s)})}},null),Character=GT.Class.create({LE:Entity,radius:10,KC6:null,KY6:0,KLT:0,KvK:0,KwK:0,mm:null,Kcn:0,KU4:0,KnS:0,KPl:0,K2m:null,KNS:0,Ktz:0,K7o:0,Kq9:0,KJ4:null,KRp:0,KRW:0,KZ8:0,Khz:0,K2M:0,thickness:1,init:function(t){GT.Usu.apply(this),this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this._a()},_a:function(){this.sin=Math.sin(this.rotation),this.cos=Math.cos(this.rotation),this.sT=this.width/2,this.s8=3*this.height/4>>0,this.KnS=this.Kcn/2,this.KPl=2*this.KU4/3>>0,this.K86=this.thickness/2,this.Ixh=[],this.Inj(),this.mm=[],this.K17(),this.K2m=[],this.KGU(),this.KC6=[],this.KNj(),this.KJ4=[],this.KzS()},Kti:function(){return this.K2m},KK_:function(){return this.mm},Inj:function(){var t=this.x-this.sT,i=this.y-this.s8;this.Ixh[0]=t,this.Ixh[1]=i,this.Ixh[2]=t+this.width,this.Ixh[3]=i+this.height,this.K8Y=this.y-this.K86,this.KgZ=this.y+this.K86,this.mm=this.Ixh},K17:function(){var t=this.x-this.KnS,i=this.y-this.KPl;this.mm[0]=t,this.mm[1]=i,this.mm[2]=t+this.Kcn,this.mm[3]=i+this.KU4},KGU:function(){var t=this.x-this.K7o,i=this.y-this.Kq9;this.K2m[0]=t,this.K2m[1]=i,this.K2m[2]=t+this.KNS,this.K2m[3]=i+this.Ktz},KNj:function(){var t=this.x-this.KvK,i=this.y-this.KwK;this.KC6[0]=t,this.KC6[1]=i,this.KC6[2]=t+this.KY6,this.KC6[3]=i+this.KLT},KzS:function(){var t,i;t=this.Kgc>0?this.x-this.KZ8:this.x+this.KZ8-this.KRp,i=this.y-this.Khz,this.KJ4[0]=t,this.KJ4[1]=i,this.KJ4[2]=t+this.KRp,this.KJ4[3]=i+this.KRW},updateDirection:function(){var t=.75,i=Math.atan2(this.sin/t,this.cos);this.KiU=this.radius*Math.cos(i),this.KLy=this.radius*Math.sin(i)*t},Kv7:function(){this.rotation>.5*-Math.PI+.05&&this.rotation<.5*Math.PI-.05?this.Kgc=1:(this.rotation<.5*-Math.PI-.05||this.rotation>.5*Math.PI+.05)&&(this.Kgc=-1)},KpP:function(t){return this.K8Y<t.KgZ&&this.KgZ>t.K8Y},KxO:function(t,i){(this.KsI!==t||i)&&(this.KsI=t,this.cC=this.Ktd[t],this.cC||console.log(t),this.cC.play())},update:function(t,i){this.state&&this.state.execute(this,t,i),this.cC&&this.cC.update(t,i),this.Inj(),this.K17()},render:function(t,i,s){this.He(this.kJ.Ixh)&&this.cC&&(this.cC.position.set(this.x,this.y),t.render(this.cC))},KtB:function(t,i){var s=new Dragons.Skeleton({});return s.Ctt(t,!1,i),s},KNM:function(t,i,s,e){s=s||30;var n=this.Cr$.Cfz[t];if(!n)return null;var h=n.CVC(i,s,e);return h.COS=!1,n=new Sprite.Animation(h),n.CRO=!0,n.init(),n},KNV:function(t,i){var s=this.BX*t;this.Bc=this.cos*s,this.BB=this.sin*s},Kub:function(){this.x+=this.Bc,this.y+=this.BB,this.x=Math.min(this.maxX,Math.max(this.minX,this.x)),this.y=Math.min(this.maxY,Math.max(this.minY,this.y))}}),Player=GT.Class.create({LE:Character,radius:20,minY:-(1/0),maxY:0,Kbb:0,KpX:2e4,KM2:5e3,KJA:1e4,KMt:0,Kd5:1/0,time:0,coin:0,score:0,star:0,stageKey:0,KVV:0,heroIndex:0,K5L:!1,debug:!1,_a:function(){this.radius=22,this.Kku=this.radius+16,this.width=36,this.height=56,this.sT=this.width>>1,this.s8=this.height>>1,this.KDw=this.radius*this.radius,this.Kzu=this.Kku*this.Kku,this.minX=-100,this.maxX=this.kJ.width+100,this.Ixh=[],this.K2m=[],this.Inj(),this.Kbb=this.KpX,this.K_J=170;var t=this.$bV(-this.K_J,300);this.KYd=this.$mk(660,1500),this.K_2=t[0],this.KJ_=t[1],this.BC=this.KJ_,this.$74=1.5*this.K_2,this.$jJ=Math.abs(this.$74),this.$F$=-this.KYd,this.$B4=Math.abs(this.$F$),this.Ka8=this.kJ.oT+this.kJ.jc+25;var i=this;if(this.K6i=this.kJ.K6i,this.KTb=!!this.kJ.match,this.ghost)if(this.K6i)this.key="hero"+game.Va.heroIndex;else{var s=this.heroIndex||0===this.heroIndex?this.heroIndex:Config.UZ;this.key="hero"+(this.KTb?s:Config.UZ)}else this.key="hero"+this.heroIndex;this.K0k=this.key+"_idle-0";var e=AnimationConfig[this.key];e=JSON.parse(JSON.stringify(e)),this.Ktd={};for(var n in e){var h=e[n],a=Utils.createAnimation(h,n);this.ghost&&(a.alpha=.7,a.tint=16770764),this.Ktd[n]=a}this.Ktd.dead.k=function(){i.dead=!0,i.remove(),game.kJ.K9t()},this.K2e(),this.KBx={Left:{},Right:{},BtnB:{},BtnA:{},Up:{}},this.KR8=null,this.Kct=this.Kct||{},this.KQl=this.KQl||{},this.KpR=this.KpR||{},this.Kb0=this.Kb0||1/0,this.U$3(PlayerStates.idle)},K2e:function(){this.K_P=Utils.AH("player-mind"),1==this.kJ.iceRate?this.KTr=Utils.AH("food-"+Config.UC):this.KTr=Utils.AH("food-"+game.Va.heroIndex),this.KC_=Utils.createSprite(this.K_P),this.KYM=Utils.createSprite(this.KTr),this.KYM.scale.set(.85,.85)},KK_:function(){return this.Ixh},Inj:function(){var t=this.x-this.sT,i=this.y-this.s8;this.Ixh[0]=t,this.Ixh[1]=i,this.Ixh[2]=t+this.width,this.Ixh[3]=i+this.height,this.K2m[0]=t+5,this.K2m[1]=i+5,this.K2m[2]=t+this.width-5,this.K2m[3]=i+this.height-8,this.K8Y=this.y-this.K86,this.KgZ=this.y+this.K86,this.mm=this.Ixh},update:function(t,i){var s=this.kJ;this.ghost?this.KaX():this.ready?(this.input=s.input,this.KTn()):this.input={},s.frameCount>1&&(this.Kbb-=t),this.Kbb<this.KM2?this.Kxq=!0:this.Kxq=!1,this.m8(t),this.K2W&&(this.Bc+=this.K2W.Bc||0,this.BB+=this.K2W.BB||0),this.state&&this.state.execute(this,t,i),this.cC&&this.cC.update(t),this.K6W?(this.x+=this.K6W.deltaX,this.y+=this.K6W.deltaY):(this.x+=this.Bc,this.y+=this.BB),this.ghost&&this.kJ.KeM>=this.Kb0&&(this.dead=!0,this.kJ.K$1(this.x,this.y)),this.Inj(),this.B1<0?this.S5=!0:this.B1>0&&(this.S5=!1),this.ghost||"dead"==this.U$D||(this.y>this.Ka8||this.x<-40||this.x>s.width+40?this.KBU(s):this.Kbb<=0&&this.KBU(this))},KTn:function(){var t=this.state;if(t){var i=this.kJ.frameCount,s=(this.input,t.KW3(this));s!==this.KR8&&(this.KR8=s,this.Kct[i]=s<0?-1:s>0?1:0);var e=t.Kmn(this.input);e&&(this.KQl[i]=1),i%10===0&&(this.KpR[i]=[this.x,this.y])}},KaX:function(){if(!this.dead){var t=this.input=this.KBx,i=this.kJ.frameCount,s=this.KpR[i];s&&(this.x=s[0],this.y=s[1]);var e=this.KQl[i];e?t.BtnB.bwI=!0:t.BtnB.bwI=!1;var n=this.Kct[i];n<0?(t.Left.pressed=!0,t.Right.pressed=!1):n>0?(t.Left.pressed=!1,t.Right.pressed=!0):0===n&&(t.Left.pressed=!1,t.Right.pressed=!1)}},KiT:function(){if(!this.kJ.KiT){this.dead=!0,this.kJ.KiT=!0;var t=this;game.kJ.AXG.Mq(function(){t.kJ.K9t()},300)}},Ksr:function(){if(!this.kJ.Ksr){this.kJ.Ksr=!0;var t=this;game.kJ.AXG.Mq(function(){t.kJ.complete()},300)}},KBU:function(t){return this.time=this.kJ.KeM,this.score=this.kJ.KeM/10>>0,this.KeD=t,this.K5L?void(this.KeD==this.kJ&&this.U$3(PlayerStates.dead)):void this.U$3(PlayerStates.dead)},Kel:function(){var t=this.kJ,i="0",s="1",e="2",n=game.Va.appVerNum,h=n+i+this.KVV+s+t.$A_+e+(t.StK||0);return parseInt(h)||0},render:function(t,i,s){if(this.ghost&&!this.K6i);else if(this.Kxq&&this.Kbb>0){var e=.2+.4*(Math.sin(s/150)+1);t.setAlpha(e),t.renderAt(this.KC_,this.x-this.K_P.w,this.y-185),t.setAlpha(.8),t.renderAt(this.KYM,this.x+2-(this.K_P.w+this.KTr.w)/2,this.y-182+(this.K_P.h-this.KTr.h)/2),t.setAlpha(1)}this.S5?this.cC.scale.set(-1,1):this.cC.scale.set(1,1),t.renderAt(this.cC,this.x,this.y)},NpX:function(t){this.remove()}},null),GhostPlayer=GT.Class.create({LE:Player,ghost:1,x:100,y:350,KR8:null,Kct:null,KQl:null}),HollowPlayer=GT.Class.create({LE:Player,S9J:1,_a:function(){this.Ixh=[],this.K2m=[]},update:function(){},render:function(){}}),SplashEffect=GT.Class.create({LE:Entity,x:0,y:0,width:0,height:0,color:"#ffffff",ST0:16,size:32,mP:.003,BH:0,BC:0,alpha:.7,s1:.004,BT:.005,Szj:1.1,SB5:4,Sw8:8,SSf:12,SHP:7,Swb:12,VE_:null,Spt:1500,SeF:!1,circle:!1,blend:null,init:function(t){this.kJ=t,this.particles=[];var i=this.Szj/this.SB5,s=this.width/2,e=this.height/2;this.Xb=Utils.AH("white"),this.img=this.Xb.img;for(var n=0;n<this.ST0;n++){var h=this.size*Utils.Je(this.Sw8,this.SSf)/10,a=this.alpha*Utils.Je(this.SHP,this.Swb)/10,o=Math.random()<.5?-1:1,r=Math.random()<.5?-1:1;this.SeF&&(Math.random()<.5&&0!==o?r=0:o=0);var l=new GT.sY({id:n,img:this.img,sw:h,sh:h,tint:this.color,offsetX:this.x+s*o,offsetY:this.y+e*r,fillColor:this.color,circle:this.circle,blend:this.blend,width:h,height:h,mP:this.mP,alpha:a,s1:this.s1,BT:this.BT,BH:this.BH,BC:this.BC,B1:o*Utils.Je(1,this.SB5)*i,BW:r*Utils.Je(1,this.SB5)*i});l.init(),this.particles.push(l)}},Uhf:function(){},update:function(){this.Sg4=this.y},complete:function(){this.Spt=-1,this.particles.length=0,this.Uhf()},render:function(t,i,s){if(!(this.Spt<0)){var e;this.blend&&(e=t.getBlend(),t.setBlend(this.blend));for(var n=this.particles.length,h=0,a=0;a<n;a++){var o=this.particles[a];o.disabled?h++:(o.update(i,s),o.alpha<=.01||o.width<=.01||o.height<=.01||o.circle&&o.radius<=.01?o.disabled=!0:o.render(t,i,s))}this.Spt-=i,(h===n||this.Spt<=0)&&this.complete(),this.blend&&t.setBlend(e)}}}),ArcFlyTween=GT.Class.create({LE:Entity,SWp:null,SPz:2*Math.PI,SEv:200,delay:!0,start:function(t,i,s,e){var n=this,h=this.SPz,a=this.SEv,o=s[0],r=s[1],l=e[0],u=e[1],c=l-o,f=u-r,d=Math.sqrt(c*c+f*f),g=Math.atan2(f,c),m=Math.sin(g),p=Math.cos(g),v=[],w=0;t.forEach(function(t){var i={maxY:20*n.Je(2,a/20),delay:w,qG:n.Je(10,10)/10,Sx6:1.01,e_:n.Je(9,16)/10,STj:.97};n.delay&&(w+=80*n.Je(0,2)+50),i.apg=n.random()<.5?-1:1,i.played=0,v.push(i)});var b={S1v:o,SXi:r,SSK:l,Slr:u,duration:i,entities:t,Sn0:v,bb9:d,b_y:g,cos:p,sin:m,SZP:h/i,S_C:d/i};this.SWp=b},update:function(t,i){if(!this.SWp)return!1;var s=this.SWp,e=s.entities,n=s.Sn0,h=1/0;return e.forEach(function(i,e){var a=n[e];if(a.delay>0)return void(a.delay-=t);var o=a.played;h=o<h?o:h;var r=Math.sin(o*s.SZP);o*=s.S_C,r*=a.maxY*a.e_*a.apg,a.played+=t*a.qG,a.qG=Math.max(.1,a.qG*a.Sx6),a.e_=Math.max(.1,a.e_*a.STj),i.x=s.S1v+(o*s.cos-r*s.sin),i.y=s.SXi+(o*s.sin+r*s.cos)}),h>=2*s.duration&&h<1/0?(this.SWp=null,!0):void 0},random:function(){return Math.random()},Je:function(t,i){return(i-t+1)*this.random()+t>>0}}),ArcFlyEffect=GT.Class.create({LE:Entity,SEv:40,duration:1e3,SFe:null,SJn:null,VE_:"light",color:"red",Spt:1500,alpha:.8,size:20,ST0:15,init:function(t){this.kJ=t,this.particles=[];for(var i=0;i<this.ST0;i++){var s=this.size*Utils.Je(8,12)/10,e=this.alpha*Utils.Je(8,12)/10,n={x:this.SFe[0],y:this.SFe[1],width:s,height:s,alpha:e};this.particles.push(n)}this.SeH=new ArcFlyTween({SPz:Math.PI,SEv:this.SEv}),this.SeH.start(this.particles,this.duration,this.SFe,this.SJn),console.log(this.particles)},Uhf:function(){},update:function(t,i){this.SeH.update(t,i)},render:function(t,i,s){var e;this.VE_&&(e=t.globalCompositeOperation,t.globalCompositeOperation=this.VE_);var n=0,h=this.particles.length;for(this.color&&(t.fillStyle=this.color);n<h;){var a=this.particles[n];a._toRemove||(t.globalAlpha=a.alpha,t.fillRect(a.x,a.y,a.width,a.height)),n++}e&&(t.globalCompositeOperation=e),this.Spt-=i,this.Spt<=0&&this.Uhf()}});LeafEffect.prototype={constructor:LeafEffect,count:10,x:0,y:0,width:0,height:0,colors:["#bb8866","#66bb88","#6688bb"],SSf:10,init:function(){this.SLG=[],this.container=Utils.createContainer();for(var t=Utils.AH("white"),i=new PIXI.BaseTexture(t.img),s=0;s<this.count;s++){var e=new PIXI.Texture(i),n=new PIXI.Sprite(e),h={SGl:0,Snq:0,texture:e,cC:n};this.SXD(h),this.SLG.push(h),this.container.addChild(n)}},SXD:function(t){t.x=this.SSf+Utils.Je(this.x+this.width,1.7*(this.x+this.width)),t.y=Utils.Je(this.y,this.y+this.height),t.AM6=-.5*Utils.Je(4,8)/10,t.Afa=.07*Utils.Je(5,10)/10*[-1,1][Utils.Je(0,1)];var i=t.cC,s=t.texture,e=Utils.Je(2*this.SSf/3,this.SSf);s.frame.width=e,s.frame.height=e,i.alpha=Utils.Je(5,8)/10,i.tint=this.colors[Utils.Je(0,this.colors.length-1)],i.tintScale=Utils.Je(8,12)/10},update:function(t){var i=this;this.SLG.forEach(function(s,e){s.STR=s.AM6,s.SXF=s.Afa,s.AM6=s.AM6+s.SGl*t,s.Afa=s.Afa+s.Snq*t,s.Bc=(s.STR+s.AM6)*t/2,s.BB=(s.SXF+s.Afa)*t/2,s.x=s.x+s.Bc,s.y=s.y+s.BB,s.x<i.x-i.SSf&&i.SXD(s),s.y>i.height+i.SSf?s.Afa=-s.Afa:s.y<i.y-i.SSf&&(s.Afa=-s.Afa),s.cC.position.set(s.x,s.y)})},render:function(t,i){t.render(this.container)}};var Block=GT.Class.create({LE:StageEntity,B1:0,BW:0,$Yi:"Block",init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj()},KK_:function(){return this.Ixh},update:function(t,i){this.Inj()},render:function(t,i,s){t.lineWidth=2}},null),Platform=GT.Class.create({LE:Block,B1:0,BW:0,$Yi:"Platform",bBV:0,b2K:0,size:6,width:384,height:64,BX:.1,Shd:.15,SNS:1,index:0,withSaw:!1,withIce:!1,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je;var i=this.size<6?"-small":"";this.width=64*this.size,this.SHk=game.Va.heroIndex,this.Xb=Utils.AH("platform-"+this.SHk+i),this.Sp9=Utils.AH("platform-ice"+i);var s=Utils.createTexture(this.Xb),e=Utils.createTexture(this.Sp9);this.Sr7=Utils.createSpriteByTexture(s),this.SYX=Utils.createSpriteByTexture(e),this.SPW=Utils.createSpriteByTexture(s),this.StN=Utils.createSpriteByTexture(e),this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj();this.originX=this.x,this.originY=this.y,this.$va(t),this.S8p();var n=new MiniSaw({x:this.x,y:this.y,BX:0,radius:20,parent:this,off:!0,S9z:!1});n.init(t),this.saw=n,this.SiG=6,this.Sjo=0,this.S7r=this.width/this.SiG>>0,this.withSaw&&this.SrG(this.withSaw)},S8p:function(){var t=[[(this.Ixh[0]+this.Ixh[2])/2,this.Ixh[3]],[this.Ixh[0],this.Ixh[3]],[this.Ixh[0],this.Ixh[1]],[(this.Ixh[0]+this.Ixh[2])/2,this.Ixh[1]],[this.Ixh[2],this.Ixh[1]],[this.Ixh[2],this.Ixh[3]]],i=t[0],s=[];t.forEach(function(t){s.push(t)}),this.SB9=new Path({d5R:s,closed:!0,loop:!0,duP:this.S0M}),this.SB9.init();var s=[];t.forEach(function(t){s.unshift(t)}),s.pop(),s.unshift(i),this.SkQ=new Path({d5R:s,closed:!0,loop:!0,duP:this.S0M}),this.SkQ.init()},SrG:function(t,i){var s=this;t="number"==typeof t?t:s.Shd;var e=t<0;this.saw.$_S(Math.abs(t));var n=e?this.SkQ:this.SB9,h=n.d5R[0],a=Math.abs(t/s.Shd);this.saw.moveTo(h.x,h.y,function(e){s.saw.$_S(Math.abs(t)*s.SNS),e.$om=e.Kiv*a*s.SNS,e.off=!1,e.SAy=!0,e.$aO(n),i&&i(s)})},S4a:function(t,i){var s=this;return this.withSaw?void(i&&i(s)):(t=t||.1,this.saw.$aO(null),this.saw.BX=Math.abs(t),s.saw.off=!0,s.saw.SAy=!1,s.saw.$om=0,void this.saw.moveTo(this.originX,this.originY,function(t){i&&i(s)}))},SsY:function(t){var i=this;this.SLr=!0,this.S_E=!1,this.SaR=.025,this.SUo=0,this.Si0&&game.kJ.AXG.p1(this.Si0),this.Si0=game.kJ.AXG.Mq(function(){i.withIce=!0,i.SLr=!1,t&&t(i)},1800),this.Si0.update=function(){i.SUo=Math.max(0,Math.min(1,i.SUo+i.SaR)),i.SUo>.75&&(i.withIce=!0)},this.Si0.SLr=!0},S8X:function(t){var i=this;this.S_E=!0,this.SLr=!1,this.SaR=.025,this.SUo=0,this.Si0&&game.kJ.AXG.p1(this.Si0),this.Si0=game.kJ.AXG.Mq(function(){i.withIce=!1,i.S_E=!1,t&&t(i)},1800),this.Si0.update=function(){i.SUo=Math.max(0,Math.min(1,i.SUo+i.SaR)),i.SUo>.75&&(i.withIce=!1)},this.Si0.S_E=!0},Sb4:function(t,i){var s=this,e=this.kJ.SmG[this.kJ.S05];if(e.SBu){var n=e.SBu[this.index],h=!1;!n||s.path&&!s.path.disabled||(s.BX=t||s.$mw||.05,s.$aO(n),h=!0)}return i&&i(s),h},SAY:function(t,i){var s=this;if(!this.path)return void(i&&i(s));var e=this.path.d5R[0];s.BX=t||s.$mw||.05,s.$aO(null),s.moveTo(e.x,e.y,function(){i&&i(s)})},SjN:function(t,i){var s=this,e=this.kJ.SmG[this.kJ.S05],n=e.platforms[this.index];this.BX=t||n.$mw||.1;var h=[n.x,n.y];this.Ks2(h,function(){i&&i(s)})},S7J:function(t,i){var s=4*this.Je(-3,3);t||0===t?this.Sjo=t:t=this.Sjo=(this.Sjo+this.Je(1,this.SiG-1))%this.SiG,s=Math.max(5,Math.min(this.width-5,s+(t+.5)*this.S7r));var e=this.Ixh,n=new Coin({x:e[0]+s,y:e[1]-35,K2W:this});return n.init(this.kJ),i?(n.SxD=i,n.offsetX=i.offsetX||0,n.offsetY=i.offsetY||0):Item.SuE(n),n},Sti:function(){this.Sjo=(this.Sjo+this.Je(1,this.SiG-1))%this.SiG;var t=(this.Sjo+.5)*this.S7r+6*this.Je(-4,4);t=Math.max(5,Math.min(this.width-5,t));var i=this.Ixh,s=new Food({x:i[0]+t,y:i[1]-35,K2W:this});return s.init(this.kJ),Item.SuE(s),s},KK_:function(){return this.Ixh},update:function(t,i){this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),this.Inj(),this.saw&&(this.SSl?(this.S4a(this.Shd,this.SSl),this.SSl=null):this.SbZ&&(this.SrG(this.Shd,this.SbZ),this.SbZ=null),this.saw.SN$=this.x-this.originX,this.saw.SHM=this.y-this.originY,this.saw.update(t,i))},render:function(t,i,s){this.saw&&this.saw.render(t,i,s);var e=this.x-this.sT,n=this.y-this.s8;this.cC=this.withIce?this.SYX:this.Sr7,t.renderAt(this.cC,e,n),(this.SLr||this.S_E)&&(this.S4V=this.SLr?this.StN:this.SPW,this.S4V.alpha=this.SUo,t.renderAt(this.S4V,e,n))}},null),Item=GT.Class.create({LE:Entity,B1:0,BW:0,color:16711680,type:0,SNv:0,alpha:1,offsetX:0,offsetY:0,offsetWidth:0,offsetHeight:0,S3u:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.Xb=Utils.AH(this.img),this.width=this.Xb.w,this.height=this.Xb.h,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Suv=this.Spt,this.SfZ=0},$p8:function(t){return!(t.Kbb<=0||this.alpha<.05||!this.S6a||!this.He(t.Ixh))&&(this.LF(t),!0)},LF:function(t){},SeY:function(t,i){if(this.Spt-=t,this.Spt<100){if(this.alpha*=.75,this.alpha<.05)return void this.remove()}else this.Spt<=2500&&(this.alpha=.4+.32*(Math.cos(this.SNv/100)+1),this.SNv+=t)},update:function(t,i){this.Bc=0,this.BB=0,this.K2W&&(this.Bc+=this.K2W.Bc||0,this.BB+=this.K2W.BB||0),this.x+=this.Bc,this.y+=this.BB,this.Inj(),this.cC&&this.cC.update&&this.cC.update(t,i),this.SeY(t,i),this.SxD&&(this.offsetY=this.SxD.offsetY,this.S6a=this.SxD.S6a),this.S6a?(this.offsetY=0,this.S3u=4*-Math.cos(this.SfZ/150),this.SfZ+=t):this.S3u=0},render:function(t,i,s){t.setAlpha(this.alpha);var e=this.x+this.offsetX,n=this.y+this.offsetY+this.S3u;t.renderAt(this.cC,e,n),t.restoreAlpha(),game.debug}},null);Item.SuE=function(t){t.offsetY=50,t.S6a=!1;var i=new TWEEN.Tween(t).to({offsetY:-4},400).easing(TWEEN.Easing.Quadratic.In).k(function(){t.S6a=!0});return i.start(),t};var Coin=GT.Class.create({LE:Item,B1:0,BW:0,color:16744192,Spt:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.Spt=this.Spt||t.Sxb,this.width=32,this.height=36,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj();var i=AnimationConfig.enemy.coin;i=JSON.parse(JSON.stringify(i)),this.cC=Utils.createAnimation(i),this.Suv=this.Spt,this.SfZ=0},LF:function(t){game.AEe("got-coin"),t.coin+=1,this.kJ.tdg(),this.remove();var i=new SplashEffect({x:this.x,y:this.y,size:18,color:16773120,blend:PIXI.BLEND_MODES.ADD,Spt:1500,Uhf:function(){}});i.init(),this.kJ.ttL(i)},twH:function(){this.tDF={sx:0,sy:0,sw:this.tGK,sh:this.tpH,tx:0,ty:0,t4a:this.tGK,tqR:this.tpH},this.tcx={t4a:[.3*this.tDF.sw,.7*this.tDF.sw,this.tDF.t4a],tqR:[.3*this.tDF.sh,.7*this.tDF.sh,this.tDF.tqR]}},tmO:function(){this.twH();var t=new TWEEN.Tween(this.tDF).to(this.tcx,500).interpolation(TWEEN.Interpolation.Linear).easing(TWEEN.Easing.Linear.None);if(t.start(),this.tHq.x!=this.tHq.tx||this.tHq.y!=this.tHq.ty){var t=new TWEEN.Tween(this.tHq).to({x:this.tHq.tx,y:this.tHq.ty},300).easing(TWEEN.Easing.Linear.None);t.start()}},render:function(t,i,s){t.setAlpha(this.alpha);var e=this.x+this.offsetX,n=this.y+this.offsetY+this.S3u;t.renderAt(this.cC,e,n),t.restoreAlpha()}},null),Food=GT.Class.create({LE:Item,B1:0,BW:0,color:16711680,type:0,SNv:0,alpha:1,Spt:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,1==t.iceRate?this.Xb=Utils.AH("food-"+Config.UC):this.Xb=Utils.AH("food-"+game.kJ.player.heroIndex),this.width=this.Xb.w,this.height=this.Xb.h,this.sT=this.width>>1,this.s8=this.height>>1,this.cC=Utils.createSprite(this.Xb,this.sT,this.s8),this.Spt=this.Spt||t.Sxb,this.Ixh=[],this.Inj(),this.Suv=this.Spt,this.SfZ=0},LF:function(t){game.AEe("got-food"),t.Kbb=Math.min(t.Kbb+t.KJA,t.KpX),t.KMt=Math.min(t.Kd5,t.KMt+1),this.remove();var i=new SplashEffect({x:this.x,y:this.y,ST0:16,size:30,color:16737826,alpha:.6,s1:.004,Sw8:7,SSf:12,SHP:7,Swb:12,SB5:9,SeF:!0,Spt:1500,Uhf:function(){}});i.init(),this.kJ.ttL(i);var s=new TWEEN.Tween(this.kJ.tjz).to({scale:1.2},100).easing(TWEEN.Easing.Quadratic.Out),e=new TWEEN.Tween(this.kJ.tjz).to({scale:1},200).easing(TWEEN.Easing.Quadratic.In);s.chain(e).start()}}),Bullet=GT.Class.create({LE:Entity,$Yi:"Bullet",width:12,height:12,BX:.3,B1:null,BW:null,Spt:1/0,tzT:!0,S9z:!0,scale:1,delay:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.trJ=Utils.AH("bullet"),this.taH=Utils.AH("bullet"),this.Xb=this.trJ,this.width=this.Xb.w-6,this.height=this.Xb.h-6,this.sT=this.width>>1,this.s8=this.height>>1,this.t3S=Utils.createSprite(this.trJ,this.sT,this.s8),this.tPI=Utils.createSprite(this.taH,this.sT,this.s8),this.cC=this.t3S,this.Ixh=[],this.Inj();var i=Math.cos(this.txi),s=Math.sin(this.txi);null===this.B1&&(this.B1=i*this.BX),null===this.BW&&(this.BW=s*this.BX),this.Kiv=Math.abs(this.$om)},$p8:function(t){if(this.dead)return!1;var i=t.x-this.x,s=t.y-this.y,e=i*i+s*s;return e<=t.KDw&&(t.KBU(this),this.tw5(),!0)},tyA:0,update:function(t,i){var s=this;this.delay-=t,this.delay>0||(this.tyA-=t,this.tyA<=0&&(this.tyA=90,this.cC=this.cC==this.t3S?this.tPI:this.t3S),this.m8(t),this.x+=this.Bc,this.y+=this.BB,this.Inj(),this.tzT||this.dead||!this.tGd||this.kJ.platforms.some(function(t){var i=Utils.HA(s.x,s.y,t.Ixh);if(i)return s.dead=!0,s.tw5(),!0}),!this.tyI(t,i))},tw5:function(){this.dead=!0;var t=AnimationConfig.effect.explosion;t=JSON.parse(JSON.stringify(t));var i=Utils.createAnimation(t);i.transform.position.set(this.x,this.y),i.loop=!1,i.k=function(){this.remove()},i.play(),this.kJ.ttL(i)},tyI:function(t,i){if(this.S9z&&!this.dead){var s=Utils.HA(this.x,this.y,this.kJ.t05);this.tGd=this.tGd||s,this.dead=this.tGd&&!s}return this.Spt-=t,!(this.dead||this.Spt<=0)||(this.dead=!0,this.remove(),!1)},render:function(t,i,s){t.renderAt(this.cC,this.x-3,this.y-3),game.debug}},null),SawDisk=GT.Class.create({LE:Bullet,radius:10,rotation:0,visible:!0,$om:.005,$Yi:"SawDisk",SN$:0,SHM:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.KDw=this.radius*this.radius,this.S1v=this.x,this.width=2*this.radius+4,this.height=2*this.radius+4,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$va(t);var i=this.radius<40?"small-saw":"saw";this.tuH&&(i="thorn-ball-small"),this.Xb=Utils.AH(i),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5),this.scale=1,this.tqp=new PIXI.SpriteTrail(6),this.tqp.updateSnapshot=function(t,i,s){t.alpha*=.92,t.alpha<.015&&(t.visible=!1)},game.renderer.linkDisplayObject(this.tqp.container)},$p8:function(t){if(!this.visible||this.disabled||t.disabled||!this.He(t.Ixh))return!1;var i=t.x-this.x,s=t.y-this.y,e=Math.sqrt(i*i+s*s);return e<this.radius+t.radius&&(t.KBU(this),!0)},update:function(t,i){this.disabled||(this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),this.x+=this.SN$,this.y+=this.SHM,this.tyI(t,i)&&(this.rotation+=this.$om*t,this.Inj(),this.kJ.player.dead||this.$p8(this.kJ.player)))},render:function(t,i,s){if(!this.visible||this.disabled||!this.tGd,this.SAy&&this.tqp){if(this.tqp.update(i),this.kJ.frameCount%4===0&&(0!=this.B1||0!=this.BW)){this.tqp.takeSnapshot(this.cC,.4,16748672,3.2)}t.render(this.tqp.container)}this.cC.rotation=this.rotation,this.cC.scale.set(this.scale,this.scale),t.renderAt(this.cC,this.x,this.y),game.debug&&t.$O(this.x,this.y,this.radius,16711680,4),this.x-=this.SN$,this.y-=this.SHM,this.SN$=0,this.SHM=0}},null),MiniSaw=GT.Class.create({LE:SawDisk,$Yi:"MiniSaw",radius:24,$om:.004,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.KDw=this.radius*this.radius,this.S1v=this.x,this.width=2*this.radius,this.height=2*this.radius,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$va(t),this.Xb=Utils.AH("small-saw"),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5),this.scale=1},$p8:function(t){if(this.off)return!1;if(!this.visible||this.disabled||t.disabled||!this.He(t.Ixh))return!1;var i=t.x-this.x,s=t.y-this.y,e=Math.sqrt(i*i+s*s);return e<this.radius+t.radius&&(t.KBU(this),!0)}},null),MachineBullet=GT.Class.create({LE:Bullet,render:function(t,i,s){t.renderAt(this.cC,this.x-3,this.y-3),game.debug}}),DartBullet=GT.Class.create({LE:SawDisk,_x:0,_y:0,_rotation:0,radius:24,rotation:0,visible:!0,$om:-.003,$Yi:"DartBullet",SN$:0,SHM:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.KDw=this.radius*this.radius,this.width=2*this.radius+4,this.height=2*this.radius+4,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$va(t),this.Xb=Utils.AH("dart"),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5),this.scale=1}},null);Object.defineProperty(DartBullet.prototype,"x",{configurable:!0,get:function(){return this._x},set:function(t){this._x=t,this.cC&&(this.cC.position.x=t)}}),Object.defineProperty(DartBullet.prototype,"y",{configurable:!0,get:function(){return this._y},set:function(t){this._y=t,this.cC&&(this.cC.position.y=t)}}),Object.defineProperty(DartBullet.prototype,"rotation",{configurable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this.cC&&(this.cC.rotation=t)}});var FireBall=GT.Class.create({LE:Bullet,tXv:!0,radius:45,visible:!0,$Yi:"FireBall",init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.tYr=45,this.scale=this.radius/this.tYr,this.KDw=this.radius*this.radius,this.S1v=this.x,this.width=2*this.radius+4,this.height=2*this.radius+4,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om);var i=AnimationConfig.enemy.fireball;i=JSON.parse(JSON.stringify(i)),Utils.CG(i.frames),this.cC=Utils.createAnimation(i),this.cC.play(),this.$va(t)},$p8:function(t){if(!this.visible||this.disabled||t.disabled||!this.He(t.Ixh))return!1;var i=t.x-this.x,s=t.y-this.y,e=Math.sqrt(i*i+s*s);return e<this.radius+t.radius&&(t.KBU(this),!0)},update:function(t,i){this.disabled||(this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),this.parent&&(this.x+=this.parent.bBV,this.y+=this.parent.b2K),this.tyI(t,i)&&(this.Inj(),this.cC&&this.cC.update(t),this.kJ.player.dead||this.$p8(this.kJ.player)))},render:function(t,i,s){this.visible&&!this.disabled&&this.tGd!==!1&&(this.cC&&(this.cC.alpha=this.alpha,this.cC.scale.set(this.scale,this.scale),this.cC.position.set(this.x,this.y),t.render(this.cC)),this.parent&&(this.x-=this.parent.bBV,this.y-=this.parent.b2K))}},null),Gun=GT.Class.create({LE:StageEntity,$Yi:"Gun",x:null,y:null,width:200,height:100,alpha:1,BX:0,path:null,rotation:0,$om:0,Kiv:0,KSi:-(1/0),Kt_:1/0,t4Q:0,td0:0,t7b:0,color:"red",tc4:null,tTN:null,to8:null,off:!0,$5u:!1,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je;
var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.sT=30,this.s8=this.height>>1,this.Kh$=this.width-this.sT,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$dU(0,0),this.$va(t)},t32:function(t){var i=this;if(!i.tzZ){i.path&&i.$aO(null);var s=function(){i.tc4?i.Ks2(i.tc4,function(){i.tzZ=!1,i.off=!0,i.te_(),t&&t(i)}):(i.tzZ=!1,i.off=!0,i.te_(),t&&t(i))};i.tzZ=!0,i.t8Z=!1,i.tAg(),i.$5u&&i.tTN?(i.$5u=!1,i.Ks2(i.tTN,function(){s()})):s()}},t2G:function(t){var i=this;if(!i.t8Z){var s=function(s){var e=function(){i.t8Z=!1,i.off=!1,i.$5u=!0,i.t7o(),i.t5s()};s&&e(),i.to8?(i.to8.disabled=!1,i.Ki1(i.to8,function(){s||e(),t&&t(i)})):(s||e(),t&&t(i))};i.t8Z=!0,i.tzZ=!1,i.tTN?i.Ks2(i.tTN,function(){s(!0)}):s()}},t5s:function(){},te_:function(){},t7o:function(){},tAg:function(){},fire:function(t){this.tzZ},t22:function(){},tvf:function(){},update:function(t,i){this.disabled||(this.t4Q<=0&&(this.NTM(t,i),this.$dU(t,i)),this.kJ.player.dead||this.$p8(this.kJ.player),this.t4Q-=t)},$p8:function(t){for(var i=0;i<this.thC.length;i++){var s=this.thC[i];if(s.$p8(t))return!0}return!1},render:function(t,i,s){}},null),BulletGun=GT.Class.create({LE:Gun,rotation:0,$om:5e-4,$Yi:"BulletGun",tIR:3,t7b:0,thN:.5,teY:0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},update:function(t,i){this.disabled||(this.NTM(t,i),this.$dU(t,i),this.w7P(t,i),this.kJ.player.dead||this.$p8(this.kJ.player),this.wGw=this.thC.length,this.wch&&this.wGw<=0&&(this.wch=!1,this.t22()))},w7P:function(t,i){for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.update(t,i)}},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.t7b||6;t.w_c||5e3,t.wL_||(this.kJ.random()<.5?"Left":"Right"),t.wXU||s.height/2;this.thC.length=0;for(var h=0;h<n;h++){var a=new Bullet({});a.init(s),i.thC.push(a)}}},$p8:function(t){for(var i=0;i<this.thC.length;i++){var s=this.thC[i];if(s.$p8(t))return!0}return!1},$tg:function(t,i){t.remove()},render:function(t,i,s){Utils.K5(this.thC,t,i,s)}},null),MachineGun=GT.Class.create({LE:Gun,rotation:0,width:200,height:100,wX_:0,w4P:1500,tIR:3,thN:.6,$Yi:"MachineGun",init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.Xb=Utils.AH("shotgun"),this.width=this.Xb.w,this.height=this.Xb.h,this.s8=this.height>>1,this.sT=this.s8+10,this.Kh$=this.width-this.sT,this.cC=Utils.createSprite(this.Xb,this.sT,this.s8);var s=AnimationConfig.effect.gunfire;s=JSON.parse(JSON.stringify(s)),this.wAw=Utils.createAnimation(s,0,0),this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$dU(0,0),this.$va(t),this.wXK={}},update:function(t,i){this.disabled||(this.$5u&&(this.td0<=0&&this.fire(),this.td0-=t),this.t4Q<=0&&(this.NTM(t,i),this.$dU(t,i)),this.t4Q-=t)},t5s:function(){this.$5u=!0},te_:function(){this.$5u=!1},fire:function(t){if(!this.tzZ){t=t||{};var i=this;this.kJ;this.wch=!0;for(var s in t)this.wXK[s]=t[s];t=this.wXK;var e=t.t7b||this.t7b,n=t.teY||this.teY,h=t.wMM||200;i.wch=0,i.t4Q=600;for(var a=i.t4Q,o=function(){var t=new MachineBullet({x:i.KhR,y:i.K76,txi:i.rotation,BX:n,tag:"bullet"});t.init(i.kJ),t.SAy=!0,i.kJ.w6L.push(t),i.wX_=70,i.wch=100,game.AEe("shot-machinegun")},r=0;r<e;r++)game.kJ.AXG.Mq(o,a),a+=h;i.t4Q=a+100,i.td0=i.t4Q+i.w4P}},render:function(t,i,s){var e=0;this.wX_>0&&(e=-10,this.wX_-=i),this.wch>0&&(this.wAw.rotation=this.rotation,this.wAw.position.set(this.KhR,this.K76),t.render(this.wAw),this.wch-=i),this.cC&&(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),this.cC.alpha=this.alpha,this.cC.position.set(e,0),t.render(this.cC),t.restore())}},null),LaserGun=GT.Class.create({LE:BulletGun,type:"LaserGun",$Yi:"LaserGun",wlg:5,x:0,y:0,tIR:5,wJD:500,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN,this.waP=[],this.w79=[];for(var i=t.width-300,s=t.width-600,e=2*this.t7b,n=0;n<e;n++){var h=i/(e-1)*n+150;this.waP.push(h);var h=s/(e-1)*n+300;this.w79.push(h)}this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){if(this.wch)for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.update(t,i)}},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.t7b||this.t7b;t.wL_||(this.kJ.random()<.5?"Left":"Right");s.CG(this.waP),s.CG(this.w79),game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0;for(var t=0,e=0;e<n;e++){var h=new Laser({x:i.waP[e],y:-50,x2:i.w79[e],y2:s.height+50,delay:t});h.init(s),t+=i.wJD,i.thC.push(h)}},100)}}},null),SawGun=GT.Class.create({LE:Gun,rotation:0,radius:400,t4Q:0,wpM:0,tIR:3,thN:.8,BkC:.2,$Yi:"SawGun",init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.KDw=this.radius*this.radius,this.Bmb=Utils.AH("saw-arm"),this.Bm7=this.Bmb.w-this.radius,this.Bmb.w=this.radius,this.Bmb.x+=this.Bm7,this.width=this.radius,this.height=this.Bmb.h,this.sT=20,this.s8=this.height>>1,this.Bzj=Utils.createSprite(this.Bmb),this.Bzj.pivot.set(this.sT,this.s8),this.Bry=this.radius-this.sT-16,this.Kh$=0,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.$dU(0,0),this.$va(t),this.wXK={}},t5s:function(){this.BZz()},te_:function(){this.saw=null},BZz:function(){this.Kh$=0,this.KhR=this.x,this.K76=this.y,this.saw=new SawDisk({x:this.KhR,y:this.K76,radius:54,Kiv:0}),this.saw.init(this.kJ)},fire:function(t){var i=this.saw;if(i&&this.BN9&&!this.tzZ){t=t||{};var s=this;this.kJ;this.wch=!0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY;this.t4Q=1500,this.BN9=!1,this.wpM=0,this.saw=null,i.Kiv=Math.abs(i.$om),this.kJ.w6L.push(i),game.kJ.AXG.Mq(function(){var t=n*Math.cos(s.rotation),e=n*Math.sin(s.rotation);i.B1=t,i.BW=e,i.SAy=!0,game.AEe("shot-sawgun")},1200)}},update:function(t,i){this.disabled||(this.saw&&(this.Kh$<this.Bry?(this.Kh$+=this.BkC*t,this.Kh$>=this.Bry&&(this.Kh$=this.Bry,this.BN9=!0)):this.Kh$=this.Bry),this.t4Q<=0&&(this.NTM(t,i),this.$dU(t,i)),this.t4Q-=t,this.saw?(this.saw.x=this.KhR,this.saw.y=this.K76,this.saw.update(t,i)):(this.BN9=!1,this.t4Q<=0&&this.$5u&&this.BZz()),this.BN9&&(this.wpM>1500&&this.fire(),this.wpM+=t))},render:function(t,i,s){this.saw&&this.saw.render(t,i,s),this.Bzj.rotation=this.rotation,t.renderAt(this.Bzj,this.x,this.y),game.debug&&(t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.strokeStyle=this.color,t.strokeRect(-2,-2,4,4),t.strokeRect(-this.sT,-this.s8,this.width,this.height),t.restore())}},null),DartGun=GT.Class.create({LE:BulletGun,type:"DartGun",$Yi:"DartGun",wlg:0,x:0,y:0,SEv:230,tIR:8,thN:.45,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.width=50,this.height=50,this.sT=this.width>>1,this.s8=this.height>>1,this.Kh$=this.width-this.sT,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.thC=[],this.wXK={},this.SeH=new ArcFlyTween({SPz:4*Math.PI,SEv:this.SEv,random:this.random,Je:this.Je}),this.Bh9=Utils.createParticleContainer()},w7P:function(t,i){this.SeH.update(t,i);for(var s=0,e=0;e<this.thC.length;e++){var n=this.thC[e];n.update(t,i),(n.x>this.B7e||n.x<this.BgQ)&&s++}var h=this.thC.length-s;h||(this.SWp=null,this.thC.length=0)},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.t7b||this.t7b,h=t.teY||this.teY,a=s.width/h,o=t.wL_||(s.random()<.5?"Left":"Right"),r=t.wXU||s.height/2;this.BgQ=-200,this.B7e=s.width+200;var l,u,c,f;"Left"==o?(l=[-100,r],u=[s.width+100,r],c=0,f=r):(l=[s.width+100,r],u=[-100,r],c=s.width,f=r),s.BB8(i,c,f),game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0;for(var t=0;t<n;t++){var e=i.delay||0,h=new DartBullet({S9z:!1,id:"s_"+t,radius:24,x:l[0],y:l[1],$om:.015,delay:e});h.init(s),i.thC.push(h),i.Bh9.addChild(h.cC)}game.AEe("shot-shotgun"),i.SeH.start(i.thC,a,l,u)},1500)}},render:function(t,i,s){for(var e=!1,n=0;n<this.thC.length;n++){var h=this.thC[n];if(!h._toRemove){e=!0;break}}e?t.render(this.Bh9):this.thC.length>0&&(this.Bh9.removeAllChildren(!0),this.thC.length=0)}},null),FireSnakeGun=GT.Class.create({LE:BulletGun,type:"FireSnakeGun",$Yi:"FireSnakeGun",wlg:2,x:0,y:0,tIR:8,thN:.6,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){for(var s=0;s<this.thC.length;s++){var e=this.thC[s],n=e.played,h=-Math.sin(n*this.SZP)*this.SEv;e.x=this.x+n*this.S_C,e.y=this.y+h,e.update(t,i),e.played+=t}},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n,h,a=t.teY||this.teY,o=t.t7b||this.t7b,r=s.width/a,l=t.wL_||(this.random()<.5?"Left":"Right"),u=t.wXU||s.height/2;"Left"==l?(this.bb9=this.kJ.width,this.x=-100,this.y=u,this.SEv=400,this.SPz=2*Math.PI,this.BTp=60,this.delay=100,this.BXZ=150,this.BRc=0,n=0,h=u):(this.bb9=-this.kJ.width,this.x=this.kJ.width+100,this.y=u,this.SEv=400,this.SPz=2*Math.PI,this.BTp=60,this.delay=100,this.BXZ=150,this.BRc=0,n=s.width,h=u),s.BB8(i,n,h),this.SZP=this.SPz/r,this.S_C=this.bb9/r,game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0;for(var t=i.BRc,e=0;e<o;e++){var n=new FireBall({$Yi:"FireSnakeGun-FireBall",x:i.x,y:i.y,radius:i.BTp,delay:i.delay,played:t});n.init(s),t-=i.BXZ,i.thC.unshift(n)}game.AEe("shot-snakegun")},1500)}}},null),FireWheelGun=GT.Class.create({LE:BulletGun,type:"FireWheelGun",$Yi:"FireWheelGun",wlg:1,x:0,y:0,rotation:0,$om:42e-5,radius:360,BG9:1,tIR:5,thN:.2,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.Bze=[],this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){if(this.wch){var s=this.x>this.B7e||this.x<this.BgQ,e=Math.cos(this.rotation),n=Math.sin(this.rotation);this.BHv(t,i);for(var h=0;h<this.thC.length;h++){var a=this.thC[h];if(s)a.remove();else{var o=this.Bze[h],r=e*o[0]-n*o[1],l=n*o[0]+e*o[1];a.x=this.x+r*this.BG9,a.y=this.y+l*this.BG9,a.update(t,i)}}}},BHv:function(t,i){},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=s.width/n,o=Math.abs(n/this.thN),r=t.wL_||(this.random()<.5?"Left":"Right"),l=t.wXU||s.height/2,u=(s.width+300)/a,c=0;this.BgQ=0-(this.radius+120),this.B7e=s.width+(this.radius+120),this.B1=0,this.BW=0,this.$om=0;var f,d;"Left"==r?(this.x=this.BgQ+10,this.y=l,f=0,d=l,c=this.Kiv*o):(this.x=this.B7e-10,this.y=l,u=-u,f=s.width,d=l,c=-this.Kiv*o),s.BB8(i,f,d);var g=this.radius;this.Bze.length=0,game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0,i.B1=u,i.BW=0,i.$om=c;for(var t=2*Math.PI/h,e=0,n=0;n<h;n++){var a=Math.cos(e)*g,o=Math.sin(e)*g;i.Bze.push([a,o]),e+=t;var r=new FireBall({$Yi:"FireWheelGun-FireBall",S9z:!1,x:i.x+a*i.BG9,y:i.y+o*i.BG9});r.init(s),i.thC.push(r)}game.AEe("shot-wheelgun")},1500)}}},null),FireRowGun=GT.Class.create({LE:BulletGun,type:"FireRowGun",$Yi:"FireRowGun",wlg:4,x:0,y:0,rotation:0,$om:0,radius:280,BG9:1,tIR:4,thN:.2,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.Bze=[],this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){if(this.wch){for(var s=this.x>this.B7e||this.x<this.BgQ,e=Math.cos(this.rotation),n=Math.sin(this.rotation),h=this.radius*(1+.5*(Math.sin(this.KeM/600)+.4)),a=2*h/(this.t7b-1),o=-h,r=0;r<this.thC.length;r++){var l=this.thC[r];if(s)l.remove(),o+=a;else{var u=[0,o];o+=a;var c=e*u[0]-n*u[1],f=n*u[0]+e*u[1];l.x=this.x+c*this.BG9,l.y=this.y+f*this.BG9,l.update(t,i)}}this.KeM+=t}},BHv:function(t,i){},fire:function(t){if(!this.tzZ){this.KeM=0,t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=s.width/n,o=Math.abs(n/this.thN),r=t.wL_||(this.random()<.5?"Left":"Right"),l=t.wXU||s.height/2,u=(s.width+300)/a,c=0;this.BgQ=0-(this.radius+120),this.B7e=s.width+(this.radius+120),this.B1=0,this.BW=0,this.$om=0;var f,d;"Left"==r?(this.x=this.BgQ+10,this.y=l,f=0,d=l,c=this.Kiv*o):(this.x=this.B7e-10,this.y=l,u=-u,c=-this.Kiv*o,f=s.width,d=l),s.BB8(i,f,d);this.radius;this.Bze.length=0,game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0,i.B1=u,i.BW=0,i.$om=c;for(var t=0;t<h;t++){var e=new FireBall({$Yi:"FireRowGun-FireBall",S9z:!1,x:i.x,y:i.y});e.init(s),e.SAy=!0,i.thC.push(e)}game.AEe("shot-wheelgun")},1500)}}},null),Laser=GT.Class.create({LE:Bullet,length:2048,Spt:4e3,BiV:3e3,alpha:0,B4l:1,$Yi:"Laser",delay:0,init:function(t){if(this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.x2||this.y2){var i=this.x2-this.x,s=this.y2-this.y;this.length=Math.sqrt(i*i+s*s),this.rotation=Math.atan2(s,i)}var e=[0,0],n=[this.length,0];this.Bze=[e,n];for(var h=Utils.AH("ray-line-0"),a=this.BRU=Utils.createTexture(h,"ray-line-0"),o=this.BL1=[],r=0;r<8;r++)o.push(Utils.createSpriteByTexture(a));for(var h=Utils.AH("ray-line-1"),a=this.Bqg=Utils.createTexture(h,"ray-line-1"),o=this.BSL=[],r=0;r<8;r++)o.push(Utils.createSpriteByTexture(a));for(var h=Utils.AH("ray-redline-0"),a=this.B2y=Utils.createTexture(h,"ray-redline-0"),o=this.BCy=[],r=0;r<8;r++)o.push(Utils.createSpriteByTexture(a));this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om)},$p8:function(t){if(t.disabled||this.BiV>0)return!1;var i=t.x-this.S1v,s=t.y-this.SXi,e=i*this.cos+s*this.sin;if(e>-t.radius&&e<this.length+t.radius){var n=e*this.cos,h=e*this.sin,a=Math.pow(n-i,2)+Math.pow(h-s,2);if(a<=t.KDw)return t.KBU(this),!0}return!1},Bxq:0,update:function(t,i){if(!this.disabled){if(this.delay>0)return void(this.delay-=t);this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),this.rotation+=this.$om*t,this.cos=Math.cos(this.rotation),this.sin=Math.sin(this.rotation),this.BE7(),this.tyI(t,i)&&(this.BiV>0?(this.B4l=1,this.BiV-=t,this.alpha+=3e-4*t,this.BiV<=0?this.B4l=.7:this.alpha=Math.min(.6,this.alpha)):this.B4l=Math.min(1,this.B4l+.0012*t),this.Inj(),this.kJ.player.dead||this.$p8(this.kJ.player))}},BE7:function(){var t=this.Bze[0],i=this.Bze[1];this.S1v=t[0]*this.cos-t[1]*this.sin+this.x,this.SXi=t[0]*this.sin+t[1]*this.cos+this.y,this.SSK=i[0]*this.cos-i[1]*this.sin+this.x,this.Slr=i[0]*this.sin+i[1]*this.cos+this.y},render:function(t,i,s){var e,n=this.BCy;this.BiV<=0?(e=.8,n=Math.sin(s/30)<=0?this.BL1:this.BSL):e=Math.max(.1,Math.min(1,this.alpha+.1*Math.sin(s/200)));var h=n[0].textureWidth,a=n[0].textureHeight*this.B4l;t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.setAlpha(e);var o=0,r=-a/2;n.forEach(function(i){t.drawDisplayObject(i,o,r,h,a),t.flush(),o+=i.textureWidth}),t.restore()}}),SawStick=GT.Class.create({LE:Bullet,radius:0,length:352,$Yi:"SawStick",init:function(t){this.kJ=t,this.length=(this.length||2*this.radius)>>0,this.radius=this.length/2>>0,this.BSj=this.length-32,this.Kku=this.BSj/2>>0,this.img=SawStick.BWR[this.length],this.cC=Utils.A6(this.img),this.cC.pivot.set(this.radius,this.img.height/2),this.BuV=Utils.AH("stick-fixer"),this.Bu2=Utils.createSprite(this.BuV);var i=[-this.Kku,0],s=[this.Kku,0];this.Bze=[i,s],this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om)},$p8:function(t){if(t.disabled)return!1;var i=t.x-this.S1v,s=t.y-this.SXi,e=i*this.cos+s*this.sin;if(e>-t.Kku&&e<this.BSj+t.Kku){var n=e*this.cos,h=e*this.sin,a=Math.pow(n-i,2)+Math.pow(h-s,2);if(a<=t.Kzu+10)return t.KBU(this),!0}return!1},update:function(t,i){this.disabled||(this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),this.rotation+=this.$om*t,this.cos=Math.cos(this.rotation),this.sin=Math.sin(this.rotation),this.BE7(),this.tyI(t,i)&&(this.Inj(),this.kJ.player.dead||this.$p8(this.kJ.player)))},BE7:function(){var t=this.Bze[0],i=this.Bze[1];this.S1v=t[0]*this.cos-t[1]*this.sin+this.x,this.SXi=t[0]*this.sin+t[1]*this.cos+this.y,this.SSK=i[0]*this.cos-i[1]*this.sin+this.x,this.Slr=i[0]*this.sin+i[1]*this.cos+this.y},render:function(t,i,s){this.cC.rotation=this.rotation,t.renderAt(this.cC,this.x,this.y),t.renderAt(this.Bu2,this.x-this.Bu2.textureWidth/2,this.y-this.Bu2.textureHeight/2),this.debug&&(t.strokeStyle="red",t.lineWidth=8,t.beginPath(),t.moveTo(this.S1v,this.SXi),t.lineTo(this.SSK,this.Slr),t.closePath(),t.stroke())}});SawStick.BQI=function(){var t=[160,224,288,352,416],i=Utils.AH("saw-stick"),s=i.img,e=i.sx,n=i.sy,h={},a={};t.forEach(function(t){if(!a[t]){var i=ImageUtils.TF(s,t,32,e,n);a[t]=i;var o=Utils.AH(i),r=Utils.createSprite(o);r.anchor.set(.5,.5),h[t]=r}}),SawStick.BWR=a,SawStick.BcV=h};var ThornBullet=GT.Class.create({LE:Bullet,$Yi:"ThornBullet",radius:15,$om:.003,visible:!0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.KDw=this.radius*this.radius,this.S1v=this.x,this.width=2*this.radius,this.height=2*this.radius,this.sT=this.width>>1,this.s8=this.height>>1,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.Xb=Utils.AH("thorn-tooth"),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5)},update:function(t,i){if(!this.disabled){if(this.SAy){if(this.delay>0)return void(this.delay-=t);if(this.path&&!this.path.disabled?this.path.HsQ(this,t):(this.m8(t,i),this.$Q4(t,i),this.x+=this.Bc,this.y+=this.BB),!this.tyI(t,i))return}this.Inj(),this.kJ.player.dead||this.$p8(this.kJ.player)}},$p8:function(t){if(this.off)return!1;if(!this.visible||this.disabled||t.disabled||!this.He(t.Ixh))return!1;var i=t.x-this.x,s=t.y-this.y,e=Math.sqrt(i*i+s*s);return e<this.radius+t.radius&&(t.KBU(this),!0)},render:function(t,i,s){!this.visible||this.disabled||!this.tGd,this.cC.rotation=this.rotation,this.cC.scale.set(this.scale,this.scale),t.renderAt(this.cC,this.x,this.y),game.debug&&t.$O(this.x,this.y,this.radius,16711680,2)}}),SawStickGun=GT.Class.create({LE:BulletGun,type:"SawStickGun",$Yi:"SawStickGun",wlg:3,x:0,y:0,rotation:0,$om:8e-4,length:352,tIR:5,thN:.1,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.length=this.length||2*this.radius,this.radius=this.length/2,this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){if(this.wch)for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.update(t,i),(e.x>this.B7e||e.x<this.BgQ)&&e.remove()}},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=(t.t7b||this.t7b,s.width/n),a=t.wL_||(this.random()<.5?"Left":"Right"),o=t.wXU||s.height/2,r=(s.width+300)/h,l=0;this.BgQ=0-(this.radius+100),this.B7e=s.width+(this.radius+100);var u,c;"Left"==a?(this.x=this.BgQ+10,this.y=o,u=0,c=o,l=this.Kiv):(this.x=this.B7e-10,this.y=o,r=-r,l=-this.Kiv,u=s.width,c=o),s.BB8(i,u,c);var f=this.length;game.kJ.AXG.Mq(function(){i.wch=!0,i.$5u=!0;var t=new SawStick({S9z:!1,length:f,x:i.x,y:i.y,B1:r,BW:0,$om:l});t.init(s),i.thC.push(t)},1e3)}}},null),ThornWheelGun=GT.Class.create({LE:BulletGun,type:"ThornWheelGun",$Yi:"ThornWheelGun",wlg:5,x:-100,y:-100,rotation:0,$om:.01,BX:.25,Bc:0,BB:0,dzu:0,radius:50,BG9:1,tIR:8,thN:.6,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN,this.Xb=Utils.AH("thorn-wheel"),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5),this.scale=1,this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){for(var s=0;s<this.thC.length;s++){var e=this.thC[s];this.wch||(this.target?(e.x+=this.Bc,e.y+=this.BB):(e.x+=this.x-this.gj,e.y+=this.y-this.ge)),e.update(t,i)}},$p8:function(t){var i=t.x-this.x,s=t.y-this.y,e=Math.sqrt(i*i+s*s);if(e<this.radius+t.radius)return t.KBU(this),!0;for(var n=0;n<this.thC.length;n++){var h=this.thC[n];if(h.$p8(t))return!0}return!1},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=s.width/n,o=t.wL_||(this.random()<.5?"Left":"Right"),r=t.wXU||s.height/2,l=0,u=0,c=(s.width+300)/a,f=0;this.BgQ=0-(this.radius+300),this.B7e=s.width+(this.radius+300);var d,g;"Left"==o?(l=this.x=this.BgQ+10,this.y=r,d=0,g=r,u=500,f=this.Kiv):(l=this.x=this.B7e-10,this.y=r,c=-c,f=-this.Kiv,d=s.width,g=r,u=s.width-500),s.BB8(i,d,g),game.kJ.AXG.Mq(function(){var t=i.radius-2,e=2*Math.PI/h,a=-Math.PI/2+i.rotation;i.$5u=!0,i.moveTo(u,r,function(){i.KtV=!0;for(var o=0;o<h;o++){var u=Math.cos(a),c=Math.sin(a),f=u*t,d=c*t,g=new ThornBullet({S9z:!1,B1:n*u,BW:n*c,x:i.x+f*i.BG9,y:i.y+d*i.BG9,rotation:a});g.init(s),i.thC.push(g),a+=e}s.AXG.Mq(function(){i.wch=!0,i.$5u=!0;i.B1,i.BW,i.$om;i.B1=0,i.BW=0,i.$om=0;for(var t=0;t<h;t++){var e=i.thC[t];e.SAy=!0,e.Spt=2500}game.AEe("shot-sawgun"),s.AXG.Mq(function(){i.KtV=!1,i.$om=i.Kiv,i.moveTo(l,r,function(){})},500)},1200)})},1e3)}},render:function(t,i,s){!this.visible||this.disabled||!this.tGd,Utils.K5(this.thC,t,i,s),this.cC.rotation=this.rotation,this.cC.scale.set(this.scale,this.scale),t.renderAt(this.cC,this.x,this.y),game.debug&&t.$O(this.x,this.y,this.radius,16711680,2)}}),ThornRainGun=GT.Class.create({LE:BulletGun,type:"ThornRainGun",$Yi:"ThornRainGun",wlg:0,x:-100,y:-100,radius:50,BG9:1,tIR:11,thN:0,BSs:5e-4,margin:300,Bmj:350,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN,this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om)},w7P:function(t,i){for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.update(t,i)}},$p8:function(t){for(var i=0;i<this.thC.length;i++){var s=this.thC[i];if(s.$p8(t))return!0}return!1},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=(s.width/n,this.BSs),o=t.wL_||(this.random()<.5?"Left":"Right"),r=(t.wXU||s.height/2,this.margin),l=(s.width-2*r)/(h-1)>>0,u=r,c=this.y;"Left"==o?(u=r,l=l):(u=s.width-r,l=-l);for(var f=0,d=0;d<h;d++){var g=new ThornBullet({B1:0,BW:n,BC:a,x:u,y:c,rotation:Math.PI/2,delay:f});g.init(s),g.SAy=!0,i.thC.push(g),u+=l,f+=this.Bmj}i.$5u=!0,i.wch=!0}}}),Pendulum=GT.Class.create({LE:Gun,rotation:0,radius:540,BTp:100,B5r:100,SPz:3600,BmT:500,disabled:!1,$Yi:"Pendulum",init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.B8x=70,this.scale=1,this.KDw=this.radius*this.radius,this.BrM=this.BTp*this.BTp,this.BUv=this.radius-this.BTp,this.Bbb=0,this.BjV=0,this.width=2*this.radius+8,this.height=this.radius+8,this.sT=10,this.s8=4,this.Ixh=[],this.Inj(),this.Kiv=Math.abs(this.$om),this.BN7=Math.PI*this.B5r/180/2,this.Bew=2*Math.PI/this.SPz,this.BSO=Utils.AH("chain"),this.BfO=Utils.createSprite(this.BSO),this.BEG=Utils.AH("thorn-ball"),this.Bp2=Utils.createSprite(this.BEG),this.Bp2.scale.set(this.scale,this.scale),this.Bp2.anchor.set(.5,.5),this.Bp2.position.set(this.BUv,0),this.BfO.addChild(this.Bp2),this.now=0},$dU:function(t,i){this.now+=t;this.rotation;this.rotation=Math.PI/2+Math.sin((this.now+this.BmT)*this.Bew)*this.BN7},$p8:function(t){if(this.disabled||this.off||this.Lm||t.disabled)return!1;this.BE7();var i=t.x-this.Bbb,s=t.y-this.BjV,e=Math.sqrt(i*i+s*s);return e<this.BTp+t.radius-4&&(t.KBU(this),!0)},BE7:function(){this.cos=Math.cos(this.rotation),this.sin=Math.sin(this.rotation),this.Bbb=this.BUv*this.cos+this.x,this.BjV=this.BUv*this.sin+this.y},render:function(t,i,s){this.disabled||(t.save(),t.setAlpha(this.alpha),t.translate(this.x,this.y),t.rotate(this.rotation),t.renderAt(this.BfO,0,-this.BfO.textureHeight/2),t.restore(),game.debug&&t.$O(this.Bbb,this.BjV,this.BTp,65280,2),t.globalAlpha=1)}},null),FireFloatGun=GT.Class.create({LE:FireWheelGun,type:"FireFloatGun",$Yi:"FireFloatGun",wlg:0,x:0,y:0,rotation:0,$om:8e-4,radius:80,BG9:1,Bmd:1,BPT:4,BJt:3e-4,Bq7:0,tIR:4,thN:0,$5u:!0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.Bq7=this.BJt,this.Bze=[],this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om),this.$va(t),this.fire()},fire:function(t){if(!this.tzZ){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=s.width/n,o=1,r=(t.wL_||(this.random()<.5?"Left":"Right"),t.wXU||s.height/2,(s.width+300)/a),l=this.Kiv*o;this.BgQ=0-(this.radius+120),this.B7e=s.width+(this.radius+120),this.B1=0,this.BW=0,this.$om=0;var u=this.radius;this.Bze.length=0,i.wch=!0,i.$5u=!0,i.B1=r,i.BW=0,i.$om=l;for(var c=2*Math.PI/h,f=0,d=0;d<h;d++){var g=Math.cos(f)*u,m=Math.sin(f)*u;i.Bze.push([g,m]),f+=c;var p=new FireBall({$Yi:"FireFloatGun-FireBall",BIR:!0,S9z:!1,x:i.x+g*i.BG9,y:i.y+m*i.BG9});p.init(s),i.thC.push(p)}}},BHv:function(t,i){this.BG9<=this.Bmd?(this.BG9=this.Bmd,this.Bq7=this.BJt):this.BG9>=this.BPT&&(this.BG9=this.BPT,this.Bq7=-this.BJt),this.BG9+=this.Bq7*t}},null),FireRowFloatGun=GT.Class.create({LE:BulletGun,type:"FireRowFloatGun",$Yi:"FireRowFloatGun"}),SawStickFloatGun=GT.Class.create({LE:BulletGun,type:"SawStickFloatGun",$Yi:"SawStickFloatGun",wlg:0,x:0,y:0,rotation:0,$om:8e-4,length:352,$5u:!0,S9z:!1,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om),this.$va(t),this.fire()},w7P:function(t,i){if(this.wch)for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.x=this.x,e.y=this.y,e.update(t,i)}},fire:function(t){var i=this,s=i.kJ;i.wch=!0,i.$5u=!0;var e=new SawStick({$Yi:"SawStickFloatGun-SawStick",S9z:!1,length:i.length,x:i.x,y:i.y,rotation:i.rotation,$om:i.$om});e.init(s),i.thC.push(e)}},null),ThornWheelFloatGun=GT.Class.create({LE:ThornWheelGun,type:"ThornWheelFloatGun",$Yi:"ThornWheelFloatGun",wlg:4,x:-100,y:-100,rotation:0,$om:.01,radius:50,BG9:1,tIR:8,thN:.6,B4c:!1,BMn:1e3,init:function(t){if(this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.t7b=this.t7b||this.tIR,this.teY=this.teY||this.thN,this.Xb=Utils.AH("thorn-wheel"),this.cC=Utils.createSprite(this.Xb),this.cC.anchor.set(.5,.5),this.scale=1,this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om),this.$va(t),this.B4c){var i=this;t.AXG.Mq(function(){i.fire()},this.BMn)}},fire:function(t){t=t||{};var i=this,s=this.kJ;this.wch=!1,this.thC.length=0;for(var e in t)this.wXK[e]=t[e];t=this.wXK;var n=t.teY||this.teY,h=t.t7b||this.t7b,a=s.width/n,o=(t.wL_||(this.random()<.5?"Left":"Right"),t.wXU||s.height/2,(s.width+300)/a,s.height+(this.radius+30),this.radius-2),r=2*Math.PI/h,l=-Math.PI/2+this.rotation;i.$5u=!0,s.AXG.Mq(function(){i.KtV=!0;for(var t=0;t<h;t++){var e=Math.cos(l),a=Math.sin(l),u=e*o,c=a*o,f=new ThornBullet({S9z:!1,B1:n*e,BW:n*a,x:i.x+u*i.BG9,y:i.y+c*i.BG9,rotation:l});f.init(s),i.thC.push(f),l+=r}s.AXG.Mq(function(){i.H_i=!0,s.AXG.Mq(function(){i.wch=!0;for(var t=0;t<h;t++){var s=i.thC[t];s.SAy=!0,s.Spt=2500}game.AEe("shot-sawgun")},900),s.AXG.Mq(function(){i.H_i=!1,i.KtV=!1},1200),s.AXG.Mq(function(){i.fire()},3e3)},300)},1e3)},render:function(t,i,s){!this.visible||this.disabled||!this.tGd,Utils.K5(this.thC,t,i,s),this.cC.rotation=this.rotation,this.cC.scale.set(this.scale,this.scale),t.renderAt(this.cC,this.x,this.y),game.debug&&t.$O(this.x,this.y,this.radius,16711680,2)}});ThornWheelFloatGun.BQI=function(){var t=Utils.AH("thorn-wheel"),i=Utils.createSprite(t);i.anchor.set(.5,.5),ThornWheelFloatGun.BcV=i};var PendulumFloatGun=GT.Class.create({LE:BulletGun,type:"PendulumFloatGun",$Yi:"PendulumFloatGun",wlg:0,x:0,y:0,radius:540,B5r:100,SPz:7e3,rotation:0,$om:8e-4,length:352,$5u:!0,init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je;var i=this.tc4||this.tTN;i&&null===this.x&&null===this.y&&(this.x=i[0],this.y=i[1]),this.thC=[],this.wXK={},this.Kiv=Math.abs(this.$om),this.$va(t),this.fire()},w7P:function(t,i){if(this.wch)for(var s=0;s<this.thC.length;s++){var e=this.thC[s];e.x=this.x,e.y=this.y,e.update(t,i)}},fire:function(t){var i=this,s=i.kJ;i.wch=!0,i.$5u=!0;var e=new Pendulum({off:!1,$Yi:"PendulumFloatGun-Pendulum",x:i.x,y:i.y,rotation:i.rotation,radius:i.radius,B5r:i.B5r,SPz:i.SPz,BmT:3*i.SPz/4});e.init(s),i.thC.push(e)}},null),GearManager=GT.Class.create({init:function(t){this.kJ=t,this.random=this.random||t.random,this.Je=this.Je||t.Je,this.By6={},this.BYs=[],this.BRZ=[],this.BUp(t),this.BsQ(t),this.BKq(t),this.Bjb(t),this.Bkh(t),this.B$n=!0,this.BEY=!0},BUp:function(t){var i=(t.BYs||GunConfig.BYs).slice(0),s={};t.Bz1&&t.Bz1.forEach(function(t){s[t]=!0});var e=(t.BIE||GunConfig.BIE).slice(0),n=(t.BrH||GunConfig.BrH).slice(0),h=[];n.forEach(function(t){s[t]||h.push(t)});var a=(t.BOZ||GunConfig.BOZ).slice(0),o=this;this.B15=[],i.forEach(function(t){Array.isArray(t)||(t=[t]);var i=t[0];if(!s[i])for(var e=t[1]||1,n=0;n<e;n++)o.B15.push(i)}),this.BIM=[],e.forEach(function(t){for(var i=t[0],s=t[1]||1,e=0;e<s;e++)o.BIM.push(i)}),this.B15=Utils.CX(this.B15,3),this.BIM=Utils.CX(this.BIM,3),this.kJ.CG(this.B15),this.kJ.CG(this.BIM);var r=h.concat(this.B15),l=a.concat(this.BIM);this.B15=[],this.BIM=[],this.Bny=[];for(var u=0;u<r.length;u++){var c=r[u];this.B15.push(c,c),this.kJ.random()<.5?this.Bny.push("Left","Right"):this.Bny.push("Right","Left")}this.BIM=l,this.BIW=0,this.BdS=0,this.Bmy=0,this.BNa=0;var c=new DartGun({id:"DartGun"});c.init(this.kJ),this.By6[c.id]=c,this.BYs.push(c);var c=new FireSnakeGun({id:"FireSnakeGun"});c.init(this.kJ),this.By6[c.id]=c,this.BYs.push(c);var c=new FireWheelGun({id:"FireWheelGun"});c.init(this.kJ),this.By6[c.id]=c,this.BYs.push(c);var c=new LaserGun({id:"LaserGun"});c.init(this.kJ),this.By6[c.id]=c,this.BYs.push(c);var c=new SawStickGun({id:"SawStickGun"});c.init(this.kJ),this.By6[c.id]=c,this.BYs.push(c)},BsQ:function(t){var i=new Pendulum({id:"Pendulum-top-left",tc4:[330,-550],tTN:[330,-50],BX:.3,radius:540,B5r:90,SPz:6e3,BmT:4500});i.init(this.kJ),this.By6[i.id]=i;var i=new Pendulum({id:"Pendulum-top-right",tc4:[t.width-330,-550],tTN:[t.width-330,-50],BX:.3,radius:540,B5r:90,SPz:6e3,BmT:1500});i.init(this.kJ),this.By6[i.id]=i;var i=new Pendulum({id:"Pendulum-top",tc4:[t.width/2,-550],tTN:[t.width/2,-50],BX:.3,radius:640,B5r:100,SPz:7e3,BmT:3500});i.init(this.kJ),this.By6[i.id]=i},BKq:function(t){var i=new SawGun({id:"SawGun-top-left",tc4:[t.width/2-450,-550],tTN:[t.width/2-450,-20],BX:.3,rotation:Math.PI/2,KSi:.9,Kt_:Math.PI-.9,$om:4e-4});i.init(this.kJ),this.By6[i.id]=i;var i=new SawGun({id:"SawGun-top-right",tc4:[t.width/2+450,-550],tTN:[t.width/2+450,-20],BX:.3,rotation:Math.PI/2,KSi:.9,Kt_:Math.PI-.9,$om:-4e-4});i.init(this.kJ),this.By6[i.id]=i;var i=new SawGun({id:"SawGun-top",tc4:[t.width/2+0,-550],tTN:[t.width/2+0,-20],BX:.3,
rotation:Math.PI/2,KSi:.9,Kt_:Math.PI-.9,$om:4e-4});i.init(this.kJ),this.By6[i.id]=i;var i=new SawGun({id:"SawGun-top-move",tc4:[t.width/2+0,-550],tTN:[t.width/2+0,-20],BX:.3,to8:KeyPaths["top-3"],rotation:Math.PI/2,$om:0});i.init(this.kJ),this.By6[i.id]=i;var i=new SawGun({id:"SawGun-bottom",tc4:[t.width/2,t.height+570],tTN:[t.width/2,t.height+70],BX:.3,rotation:-Math.PI/2,KSi:-Math.PI+.9,Kt_:-.9,$om:4e-4});i.init(this.kJ),this.By6[i.id]=i;var i=new SawGun({id:"SawGun-bottom-move",tc4:[t.width/2,t.height+570],tTN:[t.width/2,t.height+70],BX:.3,to8:KeyPaths["bottom-3-r"],rotation:-Math.PI/2,$om:0});i.init(this.kJ),this.By6[i.id]=i},Bjb:function(t){var i=new MachineGun({id:"MachineGun-top-left",tc4:[-630,-340],tTN:[-130,160],BX:.3,$om:4e-4,rotation:.5,KSi:.5,Kt_:Math.PI/2-.5,t7b:3,w4P:500});i.init(t),this.By6[i.id]=i;var i=new MachineGun({id:"MachineGun-top-right",tc4:[t.width+130+500,-340],tTN:[t.width+130,160],BX:.3,$om:-4e-4,rotation:Math.PI-.5,KSi:Math.PI/2+.5,Kt_:Math.PI-.5,t7b:3,w4P:500});i.init(t),this.By6[i.id]=i;var i=new MachineGun({id:"MachineGun-top",tc4:[t.width/2,-550],tTN:[t.width/2,-50],BX:.3,$om:4e-4,rotation:Math.PI/2,KSi:.9,Kt_:Math.PI-.9});i.init(t),this.By6[i.id]=i;var i=new MachineGun({id:"MachineGun-top-move",tc4:[t.width/2,-550],tTN:[t.width/2,-50],to8:KeyPaths["top-3"],BX:.3,$om:0,rotation:Math.PI/2,KSi:.9,Kt_:Math.PI-.9});i.init(t),this.By6[i.id]=i;var i=new MachineGun({id:"MachineGun-bottom",tc4:[t.width/2,t.height+570],tTN:[t.width/2,t.height+70],BX:.3,$om:0,rotation:-Math.PI/2,KSi:-Math.PI+.9,Kt_:-.9});i.init(t),this.By6[i.id]=i;var i=new MachineGun({id:"MachineGun-bottom-move",tc4:[t.width/2,t.height+570],tTN:[t.width/2,t.height+70],to8:KeyPaths["bottom-3-r"],BX:.3,$om:0,rotation:-Math.PI/2,KSi:-Math.PI+.9,Kt_:-.9});i.init(t),this.By6[i.id]=i},Bkh:function(t){var i=t.stage,s=(t.S05,[]),e=i.BKG,n=i.Br1,h=e[0],a=n[0];h&&a?h.forEach(function(t){s.push(t),a.forEach(function(i){s.push(i),s.push(i.concat(t))})}):h?s=s.concat(h):a&&(s=s.concat(a)),this.kJ.CG(s);for(var o=3,r=0;r<s.length;r++){var l=s[r];l.CMa=r,l.length<o&&(s.splice(r,1),r--)}s.sort(function(t,i){return t.length-i.length||t.CMa-i.CMa}),i.BJq=s,i.BMw=0},Bmh:function(t){this.Bkh(this.kJ)},B8E:function(){var t=(this.kJ.BNC,this.kJ.StK,this.kJ.S05,this.kJ.stage),i=this.kJ.player.star;this.BRZ.length=0;var s=this,e=this.By6,n=t.BJq,h=n[t.BMw];h&&h.forEach(function(t){var n=e[t];"Pendulum"==n.$Yi?s.BRZ.push(n):("MachineGun"==n.$Yi&&(n.t7b=Math.min(5,3+i),n.teY=n.thN*(n.t7b/3)),s.BRZ.unshift(n))}),t.BMw=(t.BMw+1)%n.length},BoS:function(t){var i=this.kJ.BNC,s=t.id,e=this.Bny[this.Bmy],n=this.BIM[this.BdS],h=1500,a=t.thN;return a*=1+i/4,{BE8:s,delay:h,wXU:this.kJ.height/2+n,wL_:e,teY:a}},BKg:function(){var t=this;this.BEY=!1;var i=this.B15[this.BIW],s=this.By6[i];if(s){var e=this.BoS(s),n=e.delay;game.kJ.AXG.Mq(function(){s.t22=function(){console.log("sideGun fireFinished"),t.BEY=!0},s.fire(e)},n)}this.BIW=(this.BIW+1)%this.B15.length,this.BdS=(this.BdS+1)%this.BIM.length,this.Bmy=(this.Bmy+1)%this.Bny.length,this.BNa++},B8j:function(t){var i=this;i.B$n=!1,i.B03=!0,this.Blx(function(){i.B03=!1,i.B8E(),i.BYb(),t&&t(i)})},Blx:function(t){var i=this,s=this.BRZ.length,e=function(e){s--,s<1&&t&&t(i)};s?this.BRZ.forEach(function(t){t.t32(e)}):e()},BYb:function(t){var i=this,s=this.BRZ.length,e=function(){s--,s<1&&t&&t(i)};s?this.BRZ.forEach(function(t){t.t2G(e)}):e()},update:function(t,i){this.B$n&&this.B8j(),this.BEY&&this.BKg(),this.BYs.forEach(function(s){s.update(t,i)}),this.BRZ.forEach(function(s){s.update(t,i)})},BZJ:function(t){}}),BodyExplode=GT.Class.create({LE:Entity,x:0,y:0,sT:0,s8:0,head:!1,CDn:"body",alpha:1,Spt:1e3,init:function(t){var i=(this.CDn,3),s=4,e=Utils.AH(this.CDn),n=e.w/i,h=e.h/s;this.sT=n>>1,this.s8=h>>1,this.Ce_=[];for(var a=0;a<s;a++)for(var o=0;o<i;o++){var r=n+(o>0?Utils.Je(-3,0):0),l=h+(a>0?Utils.Je(-3,0):0),u=o*n+e.x,c=a*h+e.y,f={img:e.img,sx:u,sy:c,sw:r,sh:l},d=Utils.createSprite(f,0,0);d.anchor.set(.5,.5),d.ox=Utils.Je(-2,2),d.oy=Utils.Je(-2,2),d.cx=u+(r>>1)+d.ox,d.cy=c+(l>>1)+d.oy,d.rotation=Utils.Je(-8,8)/100,d.AM6=Utils.Je(-18,18)/100,d.Afa=Utils.Je(-90,10)/100,d.BpZ=Utils.Je(-2,2)/1e3,d.Snq=8e-4,this.Ce_.push(d)}this.alpha=1.1,this.BK1=.0025},update:function(t,i){this.Ce_.forEach(function(i){i.AM6*=.9999;var s=i.AM6*t,e=i.Afa;i.Afa=e+i.Snq*t;var n=(e+i.Snq)/2*t;i.BpZ*=.9999;var h=i.BpZ*t;i.cx+=s,i.cy+=n,i.rotation+=h}),this.alpha=Math.max(0,Math.min(1,this.alpha+this.BK1)),this.BK1*=1.1,this.Spt-=t,this.Spt<=0&&(this.Uhf(t,i),this.remove()),this.Sg4=this.y},Uhf:function(t,i){},render:function(t,i,s){var e=this.x-this.sT,n=this.y-this.s8;t.setAlpha(this.alpha),this.Ce_.forEach(function(i){t.renderAt(i,i.cx+e,i.cy+n)}),t.restoreAlpha()}}),RemoteGuide=GT.Class.create({LE:Entity,Xb:null,Spt:3800,rotation:Math.PI/2,$om:-.002,KSi:0,Kt_:1/0,qG:.4,e_:.4,delay:800,alpha:1,init:function(t){this.kJ=t,this.Xb=Utils.AH("guide-remote"),this.sT=this.Xb.w-20,this.s8=this.Xb.h/2},update:function(t,i){return this.delay>0?void(this.delay-=t):(this.rotation+=this.$om*t,this.rotation=Math.min(this.Kt_,Math.max(this.KSi,this.rotation)),this.Spt<500&&(this.alpha=this.Spt/500),void(this.Spt-=t))},render:function(t,i,s){t.save(),t.translate(this.x,this.y),t.scale(this.qG,this.e_),t.rotate(this.rotation),t.globalAlpha=this.alpha,Utils.KP(t,this.Xb,-this.sT,-this.s8),t.restore(),this.Spt<0&&(this.remove(),this.kJ.BSA=null)}}),HpBar=CUI.Class.create({LE:Entity,KeM:0,BSE:7e4,scale:1,init:function(t){this.kJ=t,this.B8r=Utils.AH("hpbar-bg"),this.Bic=Utils.createSprite(this.B8r),this.Bic.anchor.set(.5,.5);var i=this.BIV=Utils.AH("hpbar-value"),s=Utils.createTexture(i);s.orig=new PIXI.Rectangle(i.sx,i.sy,i.sw,i.sh),s.trim=s.frame,this.BRW=Utils.createSpriteByTexture(s),this.BRW.anchor.set(.5,.5),this.BeH=Utils.AH("white"),this.BeH.sw=6,this.BeH.sh=this.BIV.sh,this.BKC=Utils.createSprite(this.BeH),this.BKC.tint=16768409,this.BLb=Utils.AH("icon_stomach"),this.BBl=Utils.AH("icon_stomach-small"),this.ByO=this.BLb,this.BZx=Utils.createSprite(this.BBl),this.Bii=this.BZx,this.x=t.ZQ+(t.jL-this.Bic.textureWidth)/2,this.y=t.oT+(t.jc-90),this.KeM=this.BSE},SLr:!1,render:function(t,i,s){this.KeM-=i,this.KeM<0&&(this.KeM=0);var e=this.kJ,n=e.player;n.S9J&&e.Bve&&(n=e.Bve[0]);n.Kxq&&!e.KiT?(this.BDa=!0,this.ByO=this.BBl):(this.ByO=this.BLb,this.BDa=!1);var h=Math.min(1,n.Kbb/n.KpX),a=(Math.min(1,n.KMt/n.Kd5),0),o=0;this.BDa&&!this.kJ.paused&&(a=Utils.Je(-3,3),o=Utils.Je(-2,2)),this.Bic.scale.set(this.scale),this.BRW.scale.set(this.scale);var r=this.x,l=this.y,u=this.B8r;t.renderAt(this.Bic,r+u.w/2+a,l+u.h/2+o),r+=4,l+=4;var c=t.getAlpha();if(this.BDa?t.setAlpha(.5+.6*(Math.sin(s/100)+1)):t.setAlpha(1),h>0){var u=this.BIV,f=u.w*h>>0;t.renderPartAt(this.BRW,u.x,u.y,u.w*h,u.h,r+u.w/2+a,l+u.h/2+o),1===this.scale&&(this.BKC.alpha=.4+.4*(.5*(Math.sin(s/100)+1)),t.renderAt(this.BKC,r+a+f-2,l+o))}t.setAlpha(c)}}),TimeBar=GT.Class.create({BFJ:0,Bws:null,Bcy:0,KeM:0,BsG:1,x:0,y:0,width:100,height:30,B13:0,process:0,init:function(t){this.kJ=t,this.Bws=this.Bws||ChallengeConfig.B39,this.B45(),this.BIB=Utils.AH("star"),this.BSk=Utils.AH("star-dark"),this.B8r=Utils.AH("timebar-bg"),this.Bic=Utils.createSprite(this.B8r),this.BIV=Utils.AH("timebar-value"),this.BRW=Utils.createSprite(this.BIV),this.B9R=Utils.createSprite(this.BIB),this.BUy=Utils.createSprite(this.BIB),this.BNk=Utils.createSprite(this.BSk),this.BPK=Utils.createSprite(this.BIB),this.BtD=Utils.createSprite(this.BSk),this.BRn=Utils.createSprite(this.BIB),this.BQ8=Utils.createSprite(this.BSk)},update:function(t,i){this.BFJ>0&&(this.BFJ-=t),this.KeM+=t;var s=this.kJ.player;this.KeM>=this.BsG&&!s.dead&&(this.BFJ=500,this.kJ.B8D(),this.B13++,this.B45()),s.star=this.B13,this.process=Math.min(1,this.KeM/this.BsG)},B45:function(){this.KeM=0,this.BsG=this.Bws[this.Bcy],this.Bcy=Math.min(this.Bcy+1,this.Bws.length-1)},render:function(t,i,s){var e=4,n=(this.width-2*e)*(this.BFJ>0?1:this.process);t.renderAt(this.Bic,this.x,this.y),this.BRW._texture._frame.width=n,this.BRW._texture.orig.width=n,t.renderPartAt(this.BRW,0,0,n,this.BRW.textureHeight,this.x+e,this.y+e);var h=this.BIB,a=this.x+this.width-e,o=this.y+this.height/2,h=this.B13>0?this.BIB:this.BSk,r=this.B13>0?this.BUy:this.BNk;t.renderAt(r,a-h.w/2+0,o-h.h/2);var h=this.B13>1?this.BIB:this.BSk,r=this.B13>1?this.BPK:this.BtD;t.renderAt(r,a-h.w/2+25,o-h.h/2);var h=this.B13>2?this.BIB:this.BSk,r=this.B13>2?this.BRn:this.BQ8;t.renderAt(r,a-h.w/2+50,o-h.h/2)}}),AnimationConfig=AnimationConfig||{};!function(){for(var t=47,i=56,s={idle:{frames:[0,1,2,3,1,2,3,1,2,3],duration:200,loop:!0},jump:{frames:1,duration:90,loop:!0},fall:{frames:2,duration:90,loop:!0},airjump:{frames:4,duration:90,loop:!1},walk:{frames:4,duration:90,loop:!0},dead:{name:"dead",frames:6,duration:110,loop:!1,oy:-70}},e=0;e<Config.U0+1;e++){var n="hero"+e,h=AnimationConfig[n]={};for(var a in s){var o=s[a];o.ox=o.ox||0===o.ox?o.ox:-t,o.oy=o.oy||0===o.oy?o.oy:-i;var r={};for(var l in o)r[l]=o[l];var u;e==Config.UZ?(u="ghost",r.frames=2,r.duration=120,r.loop=!0):u=o.Aq||n+"_"+(o.name||a);var c=Sprite.Ca6(r,u);h[a]=c}}}();var AnimationConfig=AnimationConfig||{};!function(){var t={fireball:{Aq:"fire",frames:[0,1,2,3,0,1,2,3],duration:80,loop:!0,ox:-66,oy:-80,visible:!1},coin:{Aq:"coin",frames:[0,1,2,3],duration:90,loop:!0,ox:-16,oy:-18,visible:!1}},i="enemy",s=AnimationConfig[i]={};for(var e in t){var n=t[e],h=n.Aq||i+"_"+(n.name||e),a=Sprite.Ca6(n,h);s[e]=a}}();var AnimationConfig=AnimationConfig||{};!function(){var t={explosion:{Aq:"explosion",frames:[0,1,2,3],duration:60,loop:!1,ox:-27,oy:-27,visible:!1},gunfire:{Aq:"gunfire",frames:[1,1,1],duration:10,loop:!1,ox:-4,oy:-56,visible:!1}},i="effect",s=AnimationConfig[i]={};for(var e in t){var n=t[e],h=n.Aq||i+"_"+(n.name||e),a=Sprite.Ca6(n,h);s[e]=a}}();var KeyPoints,KeyOutPoints,KeyPaths;!function(){var t=Config.width,i=Config.height,s=Config.minHeight,e=(i-s)/2,n=50,h=50,a=50,o=70;KeyPoints={10:[0-n,0-a],11:[1*t/5,0-a],0:[1*t/2,0-a],1:[4*t/5,0-a],2:[t+h,0-a],2.5:[t+h,0+e-a],3:[t+h,i/2],3.5:[t+h,i-e+o],4:[t+h,i+o],5:[4*t/5,i+o],6:[1*t/2,i+o],7:[1*t/5,i+o],8:[0-n,i+o],8.5:[0-n,i-e+o],9:[0-n,i/2],9.5:[0-n,0+e-a]};var r=KeyPoints,l=100;KeyOutPoints={10:[r[10][0]-l,r[10][1]-l],11:[r[11][0],r[11][1]-l],0:[r[0][0],r[0][1]]-l,1:[r[1][0],r[1][1]-l],2:[r[2][0]+l,r[2][1]-l],2.5:[r[2.5][0]+l,r[2.5][1]],3:[r[3][0]+l,r[3][1]],3.5:[r[3.5][0]+l,r[3.5][1]],4:[r[4][0]+l,r[4][1]+l],5:[r[5][0],r[5][1]+l],6:[r[6][0],r[6][1]+l],7:[r[7][0],r[7][1]+l],8:[r[8][0]-l,r[8][1]+l],8.5:[r[8.5][0]-l,r[8.5][1]],9:[r[9][0]-l,r[9][1]],9.5:[r[9.5][0]-l,r[9.5][1]]};var u={"top-0":{d5R:[KeyPoints[10],KeyPoints[0],KeyPoints[2]],offset:[-100,0]},"top-1":{d5R:[KeyPoints[10],KeyPoints[0]],offset:[-100,0]},"top-2":{d5R:[KeyPoints[0],KeyPoints[2]],offset:[-100,0]},"top-3":{d5R:[KeyPoints[11],KeyPoints[0],KeyPoints[1]],offset:[-300,0]},"left-0":{d5R:[KeyPoints[9.5],KeyPoints[9],KeyPoints[8.5]],offset:[0,-100]},"right-0":{d5R:[KeyPoints[2.5],KeyPoints[3],KeyPoints[3.5]],offset:[0,-100]},"bottom-0":{d5R:[KeyPoints[8],KeyPoints[6],KeyPoints[4]],offset:[-100,0]},"bottom-1":{d5R:[KeyPoints[8],KeyPoints[6]],offset:[-100,0]},"bottom-2":{d5R:[KeyPoints[6],KeyPoints[4]],offset:[-100,0]},"bottom-3":{d5R:[KeyPoints[7],KeyPoints[6],KeyPoints[5]],offset:[-300,0]}};for(var c in u){var f=u[c],d=f.d5R,g=f.offset,m=g[0]/2,p=g[1]/2,v=d[0],w=d[d.length-1];v[0]<=w[0]?(v[0]-=m,w[0]+=m):(v[0]+=m,w[0]-=m),v[1]<=w[1]?(v[1]-=p,w[1]+=p):(v[1]+=p,w[1]-=p)}KeyPaths={};for(var c in u){var f=u[c],b=f.d5R,d=[];b.forEach(function(t){d.push(t)});var C=new Path({d5R:d,closed:!0,loop:!0});C.init(),KeyPaths[c]=C;var d=[];b.forEach(function(t){d.unshift(t)});var C=new Path({d5R:d,closed:!0,loop:!0});C.init(),KeyPaths[c+"-r"]=C}}();var GunTypes={BulletGun:BulletGun,DartGun:DartGun,FireFloatGun:FireFloatGun,FireSnakeGun:FireSnakeGun,FireWheelGun:FireWheelGun,LaserGun:LaserGun,MachineGun:MachineGun,SawGun:SawGun,FireRowGun:FireRowGun,SawStickGun:SawStickGun,ThornWheelGun:ThornWheelGun,SawStickFloatGun:SawStickFloatGun,FireRowFloatGun:FireRowFloatGun,ThornWheelFloatGun:ThornWheelFloatGun,PendulumFloatGun:PendulumFloatGun},GunConfig;!function(){GunConfig={BYs:[["DartGun",7],["FireSnakeGun",5],["FireWheelGun",5],["LaserGun",3],["FireRowGun",3],["SawStickGun",2],["ThornWheelGun",3],["ThornRainGun",3]],BIE:[[0,5],[100,3],[150,1],[200,2],[250,1],[300,1],[350,1],[-100,3],[-150,1],[-200,2],[-250,1],[-300,1],[-350,1]],BrH:[],BlN:["DartGun","DartGun","FireWheelGun","DartGun","SawStickGun","LaserGun","ThornWheelGun","SawStickGun","DartGun","FireWheelGun","ThornWheelGun","DartGun","ThornRainGun"],BOZ:[0,0,0,100,0,150,-100,-150],B23:{"center-1":[["Pendulum-top"]],"center-2":[["Pendulum-top","MachineGun-top-left"],["Pendulum-top","MachineGun-top-right"]],"center-3":[["Pendulum-top","MachineGun-top-left","MachineGun-top-right"],["Pendulum-top","SawGun-top-left","SawGun-top-right"]],"left-1":[["Pendulum-top-left"]],"left-2":[["Pendulum-top-left","MachineGun-top-right"],["Pendulum-top-left","SawGun-top-right"]],"left-3":[["Pendulum-top-left","MachineGun-top","MachineGun-top-right"],["Pendulum-top-left","SawGun-top","SawGun-top-right"]],"right-1":[["Pendulum-top-right"]],"right-2":[["Pendulum-top-right","MachineGun-top-left"],["Pendulum-top-right","SawGun-top-left"]],"right-3":[["Pendulum-top-right","MachineGun-top","MachineGun-top-left"],["Pendulum-top-right","SawGun-top","SawGun-top-left"]],"no-center-1":[["MachineGun-top-left"],["MachineGun-top-right"],["SawGun-top-left"],["SawGun-top-right"]],"no-center-2":[["MachineGun-top-left","MachineGun-top-right"],["SawGun-top-left","SawGun-top-right"],["MachineGun-top-left","SawGun-top-right"],["SawGun-top-left","MachineGun-top-right"]],"both-1":[],"both-2":[["Pendulum-top-left","Pendulum-top-right"]],"both-3":[["Pendulum-top-left","MachineGun-top","Pendulum-top-right"],["Pendulum-top-left","SawGun-top","Pendulum-top-right"]],"any-1":[["MachineGun-top"],["MachineGun-top-left"],["MachineGun-top-right"],["MachineGun-top-move"],["SawGun-top"],["SawGun-top-left"],["SawGun-top-right"],["SawGun-top-move"]],"any-2":[["MachineGun-top-left","MachineGun-top-right"],["SawGun-top-left","SawGun-top-right"],["MachineGun-top","MachineGun-top-left"],["MachineGun-top","MachineGun-top-right"],["MachineGun-top-move","MachineGun-top-left"],["MachineGun-top-move","MachineGun-top-right"],["MachineGun-top","SawGun-top-left"],["MachineGun-top","SawGun-top-right"],["SawGun-top","MachineGun-top-left"],["SawGun-top","MachineGun-top-right"],["SawGun-top-move","MachineGun-top-left"],["SawGun-top-move","MachineGun-top-right"]],"any-3":[["MachineGun-top","SawGun-top-left","SawGun-top-right"],["MachineGun-top","MachineGun-top-left","MachineGun-top-right"],["MachineGun-top-move","MachineGun-top-left","MachineGun-top-right"],["SawGun-top","MachineGun-top-left","MachineGun-top-right"],["SawGun-top-move","MachineGun-top-left","MachineGun-top-right"]],"all-SawGun":[["SawGun-top","SawGun-top-left","SawGun-top-right"]],"all-MachineGun":[["MachineGun-top","MachineGun-top-left","MachineGun-top-right"]]},BiQ:{"any-all":[["MachineGun-bottom"],["MachineGun-bottom-move"],["SawGun-bottom"],["SawGun-bottom-move"]],"any-move":[["MachineGun-bottom-move"],["SawGun-bottom-move"]],"any-no-move":[["MachineGun-bottom"],["SawGun-bottom"]],"any-1-a":[["MachineGun-bottom"],["MachineGun-bottom-move"]],"any-1-b":[["SawGun-bottom"],["SawGun-bottom-move"]]}}}();var StageConfig;!function(){var t=Config.width,i=Config.height,s=(Config.minHeight,t/2),e=i/2,n=384;StageConfig={Bpe:4,SmG:[{B23:[["any-1","any-2"]],BiQ:[["any-1-b"]],platforms:[[6,s-590,e-10,0,!0],[6,s+590,e-10],[6,s+n,e+190],[6,s,e+190],[6,s-n,e+190]],SBu:[[[-90,0],[150,0]],[[90,0],[-150,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]]},{B23:[["center-2","any-2","center-3","any-3"]],BiQ:[["any-1-b"]],platforms:[[6,s-560,e-140],[6,s+560,e-140],[6,s+310,e+70],[6,s,e+280],[6,s-310,e+70]],SBu:[[[0,0],[120,0]],[[-120,0],[0,0]],[[-20,0],[100,0]],[[0,0],[0,0]],[[20,0],[-100,0]]]},{B23:[["center-2","any-2","center-3","any-3"]],BiQ:[["any-1-a","any-1-b"]],platforms:[[6,s-560,e-140],[6,s+560,e-140],[6,s+290,e+260],[6,s-290,e+260],[6,s,e+30]],SBu:[[[30,0],[-90,0]],[[-30,0],[90,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[-80,0],[80,0]]]},{B23:[["left-2","right-2","both-2","any-2","left-3","right-3","both-3","any-3"]],BiQ:[["any-1-a","any-1-b"]],platforms:[[6,s,e-140],[6,s+600,e+60],[6,s+290,e+260],[6,s-290,e+260],[6,s-600,e+60]],SBu:[[[0,0],[0,0]],[[-100,0],[40,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[100,0],[40,0]]]}]},StageConfig.init=function(t){t.forEach(function(t,i){StageConfig.BUW(t)})},StageConfig.BUW=function(t){var i=[],s=t.B23;s&&s.forEach(function(t){var s=[];i.push(s),t.forEach(function(t){var i=GunConfig.B23[t];if(i&&i.forEach)i.forEach(function(t){s.push(t)});else{var e=[t];s.push(e)}})});var e=[],n=t.BiQ;return n&&n.forEach(function(t){var i=[];e.push(i),t.forEach(function(t){var s=GunConfig.BiQ[t];s.forEach(function(t){i.push(t)})})}),t.BKG=i,t.Br1=e,StageConfig.B50(t),StageConfig.Bjb(t),t},StageConfig.B50=function(t){var i=t.platforms;if(i){i.forEach(function(t,s){Array.isArray(t)&&(t={size:t[0]||6,x:t[1],y:t[2],$mw:t[3]||0,withSaw:t[4],withIce:t[5],no:s,id:"p_"+s}),i[s]=t});var s=t.SBu;s&&s.forEach(function(t,e){var n=i[e];if(!n||!t||!t.length)return void(s[e]=null);var h=n.x,a=n.y;t=StageConfig.BpJ(t,h,a),t.no=e,t.id="path_"+e,s[e]=t})}},StageConfig.Bjb=function(t){var i=t.BRZ;if(i){i.forEach(function(t,i){});var s=t.BsE;s&&s.forEach(function(t,e){var n=i[e];if(!n||!t||!t.length)return void(s[e]=null);var h=n.x,a=n.y;t=StageConfig.BpJ(t,h,a),t.no=e,t.id="gunpath_"+e,s[e]=t})}},StageConfig.BpJ=function(t,i,s){if(t.d5R)return t;i=i||0,s=s||0;var e=[],n=t[0];0===n[0]&&0===n[1]||t.unshift([0,0,0,0]),t.forEach(function(t){e.push([t[0]+i,t[1]+s,t[2]||0,t[3]||0])});var h={d5R:e,closed:!0,loop:!0};return t=new Path(h),t.init(),t},StageConfig.init(StageConfig.SmG)}();var ChallengeConfig;!function(){var t=Config.width,i=Config.height,s=(Config.minHeight,t/2),e=i/2;ChallengeConfig={Btn:!1,B39:[3e4,3e4,3e4],Bo5:[[0],[0],[2],[4],[6],[9],[12],[15],[18],[20],[22],[24],[26],[29],[32],[35],[38],[40],[42],[44],[46],[49],[52],[55],[58],[60],[62],[64],[67],[70]],SmG:[{x:s-350,B39:[3e4,3e4,3e4],BYs:[["DartGun",7],["FireSnakeGun",5],["FireWheelGun",5],["LaserGun",2],["SawStickGun",2]],BrH:["DartGun"],B23:[["any-3"]],BiQ:[["any-1-b"]],platforms:[[6,s-500,e-10,0],[6,s+500,e-10,0],[6,s-192,e+190,0],[6,s+192,e+190,0]]},{BYs:[["DartGun",7],["FireSnakeGun",5],["FireWheelGun",5],["LaserGun",2],["SawStickGun",2]],BrH:["DartGun"],B23:[["any-2","any-3"]],BiQ:[["any-1-a","any-1-b"]],platforms:[[6,s,e-40,.03,.2],[6,s+300,e+170,.09],[6,s-300,e+170,.09]],SBu:[[[0,-53],[0,0],[-0,13.084]],[[150,92],[0,0],[-20,-10]],[[-150,92],[0,0],[20,-10]]]},{BYs:[["DartGun",7],["FireSnakeGun",5],["FireWheelGun",5],["LaserGun",2],["SawStickGun",2]],BrH:["DartGun"],B23:[["any-3"]],BiQ:[["any-1-b"]],platforms:[[3,s-330,e-40,.07,.15],[3,s+330,e-40,.07,-.15],[3,s,e+180,.05]],SBu:[[[-150,0],[0,0],[30,-20]],[[150,0],[0,0],[-30,-20]],[[0,-20],[0,0],[-0,50]]]}]},ChallengeConfig.count=ChallengeConfig.SmG.length;for(var n=0;n<ChallengeConfig.count;n++){var h=ChallengeConfig.SmG[n],a=ChallengeConfig.Bo5[n];h.unlockStar=a[0],h.unlockCoin=a[1]||100*h.unlockStar}StageConfig.init(ChallengeConfig.SmG)}();var MatchConfig;!function(){Config.width,Config.height,Config.minHeight;MatchConfig={},MatchConfig.SmG=[],ChallengeConfig.SmG.forEach(function(t){MatchConfig.SmG.push(t)});var t=[];t.forEach(function(t){MatchConfig.SmG.push(t)}),StageConfig.init(MatchConfig.SmG)}();var HeroConfig;!function(){HeroConfig={BGa:[{index:0,unlockCoin:0},{index:1,unlockCoin:10},{index:2,unlockCoin:1e3},{index:3,unlockCoin:2e3},{index:4,unlockCoin:3e3},{index:5,unlockCoin:5e3},{index:6,unlockCoin:7e3},{index:7,unlockCoin:1e4}]}}();var PlayerState=GT.Class.create({LE:GT.State,Kmn:function(t){var i=t.BtnB&&t.BtnB.bwI;return"keypad"==t.type?i=i||t.Up&&t.Up.bwI:t.$gL||(i=i||t.BtnA&&t.BtnA.bwI),i},KW3:function(t){var i=t.input;if(!i)return t.K2M=0,0;var s=0;return i.Left&&i.Left.pressed?(s=-t.KYd,t.K2M=-1):i.Right&&i.Right.pressed?(s=t.KYd,t.K2M=1):t.K2M=0,s},Bsn:function(t,i,s){var e=(this.KW3(t),.09),n=.04;t.K2M<0?(t.B1>e,t.BH=-8e-4):t.K2M>0?(t.B1<-e,t.BH=8e-4):(t.BH=0,t.B1*=.92,Math.abs(t.B1)<n&&(t.B1=0))}}),PlayerIdleState=GT.Class.create({LE:PlayerState,name:"idle",k6:function(t,i,s){var e=t.K2W&&t.K2W.withIce;if(e);else{var n=this.KW3(t);t.B1=n,t.BH=0}t.BC=t.KJ_,t.BW=0,t.Bi8=0,t.KxO("idle")},execute:function(t,i,s){if(t.K6W=CollisionUtils.mQ(t,t.Bc,t.BB,t.kJ.platforms),!t.K6W.LC){var e=this.Kmn(t.input);if(e)return void t.U$3(PlayerStates.jump,i,s)}if(t.K2W=t.K6W.L$,!t.K2W)return void t.U$3(PlayerStates.fall);t.BW=0;this.KW3(t);return t.B1||t.K2M?void t.U$3(PlayerStates.move,i,s):void(t.B1=0)},UO$:function(t,i,s){}}),PlayerMoveState=GT.Class.create({LE:PlayerState,name:"move",k6:function(t,i,s){t.KxO("walk"),t.B_o=100},execute:function(t,i,s){var e=t.K2W&&t.K2W.withIce;if(e)this.Bsn(t,i,s);else{var n=this.KW3(t);t.B1=n}if(t.K6W=CollisionUtils.mQ(t,t.Bc,t.BB,t.kJ.platforms),!t.K6W.LC){var h=this.Kmn(t.input);if(h)return void t.U$3(PlayerStates.jump,i,s)}return t.K2W=t.K6W.L$,t.K2W?(t.BW=0,t.B1||t.K2M?(t.B_o-=i,void(t.B_o<0&&(t.B_o=250,Math.abs(t.B1)>=t.KYd&&(t.ghost&&!t.K6i||game.AEe("player-run"))))):void t.U$3(PlayerStates.idle)):void t.U$3(PlayerStates.fall)},UO$:function(t,i,s){}}),PlayerJumpState=GT.Class.create({LE:PlayerState,name:"jump",k6:function(t,i,s){t.BH=0,t.BC=t.KJ_,t.BW=t.K_2,t.K2W&&(t.Bc-=t.K2W.Bc||0,t.BB-=t.K2W.BB||0,t.K2W=null),t.Bi8=1,t.KVV++,t.KxO("jump"),t.ghost&&!t.K6i||game.AEe("player-jump")},execute:function(t,i,s){var e=this.KW3(t);if(t.B1=e,t.K6W=CollisionUtils.mQ(t,t.Bc,t.BB,t.kJ.platforms),!t.K6W.LC){var n=this.Kmn(t.input);if(n&&t.Bi8<2)return void t.U$3(PlayerStates.doubleJump,i,s)}if(t.K6W.LC||t.BW>=0)return void t.U$3(PlayerStates.fall)},UO$:function(t,i,s){}}),PlayerDoubleJumpState=GT.Class.create({LE:PlayerState,name:"doubleJump",k6:function(t,i,s){t.BH=0,t.BC=t.KJ_,t.BW=t.K_2,t.Bi8++,t.KVV++,t.KxO("airjump"),t.ghost&&!t.K6i||game.AEe("player-doublejump")},execute:function(t,i,s){var e=this.KW3(t);if(t.B1=e,t.K6W=CollisionUtils.mQ(t,t.Bc,t.BB,t.kJ.platforms),t.K6W.LC||t.BW>=0)return void t.U$3(PlayerStates.fall)},UO$:function(t,i,s){}}),PlayerFallState=GT.Class.create({LE:PlayerState,name:"fall",k6:function(t,i,s){t.BH=0,t.BC=t.KJ_,t.BW=0,t.KxO("fall")},execute:function(t,i,s){var e=this.KW3(t);if(t.B1=e,t.K6W=CollisionUtils.mQ(t,t.Bc,t.BB,t.kJ.platforms),!t.K6W.LC){var n=this.Kmn(t.input);if(n){if(t.Bi8<1)return void t.U$3(PlayerStates.jump,i,s);if(t.Bi8<2)return void t.U$3(PlayerStates.doubleJump,i,s)}}if(t.K2W=t.K6W.L$,t.K2W)return t.ghost&&!t.K6i||game.AEe("player-land"),t.ready=!0,void t.U$3(PlayerStates.idle)},UO$:function(t,i,s){}}),PlayerDeadState=GT.Class.create({LE:PlayerState,name:"dead",k6:function(t,i,s){var e=t.kJ,n=t.x,h=t.y-20;t.B1=t.BW=0,t.BH=t.BC=0,t.Bc=t.BB=0,t.K6W=null;var a=e.KeM/1e3>>0;a=5*(a/5>>0),SysAction.reportCount(GameName+".time."+e.BRR+"."+a);var o=0;if(t.KeD==t?(t.KxO("dead"),o=0,SysAction.reportCount(GameName+".killer.hp")):t.KeD==t.kJ?(t.dead=!0,t.remove(),o=1,SysAction.reportCount(GameName+".killer.fall")):t.KeD.tXv?(t.dead=!0,o=2,SysAction.reportCount(GameName+".killer."+t.KeD.$Yi)):(t.dead=!0,o=1,SysAction.reportCount(GameName+".killer."+t.KeD.$Yi)),1==o){t.ghost&&!t.K6i||game.AEe("player-explode");var r=new SplashEffect({color:14031888,x:n,y:h,ST0:38,size:10,Sw8:6,SSf:14,mP:0,alpha:.95,SHP:6,Swb:10,s1:.001,BT:.0025,Szj:.5,BC:4e-4,SB5:8});r.init(),t.kJ.ttL(r);var l=new BodyExplode({CDn:t.K0k,x:n,y:h,Uhf:function(){e.K9t()}});l.init(),t.kJ.ttL(l)}else if(2==o){t.ghost&&!t.K6i||game.AEe("player-dead");var r=new SplashEffect({color:3355443,x:n,y:h,ST0:15,size:18,mP:.001,alpha:.9,s1:.0025,BT:.002,Szj:.25,SB5:9,BC:6e-4,Uhf:function(){e.K9t()}});r.init(),t.kJ.ttL(r)}if(!t.ghost){var u={mode:game.kJ.mode,map:game.kJ.BI7,$A_:game.kJ.$A_,matchSN:game.kJ.matchSN,score:t.score,time:t.time,heroId:game.Va.heroIndex,gameData:{KiU:t.Kct,jump:t.KQl,ByM:t.KpR}};game.B6e(u)}},execute:function(t,i,s){},UO$:function(t,i,s){}}),PlayerStates={};!function(){var t=[new PlayerIdleState,new PlayerMoveState,new PlayerJumpState,new PlayerDoubleJumpState,new PlayerFallState,new PlayerDeadState];t.forEach(function(t){PlayerStates[t.name]=t})}();var Dungeon=function(t){for(var i in t)this[i]=t[i];var s;s=1199078,this.random=Utils.Cy(s)};!function(){var t={cols:10,rows:10,BTt:4,B_B:4,Je:function(t,i){return(i-t+1)*this.random()+t>>0},Qx:function(){this.B$v=[],this.BCx();var t=this.dNa(Maze.aLf.NONE);t&&(this.a9v=t),this.d5g();var i=this.B_C[1],t=this.aQk(i.x+2,i.y+4);t.g2c=[1,1,1,0],this.g6E()},BCx:function(){this.B_C=[];for(var t=1,i=0;i<2;i++)for(var s=0;s<2;s++){var e=new Room({id:t,gAD:this,x:1+(1===t?0:7*s+this.Je(0,1)),y:1+(1===t?0:4*i+this.Je(0,1)),cols:this.Je(3,5),rows:this.Je(3,4),g0O:[{x:this.random()<.5?0:-1,y:this.random()<.5?0:-1}]});e.init(),console.log(t,e.x,e.y,e.cols,e.rows,e.g0O[0]),this.B_C.push(e),t++}},g6E:function(){this.B$v.push(this.a9v);for(var t=this.B$v,i=999;i>0;){i--;for(var s=[],e=0;e<t.length;e++){var n=t[e];if(!(this.aQm(n)>1)){var h=this.dTR(n,!0);h&&1==this.aQm(h)&&s.push(h)}}if(0==s.length)break;t=s}},dSR:function(t,i,s){if(!t)return!1;if(t.value===Maze.aLf.NONE)return!0;if(t.dWJ)return!1;if(t.dIz){var e=this.aQm(t);if(e<2)return!0}return!1},dhA:function(){var t=!this.aOt;return t&&this.B$v.push(this.currentNode),t},drT:function(t){var i=[],s=[],e=[],n=this.afo,h=0,a=1;t&&(h=1,a=0);for(var o,r,l=this.BTt,u=this.B_B,c=2,f=2,d=l-c,g=u-f,m=function(t,n,o,r){t*=l,n*=u;for(var c=0,m=n;m<n+u;m++){for(var p=i[m]=i[m]||[],v=0,w=null,b=t;b<t+l;b++){o[0]===h?c<g?(v<d||o[1]===h)&&(w=h):v<d&&o[2]===h&&(w=h):o[1]===h?c<g?v>=l-d&&(w=h):v>=l-d&&o[3]===h&&(w=h):c<f&&(w=a),o[2]===h?c>=u-g&&(v<d||o[3]===h)&&(w=h):o[3]===h?c>=u-g&&v>=l-d&&(w=h):c>=u-f&&(w=a),null===w&&(w=a);var C=w;p[b]=C,w===a?s.push(C):e.push(C),v++}c++}},p=0;p<n.length;p++){for(var v=n[p],w=0;w<v.length;w++)if(r=v[w],r.g2c)m(w,p,r.g2c,r);else{var b=r.value===Maze.aLf.NONE;if(b)m(w,p,[a,a,a,a],r);else{var C=(r.value&Maze.aLf.W)!==Maze.aLf.W,y=(r.value&Maze.aLf.N)!==Maze.aLf.N;if(C&&y)m(w,p,[a,a,a,h],r);else if(C)m(w,p,[a,h,a,h],r);else if(y)m(w,p,[a,a,h,h],r);else{var I,T=w*l,B=p*u;if(i[B-1]&&i[B-1][T]===a||i[B]&&i[B][T-1]===a){var x=v[w-1],S=o?o[w]:null;I=x&&x.g2c||S&&S.g2c?h:a}else I=h;m(w,p,[I,h,h,h],r)}}}m(w,p,[a,a,a,a],r),o=v}for(var w=0;w<this.cols;w++)m(w,p,[a,a,a,a],r);m(w,p,[a,a,a,a],r);for(var U={},E=function(t,s){U[s]=U[s]||{};var e,n,a,o,r,l,u,c,f=i[s],d=f[t],g=0,e=f[t-1],n=f[t+1],m=i[s-1];m&&(a=m[t],r=m[t-1],l=m[t+1]);var p=i[s+1];if(p&&(o=p[t],u=p[t-1],c=p[t+1]),d){if(o!==h){var v;n===h&&c!==h?v="-lt":e===h&&u!==h&&(v="-rt"),v&&(U[s][t]=v)}n===h&&(g|=2),o===h&&(g|=4),e===h&&(g|=8),0===g&&(g=-1),4===o&&(g=-4),12===o&&(g=-12),6===o&&(g=-6),n!==h&&o!==h&&c===h&&(g=-2),e!==h&&o!==h&&u===h&&(g=-8),o===-2&&(g=-22),o===-8&&(g=-88)}else if(o!==h){var v;v=u===h?"lt":c===h?"rt":"m",U[s][t]=v}f[t]=g},N=i.length,A=i[0].length,p=N-1;p>=0;p--)for(var w=0;w<A;w++)E(w,p);return[i,U,e,s]}};for(var i in Maze.prototype)Dungeon.prototype[i]=Maze.prototype[i];for(var i in t)Dungeon.prototype[i]=t[i]}();var Room=function(t){for(var i in t)this[i]=t[i]};!function(){var t={id:null,x:0,y:0,cols:0,rows:0,gAD:null,g0O:null,init:function(){this.gAD.dbs(this.x,this.y,this.cols,this.rows,this.id),this.gdw()},gdw:function(){if(this.g0O){var t=this;this.g0O.forEach(function(i){t.g6T(i);var s=t.gAD.aQk(t.x+i.x,t.y+i.y),e=t.gAD.dZw(s,i.dir);e&&(e.dIz=!0)})}},g6T:function(t){return t.x=t.x||0,t.x<0?t.x=this.cols+t.x:t.x>this.cols-1&&(t.x=this.cols-1),t.y=t.y||0,t.y<0?t.y=this.rows+t.y:t.y>this.rows-1&&(t.y=this.rows-1),t.dir||(0==t.x&&(t.dir=Maze.aLf.W),0==t.y&&(t.dir=Maze.aLf.N),t.x==this.cols-1&&(t.dir=Maze.aLf.E),t.y==this.rows-1&&(t.dir=Maze.aLf.S)),t}};for(var i in t)Room.prototype[i]=t[i]}();var DungeonTileMap=function(t){for(var i in t)this[i]=t[i]};!function(){var t={Qx:function(){this.am8(0,0,this.aWc,this.aQ$,!0)},aMo:function(t,i,s){var e=0;switch(s){case"m":e=51;break;case"lt":e=50;break;case"rt":e=54;break;case"-lt":e=35;break;case"-rt":e=36}return e},aVP:function(t,i,s){var e=0;return e=0==s?13*(t+i)%10:1===s?11:2===s?14:s===-2?25:s===-22?15:6===s?44:s===-6?34:4===s?41:s===-4?31:12===s?40:s===-12?30:8===s?10:s===-8?26:s===-88?16:11},gYd:function(t){for(var i=10,s=10,e=0,n=0,h=this.aWc,a=this.aQ$,o=0,r=n;r<a;r++){var l=this.afo[r];if(l)for(var u=0,c=e;c<h;c++){var f=l[c];f&&(t.fillStyle=f.color,t.fillRect(u,o,i,s),t.strokeStyle="black",t.strokeRect(u,o,i,s)),u+=i}o+=s}}};for(var i in GT.aBw.prototype)DungeonTileMap.prototype[i]=GT.aBw.prototype[i];for(var i in t)DungeonTileMap.prototype[i]=t[i]}();var UIImage={create:function(t){switch(t){case 0:this.gU1();break;case 1:this.gt8();break;case 2:this.g2M();break;case 3:this.gYQ()}},gU1:function(){var t=new PanelBackground({width:180,height:200,bgColor:"rgba(255,255,255,0.8)",radius:42,padding:6,gXS:0,gu4:[36,36,0,0],gBc:0,g6I:"#1E639E",gNT:0,ge7:"#524539",g3A:[36,36,36,36],gjC:"#6f5949",gDc:0,gfl:10,gIy:"rgba(0,0,0,0)",innerHeight:60,gs$:0,gJh:"#c67e4e"});t.init(),this.gA_=t.image,this.gd8={img:this.gA_,fill:!0,T:100,B:50,L:50,R:50}},gt8:function(){this.gwO=ImageUtils.T_(90,90,18,{color:"#a05522",Tj:"rgba(250,250,250,0.20)",borderWidth:2,borderColor:"#eeeeee",shadowColor:"#443322",shadowOffsetX:0,shadowOffsetY:9}),this.g_0={img:this.gwO,fill:!0,T:20,B:28,L:20,R:20},this.gyS=ImageUtils.T_(90,90,18,{color:"#dc6f44",Tj:"rgba(250,250,250,0.20)",borderWidth:3,borderColor:"rgba(255,255,255,0.80)",shadowColor:"#664422",shadowOffsetX:0,shadowOffsetY:10}),this.gNy={img:this.gyS,fill:!0,T:20,B:28,L:20,R:20},this.gi1=ImageUtils.T_(100,100,20,{color:"#dc6f44",Tj:"rgba(250,250,250,0.20)",borderWidth:4,borderColor:"rgba(255,255,255,0.80)",shadowColor:"#664422",shadowOffsetX:0,shadowOffsetY:15,T6:!1}),this.gDn={img:this.gi1,fill:!0,T:24,B:40,L:30,R:30},this.g5d=ImageUtils.T_(90,90,18,{color:"#60b000",Tj:"rgba(250,250,250,0.20)",borderWidth:2,borderColor:"#eeeeee",shadowColor:"#446622",shadowOffsetX:0,shadowOffsetY:9}),this.glV={img:this.g5d,fill:!0,T:20,B:28,L:20,R:20},this.gW4=ImageUtils.T_(90,90,18,{color:"#0099d6",Tj:"rgba(250,250,250,0.20)",borderWidth:2,borderColor:"#eeeeee",shadowColor:"#224466",shadowOffsetX:0,shadowOffsetY:9}),this.g0i={img:this.gW4,fill:!0,T:20,B:28,L:20,R:20},this.g8n=ImageUtils.T_(90,90,18,{color:"#ddaa00",Tj:"rgba(250,250,250,0.20)",borderWidth:2,borderColor:"#eeeeee",shadowColor:"#665500",shadowOffsetX:0,shadowOffsetY:9}),this.glm={img:this.g8n,fill:!0,T:20,B:28,L:20,R:20},this.g4n=ImageUtils.T_(90,90,18,{color:"#939393",Tj:"rgba(250,250,250,0.20)",borderWidth:2,borderColor:"#e3e3e3",shadowColor:"#505050",shadowOffsetX:0,shadowOffsetY:8}),this.gCv={img:this.g4n,fill:!0,T:20,B:28,L:20,R:20}},g2M:function(){this.ggZ=this.gi1,this.gya=this.gDn,this.gyZ=this.gyS,this.gHI=this.gNy,this.gtw=ImageUtils.T_(270,54,18,{color:"rgba(0,0,0,0.2)"}),this.gqF=ImageUtils.T_(220,54,18,{color:"rgba(0,0,0,0.2)"}),this.gl6=ImageUtils.T_(290,54,18,{color:"rgba(0,0,0,0.2)"}),this.g5W=ImageUtils.T_(100,100,30,{color:"rgba(255,255,255,0.2)",borderWidth:4,borderColor:"#f3f3f3"}),this.glU={img:this.g5W,fill:!0,T:36,B:36,L:36,R:36};var t=HeroListItem.prototype.width,i=HeroListItem.prototype.height;this.gLZ=ImageUtils.T_(t,i-10,16,{color:"#bbbbbb",borderWidth:3,borderColor:"#666666"})},gYQ:function(){this.gQK=ImageUtils.T_(90,90,18,{color:"#777777",borderWidth:4,borderColor:"#ffffff",shadowColor:"#444444",shadowOffsetX:0,shadowOffsetY:10}),this.gQI={img:this.gQK,fill:!0,T:20,B:28,L:20,R:20},this.ga7=ImageUtils.T_(128,128,24,{color:"#605d5a",borderWidth:4,borderColor:"rgba(255,255,255, 0.8)"}),this.gx4={img:this.ga7,fill:!0,T:36,B:36,L:36,R:36},this.gdN=ImageUtils.T_(128,128,18,{color:"#bbaa88"}),this.gwV={img:this.gdN,fill:!0,T:36,B:36,L:36,R:36}},gvV:function(){SawStick.BQI(),ThornWheelFloatGun.BQI(),this.gIH=Utils.AH("p-panel-pop"),
this.gbi={img:this.gIH.img,fill:!0,T:36,B:36,L:36,R:36};var t=ImageUtils.T_(468,48,[0,0,14,14],{color:"rgba(0,0,0,0.4)"});ResourcePool.add("stage-label-bg",t);for(var i=ImageUtils.T_(468,278,14,{color:"#000000"}),s=0;s<Config.U0;s++){var e=s,n=Utils.AH("bg-"+e),h={img:n.img,sx:n.x,sy:n.y,sw:n.w,sh:n.h,Ex:480,EG:300},a=ImageUtils.EI(i,h);ResourcePool.add("stage-btn-bg-"+e,a)}var o=ImageUtils.T_(378,48,[0,0,14,14],{color:"rgba(0,0,0,0.4)"});ResourcePool.add("shop-label-bg",o);for(var s=0;s<Config.U0;s++){var r=ResourcePool.get("stage-btn-bg-"+s),l=ImageUtils.AS(.8*r.width,.8*r.height),u=l.getContext("2d");u.drawImage(r,0,0,l.width,l.height);var c=Utils.AH("platform-"+s),f=Utils.AH("hero-"+s);Utils.KP(u,c,l.width-240>>1,128,240,40);var d=ImageUtils.EH(f.img,1.25,f.x,f.y,f.w,f.h);u.drawImage(d,90,24),ResourcePool.add("shop-btn-bg-"+s,l)}for(var g=ImageUtils.T_(104,100,10,{color:"#000000"}),s=0;s<Config.U0;s++){var f=Utils.AH("hero-"+s),d=ImageUtils.EH(f.img,2,f.x,f.y,f.w,f.h),h={img:d,ox:4,oy:25},a=ImageUtils.EI(g,h);ResourcePool.add("hero-head-"+s,a)}var m=ImageUtils.T_(360,40,[16,16,16,16],{color:"rgba(0,0,0,0.4)"});ResourcePool.add("timebar-bg",m);var p=ImageUtils.T_(352,32,[12,12,12,12],{Tj:"rgba(255,255,255,0.4)",color:"#FFC864"});ResourcePool.add("timebar-value",p);var m=ImageUtils.T_(300,50,[14,14,14,14],{color:"rgba(0,0,0,0.4)"});ResourcePool.add("hpbar-bg",m);var p=ImageUtils.T_(292,42,[10,10,10,10],{Tj:"rgba(255,255,255,0.3)",color:"#FF4422"});ResourcePool.add("hpbar-value",p)}},DefaultCursor=CUI.Class.create({LE:CUI.Ve1,gfQ:0,NcW:"#553311",Qx:function(){this.ghk=Utils.AH("flag-light"),this.gi$=-this.ghk.w/2,this.gPo=-this.ghk.h/2},gKs:function(t){var i=Utils.AS(600,600),s=i.getContext("2d");DefaultCursor.gc1=i,DefaultCursor.gGm=s},VwI:function(t){if(this.gfQ=0,this.Vx2&&game.AEe("cursor"),t){var i=0,s=0;if(t.g9U&&(t.g9U.J7o||t.g9U.Jt6)){var e=t.g9U.Jn1(t);e&&(i=e[0],s=e[1])}var n=t.x+4-i,h=t.y+4-s,a=t.w-8,o=t.h-8,r=[[n,h],[n+a,h],[n+a,h+o],[n,h+o]];this.grd=new Path({d5R:r,closed:!0,loop:!0}),this.grd.init(),this.gn2={BX:2*(a+o)/1200,x:n,y:h},this.grd.Hp1(this.gn2)}},VCl:function(t){},gmC:function(t,i,s,e){var n=DefaultCursor.gc1,h=DefaultCursor.gGm,a=t.scale;return h.globalCompositeOperation="source-over",h.clearRect(0,0,n.width,n.height),h.save(),h.translate(-t.x,-t.y),t.render(h,s,e),h.restore(),t.scale=a,n},render:function(t,i,s){var e=this.Vx2;e&&(e.scale=1);var e=this.VVs;if(e){DefaultCursor.gc1||this.gKs();var n=this.gmC(e,e.g5y,i,s),h=.07+.2*(Math.sin(this.gfQ/200)+.6);t.setAlpha(Math.max(0,h)),t.setBlend("lighter"),n?t.drawImage(n,e.x,e.y):e.render(t,i,s),t.setAlpha(1),this.grd.HsQ(this.gn2,i,s),Utils.KP(t,this.ghk,this.gn2.x+this.gi$,this.gn2.y+this.gPo),t.setBlend("source-over"),this.gfQ+=i}}}),GameNormalPanel=CUI.Class.create({LE:CUI.JfE,VQi:"parent",left:0,top:0,NXS:!0,NI0:!0,visible:!1,VJx:!0,NcW:"#000000",Ni0:.5,Jbr:null,V1O:null,width:1600,height:860,gkv:135,g8$:!0,gBQ:function(){this.NU2=UIImage.gd8},g70:function(){var t=this.g8$;"tvOS"!=game.env&&"Web"!=game.env||("tvOS"==game.env||game.ijC)&&(t=!1),this.idI=new PanelHeader({parent:this,title:this.Jbr,textAlign:"center",iOP:0,iyP:6,g8$:t});var i=this.idI?this.idI.height:10,s=i+this.gkv+30;this.i5i=new CUI.JfE({parent:this,NU2:UIImage.gwV,width:"100%-40",height:"100%-"+s,top:i,visible:!0,NXS:!0})},A3p:function(){game.kJ.iAb&&game.kJ.iAb!==this&&game.kJ.iAb.hide(),game.kJ.iAb=this,this.root.i6N=this.root.g9U,this.root.g9U=this.g9U,this.root.cursor&&(this.i4D=this.root.cursor.Vfd,this.root.cursor.V6j=this.V6j,this.root.cursor.disabled=!1,this.root.cursor.V1O=this.V1O,this.root.cursor.VIo()),game.kJ.exitOnMenuPress=!1},ivs:function(){game.kJ.iAb==this&&(game.kJ.iAb=null),this.root.g9U=this.root.i6N,this.root.i6N=null,this.root.ivs&&this.root.ivs(this.i4D),game.kJ.exitOnMenuPress=!0},i4T:function(t,i,s){for(var e=Math.ceil(t/i),n=0,h=0,a={},o=0;o<t;o++){var r=null,l=null,u=null,c=null;n>0&&(c=s+(o-1)),n<i-1&&o+1<t&&(l=s+(o+1)),h>0&&(r=s+(o-i)),h<e&&o+i<t&&(u=s+(o+i));var f=s+o;a[f]=[r,l,u,c],n++,n==i&&(n=0,h++)}return a},onClose:function(){},Qy:function(){this.gBQ(),this.Jbr="TITLE",this.V1O=null},Njy:function(){this.g70(),this.V6j={}},iC2:function(t){this.idI&&this.idI.iC2(t)},NFs:function(){this.A3p()},NPb:function(){this.ivs(),this.onClose()}}),IconButton=CUI.Class.create({LE:CUI.U4,parent:null,width:80,height:80,i8$:!1,Qy:function(){this.ix8()},ip5:function(t){var i=CUI.Utils.AH(t);return i.qj="center",i.qS="center",i.offsetY=-4,i.qG=this.iOe||.7,i.e_=this.iOe||.7,i},i0W:function(){this.iCR&&(this.Ny6=CUI.Utils.AH(this.iCR),this.width=this.Ny6.w,this.height=this.Ny6.h)},ix8:function(){this.i8$||(this.iJG=this.NU2||UIImage.gHI,this.iFu=UIImage.gCv,this.NU2=this.iJG)},NcS:function(t,i,s){this.disabled?(this.JY6=this.alpha,this.alpha=.8,this.NU2=this.iFu):this.NU2=this.iJG}}),MenuButton=CUI.Class.create({LE:CUI.U4,parent:null,width:320,height:70,Qy:function(){this.ix8()},i0W:function(){this.iCR&&(this.Ny6=CUI.Utils.AH(this.iCR),this.width=this.Ny6.w,this.height=this.Ny6.h)},ix8:function(){this.iJG=this.NU2||UIImage.g_0,this.iFu=UIImage.gCv,this.NU2=this.iJG},NcS:function(t,i,s){this.disabled?(this.JY6=this.alpha,this.NU2=this.iFu):this.NU2=this.iJG}}),CloseButton=CUI.Class.create({LE:IconButton,VQi:"parent",width:88,height:88,parent:null,top:20,right:20,i85:null,Qy:function(){this.i85=this.i85||this.parent,this.NU2=this.NU2||UIImage.gNy,this.ix8();var t=CUI.Utils.AH("icon_close");t.qj="center",t.offsetY=-4,t.offsetX=0,this.JU7=t},UG8:function(t,i,s){this.i85.hide()}}),BigCloseButton=CUI.Class.create({LE:CUI.U4,VQi:"parent",parent:null,NXS:!0,bottom:40,width:240,height:90,Qy:function(){this.NU2=UIImage.gNy,this.Gi={textAlign:"center",offsetX:0,offsetY:2,color:"#ffffff",fontSize:30,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.CLOSE}},UG8:function(t,i,s){this.parent.hide(),this.onClose()},onClose:function(){}}),BigOKButton=CUI.Class.create({LE:CUI.U4,VQi:"parent",parent:null,NXS:!0,bottom:40,width:240,height:90,Qy:function(){this.NU2=UIImage.gNy,this.Gi={textAlign:"center",offsetX:0,offsetY:-3,color:"#ffffff",fontSize:30,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.OK}},UG8:function(t,i,s){this.parent.hide(),this.onClose()},onClose:function(){}}),StartMenuButton=CUI.Class.create({LE:MenuButton,parent:null,margin:0,marginBottom:40,NXS:!0,left:0,width:460,height:128,fontSize:null,fontName:null,isA:!1,UG8:function(){},Qy:function(){this.iCR,this.NU2=UIImage.gya,this.J6F=CUI.Utils.AH("icon_new"),this.J6F.offsetX=6,this.J6F.offsetY=-6,this.J6F.qj="right",this.J6F.qS="top",this.J6F.visible=this.isA,this.Gi={offsetY:-10,text:this.label,color:"#ffffff",shadowColor:"#222222",shadowOffsetY:3,fontSize:this.fontSize||TEXT.size.StartMenuButton,fontName:this.fontName||TEXT.font.Default,strokeWidth:this.strokeWidth||1,sO:this.sO||"#000000"}},Njy:function(){}}),HeadButton=CUI.Class.create({LE:IconButton,name:"setting",Qy:function(){this.NU2=UIImage.gNy,this.JU7=CUI.Utils.AH("hero-head-"+game.Va.heroIndex),this.JU7.offsetX=-1,this.JU7.offsetY=-3,this.width=120,this.height=120,this.J6F=CUI.Utils.AH("icon_new"),this.J6F.offsetX=8,this.J6F.offsetY=-8,this.J6F.qj="right",this.J6F.qS="top",this.J6F.visible=!1},iyJ:0,NPl:function(t,i){this.iyJ<=0?(this.iyJ=3e3,this.i$h()):this.iyJ-=t,this.JKp.visible&&(this.JKp.offsetX=8+3*Math.sin(i/60))},i$h:function(){var t=!1;game.Uj||game.bv()&&(t=!0),game.iJb()&&(t=!0),this.JKp.visible=t},UG8:function(t,i,s){}}),CoinButton=CUI.Class.create({LE:MenuButton,parent:null,NXS:!0,width:240,height:90,coin:0,Qy:function(){this.NU2=UIImage.gNy,this.ix8(),this.JU7={img:CUI.Utils.AH("icon_coin").img,qj:"left",offsetX:20,offsetY:-5},this.Gi={fontName:TEXT.font.Art,textAlign:"left",offsetX:80,offsetY:-6,color:"#ffffff",fontSize:32,shadowOffsetY:3,shadowColor:"#333333",text:this.coin}},i0G:function(t){this.coin=t||0,this.setText(this.coin)},NPl:function(){game.Va.coin<this.coin?(this.JVO.shadowOffsetY=0,this.JVO.strokeWidth=4,this.JVO.sO="#FFDDBB",this.JVO.NHu("#FF0000")):(this.JVO.shadowOffsetY=3,this.JVO.strokeWidth=0,this.JVO.sO=null,this.JVO.NHu("#ffffff"))},Njy:function(){},UG8:function(){},iFR:function(t,i){}}),MoreCoinsButton=CUI.Class.create({LE:IconButton,VQi:"parent",width:320,height:90,right:60,bottom:40,i5D:"shop-panel",Qy:function(){this.NU2=this.NU2||UIImage.g0i,this.ix8(),this.Gi={fontName:TEXT.font.Art,textAlign:"center",offsetX:0,offsetY:-6,color:"#ffffff",fontSize:32,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.MORE_COINS}},UG8:function(t,i,s){var e=this.root.all[this.i5D];e&&e.show()}}),RestoreButton=CUI.Class.create({LE:CUI.U4,VQi:"parent",margin:0,NXS:!0,bottom:2,width:400,height:90,Qy:function(){this.NU2=UIImage.g0i,this.Gi={offsetY:-4,color:"#ffffff",text:TEXT.RESTORE_PURCHASED,fontSize:TEXT.size.U4,shadowColor:"#333333",shadowOffsetY:3}},UG8:function(){game.Nc.restoreTransactions(function(t,i){})}}),GuideButton=CUI.Class.create({LE:IconButton,name:"share",Qy:function(){this.i0W()},UG8:function(t,i,s){game.iUu()}}),SoundButton=CUI.Class.create({LE:IconButton,parent:null,name:"sound",width:120,height:120,Qy:function(){this.ir_=CUI.Utils.AH("icon_sound-on"),this.i9P=CUI.Utils.AH("icon_sound-off"),this.NU2=UIImage.gNy},Njy:function(){GT.US.muted?this.t32():this.t2G()},t2G:function(){this.c4=!0,this.JsW(this.ir_),GT.US.rb(!1),game.muted=!1},t32:function(){game.muted=!0,this.c4=!1,this.JsW(this.i9P),GT.US.rb(!0),game.muted=!0},UG8:function(t,i,s){this.c4?this.t32():this.t2G()}}),LeaderButton=CUI.Class.create({LE:IconButton,name:"share",iBq:null,Qy:function(){this.i0W(),"classic"==game.kJ.mode?this.iBq=GameName+".BestTimeClassic":"challengeIce"==game.kJ.mode?this.iBq=GameName+".BestTimeIce":"challenge"==game.kJ.mode?this.iBq=GameName+".BestTimeChallenge":this.iBq=null},UG8:function(t,i,s){this.iBq?SysAction.showLeaderboard(this.iBq):SysAction.showGameCenter()}}),RateButton=CUI.Class.create({LE:IconButton,name:"share",Qy:function(){this.ix8(),this.JU7=this.ip5("icon_rate")},UG8:function(t,i,s){game.iux(this.iBE),this.iBE&&(this.disabled=!0)}}),ShopButton=CUI.Class.create({LE:IconButton,name:"share",Qy:function(){this.ix8(),this.iOe=this.iOe||.9,this.JU7=this.ip5("icon_shop"),this.JU7.offsetY=-3,this.J6F=CUI.Utils.AH("icon_new"),this.J6F.offsetX=6,this.J6F.offsetY=-6,this.J6F.qj="right",this.J6F.qS="top",this.J6F.visible=!1},iyJ:0,NPl:function(t,i){this.iyJ<=0?(this.iyJ=3e3,this.i$h()):this.iyJ-=t},i$h:function(){},UG8:function(t,i,s){this.root.i$U.show()}}),SettingButton=CUI.Class.create({LE:IconButton,name:"setting",Qy:function(){this.i0W(),this.J6F=CUI.Utils.AH("icon_new"),this.J6F.offsetX=6,this.J6F.offsetY=-6,this.J6F.qj="right",this.J6F.qS="top",this.J6F.visible=!1},iyJ:0,NPl:function(t,i){this.iyJ<=0?(this.iyJ=3e3,this.i$h()):this.iyJ-=t},i$h:function(){},UG8:function(t,i,s){}}),WatchADButton=CUI.Class.create({LE:IconButton,name:"share",width:300,Qy:function(){this.NU2=UIImage.g0i,this.ix8(),this.JU7=this.ip5("icon_ad"),this.JU7.qj="left",this.JU7.offsetX=16,this.Gi={textAlign:"left",offsetX:80,offsetY:0,color:"#ffffff",fontSize:TEXT.size.U4,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.GET_FREE_COINS},this.J6F=CUI.Utils.AH("icon_new"),this.J6F.offsetX=6,this.J6F.offsetY=-6,this.J6F.qj="right",this.J6F.qS="top",this.J6F.visible=!1},NPl:function(t,i){this.JKp.visible=!this.disabled,this.disabled||(this.scale=1+.03*(Math.sin(i/120)+.5))},i8E:0,i0b:function(t,i){this.i8E<=0?this.i8E=2500:this.i8E<=900?(this.offsetX=2*Utils.Je(-2,2)||2,this.offsetY=0*Utils.Je(-1,1)):(this.offsetX=0,this.offsetY=0),this.i8E-=t},UG8:function(t,i,s){game.ixa(this.iBE)}}),TotalStarBar=CUI.Class.create({LE:CUI.JfE,width:200,height:80,i8T:!0,stroke:!0,Njy:function(){var t=this,i=CUI.Utils.AH("star");this.i8T?(i.qj="left",i.offsetX=2):(i.qj="right",i.offsetX=-2),i.offsetY=-6;var s=new CUI.JYx({parent:t,width:200,height:80,left:0,bottom:0,JU7:i,Gi:{offsetX:this.i8T?70:-70,offsetY:4,color:"#ffffff",textAlign:this.i8T?"left":"right",fontSize:36,fontName:TEXT.font.Normal,strokeWidth:this.stroke?4:0,sO:2236962,text:"99 / 99"}});this.iqH=s},NFs:function(){var t=game.Va.iFN(),i=game.Va.ibl();this.iqH.setText(t+" / "+i)}}),TotalCoinBar=CUI.Class.create({LE:CUI.JfE,width:200,height:80,i8T:!0,stroke:!0,Njy:function(){var t=this,i=CUI.Utils.AH("icon_coin");this.i8T?(i.qj="left",i.offsetX=2):(i.qj="right",i.offsetX=-2),i.offsetY=-6;var s=new CUI.JYx({parent:t,width:200,height:80,left:0,bottom:0,JU7:i,Gi:{offsetX:this.i8T?60:-60,offsetY:4,color:"#ffffff",textAlign:this.i8T?"left":"right",fontSize:36,fontName:TEXT.font.Normal,strokeWidth:this.stroke?4:0,sO:2236962,text:"999999"}});this.iaa=s},NPl:function(){this.coinCount!==game.Va.coin&&(this.coinCount=game.Va.coin,this.iaa.setText(this.coinCount))}}),BuyCoinBar=CUI.Class.create({LE:CUI.JfE,Njy:function(){var t=this,i=CUI.Utils.AH("icon_coin");i.qj="right",i.offsetX=42,i.offsetY=-5,i.qG=.85,i.e_=.85;var s=new CUI.JYx({id:this.id+"_coinLabel2",parent:t,VQi:"parent",left:60,top:20,width:"auto",height:40,JU7:i,Gi:{color:"#ffffff",textAlign:"center",fontSize:32,fontName:TEXT.font.Art,text:TEXT.YOUR_COINS+game.Va.coin},UG8:function(){}}),e="ManyCoins1",n=IAPConfig[e],h=n.id,a=n.label,i=CUI.Utils.AH(n.icon);i.qj="right",i.offsetX=-40,i.offsetY=-3;var s=new ShopItemButton({id:this.id+"_btn-buy-coins",parent:t,VQi:"parent",margin:0,productId:h,JU7:i,label:a,NU2:UIImage.gNy,NPl:function(){this.irL&&(this.disabled=game.Va.purchasedInfo[this.ilk],this.JsD.alpha=this.disabled?.45:1,this.JVO.NHu(this.disabled?"#e6e6e6":"#ffffff"))},iFR:function(){this.root.all.coinLabel2.setText(TEXT.YOUR_COINS+game.Va.coin)}}),s=new CUI.JYx({parent:t,VQi:"parent",top:4,id:this.id+"_price-"+h,width:100,height:s.height,NXS:!0,left:240,Gi:{fontName:TEXT.font.Small,fontWeight:"bold",color:"#ffffff",textAlign:"left",text:"$0.99",fontSize:34}});if(!game.Uj&&!game.ijC)var s=new WatchADButton({id:this.id+"_btn-watch-ad",parent:t,VQi:"parent",right:50,iBE:!0})},iEU:function(){var t=this,i=this.root;i.all[t.id+"_coinLabel2"].setText(TEXT.YOUR_COINS+game.Va.coin),game.Uj||game.ijC||(game.bv()?i.all[t.id+"_btn-watch-ad"].disabled=!1:i.all[t.id+"_btn-watch-ad"].disabled=!0),game.Nc.Ne.forEach(function(s,e){var n=game.Nc.products[s],h=0===n.price?TEXT.FREE:n.price||"$???",a=t.id+"_price-"+s;i.all[a].setText(h)})}}),CloseWindowLabel=CUI.Class.create({LE:CUI.JYx,VQi:"root",parent:null,width:"auto",height:40,right:20,bottom:20,Qy:function(){var t=game.Uj||game.ijC?"MENU":"SPACE";this.Gi={textAlign:"right",offsetX:0,offsetY:0,color:"#ffffff",text:t+TEXT.MENU_TO_CLOSE,fontSize:28,strokeWidth:8,sO:"#111111",fontName:TEXT.font.Art}},Njy:function(){},ip5:function(t){var i=CUI.Utils.AH("icon_coin");return i.offsetX=-40,i.offsetY=0,i.qG=1,i.e_=1,i.qj="left",i.qS="middle",i}}),GuidePanel=CUI.Class.create({LE:GameNormalPanel,width:1200,height:880,Qy:function(){this.gBQ(),this.Jbr=TEXT.GAME_GUIDE,this.V1O="btn-close-guide"},Njy:function(){this.g70();var t=this.i5i||this,i=CUI.Utils.AH("guide-gamepad");new CUI.J77({visible:!0,parent:t,NXS:!0,NI0:!0,left:0,top:-0,Xb:i,qG:1,e_:1}),new CUI.JYx({VQi:"parent",parent:t,NXS:!0,left:-280,bottom:20,width:400,height:60,fontName:TEXT.font.Normal,Gi:{lineHeight:50,textAlign:"right",sO:"#553322",strokeWidth:8,color:"#ffffff",text:TEXT.GUIDE_MOVE,fontSize:36}}),new CUI.JYx({VQi:"parent",parent:t,NXS:!0,left:310,top:20,width:400,height:60,fontName:TEXT.font.Normal,Gi:{lineHeight:50,textAlign:"left",sO:"#553322",strokeWidth:8,color:"#ffffff",text:TEXT.GUIDE_JUMP,fontSize:36}}),new CUI.JYx({VQi:"parent",parent:t,NXS:!0,left:-220,top:20,width:400,height:60,fontName:TEXT.font.Normal,Gi:{lineHeight:50,textAlign:"right",sO:"#553322",strokeWidth:8,color:"#ffffff",text:TEXT.GUIDE_MENU,fontSize:36}}),new BigOKButton({id:"btn-close-guide",parent:this})},NFs:function(){this.A3p()},onClose:function(){game.Va.icd("finishGuide"),this.iWA&&(game.i2n({mode:this.iWA,map:this.i$j}),this.iWA=null,this.i$j=0)}}),PanelBackground=CUI.Class.create({id:"PanelBackground",padding:0,width:null,height:null,bgColor:"#666666",radius:6,borderWidth:0,borderColor:null,head:null,iLh:0,gXS:0,gu4:8,gBc:8,g6I:"#3c3c2d",gNT:1,ge7:"#979778",iAZ:null,iG2:0,gkv:0,ieW:4,iWB:"#3c3c2d",iuX:1,iQy:"#979778",body:null,g3A:4,gjC:"#f1e2d3",gDc:1,iyN:"#d3c497",KY6:null,gfl:0,inner:null,irb:4,gIy:"#f1e2d3",gs$:1,gJh:"#d3c497",init:function(){var t,i,s,e=this,n=this.width,h=this.height,a=this.padding||0,o=this.KY6||n-2*a,r=this.iLh||o,l=this.gXS||0,u=0===this.ioI||this.ioI?this.ioI:a,c=this.gBc||0,f=this.iG2||o,d=this.gkv||0,g=h-a;g-=l?u+l+c:a,d&&(g-=d+a),i=0,s=0;var m={borderWidth:this.borderWidth,Npd:this.Npd,borderColor:this.borderColor,offsetX:i,offsetY:s};if(t=ImageUtils.T_(n,h,this.radius,this.bgColor,m,this.image),i+=a,s+=u,l){this.head={x:n-r>>1,y:s,width:r,height:l};var m={borderWidth:this.gNT,borderColor:this.ge7,offsetX:this.head.x,offsetY:this.head.y};t=ImageUtils.T_(r,l,this.gu4,this.g6I,m,t),s+=l+c}this.body={x:n-o>>1,y:s,width:o,height:g};var m={borderWidth:this.gDc,borderColor:this.iyN,offsetX:this.body.x,offsetY:this.body.y};t=ImageUtils.T_(o,g,this.g3A,this.gjC,m,t);var p=this.innerWidth||o-2*this.gfl,v=this.innerHeight||g-2*this.gfl;s=this.body.y+this.gfl,this.inner={x:n-p>>1,y:s,width:p,height:v};var m={borderWidth:this.gs$,borderColor:this.gJh,offsetX:this.inner.x,offsetY:this.inner.y};if(t=ImageUtils.T_(p,v,this.irb,this.gIy,m,t),d){this.iAZ={x:n-f>>1,y:h-d-a,width:f,height:d};var m={borderWidth:this.iuX,borderColor:this.iQy,offsetX:this.iAZ.x,offsetY:this.iAZ.y};t=ImageUtils.T_(f,d,this.ieW,this.iWB,m,t)}this.NYV=new GT.sr({OT:this.OT,cols:this.cols,rows:this.rows,x:this.body.x,y:this.body.y,width:this.body.width,height:this.body.height}),this.iI0={},this.ilG&&(this.NYV.init(),this.NYV._X(this.ilG),this.ilG.forEach(function(i,s){e.iI0[i.name||s]=i,t=Utils.T_(i.width,i.height,i.radius,i.bgColor,i.borderWidth,i.borderColor,i.x,i.y,t)})),this.image=t}}),TopMask=CUI.Class.create({VJx:!0,NcW:"rgba(0,0,0,0.6)",width:"100%",height:"100%",top:0,left:0,visible:!1,Qy:function(){this.game=game,this.parent=new CUI.NxI({width:game.A$4.j8,height:game.A$4.jM}),this.parent.addChild(this)},Njy:function(){this.label=new CUI.JYx({parent:this,NXS:!0,NI0:!0,width:"50%",height:100,Gi:{textAlign:"center",color:"#ffffff",text:"Waiting...",fontSize:32}})},setText:function(t){this.label.setText(t)},update:function(t,i){this.label.offsetY=4*Math.sin(i/150)},NFs:function(){game.AR0=this},NPb:function(){game.AR0=null},IzS:function(t,i,s){}},CUI.JfE),NoticeBar=CUI.Class.create({LE:CUI.JfE,id:"NoticeBar",top:0,width:"100%",height:70,backgroundColor:"rgba(255,255,255,0.9)",borderColor:null,type:0,zIndex:9999,fontSize:26,fontName:null,i6C:null,visible:!1,i1a:null,i$_:2200,irM:!1,Qy:function(){this.parent=this.parent||new CUI.NxI({width:game.A$4.jL,height:game.A$4.jc}),this.left=(game.A$4.j8-game.A$4.jL)/2,this.irM?this.bottom=-this.height:this.top=-this.height,this.parent.addChild(this)},Njy:function(){this.iQG=!0,this.ihy=[],this.irM?this.originY=this.root.height+4:this.originY=-this.height-4,this.iGI=this.originY,this.i6C="(Empty)",this.message=new CUI.JYx({parent:this,NI0:!0,width:this.width,height:this.height,left:0,top:0,fontName:this.fontName,fontSize:this.fontSize,Gi:{id:"noticeText",offsetY:0,text:this.i6C,color:"#222222",textAlign:"center"}}),this.i9V(this.type)},JEV:function(){this.ifT&&this.ifT.stop(),this.iFU&&this.iFU.stop()},ia5:function(t){this.message.setText(t)},i9V:function(t){t===-1?this.borderColor=CUI.renderer.colorRgb(220,30,0):1===t?this.borderColor=CUI.renderer.colorRgb(70,230,110):2===t?this.borderColor=CUI.renderer.colorRgb(30,120,220):"string"==typeof t?this.borderColor=t:this.borderColor=16565767},NFs:function(){var t=this;this.visible=!0,this.ieQ&&clearTimeout(this.ieQ),this.ieQ=setTimeout(function(){t.hide()},this.i1a)},add:function(t,i,s){s||(s=this.i$_),!this.ihy.length&&this.iQG?this.show(t,i,s):this.ihy.push([t,i,s])},show:function(t,i,s){this.iQG=!1,this.ia5(t),this.i9V(i),s||(s=this.i$_),this.i1a=s;var e=this;this.iFU&&this.iFU.stop(),e.iGI=e.originY,e.N2I(e.iGI);var n=0;this.irM&&(n=this.root.height-this.height);var h=new TWEEN.Tween(this).to({iGI:n},300).easing(TWEEN.Easing.Quadratic.Out).s(function(){e.iGI=e.originY,e.N2I(e.iGI),e.NFs()}).m(function(){e.N2I(e.iGI)}).k(function(){});h.delay(100).start(),this.iFU=h},hide:function(){var t=this,i=new TWEEN.Tween(this).to({iGI:t.originY},300).easing(TWEEN.Easing.Quadratic.Out).m(function(){t.N2I(t.iGI)}).k(function(){if(t.iQG=!0,t.visible=!1,t.ihy.length){var i=t.ihy.shift();t.show(i[0],i[1],i[2])}});i.start(),this.ifT=i},IzS:function(t,i,s){t.fillRect(this.x,this.y,this.w,this.h,this.backgroundColor),t.fillRect(this.x,this.y,this.w,4,this.borderColor),t.fillRect(this.x,this.y+this.h-4,this.w,4,this.borderColor)},Nei:function(t,i,s){}}),TipLabel=CUI.Class.create({LE:CUI.JYx,VQi:"parent",parent:null,NXS:!0,margin:0,width:"100%+100",height:150,bottom:90,backgroundColor:"rgba(0,0,0,0.2)",visible:!1,fontSize:null,Qy:function(){this.Gi={offsetX:0,offsetY:0,textAlign:"center",color:"#ffffff",text:"Tips Tips Tips Tips",fontSize:this.fontSize||TEXT.size.TipLabel}},update:function(t,i){this.alpha=.8+.2*Math.sin(i/200)}}),PanelTitle=CUI.Class.create({LE:CUI.JYx,parent:null,NXS:!0,width:"100%",height:120,top:10,title:"Title",iYA:"#ffffff",textAlign:"left",iOP:30,iyP:-6,fontSize:null,Qy:function(){this.Gi={offsetX:this.iOP,offsetY:this.iyP,fontSize:this.fontSize||TEXT.size.PanelTitle,color:this.iYA,textAlign:this.textAlign,shadowColor:"#111111",shadowOffsetY:5,text:this.title,fontName:TEXT.font.Title}},update:function(t,i){this.BDa&&(this.alpha=.75+.25*Math.sin(i/150))}}),PanelHeader=CUI.Class.create({LE:CUI.JfE,parent:null,NXS:!0,width:"100%",height:120,ij6:null,iRy:"left",iM$:20,i19:0,title:"Title",iYA:"#ffffff",fontSize:null,textAlign:"left",iOP:20,iyP:0,g8$:!0,Qy:function(){this.i85=this.i85||this.parent},Njy:function(){var t;this.ij6&&(t=CUI.Utils.AH(this.ij6),t.qj=this.iRy,t.offsetX=this.iM$||0,t.offsetY=this.i19||0),this.title=new CUI.JYx({parent:this,width:"100%",height:"100%",JU7:t,Gi:{offsetX:this.iOP,offsetY:this.iyP,fontSize:this.fontSize||TEXT.size.PanelTitle,color:this.iYA,textAlign:this.textAlign,shadowColor:"#111111",shadowOffsetY:5,text:this.title,fontName:TEXT.font.Title}}),this.g8$&&(this.JnL=new CUI.U4({parent:this,VQi:"parent",VF_:10,NyV:10,Nhq:10,NBc:10,width:80,height:80,top:24,right:20,i85:this.i85,NU2:UIImage.gNy,Qy:function(){var t=CUI.Utils.AH("icon_close");t.qj="center",t.offsetY=-4,t.offsetX=0,this.JU7=t},UG8:function(t,i,s){this.i85.hide()}}))},iC2:function(t){this.title.setText(t)}}),ChallengeButton=CUI.Class.create({LE:CUI.U4,name:"challengeButton",parent:null,width:150,height:150,iKi:!0,alpha:1,Qy:function(){this.NU2=UIImage.gQI,this.JU7=CUI.Utils.AH("stage-btn-bg-"+game.Va.heroIndex),this.JU7&&(this.JU7.offsetY=-4)},b9h:function(){this.scale=.96,this.alpha=.8},bdZ:function(){this.scale=1,this.alpha=1},UG8:function(t,i,s){if(this.iKi)this.root.all.unlockPanel.isJ(this.BI7,this.iak),this.root.all.unlockPanel.show();else{var e=this;game.i2n({mode:e.parent.parent.iKK?"challengeIce":e.mode,map:e.BI7})}},igQ:function(){this.iKi=!1},ifA:function(){this.iKi=!0}}),ChallengeStageLabel=CUI.Class.create({LE:CUI.JYx,parent:null,NXS:!0,width:0,height:0,left:0,bottom:10,Qy:function(){this.Ny6=Utils.AH("stage-label-bg"),this.width=this.Ny6.w,this.height=this.Ny6.h,this.Gi={textAlign:"center",offsetY:10,color:"#ffffff",text:this.label,fontSize:32,strokeWidth:8,sO:"#111111",fontName:TEXT.font.Art},this.JU7=this.ip5()},Njy:function(){},ip5:function(t){var i=String(this.unlockCoin),s=CUI.Utils.VDa(i,this.Gi.fontSize,this.Gi.fontName),e=CUI.Utils.AH("icon_coin");return e.offsetX=30+(s>>1),e.offsetY=1,e.qG=.8,e.e_=.8,e.qj="center",e.qS="middle",e}}),ChallengeStageThumb=CUI.Class.create({LE:CUI.JfE,Njy:function(){var t=0,i=this.width/(Config.width+t),s=t/2,e=(this.height-Config.height*i)/2-70,n=this;n.parent.parent;this.iKh=[],this.platforms&&this.platforms.forEach(function(t){if(t){var h=t.withIce||n.withIce;t=[(t.x+s)*i,(t.y+e)*i,i,t.size,h],n.iKh.push(t)}}),this.iry=[],this.BRZ&&this.BRZ.forEach(function(t){if(t){var h=t.rotation||0;if("SawStickFloatGun"==t.type){var a=t.length||SawStickFloatGun.prototype.length;t=[(t.x+s)*i,(t.y+e)*i,h];var o=SawStick.BcV[a];game.renderer.linkDisplayObject(o,!0),o.scale.set(i,i),t.push(o),n.iry.push(t)}else if("ThornWheelFloatGun"==t.type){t=[(t.x+s)*i,(t.y+e)*i,h];var o=ThornWheelFloatGun.BcV;game.renderer.linkDisplayObject(o,!0),o.scale.set(i,i),t.push(o),n.iry.push(t)}}})},Nei:function(t,i,s){if(this.unlocked){var e=this.parent.x,n=this.parent.y,h=this,a=4;if(this.platforms){var o=h.parent.parent;this.iKh.forEach(function(i){var s=i[0],r=i[1];if(!(s<0+a||s>h.width-a||r<0+a||r>h.height-a)){var l,u=i[2],c=i[3],f=i[4];l=3==c?f?o.iB7:o.i82:f?o.iQE:o.iXf,l.scale.set(u,u),l.position.set(e+s,n+r),t.render(l)}})}this.BRZ&&this.iry.forEach(function(i){var s=i[0],o=i[1];if(!(s<0+a||s>h.width-a||o<0+a||o>h.height-a)){var r=i[2],l=i[3];l.position.set(e+s,n+o),l.rotation=r,t.render(l)}})}}}),ChallengeListItem=CUI.Class.create({LE:CUI.JfE,tag:"ChallengeListItem",parent:null,NXS:!1,NI0:!1,width:480,height:300,color:null,i7b:"#FF8318",iMA:"#bbe0f3",iop:"#88ccee",iw7:"rgba(255,255,255,0)",id:null,B13:0,Qy:function(){},Njy:function(){this.BIB=CUI.Utils.AH("star"),this.BSk=CUI.Utils.AH("star-dark"),this.iar=CUI.Utils.AH("icon_lock"),this.B9R=Utils.createSprite(this.BIB),this.i6d=Utils.createSprite(this.BSk),this.iWo=Utils.createSprite(this.iar);var t=new ChallengeButton({parent:this,g9U:this.parent,id:this.classic?"classic-0":"challenge-"+this.BI7,BI7:this.BI7,iak:this.iak,mode:this.classic?"classic":"challenge",unlock:!0,width:this.width,height:this.height,withIce:this.withIce,ijO:this.ijO,iOP:-25,iyP:-80});this.iBk=t;var t=new ChallengeStageThumb({parent:this,unlocked:this.unlocked,width:this.width,height:this.height,platforms:this.platforms,BRZ:this.BRZ});this.ilx=t;var t=new CUI.JYx({id:this.id+"_coinLabel2",parent:this,VQi:"parent",left:20,top:16,width:"auto",height:40,Gi:{color:"#ffffff",textAlign:"left",fontSize:32,fontName:TEXT.font.Art,strokeWidth:8,sO:"#111111",text:this.BI7+1},UG8:function(){}}),t=new ChallengeStageLabel({parent:this,visible:!0,label:""});this.iSh=t},iEU:function(){var t=game.Va.challengeInfo[this.BI7],i=t&&t.unlocked;this.unlocked=i,this.ilx.unlocked=i,this.unlocked&&(this.B13=game.Va.iL$(this.BI7));var s;if(s=this.withIce||this.parent.iKK?CUI.Utils.AH("stage-btn-bg-"+Config.UC):CUI.Utils.AH("stage-btn-bg-"+game.Va.heroIndex),s.offsetY=-4,this.iBk.JsW(s),i&&this.iBk.iKi?this.iBk.igQ():i||this.iBk.iKi||this.iBk.ifA(),i){var e=game.Va.iCw(this.BI7),n=e?Utils.aF(10*e):"--";this.iSh.setText(TEXT.BEST+" :  "+n),this.iSh.NX8.alpha=.4,this.iSh.JVO.N9E(24),this.iSh.JVO.N6X(TEXT.font.Normal),this.iSh.JsD.visible=!1,this.iBk.JsD.alpha=1,this.iBk.disabled=!1,this.iSh.visible=!0}else{var i=(game.Va.challengeInfo[this.BI7-1],!1);i?(this.i_J=!0,this.iBk.JsD.alpha=.5,this.iBk.disabled=!1):(this.i_J=!1,this.iBk.JsD.alpha=0,this.iBk.disabled=!0),this.iSh.visible=!1}},Nei:function(t,i,s){var e=this.x,n=this.y;if(this.unlocked||this.i_J,this.unlocked){var e=this.x+this.w-100,n=this.y+10,h=40,a=40,o=this.B13>0?this.B9R:this.i6d;t.drawDisplayObject(o,e+0,n,h,a);var o=this.B13>1?this.B9R:this.i6d;t.drawDisplayObject(o,e+25,n,h,a);var o=this.B13>2?this.B9R:this.i6d;t.drawDisplayObject(o,e+50,n,h,a)}else{var e=this.x+(this.w-this.iar.w)/2,n=this.y+(this.h-this.iar.h)/2;t.renderAt(this.iWo,e,n)}this.disabled}}),ChallengePanel=CUI.Class.create({LE:GameNormalPanel,width:2e3,height:"100% + 20",gkv:130,paddingLeft:50,paddingRight:50,id:"stage-panel",Qy:function(){this.gBQ(),this.V1O="challenge-0",this.Jbr=TEXT.CHALLENGE_MODE},Njy:function(){var t=this;this.g70();var i=this.i5i||this,s=new CUI.CfP({parent:i,J7o:!1,Jt6:!0,id:"stageScrollView",left:0,top:0,NXS:!0,width:1650,height:"100%",padding:40,JYS:0,JQ5:"rgba(255,255,255, 0.6)",JyT:"rgba(0,0,0,0)"});this.g9U=s,this.g9U.idt=Utils.AH("platform-ice"),this.g9U.iqw=Utils.AH("platform-ice-small");var e=this.g9U.iQE=Utils.createSprite(this.g9U.idt);e.anchor.set(.5,.5);var e=this.g9U.iB7=Utils.createSprite(this.g9U.iqw);e.anchor.set(.5,.5),game.Uj&&(s.U$c=CUI.iwm,s.U0Y=CUI.iwm);var n=ChallengeConfig.SmG,h=ChallengeConfig.count,a=0,o=0;this.ip7=[];var r=0,l=3,u=0,c=1660/l,f=350;if(n.forEach(function(i,s){if(!(s>=h||i.closed)){r=s;var e=i.platforms,n=i.BRZ,d=1==i.iceRate,g=new ChallengeListItem({parent:t.g9U,top:0+o*f,left:u+a*c,platforms:e,BRZ:n,BI7:r,iak:s,withIce:d,ijO:i.name,unlockCoin:i.unlockCoin});t.ip7.push(g),a++,a>=l&&(a=0,o++)}}),ChallengeConfig.Btn)var d=new CUI.JYx({parent:t.g9U,top:0+264*o,left:0+402*a,width:ChallengeListItem.prototype.width,height:ChallengeListItem.prototype.height,Nnf:UIImage.gLZ,Gi:{offsetY:10,fontSize:26,lineHeight:50,color:"#ffffff",strokeWidth:8,sO:"#444444",textAlign:"center",text:TEXT.MORE_STAGES}});this.iAs=new TotalStarBar({id:"cmp_star_coin",parent:t,left:60,bottom:40});var d=new TotalCoinBar({id:"cmp_total_coin",parent:t,left:320,bottom:40}),g=new CUI.JfE({parent:t,right:60,bottom:40,height:90,width:1200});this.unlockPanel=g;var m=(new CUI.JYx({id:"cmp_need_coin",parent:this.unlockPanel,width:600,height:90,right:490,bottom:0,NXS:!1,Gi:{fontName:TEXT.font.Normal,lineHeight:50,textAlign:"right",sO:"#223377",strokeWidth:8,color:"#ffffff",text:"Unlock Next Stage , Need ",fontSize:36}}),CUI.Utils.AH("star"));m.qj="left",m.offsetY=-6;var d=new CUI.JYx({id:"cmp_x_or",parent:this.unlockPanel,width:140,height:90,right:335,bottom:0,NXS:!1,JU7:m,Gi:{offsetX:60,fontName:TEXT.font.Normal,lineHeight:50,textAlign:"left",sO:"#223377",strokeWidth:8,color:"#ffffff",text:"0",fontSize:36}});this.iev=d;var d=(new CUI.JYx({id:"cmp_or",parent:this.unlockPanel,width:70,height:90,right:260,bottom:0,NXS:!1,Gi:{fontName:TEXT.font.Normal,lineHeight:50,textAlign:"center",sO:"#223377",strokeWidth:8,color:"#ffffff",text:"or",fontSize:36}}),new CoinButton({id:"btn-unlock-coin",parent:this.unlockPanel,NXS:!1,right:0,bottom:0,UG8:function(){var i=game.Va.iKN(t.ilf),s=t.ip7[t.ilf];i&&(game.kJ.iGz(s),game.Ni()),s&&s.iEU();var e=this;e.disabled=!0,setTimeout(function(){e.disabled=!1,t.ilf=game.Va.iJv(),t.iE$(t.ilf)},300)}}));this.ill=d;var p=this.ip7.length,v=4,w="challenge-";this.V6j=this.i4T(p,v,w);var b="",C="Mo"+b+"re Sta"+b+"ges wi"+b+"ll be in Rel"+b+"ease Ver"+b+"sion.";new CUI.JYx({parent:this,VQi:"parent",zIndex:9999,width:500,height:500,top:50,NI0:!0,NXS:!0,Gi:{textAlign:"center",color:"#f0f0f0",sO:"#774433",strokeWidth:12,text:C,fontSize:70,fontName:TEXT.font.Normal}})},iE$:function(t){var i=ChallengeConfig.SmG[t];return i?(this.unlockPanel.visible=!0,this.iev.setText(i.unlockStar),this.ill.i0G(i.unlockCoin),void(this.ill.disabled=!1)):(this.unlockPanel.visible=!1,this.iev.setText("--"),this.ill.setText("--"),void(this.ill.disabled=!0))},NFs:function(){var t=this.iKK?Config.UC:game.Va.heroIndex;this.g9U.iKK=this.iKK,this.A3p(),this.ilf=game.Va.iJv(),this.iE$(this.ilf),this.ip7.forEach(function(t){t.iEU()}),this.g9U.ii1=Utils.AH("platform-"+t),this.g9U.iJ4=Utils.AH("platform-"+t+"-small");var i=this.g9U.iXf=Utils.createSprite(this.g9U.ii1);i.anchor.set(.5,.5);var i=this.g9U.i82=Utils.createSprite(this.g9U.iJ4);i.anchor.set(.5,.5),this.iAs.NFs(),game.kJ.exitOnMenuPress=!1},onClose:function(){}}),ShopItemButton=CUI.Class.create({LE:MenuButton,parent:null,margin:0,NXS:!0,width:370,height:500,Qy:function(){this.NU2=UIImage.gQI,this.ix8(),this.Gi={verticalAlign:"bottom",textAlign:"center",offsetX:this.icon?-20:0,offsetY:-26,color:"#ffffff",fontSize:30,shadowOffsetY:3,shadowColor:"#333333",text:this.label,fontName:TEXT.font.Art},this.icon&&(this.JU7=this.ip5(this.icon),this.JU7.qS="bottom",this.JU7.offsetY=-24)},Njy:function(){},ip5:function(t){var i=CUI.Utils.VDa(this.Gi.text,this.Gi.fontSize,this.Gi.fontName),s=CUI.Utils.AH(t);return s.qj="center",s.offsetX=30+(i>>1)+(this.Gi.offsetX||0),s},UG8:function(){game.Nc.NF(this.productId,this.iFR)},iFR:function(t,i){}}),ShopListItem=CUI.Class.create({
LE:CUI.JfE,tag:"ShopListItem",parent:null,margin:20,NXS:!0,width:370,height:500,Qy:function(){},Njy:function(){var t=this,i=this.config||{},s=new ShopItemButton({parent:t,id:"btn-"+t.id,label:i.label,icon:i.icon,bX:i.bX,productId:i.id,irL:i.once,ilk:i.key});this.iIm=s},NPl:function(){}}),ShopPanel=CUI.Class.create({LE:GameNormalPanel,id:"shop-panel",width:1620,height:820,gkv:130,Qy:function(){this.gBQ(),this.Jbr=TEXT.SHOP,this.V1O="btn-shopItem-0"},Njy:function(){var t=this;this.g70();var i=this.i5i||this;i&&i.NFl("hbox"),game.Nc.Ne.forEach(function(t,s){var e=game.Nc.products[t];new ShopListItem({id:"shopItem-"+s,parent:i,config:e})});new RestoreButton({parent:t,NXS:!0,bottom:40})},A3p:function(){this.root.i6N=this.root.g9U,this.root.g9U=this.g9U,this.root.cursor&&(this.i4D=this.root.cursor.Vfd,this.root.cursor.V6j=this.V6j,this.root.cursor.disabled=!1,this.root.cursor.V1O=this.V1O,this.root.cursor.VIo()),game.kJ.exitOnMenuPress=!1},ivs:function(){this.root.g9U=this.root.i6N,this.root.i6N=null,this.root.ivs&&this.root.ivs(this.i4D),game.kJ.exitOnMenuPress=!0},NFs:function(){this.root.cursor&&(this.iCu=this.root.cursor.Vfd),this.A3p()},NPb:function(){this.root.cursor&&(this.root.cursor.disabled=!0),game.kJ.exitOnMenuPress=!1;var t=this.parent;t.root.cursor&&(t.root.cursor.V6j=t.V6j,t.root.cursor.disabled=!1,t.root.cursor.V1O=this.iCu,t.root.cursor.VIo())}}),HeroButton=CUI.Class.create({LE:CUI.U4,parent:null,width:150,height:150,iKi:!0,alpha:1,Qy:function(){this.NU2=UIImage.gQI,this.JU7&&(this.JU7.offsetY=-4)},Njy:function(){},b9h:function(){this.scale=.96,this.alpha=.8},bdZ:function(){this.scale=1,this.alpha=1},UG8:function(){if(!this.iJc)if(this.iKi){var t=game.Va.ip9(this.heroIndex);t&&(game.kJ.iGz(this),game.Ni(),game.Va.inj(this.heroIndex))}else game.Va.inj(this.heroIndex)},igQ:function(){this.iKi=!1},ifA:function(){this.iKi=!0}}),HeroCoinLabel=CUI.Class.create({LE:CUI.JYx,parent:null,NXS:!0,width:0,height:0,left:0,bottom:10,Qy:function(){this.Ny6=Utils.AH("shop-label-bg"),this.width=this.Ny6.w,this.height=this.Ny6.h,this.Gi={textAlign:"center",offsetX:0,offsetY:0,color:"#ffffff",text:this.coin,fontSize:32,strokeWidth:8,sO:"#111111",fontName:TEXT.font.Art},this.JU7=this.ip5(String(this.coin),"icon_coin")},NPl:function(){game.Va.coin<this.coin?(this.JVO.shadowOffsetY=0,this.JVO.strokeWidth=5,this.JVO.sO="#F3F6FF",this.JVO.NHu("#CC0000")):(this.JVO.shadowOffsetY=3,this.JVO.strokeWidth=0,this.JVO.sO=null,this.JVO.NHu("#ffffff"))},Njy:function(){},ip5:function(t,i){var s=CUI.Utils.VDa(t,this.Gi.fontSize,this.Gi.fontName),e=CUI.Utils.AH(i);return e.offsetX=30+(s>>1),e.offsetY=1,e.qG=.8,e.e_=.8,e.qj="center",e.qS="middle",e}}),HeroListItem=CUI.Class.create({LE:CUI.JfE,tag:"HeroListItem",parent:null,NXS:!0,NI0:!0,width:388,height:242,color:null,borderWidth:0,i7b:"#FF8318",iMA:"#bbe0f3",iop:"#88ccee",iw7:"rgba(255,255,255,0)",id:null,Qy:function(){},Njy:function(){this.iDl=CUI.Utils.AH("shop-btn-bg-"+this.heroIndex),this.iar=CUI.Utils.AH("icon_lock");var t=new HeroButton({parent:this,id:"btn-heroItem-"+this.iak,heroIndex:this.heroIndex,unlock:!0,JU7:this.iDl,width:this.width,height:this.height});this.ipy=t;var t=new HeroCoinLabel({parent:this,coin:this.unlockCoin});this.iRt=t;var i=CUI.Utils.AH("icon_selected"),t=new CUI.J77({parent:this,Xb:i,top:10,right:10,visible:!1});this.i3v=t},ifz:function(){var t=[0,1,2,3,4,5,6],i=!0;return t.some(function(t){var s=game.Va.heroInfo[t];if(!s||!s.unlocked)return i=!1,!0}),i},NPl:function(){var t=game.Va.heroInfo[this.heroIndex],i=t&&t.unlocked;i?(this.iRt.visible=!1,this.ipy.JVO.visible=!0,this.ipy.JsD.alpha=1):(this.iRt.visible=!0,this.ipy.JVO.visible=!1,this.ipy.JsD.alpha=.5),i&&this.ipy.iKi?this.ipy.igQ():i||this.ipy.iKi||this.ipy.ifA(),this.heroIndex==game.Va.heroIndex?this.i3v.visible=!0:(this.i3v.visible=!1,this.ipy.disabled=!1)}}),HeroPanel=CUI.Class.create({LE:GameNormalPanel,width:2e3,height:1100,paddingLeft:50,paddingRight:50,gkv:130,id:"hero-panel",Qy:function(){this.gBQ(),this.Jbr=TEXT.SELECT_HERO,this.V1O="btn-heroItem-0"},Njy:function(){var t=this;this.g70();var i=this.i5i||this,s=new CUI.CfP({parent:i,J7o:!1,Jt6:!1,id:"scrollView2",left:0,top:0,NXS:!0,width:"100%-40",height:"100%",NYV:new CUI.VlA({cols:4,rows:2,OT:0}),JYS:10,JQ5:"rgba(255,255,255, 0.6)",JyT:"rgba(0,0,0,0)"});this.g9U=s;var e=0,n=0;HeroConfig.BGa.forEach(function(t,i){if(!(i>=Config.U0)){new HeroListItem({iak:i,parent:s,heroIndex:t.index,unlockCoin:t.unlockCoin,color:t.color,sC:e,sH:n});e++,e>3&&(e=0,n++)}});var h=CUI.Utils.AH("icon_coin");h.qj="right",h.offsetX=43,h.offsetY=2,h.qG=.85,h.e_=.85;var a=new CUI.JYx({id:this.id+"_coinLabel2",parent:t,VQi:"parent",left:60,bottom:30,width:"auto",height:90,JU7:h,Gi:{fontName:TEXT.font.Art,textAlign:"center",offsetX:0,offsetY:0,color:"#ffffff",fontSize:32,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.YOUR_COINS+game.Va.coin},UG8:function(){}});this.iaa=a,this.V6j={"btn-heroItem-0":[null,"btn-heroItem-1","btn-heroItem-4",null],"btn-heroItem-1":[null,"btn-heroItem-2","btn-heroItem-5","btn-heroItem-0"],"btn-heroItem-2":[null,"btn-heroItem-3","btn-heroItem-6","btn-heroItem-1"],"btn-heroItem-3":[null,null,"btn-heroItem-7","btn-heroItem-2"],"btn-heroItem-4":["btn-heroItem-0","btn-heroItem-5","btn-more-coins",null],"btn-heroItem-5":["btn-heroItem-1","btn-heroItem-6","btn-more-coins","btn-heroItem-4"],"btn-heroItem-6":["btn-heroItem-2",null,"btn-more-coins","btn-heroItem-5"],"btn-heroItem-7":["btn-heroItem-3",null,"btn-more-coins","btn-heroItem-6"],"btn-more-coins":["btn-heroItem-5",null,null,null]}},NFs:function(){this.A3p(),this.g9U.reset&&this.g9U.reset(),this.iaa.setText(TEXT.YOUR_COINS+game.Va.coin),game.Va.i_3()},onClose:function(){this.root.iLX(),this.root.iue()}}),MatchTabButton=CUI.Class.create({LE:CUI.U4,width:300,height:100,sT:390,top:0,right:0,iMh:0,matchSN:0,i4a:0,iZL:null,borderWidth:2,Qy:function(){this.colors={"#cccccc":CUI.renderer.colorHex("#cccccc"),"#888888":CUI.renderer.colorHex("#888888")};var t;t=this.iZL?this.iZL[DefaultLanguage]||this.iZL:TEXT.MATCH_NAME[0]+this.matchSN+TEXT.MATCH_NAME[1],this.Gi={offsetY:0,textAlign:"center",color:"#ffffff",strokeWidth:8,sO:"#222222",fontSize:40,text:t}},activate:function(){this.backgroundColor=this.colors["#cccccc"],this.NRf(this.iqk)},C$t:function(){this.backgroundColor=this.colors["#888888"],this.NRf(this.iKy)},NPl:function(t,i){},UG8:function(t,i,s){}}),MatchStartButton=CUI.Class.create({LE:CUI.U4,width:240,height:90,matchSN:0,Qy:function(){this.NU2=UIImage.iMW,this.Gi={textAlign:"center",offsetX:0,offsetY:0,color:"#ffffff",fontSize:30,shadowOffsetY:3,shadowColor:"#333333",text:TEXT.START}},NPl:function(t,i){},UG8:function(t,i,s){var e=this.parent.Cu7.CL3();if(e){var n=e.matchSN,h=game.iY7.ibA(n);if(console.log("MatchStartButton: ",n,h),h){var a=h.gameInfo.mode,o=h.gameInfo.map;game.ieu(),game.i2n({mode:a,map:o,matchSN:n,iSN:h.iaj})}}}}),LeaderboardItem=CUI.Class.create({LE:CUI.JfE,size:10,width:500,height:70,borderWidth:2,Qy:function(){},Njy:function(){var t=new CUI.U4({parent:this,width:80,height:this.height,left:0,Gi:{fontName:TEXT.font.Art,textAlign:"center",fontSize:26,offsetX:0,offsetY:2,color:"#333333",text:this.rank},UG8:function(){game.bp("The Record SN is "+this.parent.iEm)}});this.iUz=t;var t=new CUI.JYx({parent:this,width:this.width-90-120,height:this.height,left:90,Gi:{fontName:TEXT.font.Normal,textAlign:"left",fontSize:26,offsetX:0,offsetY:2,color:"#333333",text:""}});this.inY=t;var t=new CUI.JYx({parent:this,width:100,height:this.height,right:20,Gi:{fontName:TEXT.font.Normal,textAlign:"right",fontSize:26,offsetX:0,offsetY:2,color:"#333333",text:""}});this.scoreLabel=t},NPl:function(){game.iY7.player&&this.playerSN===game.iY7.player.sn&&(this.inY.JVO.NHu("#0055bb"),this.scoreLabel.JVO.NHu("#0055bb"))},izY:function(t){if(!t)return this.inY.setText(""),void this.scoreLabel.setText("");this.inY.JVO.NHu("#000000"),this.scoreLabel.JVO.NHu("#000000"),this.iEm=t.sn,this.playerSN=t.playerSN,this.inY.setText(t.playerName);var i=Utils.aF(10*t.score);this.scoreLabel.setText(i)},NFs:function(){}}),LeaderboardPanel=CUI.Class.create({LE:CUI.JfE,width:1100,size:10,NYV:"vbox",borderWidth:2,Qy:function(){},Njy:function(){this.items=new Array(this.size);for(var t=this.size/2>>0,i=0;i<t;i++){var s=new LeaderboardItem({parent:this,marginTop:20,left:20,rank:i+1});this.items[i]=s;var s=new LeaderboardItem({parent:this,marginTop:20,right:20,V0_:!0,rank:i+1+t});this.items[i+t]=s}},iw3:function(t){for(var i=0;i<this.items.length;i++){var s=this.items[i];if(s){var e=5*(i/5>>0)+i%5,n=t[e];n?s.izY(n):s.izY(null)}}},NFs:function(){}}),MatchTab=CUI.Class.create({LE:CUI.JfE,width:"100% - 300",height:"100%",top:0,right:0,visible:!1,iMh:0,matchSN:0,i4a:0,Qy:function(){this.NU2=UIImage.gwV},Njy:function(){var t=new LeaderboardPanel({parent:this,visible:!0,size:10,height:"100%-40",top:10,left:20});this.Y6_=t;var t=new CUI.JYx({parent:this,VQi:"parent",width:100,height:60,top:126,right:60,Gi:{fontName:TEXT.font.Normal,fontWeight:"bold",color:"#ffffff",textAlign:"right",text:"Countdown: ",strokeWidth:6,sO:"#222222",fontSize:32}});this.Y_S=t;var t=new CUI.JYx({parent:this,VQi:"parent",width:300,height:60,bottom:126,left:60,Gi:{fontName:TEXT.font.Normal,fontWeight:"bold",color:"#ffffff",textAlign:"left",text:TEXT.MAP+" :  "+(this.mode+"-"+(this.map+1)),strokeWidth:6,sO:"#222222",fontSize:32}}),t=new CUI.JYx({parent:this,VQi:"parent",width:300,height:60,bottom:126,left:460,Gi:{fontName:TEXT.font.Normal,fontWeight:"bold",color:"#ffffff",textAlign:"left",text:TEXT.SEED+" :  "+this.seed,strokeWidth:6,sO:"#222222",fontSize:32}}),t=new CUI.JYx({parent:this,VQi:"parent",width:300,height:60,bottom:35,left:60,Gi:{fontName:TEXT.font.Normal,fontWeight:"bold",color:"#ffffff",textAlign:"left",text:"",strokeWidth:6,sO:"#222222",fontSize:32}});this.YOv=t;var t=new CUI.JYx({parent:this,VQi:"parent",width:300,height:60,bottom:35,left:460,Gi:{fontName:TEXT.font.Normal,fontWeight:"bold",color:"#ffffff",textAlign:"left",text:"",strokeWidth:6,sO:"#222222",fontSize:32}});this.Y50=t},YZy:0,NPl:function(t,i){if(this.YZy<=0){this.YZy=1e3;var s=game.iY7.Ywt[this.i4a],e=s.Yld();if(e>0){var n=Utils.af(e);this.Y_S.setText("Countdown: "+n)}else this.Y_S.visible=!1}else this.YZy-=t},YY4:function(t){this.Y6_.iw3(t)},YND:function(t){t=t?Utils.aF(10*t):" -- ",this.Y50.setText(TEXT.YOUR_SCORE+t)},YBR:function(t){t=t||" -- ",this.YOv.setText(TEXT.YOUR_RANK+t)},YJR:function(t){t=t||" -- "},NFs:function(){console.log("=========== tab show ========== ");var t=this,i=t.parent.parent.YNK;if(i.disabled=!0,game.iY7.Ywt&&game.iY7.Ywt.length){var s=game.iY7.Ywt[this.i4a];s.history?i.visible=!1:i.visible=!0,game.iY7.Yyt(s,function(e,n){console.log(e),t.YND(s.YMH),t.YBR(s.Yuz),s.Yx5(function(){s.history||(i.disabled=!1)})}),game.iY7.YUE(s,function(i,s){console.log("updateLeaderboard : ",i?i.length:null,s),t.YY4(i)})}}}),MatchPanel=CUI.Class.create({LE:GameNormalPanel,width:1920,height:970,top:25,NI0:!1,Qy:function(){this.gBQ(),this.Jbr=TEXT.MATCH_MODE_TITLE,this.Tr5=0,this.V1O="btn-match-0"},Njy:function(){var t=this;this.g70();var i=this.i5i||this;this.TfB=new BigCloseButton({id:"btn-cancel-0",parent:t,bottom:50});var s=new CUI.JYx({parent:i,width:"100%",height:180,NI0:!0,backgroundColor:"rgba(0,0,0,0.3)",Gi:{textAlign:"center",text:TEXT.LOADING_MATCHES,fontName:TEXT.font.Normal,color:"#ffffff",fontSize:50}});this.message=s;var s=new CUI.JYx({parent:i,width:"100%",height:120,bottom:10,Gi:{textAlign:"center",text:TEXT.LOGIN_FIRST,fontName:TEXT.font.Normal,color:"#222222",fontSize:34}});this.Tlf=s;var e=new MatchStartButton({id:"btn-start-match",parent:this,VQi:"parent",right:100,bottom:60,zIndex:9999,visible:!1});this.YNK=e;var n=this.idI?this.idI.height:10,h=new CUI.CX5({parent:this,CNo:0,width:"100%-50",height:"100%-150",top:n,visible:!0,NXS:!0});this.Cu7=h,this.TBs={"btn-match-0":[null,"btn-start-match","btn-match-1",null],"btn-match-1":["btn-match-0","btn-start-match","btn-match-2",null],"btn-match-2":["btn-match-1","btn-start-match","btn-match-3",null],"btn-match-3":["btn-match-2","btn-start-match","btn-match-4",null],"btn-match-4":["btn-match-3","btn-start-match","btn-match-0",null],"btn-start-match":[null,null,null,-1]},this.inited=!0},Tzt:function(t){if(game.iY7.TEk)return!1;for(var i=[],s=[],e=this.Cu7,n=0,h=0;h<t.length;h++){var a=t[h];if(a){var o="btn-match-"+n;e.Iq1(o);var r=new MatchTabButton({parent:e,id:o,iZL:a.name,matchSN:a.sn,iMh:a.iMh,i4a:n,left:0,top:30+110*h});i.push(r);var l=a.gameInfo||{},u="tab-match-"+n;e.Iq1(u);var c=new MatchTab({parent:e,id:u,mode:l.mode,map:l.map,seed:l.seed,matchSN:a.sn,iMh:a.iMh,i4a:n,top:0,right:0,zIndex:999});s.push(c),n++}}e.CFr(i,s),this.Tr5=t.length,this.visible&&this.NFs()},NFs:function(){this.Tr5>0&&game.iY7.onLine&&!game.iY7.TEk?(this.V6j=this.TBs,this.V1O="btn-match-0",this.YNK.visible=!0,this.TfB.visible=!1,this.i5i&&(this.i5i.visible=!1),this.Cu7.visible=!0,this.Cu7.Cqk()):(this.root.cursor&&(this.root.cursor.V6j={}),this.V1O="btn-cancel-0",this.YNK.visible=!1,this.TfB.visible=!0,this.i5i&&(this.i5i.visible=!0),this.Cu7.visible=!1,game.iY7.onLine?game.iY7.TEk&&this.message.setText(TEXT.APP_OUT_DATE):this.message.setText(TEXT.NO_CONNECTION),!window.VQ||window.VQ.authed?this.Tlf.visible=!1:this.Tlf.visible=!0),this.A3p()}}),PauseButton=CUI.Class.create({LE:IconButton,VQi:"parent",parent:null,width:70,height:70,bottom:0,right:0,visible:!0,Qy:function(){var t=CUI.Utils.AH("icon_pause");t.qj="center",t.offsetX=this.iM$||0,t.offsetY=this.i19||0,this.JU7=t},UG8:function(t,i,s){this.root.TZF.show()}}),RestartButton=CUI.Class.create({LE:IconButton,name:"restart",width:160,height:100,Qy:function(){this.ix8();var t=CUI.Utils.AH("icon_restart");this.JU7=t},UG8:function(t,i,s){game.TrS(),game.ieu();var e=game.kJ;game.restart(e)}}),ResumeButton=CUI.Class.create({LE:IconButton,name:"resume",width:160,height:100,Qy:function(){this.ix8();var t=CUI.Utils.AH("icon_play");this.JU7=t},UG8:function(t,i,s){this.TZF&&this.TZF.hide(),game.kJ.paused=!1,game.kJ.Tdv=0}}),QuitButton=CUI.Class.create({LE:IconButton,name:"quit",width:160,height:100,Qy:function(){this.ix8();var t=CUI.Utils.AH("icon_quit");this.JU7=t},UG8:function(t,i,s){game.TA9=!1,game.T7s(game.kJ.mode)}}),GamePausePanel=CUI.Class.create({LE:GameNormalPanel,width:900,height:800,Qy:function(){this.gBQ(),this.Jbr=TEXT.STAGE+" "+(this.BI7+1)+"  -  "+TEXT.PAUSED,this.V1O="btn-2"},Njy:function(){var t=this;this.g70();var i=this.i5i||this,s=new CUI.JfE({VQi:"parent",parent:i,top:30,left:30,width:290,height:340,backgroundColor:15655099,borderColor:15658734}),e=CUI.Utils.AH("hero"+game.Va.heroIndex+"_idle-0"),n=(new CUI.J77({visible:!0,parent:s,left:-10,top:10,Xb:e,qG:3,e_:3}),new CUI.JYx({VQi:"parent",parent:i,top:30,right:30,width:490,height:160,fontName:TEXT.font.Art,backgroundColor:15655099,borderColor:15658734,visible:!1,Gi:{lineHeight:50,textAlign:"center",sO:"#223377",strokeWidth:8,color:"#ffffff",text:"Live Time\n 999",fontSize:32}}));this.T2J=n;var n=new CUI.JYx({VQi:"parent",parent:i,id:"bestLabel2",top:30,right:30,width:490,height:160,fontName:TEXT.font.Art,backgroundColor:15655099,borderColor:15658734,Gi:{lineHeight:50,textAlign:"center",sO:"#223377",strokeWidth:8,color:"#ffffff",text:TEXT.BEST+": -----------",fontSize:32}}),n=new CUI.JYx({VQi:"parent",parent:i,top:210,right:30,width:490,height:160,fontName:TEXT.font.Art,backgroundColor:15655099,borderColor:15658734,Gi:{lineHeight:50,textAlign:"center",sO:"#223377",strokeWidth:8,color:"#ffffff",text:"",fontSize:32}});this.T7m=n;var n=new CUI.JYx({VQi:"parent",parent:i,bottom:20,NXS:!0,width:440,height:50,fontName:TEXT.font.Small,Gi:{textAlign:"center",color:"#774411",text:"challenge-seed",fontSize:26}});this.THu=n;new SoundButton({id:"btn-4",VQi:"parent",parent:this,NXS:!1,left:40,bottom:35,width:100,height:100}),new ResumeButton({id:"btn-2",VQi:"parent",parent:this,NXS:!0,left:-140,bottom:35,width:240,TZF:t}),new RestartButton({id:"btn-1",VQi:"parent",parent:this,NXS:!0,left:140,bottom:35,width:240}),new QuitButton({id:"btn-3",VQi:"parent",parent:this,NXS:!1,right:40,bottom:35,width:100});this.V6j={"btn-1":[null,"btn-2","btn-2",null],"btn-2":["btn-1","btn-3","btn-3","btn-1"],"btn-3":["btn-2",null,null,"btn-2"]}},NFs:function(){this.A3p(),game.kJ.pause(),this.T7m.setText("Total Coins\n"+game.Va.coin);var t=Utils.aF(game.kJ.KeM);this.T2J.setText("Live Time\n"+t),this.THu.setText(game.kJ.T9Z()+"-"+AppVersionInfo),GT.US.r$("effect")},NPb:function(){this.root.cursor&&(this.root.cursor.disabled=!0),game.kJ.exitOnMenuPress=!1,game.kJ.resume(),game.kJ.paused=!1,game.kJ.Tdv=0}}),ResultPanel=CUI.Class.create({LE:CUI.JfE,id:"resultPanel",parent:null,visible:!1,width:420,height:220,right:-420,top:140,Qy:function(){this.NU2=UIImage.gbi},Njy:function(){var t=CUI.Utils.AH("icon_newrecord");t.qj="center",this.TLj=new CUI.J77({parent:this,Xb:t,left:-60,top:-40,NXS:!0,visible:!1});var t=CUI.Utils.AH("icon_time");t.qj="right",t.offsetX=-42,t.offsetY=2;var i=new CUI.JYx({id:"resultTimeLabel",parent:this,right:70,top:28,width:100,height:70,fontName:TEXT.font.Art,JU7:t,Gi:{offsetX:-102,offsetY:0,textAlign:"right",sO:"#000000",strokeWidth:8,color:"#ffffff",text:"99990",fontSize:34}});this.resultTimeLabel=i;var t=CUI.Utils.AH("icon_coin");t.qj="right",t.offsetX=-42,t.offsetY=2;var i=new CUI.JYx({id:"resultCoinLabel",parent:this,right:70,top:108,width:100,height:70,fontName:TEXT.font.Art,JU7:t,Gi:{offsetX:-102,offsetY:0,textAlign:"right",sO:"#000000",strokeWidth:8,color:"#ffffff",text:"99990",fontSize:34}});this.resultCoinLabel=i},NFs:function(){var t=this,i=0,s=0;game.Va.TqR.TMo?(this.TLj.visible=!0,i=18,s=4):this.TLj.visible=!1;var e=Utils.aF(game.Va.TqR.time);this.resultTimeLabel.setText(e),this.resultTimeLabel.offsetY=i,this.resultCoinLabel.setText("+ "+game.Va.TqR.coin),this.resultCoinLabel.offsetY=s,game.Va.TqR=null;var n=this.root.VI1.width+20,h=this.root.VI1.width-330;t.N0z(n);var a={x:n},o=new TWEEN.Tween(a).to({x:h},500).easing(TWEEN.Easing.Quadratic.In).m(function(){t.N0z(a.x)}).k(function(){var i=new TWEEN.Tween(a).to({x:n},500).easing(TWEEN.Easing.Quadratic.Out).m(function(){t.N0z(a.x)}).k(function(){t.visible=!1});i.delay(2e3).start()});o.start()}}),StartPage=CUI.Class.create({LE:CUI.NxI,visible:!1,Qy:function(){},Njy:function(){var t=this,i=(new CUI.JYx({parent:this,bottom:6,right:6,width:1,height:30,Gi:{textAlign:"right",color:"#336699",text:window.TsE||AppVersionInfo,fontSize:24,fontName:TEXT.font.Small}}),new CUI.JYx({parent:this,width:500,height:500,top:-150,NI0:!0,NXS:!0,Gi:{textAlign:"center",color:"#FFdd55",sO:"#774433",strokeWidth:12,text:"Flukes",fontSize:160,fontName:TEXT.font.Normal}}),new CUI.JfE({id:"menuPanel",visible:!0,parent:this,margin:0,top:150,NI0:!0,NXS:!0,width:600,height:"auto",NYV:{name:"vbox"}})),s=new StartMenuButton({id:"btn-0",parent:i,label:"PLAY",UG8:function(i,s,e){t.T8a.iKK=!1,t.T8a.show()}}),i=new CUI.JfE({id:"buttonPanelLeft",visible:!0,parent:this,margin:0,left:60,bottom:60,width:450,height:128}),s=new CUI.JYx({id:"totalCoinLabel",parent:i,visible:!1,VQi:"parent",left:-1e3}),s=new CUI.JYx({id:"deathCountLabel",parent:i,visible:!1,VQi:"parent",left:-1e3}),s=new CUI.U4({id:"hero-head-btn",parent:i,visible:!1,VQi:"parent",left:-1e3}),i=new CUI.JfE({id:"buttonPanel",visible:!0,parent:this,margin:0,right:60,bottom:60,width:"auto",height:"auto",NYV:{name:"hbox"}}),s=new ChallengePanel({parent:this});this.T8a=s,Config.o||(this.cursor=new DefaultCursor({Vy1:this})),this.V6j={"btn-0":[null,null,"btn-1",null],"btn-1":["btn-0","btn-1-1","btn-2",null],"btn-2":["btn-1","btn-5","hero-head-btn","hero-head-btn"],"hero-head-btn":["btn-2","btn-5","btn-5","btn-7"],"btn-5":["btn-2","btn-6","btn-6","hero-head-btn"],"btn-6":["btn-5","btn-7","btn-7","btn-5"],"btn-7":["btn-6","hero-head-btn","hero-head-btn","btn-6"]}},NPl:function(){if(game.iY7.Ywt&&game.iY7.Ywt.length>0){var t=this;this.Tt2.inited&&setTimeout(function(){t.Tt2.ready||(t.Tt2.ready=!0,t.Tt2.Tzt(game.iY7.Ywt))},100)}},iLX:function(t){t=t||game.Va.heroIndex;var i=this.all["hero-head-btn"];i.i$h();var s=CUI.Utils.AH("hero-head-"+t);i.JsW(s)},iue:function(t){t=t||game.Va.coin;var i=this.all.totalCoinLabel;i.setText(t)},ivs:function(t){this.cursor&&(this.cursor.disabled=!1,this.cursor.V6j=this.V6j,this.cursor.V1O=t||"btn-0",this.cursor.VIo())},NFs:function(){this.ivs(),this.iAs&&this.iAs.NFs()}}),PlayPage=CUI.Class.create({LE:CUI.NxI,visible:!1,name:"PlayPage",Qy:function(){},Njy:function(){this.TKp=[];var t;t=new PauseButton({parent:this,visible:!0,VQi:"parent",i8$:!0,VF_:35,NyV:15,Nhq:15,NBc:35,top:15,right:15,width:150,height:70,iM$:-0,i19:-0}),this.TKp.push(t);var i=new CUI.JYx({id:"pauseCountdown",parent:this,NXS:!0,NI0:!0,visible:!1,fontName:TEXT.font.Art,backgroundColor:CUI.renderer.colorRgb(0,0,0),NYs:.3,width:game.kJ.width,height:280,Gi:{textAlign:"center",sO:"#000000",strokeWidth:6,color:"#ffffff",text:"0",fontSize:100},Nqm:function(t,i,s){this.JVO.offsetY=4*Math.sin(s/100)}}),s=UIImage.gtw,e=CUI.Utils.AH("icon_time");e.qj="left",e.offsetX=20,e.offsetY=0;var n=825,i=new CUI.JYx({id:"timeLabel",parent:this,left:n+5,top:37,width:270,height:30,Gi:{offsetX:80,offsetY:0,textAlign:"left",sO:"#000000",strokeWidth:5,color:"#ffffff",text:"0000000",fontSize:26,fontName:TEXT.font.Art}}),s=UIImage.gqF,e=CUI.Utils.AH("icon_coin");e.qj="left",e.offsetX=10,e.offsetY=0;var i=new CUI.JYx({id:"scoreLabel",parent:this,left:30,top:24,width:s.width,height:s.height,Ny6:{img:s},JU7:e,Gi:{textAlign:"left",offsetX:65,offsetY:0,text:"0     ",color:"#ffffff",sO:"#000000",strokeWidth:6,fontSize:28,fontName:TEXT.font.Art}});this.iaa=i;var h=new ResultPanel({parent:this,right:-420,top:140,zIndex:90});this.resultPanel=h;var h=new GamePausePanel({parent:this,visible:!1,zIndex:91,BI7:this.BI7});this.TZF=h,this.TKp.push(h),Config.o||(this.cursor=new DefaultCursor({Vy1:this}))},TIf:function(t){this.Iq1("bestLabel");var i=UIImage.gl6,s=(CUI.Utils.AH("icon_coin"),new CUI.JYx({Ek:!0,VQi:"parent",parent:this,id:"bestLabel",height:i.height,left:30,top:24,visible:!1,Gi:{textAlign:"center",text:TEXT.BEST+": -----------",offsetY:0,color:"#ffffff",sO:"#000000",strokeWidth:5,fontSize:26,fontName:TEXT.font.Art}}));t?(s.width="auto",s.paddingLeft=50,s.paddingRight=50,s.NU2={img:i,fill:!0,T:0,B:0,L:30,R:30}):(s.width=i.width,s.Ny6={img:i}),s.init()},Vzd:function(){return this.TKp},NFs:function(){if(setTimeout(function(){},500),game.kJ.match?this.iaa.visible=!1:this.iaa.visible=!0,game.Va.TqR){var t=this.resultPanel;t.show()}},setTime:function(t){var i=Utils.aF(t),s=this.all.timeLabel;s.setText(""+i,!1)},T0a:function(t,i){t=t||"--";var s=10*i||0,e=s?Utils.aF(s):"--";this.all.bestLabel.setText(t+" : "+e,!1)},THA:function(t){var i=10*t||0,s=i?Utils.aF(i):"--";this.all.bestLabel.setText(TEXT.BEST+": "+s,!1),this.all.bestLabel2.setText(TEXT.BEST+": "+s,!1)},Tnh:function(t){var i=this.all.scoreLabel;if(i.setText(""+t),0!=t){var s=new TWEEN.Tween(i).to({scale:1.2},100).easing(TWEEN.Easing.Quadratic.Out),e=new TWEEN.Tween(i).to({scale:1},200).easing(TWEEN.Easing.Quadratic.In);s.chain(e).start()}}}),LoadingScene=GT.Class.create({LE:GT.np,name:"LoadingScene",x:0,y:0,process:0,Taq:!1,TTk:!1,T2a:0,Uf:0,T9G:0,TBG:0,init:function(t){this.game=t,this.width=this.game.width,this.height=this.game.height,this.TQJ(),this.resize(),this.loadBgImg=this.loadBgImg||$id("load-bg"),this.loadValueImg=this.loadValueImg||$id("load-value"),this.loadBgImg&&(this.THq=Utils.A6(this.loadBgImg)),this.loadValueImg&&(this.TU6=Utils.A6(this.loadValueImg))},resize:function(){this.ZQ=Math.max(0,this.game.A$4.ZQ),this.oT=Math.max(0,this.game.A$4.oT),this.jL=this.game.A$4.jL,this.jc=this.game.A$4.jc,this.j8=this.game.A$4.j8,this.jM=this.game.A$4.jM},TQJ:function(){var t=this,i={parent:t,fo:"img",Pn:!0,f9:!0,interval:50,delay:10,Mu:function(i,s){var e=s.M1,n=s.Mj;s.Mt;t.process=e/n},Fq:function(i){var s=i.M1,e=i.Mj,n=i.Mt;for(var h in n)ResourcePool.add(h,n[h]);setTimeout(function(){t.onLoad(s,e,n)},i.delay)}};this.loader=new GT.PV(i),this.loader.Mr=resourceList,this.loader.init()},TzB:function(){this.game.Ac8&&this.game.Ac8(),this.loaded=!1,this.loading=!0,this.loader.start()},onLoad:function(t,i,s){this.loaded=!0,this.loading=!1,this.game.AQP&&this.game.AQP();var e=this;setTimeout(function(){e.TjK()},200)},TjK:function(){game.T7s()},k6:function(){game.dataLogEvent("Loading_start"),this.Taq=!0,this.TzB()},kZ:function(){},update:function(t,i){this.Taq&&this.process>=1&&(this.process=1)},T7J:function(t,i,s){var e=Math.min(1,this.process);if(this.loadValueImg){var n=this.T2a+this.ZQ+(this.jL-this.loadBgImg.width>>1),h=this.Uf+this.oT+(this.jc-this.loadValueImg.height>>1);if(this.loadBgImg){var a=0,o=0;t.renderAt(this.THq,n+a,h+o)}var r=this.loadValueImg.width*e;r&&t.renderPartAt(this.TU6,0,0,r,this.loadValueImg.height,n+this.T9G,h+this.TBG)}else{this.j8}},render:function(t,i,s){this.Taq&&this.T7J(t,i,s)}}),StartScene=GT.Class.create({LE:BaseScene,name:"StartScene",frameCount:0,x:0,y:0,first:!0,bgColor:11197951,init:function(t){this.game=t,this.width=this.game.width,this.height=this.game.height,this.ZQ=Math.max(0,this.game.A$4.ZQ),this.oT=Math.max(0,this.game.A$4.oT),this.jL=this.game.A$4.jL,this.jc=this.game.A$4.jc,this.Tgk(),this.ABT(this.game),this.T1a=new GT.WD({x:-t.offsetX,y:-t.offsetY,WB:.001,width:t.j8,height:t.jM}),this.T1a.init()},Tgk:function(){},ABT:function(t){var i=this,s="home_title",e=Utils.AH(s+"-"+DefaultLanguage),n=e.sw,h=(n>>1)-10;e.sw=h,this.TQq=Utils.createSprite(e),e.sx=h,e.sw=n-h,this.TTN=Utils.createSprite(e);var a=Utils.AH("home_bg");this.TBr=Utils.createSprite(a),this.Vy1=new StartPage({left:this.ZQ,top:this.oT,width:this.jL,height:this.jc,NTY:{x:-50,w:100}}),this.Vy1.update();var o=this.Vy1.all.menuPanel,r=this.Vy1.width-n>>1,l=o.y-this.TQq.textureHeight-50;this.T$f=r,this.TIj=l,this.TRf=r+h,this.T_5=l;var u="";i.Ta0="Al"+u+"pha ve"+u+"rsi"+u+"on for tes"+u+"ting. aut"+u+"ho"+u+"r: @f"+u+"in"+u+"scn"},onResize:function(){this.Vy1.e9(this.jL,this.jc)},k6:function(){this.renderTexture=PIXI.RenderTexture.create(1920,1080),game.A0z("bgm-play"),game.AEe("bgm-home"),game.TrS(),this.A4L(),this.input={},game.ieu(),this.TTY=[],this.Vy1.show(),this.A9Z=!0,this.exitOnMenuPress=!0},iGz:function(t){game.AEe("unlock");var i=t.x+t.w/2,s=t.y+t.h/2,e=.4*t.w,n=.4*t.h,h=new SplashEffect({x:i,y:s,width:e,height:n,ST0:16,size:40,color:16768443,alpha:.6,s1:.004,Sw8:7,SSf:12,SHP:7,Swb:12,Szj:1.5,SB5:9,blend:PIXI.BLEND_MODES.ADD,Spt:1500,SeF:!1,Uhf:function(){}});h.init(),this.ttL(h)},kZ:function(){},ttL:function(t){this.TTY.push(t)},update:function(t,i){this.frameCount++,(this.input.Menu&&this.input.Menu.bwI||this.input.Pause&&this.input.Pause.bwI)&&(this.Vy1.Tt2.visible?this.Vy1.Tt2.hide():this.Vy1.Teq.visible?this.Vy1.Teq.hide():this.Vy1.i$U.visible?this.Vy1.i$U.hide():this.Vy1.TG6.visible?this.Vy1.TG6.hide():this.Vy1.T8a.visible&&this.Vy1.T8a.hide()),this.A3p(t,i),this.Vy1.update(t,i),this.TTY.forEach(function(s){s.update(t,i)}),this.T1a.update(t,i)},render:function(t,i,s){this.TVD(t,i,s);10*(Math.sin(s/200)+0),10*-(Math.sin(s/200)+0);this.Vy1.render(CUI.renderer,i,s),this.Aq0(CUI.renderer,i,s),Utils.K5(this.TTY,t,i,s),this.T1a.render(t,i,s),Config.test&&!this.Vy1.T8a.visible&&t.drawText(this.Ta0,10,this.oT+10,{fill:"#ff3300",stroke:"#ffffff",strokeThickness:6,fontSize:"42px",lineHeight:60})},TVD:function(t,i,s){t.renderAt(this.TBr,0,0)},Az3:function(t,i,s,e){},AgV:function(t,i,s,e){this.Vy1.g9U&&this.Vy1.g9U.Wf(t,i,s)},AGW:function(t,i,s,e){},A2d:function(t,i,s,e,n,h,a,o){},Ajo:function(t,i,s,e,n,h,a,o){},z0:function(t,i){this.$Ry(t,i)}}),PlayScene=GT.Class.create({LE:BaseScene,name:"PlayScene",mode:null,BRR:null,x:0,y:0,first:!0,TPq:null,Ksr:!1,KiT:!1,frameCount:0,TcV:0,T$$:0,Tsy:0,StK:0,BNC:0,S05:0,Bpe:0,BI7:0,matchSN:null,T7_:null,restart:!1,iceRate:null,sawRate:null,T3M:6e3,T1W:8e3,Tnd:0,Sxb:4e3,TYA:3e3,Txd:0,SHk:null,heroIndex:null,Tv0:!1,init:function(t){this.SN_SEED=0,this.game=t,this.width=this.game.A$4.width,this.height=this.game.A$4.height,this.ZQ=Math.max(0,this.game.A$4.ZQ),this.oT=Math.max(0,this.game.A$4.oT),this.jL=this.game.A$4.jL,this.jc=this.game.A$4.jc,this.SHk=null===this.SHk?t.Va.heroIndex:this.SHk,this.heroIndex=null===this.heroIndex?t.Va.heroIndex:this.heroIndex,this.TE7=new PIXI.filters.BlurFilter(7),this.Tal=new PIXI.filters.BloomFilter(9,8,4,1),this.T1K=new PIXI.filters.ShockwaveFilter,this.T1K.padding=20,this.T1K.radius=200,this.T1K.params=[30,2.8,40,1.1],this.T1K.duration=.8,this.Tkj=Utils.createContainer(),this.Tgk(),this.ABT(this.game),this.T1a=new GT.WD({x:-t.offsetX,y:-t.offsetY,WB:.002,WC:0,width:t.j8,height:t.jM}),this.T1a.init()},TuV:function(){this.iceRate=this.iceRate||0===this.iceRate?this.iceRate:this.stage.iceRate||0,this.sawRate=this.sawRate||0===this.sawRate?this.sawRate:this.stage.sawRate||0,1==this.iceRate?this.Tyd=Utils.AH("bg-"+Config.UC):this.Tyd=Utils.AH("bg-"+this.SHk),this.TBr=Utils.createSprite(this.Tyd),this.Bz1=this.stage.Bz1,this.BYs=this.stage.BYs,this.BIE=this.stage.BIE,this.BrH=this.stage.BrH,this.BOZ=this.stage.BOZ,this.Tj9(),this.Bjb()},TrB:function(){this.S05=0,this.StK=0,this.BNC=0,this.Bpe=StageConfig.Bpe,this.SmG=StageConfig.SmG,this.stage=this.SmG[this.S05]},T9Z:function(){var t=this.mode,i=this.map,s=this.$A_;return t=t||0===t?t:"",i=i||0===i?i:"",s=s||0===s?s:"",i+"-"+s},TdZ:function(t){},Tgk:function(){},ABT:function(t){this.restart||!t.Uj&&!t.ijC||(this.BSA=new RemoteGuide({x:this.ZQ+this.jL-100,y:this.oT+this.jc-100}),this.BSA.init(this)),this.TCG=Utils.createSprite(Utils.AH("dark-top")),this.TNy=Utils.createSprite(Utils.AH("dark-bottom")),this.TzX=[Utils.createSprite(Utils.AH("flag-bullet-0")),Utils.createSprite(Utils.AH("flag-bullet-1")),Utils.createSprite(Utils.AH("flag-bullet-2")),Utils.createSprite(Utils.AH("flag-bullet-3")),Utils.createSprite(Utils.AH("flag-bullet-4")),Utils.createSprite(Utils.AH("flag-bullet-5"))],this.TZ6={Left:Utils.createSprite(Utils.AH("btn-left")),Right:Utils.createSprite(Utils.AH("btn-right")),BtnB:Utils.createSprite(Utils.AH("btn-up"))},this.tjz=new HpBar({}),this.tjz.init(this),this.Vy1=new PlayPage({left:this.ZQ,top:this.oT,width:this.jL,height:this.jc,BI7:this.BI7,NTY:{x:-50,w:100}})},onResize:function(){this.Vy1.e9(this.jL,this.jc)},TYn:function(t){if(this.match=game.iY7.ibA(t),this.match){var i=this.match.gameInfo;this.match.iaj&&(this.iSN=this.match.iaj),this.mode=i.mode,this.map=i.map,this.$A_=i.seed,this.iceRate=i.iceRate,this.sawRate=i.sawRate,this.BI7=i.map;i.config}},k6:function(){GameInput.touchpad&&GameInput.touchpad.init(),game.A0z("bgm-home"),game.AEe("bgm-play"),this.A4L(),this.input={},this.AXG=new GT.IW3,this.TQm=0,this.frameCount=0,this.KeM=0,this.stageTime=0,this.pauseCountdown=0,this.platforms=[],this.items=[],this.BRZ=[],this.thC=[],this.w6L=[],this.TTY=[],this.$fj=[],this.Tk$&&(this.K6i=!0),this.TYn(this.matchSN),this.BRR=this.mode,"challenge"==this.mode?this.BRR+=this.BI7||0:"challengeIce"==this.mode&&(this.BRR+=this.BI7||0),this.match||game.T5F&&(this.$A_=game.T5F.$A_||this.$A_),this.TdZ(this.$A_),this.TrB(),this.TuV();var t=780;if(this.T8f=new TimeBar({x:this.ZQ+t,y:this.oT+24+10,width:360,height:34,Bws:this.stage.B39}),this.T8f.init(this),this.K6i?(this.player=new HollowPlayer({heroIndex:this.heroIndex,x:this.stage.x||this.width/2,y:this.stage.y||300}),this.player.init(this)):(this.player=new Player({heroIndex:this.heroIndex,x:this.stage.x||this.width/2,y:this.stage.y||300}),this.player.init(this)),this.Tv0&&(this.Tk$?(this.iSN=this.Tk$,this.T_G()):this.match?this.T_G():game.T5F&&this.TSr(game.T5F)),this.TJb=new GearManager,this.TJb.init(this),this.Vy1.update(0,0),this.Vy1.show(),this.T1a.yn(),this.t05=[-100,-100,this.width+100,this.height+100],this.A9Z=!1,this.TxH(),this.match){var i=this.match.iaj||{};this.Vy1.TIf(!0),this.Vy1.T0a(i.playerName,i.score)}else this.Vy1.TIf(!1),this.Vy1.THA(game.Va.TMU(this.BRR,"hiScore"));game.Va.onPlay(this.player),this.exitOnMenuPress=!1},TOI:function(t){},TQs:function(t){var i=t.gameData||{},s=new GhostPlayer({x:this.stage.x||this.width/2,y:300,
ghost:1,heroIndex:t.heroId,playerSN:t.playerSN,playerName:t.playerName,Kb0:t.time,KQl:i.jump,Kct:i.KiU,KpR:i.ByM});return s.init(this),s},TSr:function(t){var i=this,s=this.Bve=[],e=t.list;e.forEach(function(t){if(t){var e=i.TQs(t);s.push(e)}})},T_G:function(){if(this.iSN){var t=this.Bve=[],i=this.iSN;if(i){var s=this.TQs(i);t.push(s)}}else game.T5F&&this.TSr(game.T5F)},TLW:function(){var t=this.match.T5O;if(t)for(var i=this.Bve=[],s=t,e=s.length-1,n=Math.max(0,e-3),h=e;h>=n;h--){var a=s[h];if(a){var o=this.TQs(a);i.push(o)}}},Bjb:function(){var t=this,i=this.SmG[this.S05];if(i.BRZ){var s=JSON.parse(JSON.stringify(i.BRZ));s.forEach(function(s,e){var n=GunTypes[s.type]||FireFloatGun,h=new n(s);if(h.index=e,i.BsE){var a=i.BsE[e];h.path=a}h.init(t),t.BRZ.push(h)})}},Tj9:function(){var t=this,i=this.SmG[this.S05],s=JSON.parse(JSON.stringify(i.platforms));this.iceRate=this.iceRate||0===this.iceRate?this.iceRate:this.stage.iceRate||0,this.sawRate=this.sawRate||0===this.sawRate?this.sawRate:this.stage.sawRate||0;var e=!1,n=!1;if(s.forEach(function(i,s){var h=new Platform(i);h.index=s,i.withIce!==!0&&i.withIce!==!1&&(h.withIce=!!t.iceRate&&t.random()<t.iceRate),t.iKK&&(h.withIce=!0,h.SHk=Config.UC),e=e||h.withIce,null!==i.withSaw&&void 0!==i.withSaw&&0!==i.withSaw||(h.withSaw=!!t.sawRate&&t.random()<t.sawRate),n=n||h.withSaw,h.init(t),t.platforms.push(h)}),t.iceRate&&!e&&(t.platforms[t.random()*t.platforms.length>>0].withIce=!0),t.sawRate&&!n){var h=t.random()*t.platforms.length>>0;t.platforms[h].withSaw=!0,t.platforms[h].SrG()}},TCJ:function(t,i,s){s=s||this.TBr,this.Tym=0,this.TP0=!0,this.T1K.center=[t,i],console.log(s),s.filters=[this.T1K];var e=this;this.AXG.Mq(function(){e.G50()},800)},G50:function(){this.TP0=!1,this.TBr.filters=null},Ec9:function(t,i){this.TP0&&(this.T1K.time=this.Tym/1e3,this.Tym+=t)},Evg:function(t){t=t||1;var i=this.platforms.slice(0);this.CG(i);for(var s=0;s<i.length;s++){var e=i[s];if(!e.SLr&&!e.withIce&&(e.SsY(),t--,t<=0))break}},EUn:function(t){t=t||1;var i=this.platforms.slice(0);this.CG(i);for(var s=0;s<i.length;s++){var e=i[s];if(!e.S_E&&e.withIce&&(e.S8X(),t--,t<=0))break}},EfD:function(t){var i=this;if(0===this.iceRate)return void(t&&t(i));var s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOnAllPlatformIces over"),t&&t(i))};this.platforms.forEach(function(t,i){t.SLr?e():t.SsY(e)})},Exm:function(t){var i=this;if(1===this.iceRate)return void(t&&t(i));var s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOffAllPlatformIces over"),t&&t(i))};this.platforms.forEach(function(t,i){t.SLr&&!t.S_E?t.S8X(e):e()})},EDc:function(t){t=t||1;var i=this.BNC||0,s=this.platforms.slice(0);this.CG(s);for(var e=0;e<s.length;e++){var n=s[e];if(n.saw.off){var h=n.Shd;if(h*=1+i/4,n.SrG(),t--,t<=0)break}}},Eol:function(t){var i=this.platforms.slice(0);this.CG(i);for(var s=0;s<i.length;s++){var e=i[s];if(!e.saw.off&&(e.S4a(),t--,t<=0))break}},EY3:function(t){var i=this,s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOnAllPlatformSaws over"),t&&t(i))};this.platforms.forEach(function(t,i){t.SbZ=e})},E08:function(t){var i=this,s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOffAllPlatformSaws over"),t&&t(i))};this.platforms.forEach(function(t,i){t.SSl=e})},EbU:function(t){var i=this,s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOnAllPaths over"),t&&t(i))};this.platforms.forEach(function(t,i){t.Sb4(null,e)})},E4B:function(t){var i=this,s=this.platforms.length,e=function(){s--,s<1&&(console.log("turnOffAllPaths over"),t&&t(i))};this.platforms.forEach(function(t,i){t.SAY(.05,e)})},ECT:function(t){this.TJb.BRZ.forEach(function(t,i){t.off?(t.off=!1,t.disabled=!1,t.t2G()):t.disabled=!0})},Ebr:function(t){var i=this,s=this.TJb.BRZ.length,e=function(){s--,s<1&&(console.log("turnOffGuns over"),t&&t(i))};this.TJb.BRZ.forEach(function(t,i){t.off?e():t.t32(e)})},EUF:function(t){},EPs:function(t,i){var s=this,e=this.platforms.length,n=function(){e--,e<1&&(console.log("movePlatforms over"),i&&i(s))};t=t||.1;var h=this.SmG[this.S05],a=h.platforms;this.platforms.forEach(function(i){var s=a[i.index];i.BX=t,i.moveTo(s.x,s.y,n)})},ilf:function(t){var i=this;i.$fj.forEach(function(t){i.AXG.p1(t,!0)}),i.$fj.length=0,i.EUM=!0,i.TJb.Blx(function(){i.EUF(function(){var t=i.S05,s=i.BNC;i.EKj(),s!=i.BNC&&i.Epk(i.BNC),i.stageTime=0,i.Eg_=!1,i.EH2=!1,console.log("Me.stageIndex",i.S05),i.TJb.Bmh(i.S05),t==i.S05?i.TxH():i.EPs(null,function(){i.TxH()})})})},EKj:function(t){t||0===t?this.S05=t:this.S05++,this.StK++,this.S05>=this.Bpe&&(this.S05=1,this.BNC++),this.stage=this.SmG[this.S05]},ELm:function(){for(var t=0;t<100;t++)this.StK=t,console.log("===== ",t," ====="),this.TxH()},TxH:function(){},Epk:function(t){},BB8:function(t,i,s){var e=this.TzX[t.wlg];e&&(this.ECC={cC:e,Spt:2e3,x:i,y:s,apg:i>this.width/2,alpha:0,BK1:.002})},EB0:function(t,i,s){var e=this.ECC;if(e&&!(e.Spt<0)){var n=1,h=e.cC,a=10,o=0;this.paused||(e.alpha+=e.BK1*i,e.Spt-=i,e.Spt<1e3&&(e.BK1=-.002),n=e.alpha,n=Math.max(0,Math.min(1,n+.5*Math.sin(s/100))),a+=Utils.Je(-3,3),o+=Utils.Je(-6,6)),t.setAlpha(n),e.apg?(h.scale.set(-1,1),t.renderAt(h,e.x+a,e.y+o-h.textureHeight/2)):(h.scale.set(1,1),t.renderAt(h,e.x+a,e.y+o-h.textureHeight/2)),t.restoreAlpha()}},ttL:function(t){this.TTY.push(t)},kZ:function(){GT.US.rW("effect")},pause:function(){this.A9Z=!0,this.paused=!0},resume:function(){this.A9Z=!1,this.paused=!1,this.A4L(),this.input={},this.pauseCountdown=3900,this.player.ready||(this.pauseCountdown=1)},complete:function(){},K9t:function(){game.Va.onDied(this.player),game.Va.Fq(this.player),game.restart(this)},K$1:function(t,i){var s=new SplashEffect({color:16777215,x:t,y:i,ST0:15,size:18,mP:.001,alpha:.9,s1:.0025,BT:.002,Szj:.25,SB5:9,BC:6e-4,Uhf:function(){}});s.init(),this.ttL(s)},update:function(t,i){if(this.input.Prev&&this.input.Prev.bwI)return this.paused=!0,void setTimeout(function(){game.EJq()},10);if(this.input.Next&&this.input.Next.bwI)return this.paused=!0,void setTimeout(function(){game.ilf()},10);if(this.input.Pause&&this.input.Pause.bwI&&(game.kJ.paused=!game.kJ.paused),this.input.Menu&&this.input.Menu.bwI&&(this.Vy1.TZF.visible?this.Vy1.TZF.hide():this.Vy1.TZF.show()),this.A3p(t,i),!this.paused){if(this.pauseCountdown>0)return this.pauseCountdown-=1.85*t,void(this.pauseCountdown<=0&&GT.US.rs("effect"));this.AXG.update(t,i),this.Ec9(t,i);this.frameCount+=1,this.stageTime+=t,this.platforms.forEach(function(s){s.update(t,i)});var s=this.K6i&&this.Bve?this.Bve[0]:this.player;this.items.forEach(function(e){e.update(t,i),s.dead||e.$p8(s)}),this.TJb.update(t,i),this.BRZ.forEach(function(e){e.update(t,i),s.dead||e.$p8(s)}),this.thC.forEach(function(e){e.update(t,i),s.dead||e.$p8(s)}),this.w6L.forEach(function(e){e.update(t,i),s.dead||e.$p8(s)}),this.TTY.forEach(function(s){s.update(t,i)}),this.Bve&&this.Bve.forEach(function(s){s.dead||s.update(t,i)}),s.update(t,i),s.KMt!==s.Kd5||s.dead||(this.B8D(),s.KMt=0),this.E7e(t,i),this.EOq(t,i),!s.dead&&s.ready&&(this.KeM+=t,this.T8f.update(t,i)),this.tjz.update(t,i),this.K6i&&this.Bve&&this.Bve[0].dead&&(GT.US.r$("effect"),this.Vy1.TZF.show()),this.Vy1.setTime(this.KeM),this.Vy1.update(t,i),this.T1a.update(t,i)}},B8D:function(t){t=t||12;var i=this.platforms.slice(0);this.CG(i),game.AEe("start-bonus");var s={};Item.SuE(s);for(var e=this.items,n=i.length,h=0;h<n;h++)for(var a=i[h],o=0;o<a.size;o++)if(e.push(a.S7J(o,s)),t--,t<=0)return},E7e:function(t,i){this.KeM<3e3||(this.Tnd<=0&&(this.EaT(),this.Tnd=this.T1W),this.Tnd-=t)},EaT:function(){var t=this.platforms.length,i=t*this.random()>>0,s=this.platforms[i];i===this.E5I&&(i=(i+t-1)%t,s=this.platforms[i]),this.EIy=i,this.E5I=i;var e=s.Sti();this.items.push(e)},EOq:function(t,i){this.match||this.KeM<6e3||(this.Txd<=0&&(this.Ee5(),this.Txd=this.TYA),this.Txd-=t)},Ee5:function(){var t=this.platforms.length,i=t*this.random()>>0,s=this.platforms[i];i===this.EIy&&(i=(i+t-1)%t,s=this.platforms[i]),this.EIy=i,this.E0J=i;var e=s.S7J();this.items.push(e)},tdg:function(){this.Vy1.Tnh(this.player.coin)},render:function(t,i,s){t.render(this.TBr),Utils.K5(this.items,t,i,s),Utils.K5(this.thC,t,i,s),Utils.K5(this.platforms,t,i,s),this.Bve&&this.Bve.forEach(function(e){e.dead||e.render(t,i,s)}),this.player.dead||this.player.render(t,i,s),Utils.K5(this.w6L,t,i,s),Utils.K5(this.BRZ,t,i,s),Utils.K5(this.TJb.BRZ,t,i,s),Utils.K5(this.TJb.BYs,t,i,s),Utils.K5(this.TTY,t,i,s),this.oT<100&&(t.drawDisplayObject(this.TCG,0,0,this.width,this.TCG.textureHeight),t.drawDisplayObject(this.TNy,0,this.oT+this.jc-this.TCG.textureHeight,this.width,this.TNy.textureHeight)),this.EB0(t,i,s),this.EQ0(t,i,s)},EQ0:function(t,i,s){if(this.tjz.render(t,i,s),this.T8f.render(t,i,s),!game.Uj&&!game.ijC&&GameInput.touchpad&&GameInput.touchpad.connected){GameInput.touchpad.render(t,i,s);var e=GameInput.touchpad.buttons,n=this.oT+this.jc-160;for(var h in e){var a=e[h];a.pressed?t.setAlpha(.2):t.setAlpha(.4);var o=this.TZ6[h];"Left"==h?t.drawDisplayObject(o,a.x+a.width/2-o.textureWidth-40,n-o.textureHeight+100):"Right"==h?t.drawDisplayObject(o,a.x-a.width/2+40,n-o.textureHeight+100):"BtnB"==h&&t.drawDisplayObject(o,a.x+a.width/2-o.textureWidth-80,n-o.textureHeight+90)}t.setAlpha(1)}if(this.pauseCountdown>0){var r=this.pauseCountdown/1e3>>0;this.Vy1.all.pauseCountdown.visible=!0,this.Vy1.all.pauseCountdown.setText(r+"")}else this.Vy1.all.pauseCountdown.visible=!1;this.T1a.render(t,i,s),this.Vy1.render(CUI.renderer,i,s),this.Aq0(CUI.renderer,i,s)},E4I:function(t,i,s,e,n,h,a,o,r,l){return},AFM:function(){this.A4L(),this.input={},GT.US.r$("effect"),this.Vy1.TZF.show()},AMz:function(){this.A4L(),this.input={}},IvB:function(t){for(var i,s,e=t.length,n=1;n<e;n++){i=t[n];for(var h=i.Sg4,a=n;a>0&&(s=t[a-1]).Sg4>h;a--)t[a]=s;t[a]=i}},Az3:function(t,i,s,e){},AgV:function(t,i,s,e){},AGW:function(t,i,s,e){},A2d:function(t,i,s,e,n,h,a,o){},z0:function(t,i){this.$Ry(t,i)}}),PlayClassicScene=GT.Class.create({LE:PlayScene,name:"PlayClassicScene",mode:"classic",TdZ:function(t){t=t||game.EgP[0]+0,this.$ze(t)},TrB:function(){this.S05=0,this.StK=0,this.BNC=0,this.Bpe=StageConfig.Bpe,this.SmG=StageConfig.SmG,this.stage=this.SmG[this.S05]},EUF:function(t){var i=this;console.log("resetPlatforms start"),i.Exm(function(){console.log("turnOffAllPlatformIces over"),i.E08(function(){console.log("turnOffAllPlatformSaws over"),i.E4B(function(){console.log("resetPlatforms over"),t&&t(i)})})})},TxH:function(){var t=this;this.EUM=!1,this.stageTime=0,t.$fj.length=0;var i=0,s=Math.min(.5*this.StK+2>>0,6),e=this.$NL(function(){t.TJb.B$n=!0},1e3,s,1e4);i=Math.max(i,e);var e=this.$NL(function(){t.EbU()},6e3);if(i=Math.max(i,e),t.StK>0){var n=Math.min(this.platforms.length,.5*this.StK+1>>0),e=this.$NL(function(){t.EDc()},1e4,n,6e3);i=Math.max(i,e)}if(1!==t.iceRate&&t.StK>2&&t.BNC>=1){var n=Math.min(this.platforms.length,.3*this.StK+1>>0),e=this.$NL(function(){t.Evg()},15e3,n,6e3);i=Math.max(i,e)}i+=9e3,console.log("stageTime",i),this.$NL(function(){t.ilf()},i)},Epk:function(t){this.TJb.BZJ(t)}}),PlayClassicIceScene=GT.Class.create({LE:PlayClassicScene,name:"PlayClassicIceScene",mode:"challengeIce",TdZ:function(t){t=t||game.EgP[0]+1,this.$ze(t)},TrB:function(){this.iceRate=1,this.S05=1,this.StK=1,this.BNC=0,this.Bpe=StageConfig.Bpe,this.SmG=StageConfig.SmG,this.stage=this.SmG[this.S05]}}),PlayChallengeScene=GT.Class.create({LE:PlayScene,name:"PlayChallengeScene",mode:"challenge",BI7:0,TdZ:function(t){var i=this.BI7+1;t=t||game.EgP[0]*i+i,this.$ze(t)},TrB:function(){this.S05=this.BI7,this.StK=2,this.BNC=1,this.Bpe=ChallengeConfig.Bpe,this.SmG=ChallengeConfig.SmG,this.stage=this.SmG[this.S05]},EUF:function(t){var i=this;console.log("resetPlatforms start"),i.Exm(function(){console.log("turnOffAllPlatformIces over"),i.E08(function(){console.log("turnOffAllPlatformSaws over"),console.log("resetPlatforms over"),t&&t(i)})})},EKj:function(t){this.S05=this.BI7,this.StK++,this.BNC++},TxH:function(){var t=this;this.EUM=!1,this.stageTime=0,t.$fj.length=0;var i=0,s=Math.min(.5*this.StK+2>>0,6),e=this.$NL(function(){t.TJb.B$n=!0},1e3,s,1e4);i=Math.max(i,e);var e=this.$NL(function(){t.EbU()},3e3);i=Math.max(i,e),i+=9e3,console.log("stageTime",i),this.$NL(function(){t.ilf()},i)},Epk:function(t){this.TJb.BZJ(t)}}),PlayIceScene=GT.Class.create({LE:PlayChallengeScene,name:"PlayIceScene",mode:"challengeIce",SHk:6,iKK:!0}),User=GT.Class.create({Eb1:null,EzI:!0,IDL:null,appName:null,appVersion:0,appVerNum:0,env:null,ukey:null,runCount:0,buyCount:0,IAPCount:0,accountInfo:null,purchasedInfo:null,heroIndex:0,heroInfo:null,challengeInfo:null,startGuide:0,finishGuide:0,cheatCount:0,shareCount:0,rateCount:0,startADCount:0,removedAD:!1,score:0,time:0,coin:0,stageKey:0,totalScore:0,star:0,cup:0,actionPoint:0,lastPlayDate:null,noAd:0,Ek6:"challenge",EV2:{classic:!0,challengeIce:!0},E0l:{star:0,hiScore:0,hiTime:0,hiCoin:0,totalScore:0,totalTime:0,totalCoin:0,hiStage:0,playCount:0,deathCount:0},init:function(){this.Eb1=this.Eb1||this.appName,this.IDL=this.IDL||{},this.EbE=new GT.Ibh({id:this.Eb1,II1:this.EzI,IDL:this.IDL}),this.EbE.init(),this.Ela(),this.Ein(),this.AQP(),this.runCount<2&&SysAction.reportCount(GameName+".install"),SysAction.reportCount(GameName+".run"),this.setItem("appVersion",game.appVersion),this.setItem("appVerNum",game.appVerNum),(game.params.hero||0===game.params.hero)&&(this.heroIndex=game.params.hero)},AQP:function(){this.setItem("appVersion",game.appVersion),this.runCount++,this.setItem("runCount",this.runCount),this.appVerNum=this.E2H(this.appVersion),1==this.runCount&&this.EWv();var t=Utils.dn();this.lastPlayDate!=t&&(this.lastPlayDate=t,this.save("lastPlayDate")),game.EUN(this.lastPlayDate),this.i_3(),this.iJv()},i_3:function(){var t=this;HeroConfig.BGa.forEach(function(i,s){if(i&&!i.unlockCoin){var e=s,n=t.heroInfo[e]=t.heroInfo[e]||{};n.unlocked=!0}}),this.save("heroInfo")},iJv:function(){var t=this,i=this.iFN();ChallengeConfig.SmG.forEach(function(s,e){if(game.Uj||game.ijC||s&&(!s.unlockStar||s.unlockStar<=i)){var n=e,h=t.challengeInfo[n]=t.challengeInfo[n]||{};h.unlocked=!0}});var s=-1;for(var e in t.challengeInfo){var n=t.challengeInfo[e];n.unlocked&&(s=Math.max(Number(e)+1,s))}return this.save("challengeInfo"),s},EWv:function(){},E2W:function(){var t=Date.now()%1e9,i=Math.floor(123456*Math.random());return t+""+i},Ela:function(){this.load("appVersion",0),this.load("ukey",this.E2W()),this.load("runCount",0),this.load("buyCount",0),this.load("IAPCount",0),this.load("accountInfo",{}),this.load("purchasedInfo",{}),this.load("heroIndex",0),this.load("heroInfo",{}),this.load("challengeInfo",{}),this.load("startGuide",0),this.load("finishGuide",0),this.load("cheatCount",0),this.load("shareCount",0),this.load("rateCount",0),this.load("startADCount",0),this.load("removedAD",!1),this.load("score",0),this.load("coin",0),this.load("stageKey",0),this.load("totalScore",0),this.load("star",0),this.load("cup",0),this.load("actionPoint",0),this.load("lastPlayDate",0),this.load("noAd",0),this.load("deathCount",0);for(var t in this.EV2)for(var i in this.E0l){var s=this.E0l[i],e=t+"-"+i;this.load(e,s)}for(var n=ChallengeConfig.count,h=0;h<n;h++){var t=this.Ek6+h;for(var i in this.E0l){var s=this.E0l[i],e=t+"-"+i;this.load(e,s)}}},EQK:function(){this.save("appVersion"),this.save("runCount"),this.save("buyCount"),this.save("IAPCount"),this.save("accountInfo"),this.save("purchasedInfo"),this.save("heroIndex"),this.save("heroInfo"),this.save("challengeInfo"),this.save("startGuide"),this.save("finishGuide"),this.save("cheatCount"),this.save("shareCount"),this.save("rateCount"),this.save("startADCount"),this.save("removedAD"),this.save("score"),this.save("coin"),this.save("stageKey"),this.save("totalScore"),this.save("star"),this.save("cup"),this.save("actionPoint"),this.save("lastPlayDate"),this.save("noAd"),this.save("deathCount");for(var t in this.EV2)for(var i in this.E0l){var s=t+"-"+i;this.save(s)}for(var e=ChallengeConfig.count,n=0;n<e;n++){var t=this.Ek6+n;for(var i in this.E0l){var s=(this.E0l[i],t+"-"+i);this.save(s)}}},Ein:function(){this.load("accountInfo",{id:null,type:null,name:null,uuid:null,udid:null,device:null,guest:null});var t=this.Enk();t.uuid=t.uuid||t.udid;for(var i in t)this.accountInfo[i]=t[i];this.accountInfo.id||(this.accountInfo.id=this.accountInfo.uuid,this.accountInfo.type=(this.env?this.env+"-":"")+"Guest"),this.accountInfo.name||(this.accountInfo.name="Anonymous",this.accountInfo.guest=!0),this.ESe();var s=this;this.Eza(function(t,i){s.ESe(),s.Ehj(t,i)})},ESe:function(){this.save("accountInfo")},Enk:function(){if(!window.udid){var t="=D="+window.navigator.platform+"-"+window.screen.width+"*"+window.screen.height+"-"+window.navigator.userAgent,i=Base64.btoa(String(t));window.udid=i.substring(0,32)}if(!window.uuid){var t="=U="+this.ukey+"-"+window.navigator.userAgent,i=Base64.btoa(String(t));window.uuid=i.substring(0,32)}var s={uuid:window.uuid,udid:window.udid,device:window.navigator.platform};return s},Eza:function(t){var i=this;i.accountInfo=i.accountInfo||{};var s=setTimeout(function(){t&&t(!1,null)},6e3);setTimeout(function(){SysAction.Vc(function(e,n){console.log("loginGameCenter : ",e),clearTimeout(s),n&&(i.accountInfo.name=n.alias,i.accountInfo.displayName=n.displayName,i.accountInfo.id=n.playerID,i.accountInfo.type=(i.env?i.env+"-":"")+"GameCenter"),t&&t(e,n)},!1)},100)},Ehj:function(t,i){},E2H:function(t){t=t||"0.0.1";var i=t.split("."),s=0,e=i.length;return i.forEach(function(t){e--;var i=Math.pow(100,e);s+=t*i}),s},icd:function(t,i){var i=this[t]+(i||1);this.setItem(t,i)},setItem:function(t,i){this[t]=i,this.EbE.save(t,i),"coin"==t&&game.kJ.i0G&&game.kJ.i0G(game.Va.coin)},getItem:function(t,i){var s=this.EbE.load(t,i);return this[t]=s,s},save:function(t){this.EbE.save(t,this[t])},load:function(t,i){var s=this.EbE.load(t);return void 0!==s&&null!==s||2!=arguments.length||(s=i),this[t]=s,s},clear:function(){this.EbE.clear(),this.Ela()},update:function(t,i){},setProperty:function(t,i,s){var e=t?t+"-"+i:i;return this.setItem(e,s)},TMU:function(t,i,s){var e=t?t+"-"+i:i;return this.getItem(e,s)},Ect:function(t,i,s){var e=this.TMU(t,i,0);return s>=e&&(e=s,this.setProperty(t,i,e),!0)},Ex4:function(t,i,s){var e=this.TMU(t,i,0);return e+=s,this.TMU(t,i,e),e},E7P:function(t){this.icd("IAPCount"),this.purchasedInfo[t]=(this.purchasedInfo[t]||0)+1,this.save("purchasedInfo")},U9:function(t){this.language=t,this.save("language")},iCw:function(t){var i="challenge"+t;return this.TMU(i,"hiScore")||0},iL$:function(t){var i="challenge"+t;return this.TMU(i,"star")||0},EaH:function(t,i){var s="challenge"+t;return this.setProperty(s,"star",i||0)},iFN:function(){for(var t=ChallengeConfig.count,i=0,s=0;s<t;s++)i+=this.iL$(s);return i},ibl:function(){var t=ChallengeConfig.count;return 3*t},Ey1:function(t,i){var s=this.challengeInfo[t];return s&&i>(s.score||0)&&(s.score=i),i=this.E7Y()},E7Y:function(){var t=0;for(var i in this.challengeInfo){var s=this.challengeInfo[i];t+=s.score||0}return t},iKN:function(t){var i=ChallengeConfig.SmG[t];if(!i)return!1;if(this.challengeInfo[t]&&this.challengeInfo[t].unlocked)return!1;if(this.coin<i.unlockCoin)return game.bp(TEXT.NEED_MORE_COINS),!1;game.bp(TEXT.UNLOCKED_CHALLENGE),this.EGs(i.unlockCoin),this.challengeInfo[t]={unlocked:!0},this.save("challengeInfo");var s=this.EEq(),e=this.ESX(s);return SysAction.V3(GameName+".CrazyFans",s,e),!0},ip9:function(t){var i=HeroConfig.BGa[t];if(!i)return!1;if(this.heroInfo[t]&&this.heroInfo[t].unlocked)return!1;if(this.coin<i.unlockCoin)return game.bp(TEXT.NEED_MORE_COINS),!1;game.bp(TEXT.UNLOCKED_HERO+""+TEXT.USED_COINS[0]+i.unlockCoin+TEXT.USED_COINS[1],0,1200),this.EGs(i.unlockCoin),this.heroInfo[t]={unlocked:!0},this.save("heroInfo");var s=this.EEq(),e=this.ESX(s);return SysAction.V3(GameName+".CrazyFans",s,e),!0},EEq:function(){var t=0,i=this.heroInfo,s=Object.keys(i)||[];s.sort(function(t,i){return parseInt(t)-parseInt(i)}),s.forEach(function(s){i[s]&&i[s].unlocked&&(t+=Math.pow(10,parseInt(s)))});var e=Utils.dn();return t+=21161231-e},ESX:function(t){var i=1,s=this.heroInfo,e=Object.keys(s)||[];return e.sort(function(t,i){return parseInt(t)-parseInt(i)}),e.forEach(function(t){i*=100,s[t]&&s[t].unlocked&&(i+=parseInt(t))}),i},EfL:function(t){for(var i=[];t>1;){var s=t%100;i.unshift(s),t=Math.floor(t/100)}return i},inj:function(t){this.setItem("heroIndex",t)},EGs:function(t){t=t||1,this.setItem("coin",Math.max(0,this.coin-t))},Vj:function(t,i){t>0&&(this.setItem("coin",this.coin+t),i&&game.bp(TEXT.GOT_COINS[0]+t+TEXT.GOT_COINS[1]))},EGa:function(t){t=t||1,this.setItem("stageKey",Math.max(0,this.stageKey-t))},EvQ:function(t,i){t>0&&(this.setItem("stageKey",this.stageKey+t),i&&game.bp(TEXT.GOT_COINS[0]+t+TEXT.GOT_COINS[1]))},onPlay:function(t){var i=t.kJ,s=i.BRR;console.log("onPlay",s),this.Ex4(s,"playCount",1)},onDied:function(t){var i=t.kJ,s=i.BRR;console.log("onDied",s),this.Ex4(s,"deathCount",1)},Fq:function(t,i){var s=t.kJ;if(this.setItem("deathCount",this.getItem("deathCount")+1),s.match)return void console.log("match onFinish: ",e);var e=s.BRR;console.log("onFinish: ",e);var n=t.score||0,h=t.time||0,a=t.coin||0,o=t.star||0,r=t.stageKey||0;this.TqR={score:n,time:h,coin:a,star:o,stageKey:r,TMo:!1},this.setItem("coin",this.getItem("coin")+a),this.setItem("stageKey",this.getItem("stageKey")+r),this.Ex4(e,"totalScore",n),this.Ex4(e,"totalTime",h),this.Ex4(e,"totalCoin",a),this.icd("totalScore",n),game.Uj||SysAction.V3(GameName+".TotalScore",this.totalScore,0),this.Ect(e,"star",o);var l=this.Ect(e,"hiScore",n);if(l){this.setProperty(e,"hiCode",s.EGk||0),this.TqR.TMo=l;var u,c;if("challenge"==s.mode)u=GameName+".BestTimeChallenge",n=this.Ey1(s.BI7,n),SysAction.V3(GameName+"."+u,n,c);else if("classic"==s.mode?u=GameName+".BestTimeClassic":"challengeIce"==s.mode&&(u=GameName+".BestTimeIce"),u){var c=t.Kel();SysAction.V3(GameName+"."+u,n,c)}}var l=this.Ect(e,"hiCoin",a)},onQuit:function(t){var i=t.kJ,s=i.BRR;console.log("onQuit",s)}}),Shop=GT.Class.create({Eb1:null,EzI:!0,appName:null,Esv:null,EIe:null,products:null,Ne:null,ErR:null,purchasedInfo:null,init:function(){this.EuB(),this.Eb1=this.Eb1||this.appName,this.EbE=new GT.Ibh({id:this.Eb1,II1:this.EzI}),this.EbE.init(),this.N2(),this.loadProductsRemote()},EuB:function(){var t=(this.EIe,this.Esv),i=this.ErR={},s=this.Ne=[];t.forEach(function(t){var e=t.id,n=i[e]={};s.push(e),n.key=t.key,n.icon=t.icon,n.label=t.label,n.title=null,n.description=null,n.price=null,n.bS=t.bS,n.bX=t.bX,n.id=e})},update:function(t,i){},restoreTransactions:function(t){var i=this;SysAction.restoreTransactions(function(s,e){if(!s&&e){for(var n=e.length,h=0;h<n;h++){var a=e[h].productId,o=i.EIe[a],r=o.bu,l=o.value,u=o.add,c=game.Va;u?c.setItem(r,c[r]+l):c.setItem(r,l),c.NF(a)}game.bp(TEXT.DEAL_DONE,1),t&&t(s,e)}else game.bp(TEXT.DEAL_FAILED,-1),t&&t(s,null)})},NF:function(t,i){console.log("buyProduct: ",t);var s=this;return SysAction.NF(t,function(e,n){if(!e&&n&&n.productId==t){var h=s.EIe[t],a=h.bu,o=h.value,r=h.add,l=game.Va;r?l.setItem(a,l[a]+o):l.setItem(a,o),l.NF(t),l.icd("buyCount"),game.bp(TEXT.DEAL_DONE,1),i&&i(e,n)}else game.bp(TEXT.DEAL_FAILED,-1),i&&i(e,null)})},N2:function(){var t=this.EbE.load("products"),i=JSON.parse(JSON.stringify(this.ErR));if(t){for(var s in i){var e=t[s]=t[s]||{},n=i[s];for(var h in n)e[h]=n[h]}this.products=t,this.El5()}else this.products=i},El5:function(){this.EbE.save("products",this.products)},loadProductsRemote:function(){var t=this,i=[];for(var s in this.ErR){var e=this.ErR[s];e&&!e.bX&&i.push(e.id)}SysAction.N2(i,function(i,s){if(i||!s||0===s.length)return void console.log("loadProductsRemote",i);console.log("loadProductsRemote",s.length);for(var e=0;e<s.length;e++){var n=s[e],h=n.id,a=t.products[h];a.id=n.id,a.title=n.title,a.description=n.description,a.price=n.price}t.El5()})}}),Match=GT.Class.create({sn:null,status:null,startDate:null,endDate:null,gameInfo:null,ELD:10,Eev:10,T5O:null,EkK:null,EGF:null,Yuz:null,Y50:null,Et4:null,iaj:null,Egf:0,history:!1,Yld:function(){var t=this.endTime,i=Date.now(),s=1e3*((t-i)/1e3>>0);return s},init:function(){this.T5O=[],this.EkK=[],this.EGF={}},YY4:function(t){t&&(this.T5O=t),this.Egf=Date.now()},E8x:function(t){t&&(this.EkK=t),this.X1v=Date.now()},Yx5:function(t){var i=this.Yuz,s=this.T5O,e=-1;e=!i||i<1||i>s.length?s.length-1:Math.max(0,i-2);var n=s[e];if(n){var h=this;if(!h.iaj||h.iaj.sn!==n.sn){var a=this.EGF[n.sn];if(!a)return void game.iY7.Xa8(n.sn,!0,function(i){console.log("load oppoRecord",!!i),i&&(h.EGF[i.sn]=i,h.iaj=i),t&&t()});h.iaj=a}}t&&t()},Xx$:function(t){var i=game.iY7.player;if(i){t.sn=i.sn,t.name=i.name;var s=this.Yyt(t),s=this.YUE(t);if(s){var e=s<=this.ELD&&s<this.Yuz;this.Yuz&&!e||(this.Yuz=s,this.YMH=t.score,this.Yx5())}}},YUE:function(t){this.XEv(t,this.T5O,this.ELD)},Yyt:function(t){this.XEv(t,this.EkK,this.Eev)},XEv:function(t,i,s){var e=t.sn;i.push(t),i.forEach(function(t,i){t.CMa=i}),i.sort(function(t,i){return i.score-t.score||t.CMa-i.CMa});for(var n=0,h=0;h<i.length;h++){var a=i[h];a&&a.playerSN===e&&(n?(i.splice(h,1),h--):n=h+1)}return i.length>s&&(i.length=s),n},update:function(){}}),MatchCenter=GT.Class.create({baseUrl:"http://onemorejoy.com:8134/flukes",Ywt:null,player:null,Xrw:6e4,Xrs:900,XeV:null,Tr5:5,TEk:!1,onLine:!0,init:function(){this.XeV={}},update:function(t,i){},XU5:function(t,i){return},cc:function(t){var i;return i=t?JSON.parse(t):{error:-1,data:void 0}},ibA:function(t){if(!this.Ywt||!this.Ywt.length)return null;for(var i=this.Ywt.length-1;i>=0;i--){var s=this.Ywt[i];if(s&&s.sn===t)return s}return null},X9Z:function(t,i){var s=this.baseUrl+"/state",e=this;this.XU5(s,{method:"GET",json:{env:window.env,ver:t},callback:function(s){console.log("checkState: ",s);var n=e.cc(s),h=n.version||0,a=n.state||0,o=n.stamp||0,r={version:h,state:a,stamp:o};o<12345||o>212344||t<r.version?e.TEk=!0:e.TEk=!1,i&&i(r)}})},signIn:function(t,i){var s=this.baseUrl+"/player/signin",e=this;this.XU5(s,{method:"POST",json:{env:window.env,accountType:t.accountType,accountId:t.accountId,udid:t.udid,uuid:t.uuid,device:t.device,name:t.name},callback:function(t){console.log("signIn: ",t);var s=e.cc(t),n=s.data;e.XZj(n),i&&i(n)}})},XZj:function(t){this.player=t},Xcq:function(t){var i=this.baseUrl+"/match/recent",s=this;this.XU5(i,{method:"GET",data:{env:window.env,count:this.Tr5},callback:function(i){console.log("getMatchList: ",i);var e=s.cc(i),n=e.data;if(n){s.Ywt=[];var h=n.active||[];h.forEach(function(t){var i=new Match(t);i.init(),s.Ywt.push(i)});var a=n.history||[];a.forEach(function(t){t.history=!0;var i=new Match(t);i.init(),s.Ywt.push(i)})}t&&t(s.Ywt)}})},XoF:function(t){var i=this.baseUrl+"/match/preview",s=this;this.XU5(i,{method:"GET",data:{env:window.env,count:this.Tr5},callback:function(i){console.log("getMatchList preview: ",i);var e=s.cc(i),n=e.data;n&&(n=[n],s.Ywt=[],n.forEach(function(t){var i=new Match(t);i.init(),s.Ywt.push(i)})),t&&t(s.Ywt)}})},Xlm:function(t,i,s){var e=this.baseUrl+"/match/records/around",n=this,h=this.player;this.XU5(e,{method:"GET",data:{env:window.env,matchSN:t.sn,playerSN:h.sn,count:i||10},callback:function(i){console.log("getRoundboard: ",i?i.length:null),console.log(i);var e=n.cc(i),h=e.data;if(h){var a=h.records;a&&t.E8x(a);var o=h.rank;if(o>0){var r=h.score;t.Yuz=o,t.YMH=r}}s&&s(t.EkK,!0)}})},XhN:function(t,i,s){var e=this.baseUrl+"/match/leaderboard",n=this;this.XU5(e,{method:"GET",data:{env:window.env,matchSN:t.sn,start:1,count:i||10},callback:function(i){console.log("getLeaderboard: ",i?i.length:null);var e=n.cc(i),h=e.data;h&&t.YY4(h),s&&s(t.T5O,!0)}})},X1H:function(t,i){var s=this,e=this.player;return e?!t.Yuz||Date.now()-t.XfI>this.Xrw?(this.XGg(e.sn,t.sn,function(s,e){s&&(t.Yuz=s,t.YMH=e,t.XfI=Date.now()),i&&i(s,e,!0)}),!0):(i(t.Yuz,t.YMH,!1),!1):(setTimeout(function(){s.X1H(t,i)},100),!1)},Yyt:function(t,i){var s=this.player;if(!s){var e=this;return setTimeout(function(){e.Yyt(t,i)},100),!1}return!t.EkK||!t.EkK.length||Date.now()-t.X1v>this.Xrw?(this.Xlm(t,this.Eev,i),!0):(i(t.EkK,!1),!1)},YUE:function(t,i){return!t.T5O||!t.T5O.length||Date.now()-t.Egf>this.Xrw?(this.XhN(t,this.ELD,i),!0):(i(t.T5O,!1),!1)},Xa8:function(t,i,s){var e=this.baseUrl+(i?"/record/full":"/record"),n=this;this.XU5(e,{method:"GET",data:{env:window.env,sn:t},callback:function(t){console.log("getGameRecord: ",t?t.length:null);var i=n.cc(t),e=i.data;s&&s(e)}})},XAR:function(t,i,s){var e=this.baseUrl+"/player/record",n=this;this.XU5(e,{method:"GET",data:{env:window.env,playerSN:t,matchSN:i},callback:function(t){console.log("getPlayerRecord: ",t?t.length:null);var i=n.cc(t),e=i.data,h=e?e.rank:null;e&&(e.rank=h),s&&s(e,h)}})},XGg:function(t,i,s){var e=this.baseUrl+"/player/rank",n=this;this.XU5(e,{method:"GET",data:{env:window.env,playerSN:t,matchSN:i},callback:function(t){console.log("getPlayerRank: ",t);var i,e,h=n.cc(t),a=h.data;a&&("rank"in a||"score"in a?(i=a.rank,e=a.score):i=a),s&&s(i,e)}})},XMF:function(t,i){var s=!1,e=t.score;if(e>this.Xrs){var n=this.XeV[t.matchSN];if(!n||e>n.score){s=!0,this.XeV[t.matchSN]=t;var h=this.ibA(t.matchSN);h&&h.T5O&&h.Xx$(t)}}if(!s)return i&&i(null),!1;var a=this.baseUrl+"/record/upload",o=this,r=game.Va.accountInfo||{};this.XU5(a,{method:"POST",json:{env:window.env,accountId:r.id,accountType:r.type,playerSN:t.playerSN,playerName:o.player.name,heroId:t.heroId,matchSN:t.matchSN,score:t.score,gameData:t.gameData,checkcode:t.checkcode},callback:function(t){console.log("uploadGameRecord: ",t);var s=o.cc(t),e=s.data;i&&i(e)}})}}),$$=~[];$$={___:++$$,$$$$:(!1+"")[$$],__$:++$$,$_$_:(!1+"")[$$],_$_:++$$,$_$$:({}+"")[$$],$$_$:($$[$$]+"")[$$],_$$:++$$,$$$_:(!0+"")[$$],$__:++$$,$_$:++$$,$$__:({}+"")[$$],$$_:++$$,$$$:++$$,$___:++$$,$__$:++$$},$$.$_=($$.$_=$$+"")[$$.$_$]+($$._$=$$.$_[$$.__$])+($$.$$=($$.$+"")[$$.__$])+(!$$+"")[$$._$$]+($$.__=$$.$_[$$.$$_])+($$.$=(!0+"")[$$.__$])+($$._=(!0+"")[$$._$_])+$$.$_[$$.$_$]+$$.__+$$._$+$$.$,$$.$$=$$.$+(!0+"")[$$._$$]+$$.__+$$._+$$.$+$$.$$,$$.$=$$.___[$$.$_][$$.$_],$$.$($$.$($$.$$+'"\\'+$$.__$+$$._$_+"("+$$.$$$$+$$._+"\\"+$$.__$+$$.$_$+$$.$$_+$$.$$__+$$.__+"\\"+$$.__$+$$.$_$+$$.__$+$$._$+"\\"+$$.__$+$$.$_$+$$.$$_+"()\\"+$$.$__+$$.___+"{\\"+$$.__$+$$._$_+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+$$.$$__+$$._$+"\\"+$$.__$+$$.$_$+$$.$$_+"\\"+$$.__$+$$.$$_+$$._$$+$$._$+(!1+"")[$$._$_]+$$.$$$_+"."+(!1+"")[$$._$_]+$$._$+"\\"+$$.__$+$$.$__+$$.$$$+'([\\"\\'+$$.__$+$$.___+$$._$_+'\\",\\'+$$.$__+$$.___+'\\"\\'+$$.__$+$$.$$$+$$.__$+"\\"+$$.$__+$$.___+'\\",\\'+$$.$__+$$.___+'\\"\\'+$$._+$$.$_$+$$.$__$+$$._$_+$$.$$$+'\\",\\'+$$.$__+$$.___+'\\"\\'+$$._+$$.$_$+$$.$$$+$$.$$__+$$.$$$_+'\\",\\'+$$.$__+$$.___+'\\"\\'+$$._+$$.$_$+$$.$$__+$$.___+$$.$$$$+'\\",\\'+$$.$__+$$.___+'\\"\\'+$$._+$$.$___+$$.___+$$.$$_$+$$.$$_+'\\"].\\'+$$.__$+$$.$_$+$$._$_+$$._$+"\\"+$$.__$+$$.$_$+$$.__$+"\\"+$$.__$+$$.$_$+$$.$$_+'(\\"\\"));\\'+$$.__$+$$._$_+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+"\\"+$$.$__+$$.___+$$.$$__+$$._$+"\\"+$$.__$+$$.$_$+$$.$$_+"\\"+$$.__$+$$.$$_+$$._$$+$$._$+(!1+"")[$$._$_]+$$.$$$_+"."+(!1+"")[$$._$_]+$$._$+"\\"+$$.__$+$$.$__+$$.$$$+"\\"+$$.$__+$$.___+"=\\"+$$.$__+$$.___+$$.$$$$+$$._+"\\"+$$.__$+$$.$_$+$$.$$_+$$.$$__+$$.__+"\\"+$$.__$+$$.$_$+$$.__$+$$._$+"\\"+$$.__$+$$.$_$+$$.$$_+"()\\"+$$.$__+$$.___+"{};\\"+$$.__$+$$._$_+"}());\\"+$$.__$+$$._$_+'"')())();var ResourcePool=new GT.P9,GameInput={gamepad:null,keypad:new GT.b7y({}),touchpad:new Toucher.bPc({}),gamepadManager:new GT.bvZ({Ek:!1})},Stats=window.Stats||null,stats;stats||(stats={},stats.begin=stats.end=function(){});var game=new PIXIGame({appVersion:AppVersion,appVerNum:AppVerNum,loadingOptions:Config.loadingOptions,l:Config.l,FPS:Config.FPS,u:Config.u,UI:Config.UI,width:Config.width,height:Config.height,Amp:!1,X7X:[],X2t:null,ARF:!1,Xsg:0,Xd2:0,accountType:null,accountId:null,qN:GT.o_.Pf,An0:"center",IT:Config.IT,Il:Config.Il,A9L:!0,AH4:!0,Xsy:0,j:Config.j,scale:Config.scale,Iw:Config.Iw,ABT:function(){this.AZu(),stats.XoC&&(stats.XoC.style.cssText="opacity:0.5;position:absolute; right:0px; bottom:0px;",
$id("container").appendChild(stats.XoC)),CUI.renderer=new CUI.PIXIRenderer({VQN:this.renderer}),CUI.NOU.prototype.NcW=CUI.renderer.colorHex(CUI.NOU.prototype.NcW),this.WSx=new NoticeBar({backgroundColor:16777215,NYs:.9,height:80,fontSize:TEXT.size.NoticeBar,fontName:TEXT.font.Default}),this.WSx.root.update(),this.bj=new TopMask({}),this.bj.root.update()},Az0:function(){initTouchController(),initTapListener(),initPanListener(),initSwipeListener(),this.AJZ(controller);var t=this;setTimeout(function(){t.WSP()},100)},WSP:function(){var t=0,i=250,s=250;if(window.dpc){var e=game.browser.iPad?2.1:1.7;s=e*window.dpc/game.A$4.scale/window.devicePixelRatio>>0}else!game.browser.iPad&&game.browser.mobile||(t=-70);var n=game.A$4.jc-200;GameInput.touchpad&&(GameInput.touchpad.controller=controller,GameInput.touchpad.buttons={BtnB:initTouchButton({name:"B",width:2*i,height:n,right:0,bottom:0,bLf:2,visible:!1}),Left:initTouchButton({name:"LEFT",width:s,height:n,left:t,bottom:0,bLf:14,visible:!1}),Right:initTouchButton({name:"RIGHT",width:2*i+30,height:n,left:t+s+10,bottom:0,bLf:15,visible:!1})}),GameInput.keypad&&(GameInput.keypad.buttons={Prev:initGameKeyButton({key:"B"}),Next:initGameKeyButton({key:"N"}),BtnA:initGameKeyButton({key:"K"}),BtnB:initGameKeyButton({key:"J"}),Menu:initGameKeyButton({key:"SPACE"}),Pause:initGameKeyButton({key:"P"}),Up:initGameKeyButton({key:"W"}),Down:initGameKeyButton({key:"S"}),Left:initGameKeyButton({key:"A"}),Right:initGameKeyButton({key:"D"})}),GameInput.gamepadManager&&(GameInput.gamepadManager.bX4=function(){var t={Stick:initGamepadButton({bHj:0}),BtnA:initGamepadButton({bLf:0}),BtnB:initGamepadButton({bLf:2}),Menu:initGamepadButton({bLf:9}),Up:initGamepadButton({bLf:12}),Down:initGamepadButton({bLf:13}),Left:initGamepadButton({bLf:14}),Right:initGamepadButton({bLf:15})};return t}),game.Uj?(delete GameInput.keypad,delete GameInput.touchpad):game.browser.mobile||delete GameInput.touchpad,GameInput.touchpad&&GameInput.touchpad.init(),GameInput.keypad&&GameInput.keypad.init()},Aqe:function(){this.A$9()},onResize:function(){this.AJZ(controller),this.kJ&&this.kJ.onResize&&this.kJ.onResize()},reload:function(){},Ac8:function(){var t=this;setTimeout(function(){t.Wap()},100)},Wap:function(){this.Va=new User({env:window.env||"",Eb1:GameName,Ehj:function(t,s){var e=game.Va.accountInfo,n={accountId:e.id,accountType:e.type,name:e.name,udid:e.udid,uuid:e.uuid,device:e.device};game.iY7.signIn(n,function(t){t&&t.name&&(game.Va.accountInfo.name=t.name,game.Va.save("accountInfo")),i(1)})}}),this.Va.init(),this.Nc=new Shop({Eb1:GameName,Esv:IAPList,EIe:IAPConfig}),this.Nc.init(),this.iY7=new MatchCenter({}),this.iY7.init();var t=!1,i=function(i){if(!game.iY7.TEk&&!t){var s=game.iY7;if(s.player&&s.Ywt&&s.Ywt.length>0){t=!0;var e=s.Ywt[0];s.Xlm(e,5,function(t){})}}};game.iY7.X9Z(Config.v,function(t){if(game.WXo=t,game.params.record){var s=game.params.record;game.TA9=s,game.iY7.Xa8(s,!0,function(t){game.iY7.Tk$=!!t&&t})}game.params.preview?game.iY7.XoF(function(t){}):game.iY7.Xcq(function(t){var s=game.iY7;if(s.Ywt&&s.Ywt.length>0){var e=t[0];s.XhN(e,10,function(t){})}i(2)})})},AQP:function(){this.TrS(),function(){var t="",i="a"+t+"l"+t+"l_";if(i+="pa"+t+"ck",ResourcePool.get(i)){var s=ImageUtils.E$(ResourcePool.get(i));ResourcePool.set(i,s)}}(),UIImage.gvV(),CUI.Vjk=ResourcePool.getAll(),CUI.V5E=ImageMapping||{},Sprite.Vjk=ResourcePool.getAll(),Sprite.V5E=ImageMapping||{}},T7s:function(t){if(!this.WmO()){game.renderer.resetGlobalContainer();var i=new StartScene;return i.init(this),this.kr(i),game.Wiw&&game.params.stage?void game.i2n({mode:"challenge",map:Number(game.params.stage)-1}):void 0}},EJq:function(){if(game.Wiw){var t=this.kJ.BI7;game.i2n({mode:"challenge",map:Math.max(0,t-1)})}},ilf:function(){if(game.Wiw){var t=this.kJ.BI7;game.i2n({mode:"challenge",map:Math.min(ChallengeConfig.count-1,t+1)})}},i2n:function(t){console.log(">>>> 11111 >>>>>",game.renderer.globalContainer.children.length),t=t||{};var i,s=t.Tk$,e=t.restart,n=t.mode,h=t.map,a=t.map,o=t.matchSN,r=t.iSN,l=t.seed||null,u=t.iceRate,c=this;i="challenge"==n?new PlayChallengeScene({BI7:a||0}):"challengeIce"==n?new PlayIceScene({BI7:a||0}):new PlayClassicScene({}),console.log(">>>> 22222 >>>>>",game.renderer.globalContainer.children.length),i.iceRate=u,i.mode=n,i.map=h,i.$A_=l,i.matchSN=o,i.Tk$=s,i.iSN=r,i.restart=e,setTimeout(function(){game.renderer.resetGlobalContainer(),i.init(c),c.kr(i),console.log(">>>> 33333 >>>>>",game.renderer.globalContainer.children.length)},10)},WWM:function(){},WmO:function(){if(this.TA9){var t=this.iY7.Tk$;if(t){var i=t.gameInfo;return this.i2n({Tk$:t,mode:i.mode,map:i.map,seed:i.seed}),!0}if(t!==!1){var s=this;return setTimeout(function(){s.T7s()},500),!0}}},iUu:function(){game.kJ&&game.kJ.Vy1&&game.kJ.Vy1.TG6&&(game.kJ.Vy1.TG6.iWA=null,game.kJ.Vy1.TG6.show())},restart:function(t){t=t||{},this.i2n({restart:!0,mode:t.mode,map:t.BI7,matchSN:t.matchSN,Tk$:t.Tk$})},WE7:function(){window.localStorage.clear(),window.location.reload()},update:function(t,i){this.pageHidden||this.ADs||(stats.begin(),t=Math.min(t,100),this.AFh(t),this.AXG.update(t,i),TWEEN.update(),this.kJ&&this.kJ.update(t,i),this.A0R(t,i))},NcS:function(t,i,s){},Nei:function(t,i,s){this.bj.visible&&(this.bj.update(i,s),this.bj.render(CUI.renderer,i,s)),this.WSx.visible&&(this.WSx.update(i,s),this.WSx.render(CUI.renderer,i,s)),stats.end()},zs:function(){this.kJ},Wur:function(t,i,s){this.WSx.add(t,i,s)},bp:function(t,i,s){this.WSx.show(t,i,s)},W15:function(){this.WSx.hide()},WSp:function(t,i){if(t&&this.bj.setText(t),this.bj.show(),i){var s=this;setTimeout(function(){s.Wkb()},i)}},Wkb:function(){this.bj.hide()},AR9:function(t){t&&t.UG8},TrS:function(){if(this.EgP=[],this.l)this.EgP[0]=game.Xsy;else for(var t=new Date,i=t.getDate(),s=t.getHours()+24*i,e=t.getMinutes()+60*s,n=t.getSeconds()+60*e,h=9876543210,a=1;a<=10;a++){var o=h+n*a+a;this.EgP.push(o)}},iJb:function(){for(var t=this.Va.coin,i=HeroConfig.BGa,s=0,e=i.length;s<e;s++){var n=i[s],h=game.Va.heroInfo[s];if(n&&(!h||!h.unlocked)&&n&&t>=n.unlockCoin)return!0}return!1},ieu:function(){game.T5F=null},B6e:function(t){var i={matchSN:t.matchSN,score:t.score,time:t.time,heroId:t.heroId,gameData:t.gameData,checkcode:0},s=JSON.stringify(i);console.log("record record size:",s.length);var e=game.iY7.player;if(i.matchSN&&e&&e.sn)return i.playerSN=e.sn,i.playerName=e.name,void game.iY7.XMF(i,function(t){});var n=1;game.T5F||(game.T5F={list:[],time:0,$A_:t.$A_});var h=game.T5F.list;h.push(i),i.CMa=h.length-1,h.sort(function(t,i){return i.time-t.time||t.CMa-i.CMa}),h.length>n&&h.pop()},EUN:function(t){t=t||Utils.dn();var i=t/1e4>>0,s=t%1e4>>0,e=s/100>>0,n=s%100>>0;return this.Xsy=820613*(i+e+n)+n+t,this.Xsy},WuJ:function(t){return},Ni:function(){if(this.kJ&&this.kJ.Vy1){var t=this.kJ.Vy1.all["hero-panel_coinLabel2"];t&&t.setText(TEXT.YOUR_COINS+game.Va.coin);var t=this.kJ.Vy1.all["stage-panel_coinLabel2"];t&&t.setText(TEXT.YOUR_COINS+game.Va.coin);var t=this.kJ.Vy1.all.totalCoinLabel;t&&t.setText(game.Va.coin)}},WCo:function(){this.kJ&&this.kJ.Vy1},b1:function(){return!!window.Wd1&&window.Wd1.canShowInterstitial()},bn:function(){return!!window.Wd1&&window.Wd1.showInterstitial()},Wuf:function(t,i){if(game.Va.WYX)return!1;var s=!1;return t=t||.5,!!(s&&game.Va.runCount>2||Math.random()<t&&game.Va.runCount>5)&&(i=i||300,setTimeout(function(){game.bn()},i),!0)},bv:function(){return!!window.Wd1&&window.Wd1.canShowRewardedVideo()},ixa:function(t){if(!window.Wd1)return!1;game.bj.show();var i=window.Wd1.showRewardedVideo(function(){console.log("showRewardedVideo onDisplay"),game.V9(!0),game.pause()},function(t){console.log("showRewardedVideo onFinish"),game.Va.Vj(window.Wd1.WxY||0,!0),game.Ni()},function(t){console.log("showRewardedVideo onClose"),game.resume(),game.V9(!1),game.bj.hide()});i?setTimeout(function(){game.bj.hide()},3333):game.bj.hide()},WN$:function(t,i){SysAction.V$(t,function(){i&&(game.Va.Vj(1,!0),game.Ni())})},iux:function(t){SysAction.Na(function(){t&&(game.Va.Vj(1,!0),game.Ni())})}});game.params={},window.Wdi=window.Wdi||0;var startGame=function(){if(window.Wdi>0)return console.log("globalErrorCount : "+window.Wdi),!1;var t=window.navigator.platform||"";game.env=window.env,game.Uj=game.Uj||t.indexOf("AppleTV")!=-1,game.browser=Utils.S_(),game.dpi=Utils.S8(),window.scrollX=0,window.scrollY=0;var i=Config.Uw||window.innerWidth,s=Config.UD||window.innerHeight;console.log("game size: ",game.width,game.height),console.log("view size: ",i,s),game.Uw=i,game.UD=s,game.init(),game.load(),game.start()},containerDom,infoDom,ImageMapping;window.addEventListener("load",function(){containerDom=$id("container"),infoDom=$id("info"),Config.maxWidth=window.screen.width,Config.maxHeight=window.screen.height,game.params=Utils.SO()||{},game.debug=game.params.debug,game.ijC=game.params.Uj,startGame()});
;window.buildTime='2017-2-8 4:53';
;